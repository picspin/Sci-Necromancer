var u8=Object.defineProperty;var c8=(n,e,t)=>e in n?u8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Bn=(n,e,t)=>c8(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var dV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function u3(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var ty={exports:{}},Qd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l5;function f8(){if(l5)return Qd;l5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var u=null;if(s!==void 0&&(u=""+s),i.key!==void 0&&(u=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:u,ref:i!==void 0?i:null,props:s}}return Qd.Fragment=e,Qd.jsx=t,Qd.jsxs=t,Qd}var u5;function d8(){return u5||(u5=1,ty.exports=f8()),ty.exports}var G=d8(),ny={exports:{}},Qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c5;function h8(){if(c5)return Qt;c5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function m(K){return K===null||typeof K!="object"?null:(K=y&&K[y]||K["@@iterator"],typeof K=="function"?K:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,R={};function b(K,L,$){this.props=K,this.context=L,this.refs=R,this.updater=$||E}b.prototype.isReactComponent={},b.prototype.setState=function(K,L){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,L,"setState")},b.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function N(){}N.prototype=b.prototype;function C(K,L,$){this.props=K,this.context=L,this.refs=R,this.updater=$||E}var A=C.prototype=new N;A.constructor=C,_(A,b.prototype),A.isPureReactComponent=!0;var F=Array.isArray;function J(){}var V={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function O(K,L,$){var ee=$.ref;return{$$typeof:n,type:K,key:L,ref:ee!==void 0?ee:null,props:$}}function le(K,L){return O(K.type,L,K.props)}function Q(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function U(K){var L={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function($){return L[$]})}var X=/\/+/g;function M(K,L){return typeof K=="object"&&K!==null&&K.key!=null?U(""+K.key):L.toString(36)}function ye(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(J,J):(K.status="pending",K.then(function(L){K.status==="pending"&&(K.status="fulfilled",K.value=L)},function(L){K.status==="pending"&&(K.status="rejected",K.reason=L)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function se(K,L,$,ee,pe){var ae=typeof K;(ae==="undefined"||ae==="boolean")&&(K=null);var B=!1;if(K===null)B=!0;else switch(ae){case"bigint":case"string":case"number":B=!0;break;case"object":switch(K.$$typeof){case n:case e:B=!0;break;case h:return B=K._init,se(B(K._payload),L,$,ee,pe)}}if(B)return pe=pe(K),B=ee===""?"."+M(K,0):ee,F(pe)?($="",B!=null&&($=B.replace(X,"$&/")+"/"),se(pe,L,$,"",function(fe){return fe})):pe!=null&&(Q(pe)&&(pe=le(pe,$+(pe.key==null||K&&K.key===pe.key?"":(""+pe.key).replace(X,"$&/")+"/")+B)),L.push(pe)),1;B=0;var j=ee===""?".":ee+":";if(F(K))for(var de=0;de<K.length;de++)ee=K[de],ae=j+M(ee,de),B+=se(ee,L,$,ae,pe);else if(de=m(K),typeof de=="function")for(K=de.call(K),de=0;!(ee=K.next()).done;)ee=ee.value,ae=j+M(ee,de++),B+=se(ee,L,$,ae,pe);else if(ae==="object"){if(typeof K.then=="function")return se(ye(K),L,$,ee,pe);throw L=String(K),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return B}function ie(K,L,$){if(K==null)return K;var ee=[],pe=0;return se(K,ee,"","",function(ae){return L.call($,ae,pe++)}),ee}function Se(K){if(K._status===-1){var L=K._result;L=L(),L.then(function($){(K._status===0||K._status===-1)&&(K._status=1,K._result=$)},function($){(K._status===0||K._status===-1)&&(K._status=2,K._result=$)}),K._status===-1&&(K._status=0,K._result=L)}if(K._status===1)return K._result.default;throw K._result}var me=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},Ne={map:ie,forEach:function(K,L,$){ie(K,function(){L.apply(this,arguments)},$)},count:function(K){var L=0;return ie(K,function(){L++}),L},toArray:function(K){return ie(K,function(L){return L})||[]},only:function(K){if(!Q(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Qt.Activity=g,Qt.Children=Ne,Qt.Component=b,Qt.Fragment=t,Qt.Profiler=i,Qt.PureComponent=C,Qt.StrictMode=r,Qt.Suspense=c,Qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Qt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return V.H.useMemoCache(K)}},Qt.cache=function(K){return function(){return K.apply(null,arguments)}},Qt.cacheSignal=function(){return null},Qt.cloneElement=function(K,L,$){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ee=_({},K.props),pe=K.key;if(L!=null)for(ae in L.key!==void 0&&(pe=""+L.key),L)!te.call(L,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&L.ref===void 0||(ee[ae]=L[ae]);var ae=arguments.length-2;if(ae===1)ee.children=$;else if(1<ae){for(var B=Array(ae),j=0;j<ae;j++)B[j]=arguments[j+2];ee.children=B}return O(K.type,pe,ee)},Qt.createContext=function(K){return K={$$typeof:u,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:s,_context:K},K},Qt.createElement=function(K,L,$){var ee,pe={},ae=null;if(L!=null)for(ee in L.key!==void 0&&(ae=""+L.key),L)te.call(L,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(pe[ee]=L[ee]);var B=arguments.length-2;if(B===1)pe.children=$;else if(1<B){for(var j=Array(B),de=0;de<B;de++)j[de]=arguments[de+2];pe.children=j}if(K&&K.defaultProps)for(ee in B=K.defaultProps,B)pe[ee]===void 0&&(pe[ee]=B[ee]);return O(K,ae,pe)},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(K){return{$$typeof:l,render:K}},Qt.isValidElement=Q,Qt.lazy=function(K){return{$$typeof:h,_payload:{_status:-1,_result:K},_init:Se}},Qt.memo=function(K,L){return{$$typeof:f,type:K,compare:L===void 0?null:L}},Qt.startTransition=function(K){var L=V.T,$={};V.T=$;try{var ee=K(),pe=V.S;pe!==null&&pe($,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(J,me)}catch(ae){me(ae)}finally{L!==null&&$.types!==null&&(L.types=$.types),V.T=L}},Qt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Qt.use=function(K){return V.H.use(K)},Qt.useActionState=function(K,L,$){return V.H.useActionState(K,L,$)},Qt.useCallback=function(K,L){return V.H.useCallback(K,L)},Qt.useContext=function(K){return V.H.useContext(K)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(K,L){return V.H.useDeferredValue(K,L)},Qt.useEffect=function(K,L){return V.H.useEffect(K,L)},Qt.useEffectEvent=function(K){return V.H.useEffectEvent(K)},Qt.useId=function(){return V.H.useId()},Qt.useImperativeHandle=function(K,L,$){return V.H.useImperativeHandle(K,L,$)},Qt.useInsertionEffect=function(K,L){return V.H.useInsertionEffect(K,L)},Qt.useLayoutEffect=function(K,L){return V.H.useLayoutEffect(K,L)},Qt.useMemo=function(K,L){return V.H.useMemo(K,L)},Qt.useOptimistic=function(K,L){return V.H.useOptimistic(K,L)},Qt.useReducer=function(K,L,$){return V.H.useReducer(K,L,$)},Qt.useRef=function(K){return V.H.useRef(K)},Qt.useState=function(K){return V.H.useState(K)},Qt.useSyncExternalStore=function(K,L,$){return V.H.useSyncExternalStore(K,L,$)},Qt.useTransition=function(){return V.H.useTransition()},Qt.version="19.2.0",Qt}var f5;function jw(){return f5||(f5=1,ny.exports=h8()),ny.exports}var it=jw();const _h=hg(it);var ry={exports:{}},eh={},iy={exports:{}},sy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d5;function p8(){return d5||(d5=1,(function(n){function e(se,ie){var Se=se.length;se.push(ie);e:for(;0<Se;){var me=Se-1>>>1,Ne=se[me];if(0<i(Ne,ie))se[me]=ie,se[Se]=Ne,Se=me;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ie=se[0],Se=se.pop();if(Se!==ie){se[0]=Se;e:for(var me=0,Ne=se.length,K=Ne>>>1;me<K;){var L=2*(me+1)-1,$=se[L],ee=L+1,pe=se[ee];if(0>i($,Se))ee<Ne&&0>i(pe,$)?(se[me]=pe,se[ee]=Se,me=ee):(se[me]=$,se[L]=Se,me=L);else if(ee<Ne&&0>i(pe,Se))se[me]=pe,se[ee]=Se,me=ee;else break e}}return ie}function i(se,ie){var Se=se.sortIndex-ie.sortIndex;return Se!==0?Se:se.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();n.unstable_now=function(){return u.now()-l}}var c=[],f=[],h=1,g=null,y=3,m=!1,E=!1,_=!1,R=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function A(se){for(var ie=t(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=se)r(f),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=t(f)}}function F(se){if(_=!1,A(se),!E)if(t(c)!==null)E=!0,J||(J=!0,U());else{var ie=t(f);ie!==null&&ye(F,ie.startTime-se)}}var J=!1,V=-1,te=5,O=-1;function le(){return R?!0:!(n.unstable_now()-O<te)}function Q(){if(R=!1,J){var se=n.unstable_now();O=se;var ie=!0;try{e:{E=!1,_&&(_=!1,N(V),V=-1),m=!0;var Se=y;try{t:{for(A(se),g=t(c);g!==null&&!(g.expirationTime>se&&le());){var me=g.callback;if(typeof me=="function"){g.callback=null,y=g.priorityLevel;var Ne=me(g.expirationTime<=se);if(se=n.unstable_now(),typeof Ne=="function"){g.callback=Ne,A(se),ie=!0;break t}g===t(c)&&r(c),A(se)}else r(c);g=t(c)}if(g!==null)ie=!0;else{var K=t(f);K!==null&&ye(F,K.startTime-se),ie=!1}}break e}finally{g=null,y=Se,m=!1}ie=void 0}}finally{ie?U():J=!1}}}var U;if(typeof C=="function")U=function(){C(Q)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,M=X.port2;X.port1.onmessage=Q,U=function(){M.postMessage(null)}}else U=function(){b(Q,0)};function ye(se,ie){V=b(function(){se(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(se){switch(y){case 1:case 2:case 3:var ie=3;break;default:ie=y}var Se=y;y=ie;try{return se()}finally{y=Se}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(se,ie){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Se=y;y=se;try{return ie()}finally{y=Se}},n.unstable_scheduleCallback=function(se,ie,Se){var me=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?me+Se:me):Se=me,se){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=Se+Ne,se={id:h++,callback:ie,priorityLevel:se,startTime:Se,expirationTime:Ne,sortIndex:-1},Se>me?(se.sortIndex=Se,e(f,se),t(c)===null&&se===t(f)&&(_?(N(V),V=-1):_=!0,ye(F,Se-me))):(se.sortIndex=Ne,e(c,se),E||m||(E=!0,J||(J=!0,U()))),se},n.unstable_shouldYield=le,n.unstable_wrapCallback=function(se){var ie=y;return function(){var Se=y;y=ie;try{return se.apply(this,arguments)}finally{y=Se}}}})(sy)),sy}var h5;function m8(){return h5||(h5=1,iy.exports=p8()),iy.exports}var ay={exports:{}},Oi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p5;function g8(){if(p5)return Oi;p5=1;var n=jw();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,f,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:f,implementation:h}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Oi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Oi.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return s(c,f,null,h)},Oi.flushSync=function(c){var f=u.T,h=r.p;try{if(u.T=null,r.p=2,c)return c()}finally{u.T=f,r.p=h,r.d.f()}},Oi.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Oi.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Oi.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,g=l(h,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:m}):h==="script"&&r.d.X(c,{crossOrigin:g,integrity:y,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Oi.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=l(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Oi.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,g=l(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Oi.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=l(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Oi.requestFormReset=function(c){r.d.r(c)},Oi.unstable_batchedUpdates=function(c,f){return c(f)},Oi.useFormState=function(c,f,h){return u.H.useFormState(c,f,h)},Oi.useFormStatus=function(){return u.H.useHostTransitionStatus()},Oi.version="19.2.0",Oi}var m5;function c3(){if(m5)return ay.exports;m5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ay.exports=g8(),ay.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g5;function y8(){if(g5)return eh;g5=1;var n=m8(),e=jw(),t=c3();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,d=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(d=o.return),a=o.return;while(a)}return o.tag===3?d:null}function u(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function l(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function c(a){if(s(a)!==a)throw Error(r(188))}function f(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var d=a,p=o;;){var S=d.return;if(S===null)break;var k=S.alternate;if(k===null){if(p=S.return,p!==null){d=p;continue}break}if(S.child===k.child){for(k=S.child;k;){if(k===d)return c(S),a;if(k===p)return c(S),o;k=k.sibling}throw Error(r(188))}if(d.return!==p.return)d=S,p=k;else{for(var Z=!1,_e=S.child;_e;){if(_e===d){Z=!0,d=S,p=k;break}if(_e===p){Z=!0,p=S,d=k;break}_e=_e.sibling}if(!Z){for(_e=k.child;_e;){if(_e===d){Z=!0,d=k,p=S;break}if(_e===p){Z=!0,p=k,d=S;break}_e=_e.sibling}if(!Z)throw Error(r(189))}}if(d.alternate!==p)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:o}function h(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=h(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=Q&&a[Q]||a["@@iterator"],typeof a=="function"?a:null)}var X=Symbol.for("react.client.reference");function M(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===X?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case b:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case J:return"SuspenseList";case O:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case C:return a.displayName||"Context";case N:return(a._context.displayName||"Context")+".Consumer";case A:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return o=a.displayName||null,o!==null?o:M(a.type)||"Memo";case te:o=a._payload,a=a._init;try{return M(a(o))}catch{}}return null}var ye=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},me=[],Ne=-1;function K(a){return{current:a}}function L(a){0>Ne||(a.current=me[Ne],me[Ne]=null,Ne--)}function $(a,o){Ne++,me[Ne]=a.current,a.current=o}var ee=K(null),pe=K(null),ae=K(null),B=K(null);function j(a,o){switch($(ae,o),$(pe,a),$(ee,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?I_(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=I_(o),a=L_(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}L(ee),$(ee,a)}function de(){L(ee),L(pe),L(ae)}function fe(a){a.memoizedState!==null&&$(B,a);var o=ee.current,d=L_(o,a.type);o!==d&&($(pe,a),$(ee,d))}function re(a){pe.current===a&&(L(ee),L(pe)),B.current===a&&(L(B),Jd._currentValue=Se)}var he,ke;function q(a){if(he===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);he=o&&o[1]||"",ke=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+a+ke}var oe=!1;function Y(a,o){if(!a||oe)return"";oe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(We){var $e=We}Reflect.construct(a,[],tt)}else{try{tt.call()}catch(We){$e=We}a.call(tt.prototype)}}else{try{throw Error()}catch(We){$e=We}(tt=a())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(We){if(We&&$e&&typeof We.stack=="string")return[We.stack,$e.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=p.DetermineComponentFrameRoot(),Z=k[0],_e=k[1];if(Z&&_e){var Ie=Z.split(`
`),Ge=_e.split(`
`);for(S=p=0;p<Ie.length&&!Ie[p].includes("DetermineComponentFrameRoot");)p++;for(;S<Ge.length&&!Ge[S].includes("DetermineComponentFrameRoot");)S++;if(p===Ie.length||S===Ge.length)for(p=Ie.length-1,S=Ge.length-1;1<=p&&0<=S&&Ie[p]!==Ge[S];)S--;for(;1<=p&&0<=S;p--,S--)if(Ie[p]!==Ge[S]){if(p!==1||S!==1)do if(p--,S--,0>S||Ie[p]!==Ge[S]){var Xe=`
`+Ie[p].replace(" at new "," at ");return a.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",a.displayName)),Xe}while(1<=p&&0<=S);break}}}finally{oe=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?q(d):""}function I(a,o){switch(a.tag){case 26:case 27:case 5:return q(a.type);case 16:return q("Lazy");case 13:return a.child!==o&&o!==null?q("Suspense Fallback"):q("Suspense");case 19:return q("SuspenseList");case 0:case 15:return Y(a.type,!1);case 11:return Y(a.type.render,!1);case 1:return Y(a.type,!0);case 31:return q("Activity");default:return""}}function P(a){try{var o="",d=null;do o+=I(a,d),d=a,a=a.return;while(a);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var H=Object.prototype.hasOwnProperty,be=n.unstable_scheduleCallback,ne=n.unstable_cancelCallback,we=n.unstable_shouldYield,Re=n.unstable_requestPaint,De=n.unstable_now,Ue=n.unstable_getCurrentPriorityLevel,Ke=n.unstable_ImmediatePriority,at=n.unstable_UserBlockingPriority,ot=n.unstable_NormalPriority,pt=n.unstable_LowPriority,Nt=n.unstable_IdlePriority,yt=n.log,bn=n.unstable_setDisableYieldValue,Rt=null,ht=null;function Pt(a){if(typeof yt=="function"&&bn(a),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Rt,a)}catch{}}var Ht=Math.clz32?Math.clz32:Wt,Dt=Math.log,ln=Math.LN2;function Wt(a){return a>>>=0,a===0?32:31-(Dt(a)/ln|0)|0}var jn=256,Jn=262144,cn=4194304;function kt(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function yn(a,o,d){var p=a.pendingLanes;if(p===0)return 0;var S=0,k=a.suspendedLanes,Z=a.pingedLanes;a=a.warmLanes;var _e=p&134217727;return _e!==0?(p=_e&~k,p!==0?S=kt(p):(Z&=_e,Z!==0?S=kt(Z):d||(d=_e&~a,d!==0&&(S=kt(d))))):(_e=p&~k,_e!==0?S=kt(_e):Z!==0?S=kt(Z):d||(d=p&~a,d!==0&&(S=kt(d)))),S===0?0:o!==0&&o!==S&&(o&k)===0&&(k=S&-S,d=o&-o,k>=d||k===32&&(d&4194048)!==0)?o:S}function xs(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function ci(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ws(){var a=cn;return cn<<=1,(cn&62914560)===0&&(cn=4194304),a}function ts(a){for(var o=[],d=0;31>d;d++)o.push(a);return o}function Mt(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function va(a,o,d,p,S,k){var Z=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var _e=a.entanglements,Ie=a.expirationTimes,Ge=a.hiddenUpdates;for(d=Z&~d;0<d;){var Xe=31-Ht(d),tt=1<<Xe;_e[Xe]=0,Ie[Xe]=-1;var $e=Ge[Xe];if($e!==null)for(Ge[Xe]=null,Xe=0;Xe<$e.length;Xe++){var We=$e[Xe];We!==null&&(We.lane&=-536870913)}d&=~tt}p!==0&&Ks(a,p,0),k!==0&&S===0&&a.tag!==0&&(a.suspendedLanes|=k&~(Z&~o))}function Ks(a,o,d){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-Ht(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|d&261930}function zi(a,o){var d=a.entangledLanes|=o;for(a=a.entanglements;d;){var p=31-Ht(d),S=1<<p;S&o|a[p]&o&&(a[p]|=o),d&=~S}}function Hi(a,o){var d=o&-o;return d=(d&42)!==0?1:er(d),(d&(a.suspendedLanes|o))!==0?0:d}function er(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Er(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Gr(){var a=ie.p;return a!==0?a:(a=window.event,a===void 0?32:t5(a.type))}function ro(a,o){var d=ie.p;try{return ie.p=a,o()}finally{ie.p=d}}var _i=Math.random().toString(36).slice(2),On="__reactFiber$"+_i,nr="__reactProps$"+_i,fi="__reactContainer$"+_i,Gi="__reactEvents$"+_i,ns="__reactListeners$"+_i,Bo="__reactHandles$"+_i,As="__reactResources$"+_i,Es="__reactMarker$"+_i;function io(a){delete a[On],delete a[nr],delete a[Gi],delete a[ns],delete a[Bo]}function Ts(a){var o=a[On];if(o)return o;for(var d=a.parentNode;d;){if(o=d[fi]||d[On]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(a=B_(a);a!==null;){if(d=a[On])return d;a=B_(a)}return o}a=d,d=a.parentNode}return null}function Cs(a){if(a=a[On]||a[fi]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function qo(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Js(a){var o=a[As];return o||(o=a[As]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function yr(a){a[Es]=!0}var bu=new Set,Vi={};function Ns(a,o){wa(a,o),wa(a+"Capture",o)}function wa(a,o){for(Vi[a]=o,a=0;a<o.length;a++)bu.add(o[a])}var _u=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Su={},xu={};function Tc(a){return H.call(xu,a)?!0:H.call(Su,a)?!1:_u.test(a)?xu[a]=!0:(Su[a]=!0,!1)}function ba(a,o,d){if(Tc(o))if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+d)}}function Tl(a,o,d){if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+d)}}function Mn(a,o,d,p){if(p===null)a.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(o,d,""+p)}}function Si(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Au(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function _a(a,o,d){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,k=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return S.call(this)},set:function(Z){d=""+Z,k.call(this,Z)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return d},setValue:function(Z){d=""+Z},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Sa(a){if(!a._valueTracker){var o=Au(a)?"checked":"value";a._valueTracker=_a(a,o,""+a[o])}}function rs(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var d=o.getValue(),p="";return a&&(p=Au(a)?a.checked?"true":"false":a.value),a=p,a!==d?(o.setValue(a),!0):!1}function Ys(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var vr=/[\n"\\]/g;function di(a){return a.replace(vr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Eu(a,o,d,p,S,k,Z,_e){a.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?a.type=Z:a.removeAttribute("type"),o!=null?Z==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Si(o)):a.value!==""+Si(o)&&(a.value=""+Si(o)):Z!=="submit"&&Z!=="reset"||a.removeAttribute("value"),o!=null?Tu(a,Z,Si(o)):d!=null?Tu(a,Z,Si(d)):p!=null&&a.removeAttribute("value"),S==null&&k!=null&&(a.defaultChecked=!!k),S!=null&&(a.checked=S&&typeof S!="function"&&typeof S!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?a.name=""+Si(_e):a.removeAttribute("name")}function Cc(a,o,d,p,S,k,Z,_e){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(a.type=k),o!=null||d!=null){if(!(k!=="submit"&&k!=="reset"||o!=null)){Sa(a);return}d=d!=null?""+Si(d):"",o=o!=null?""+Si(o):d,_e||o===a.value||(a.value=o),a.defaultValue=o}p=p??S,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=_e?a.checked:!!p,a.defaultChecked=!!p,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(a.name=Z),Sa(a)}function Tu(a,o,d){o==="number"&&Ys(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function xi(a,o,d,p){if(a=a.options,o){o={};for(var S=0;S<d.length;S++)o["$"+d[S]]=!0;for(d=0;d<a.length;d++)S=o.hasOwnProperty("$"+a[d].value),a[d].selected!==S&&(a[d].selected=S),S&&p&&(a[d].defaultSelected=!0)}else{for(d=""+Si(d),o=null,S=0;S<a.length;S++){if(a[S].value===d){a[S].selected=!0,p&&(a[S].defaultSelected=!0);return}o!==null||a[S].disabled||(o=a[S])}o!==null&&(o.selected=!0)}}function Cu(a,o,d){if(o!=null&&(o=""+Si(o),o!==a.value&&(a.value=o),d==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=d!=null?""+Si(d):""}function Nu(a,o,d,p){if(o==null){if(p!=null){if(d!=null)throw Error(r(92));if(ye(p)){if(1<p.length)throw Error(r(93));p=p[0]}d=p}d==null&&(d=""),o=d}d=Si(o),a.defaultValue=d,p=a.textContent,p===d&&p!==""&&p!==null&&(a.value=p),Sa(a)}function $i(a,o){if(o){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=o;return}}a.textContent=o}var Ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nc(a,o,d){var p=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,d):typeof d!="number"||d===0||Ru.has(o)?o==="float"?a.cssFloat=d:a[o]=(""+d).trim():a[o]=d+"px"}function Rc(a,o,d){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var S in o)p=o[S],o.hasOwnProperty(S)&&d[S]!==p&&Nc(a,S,p)}else for(var k in o)o.hasOwnProperty(k)&&Nc(a,k,o[k])}function ku(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rs(a){return jo.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function ks(){}var xa=null;function zo(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var qt=null,so=null;function kc(a){var o=Cs(a);if(o&&(a=o.stateNode)){var d=a[nr]||null;e:switch(a=o.stateNode,o.type){case"input":if(Eu(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+di(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var p=d[o];if(p!==a&&p.form===a.form){var S=p[nr]||null;if(!S)throw Error(r(90));Eu(p,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(o=0;o<d.length;o++)p=d[o],p.form===a.form&&rs(p)}break e;case"textarea":Cu(a,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&xi(a,!!d.multiple,o,!1)}}}var Lu=!1;function Ic(a,o,d){if(Lu)return a(o,d);Lu=!0;try{var p=a(o);return p}finally{if(Lu=!1,(qt!==null||so!==null)&&(wp(),qt&&(o=qt,a=so,so=qt=null,kc(o),a)))for(o=0;o<a.length;o++)kc(a[o])}}function Wi(a,o){var d=a.stateNode;if(d===null)return null;var p=d[nr]||null;if(p===null)return null;d=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,o,typeof d));return d}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=!1;if(Xr)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){Pu=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{Pu=!1}var Ki=null,Go=null,Xs=null;function Vo(){if(Xs)return Xs;var a,o=Go,d=o.length,p,S="value"in Ki?Ki.value:Ki.textContent,k=S.length;for(a=0;a<d&&o[a]===S[a];a++);var Z=d-a;for(p=1;p<=Z&&o[d-p]===S[k-p];p++);return Xs=S.slice(a,1<p?1-p:void 0)}function Aa(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Cl(){return!0}function Nl(){return!1}function Vr(a){function o(d,p,S,k,Z){this._reactName=d,this._targetInst=S,this.type=p,this.nativeEvent=k,this.target=Z,this.currentTarget=null;for(var _e in a)a.hasOwnProperty(_e)&&(d=a[_e],this[_e]=d?d(k):k[_e]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Cl:Nl,this.isPropagationStopped=Nl,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),o}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=Vr(Ji),Ea=g({},Ji,{view:0,detail:0}),Rl=Vr(Ea),$o,Ta,ao,Wo=g({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vt,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ao&&(ao&&a.type==="mousemove"?($o=a.screenX-ao.screenX,Ta=a.screenY-ao.screenY):Ta=$o=0,ao=a),$o)},movementY:function(a){return"movementY"in a?a.movementY:Ta}}),Qs=Vr(Wo),Ca=g({},Wo,{dataTransfer:0}),Lc=Vr(Ca),Pc=g({},Ea,{relatedTarget:0}),Na=Vr(Pc),Mc=g({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),D=Vr(Mc),ue=g({},Ji,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ce=Vr(ue),Le=g({},Ji,{data:0}),Fe=Vr(Le),Ze={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},st={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Et(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=wt[a])?!!o[a]:!1}function Vt(){return Et}var Xt=g({},Ea,{key:function(a){if(a.key){var o=Ze[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Aa(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?st[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vt,charCode:function(a){return a.type==="keypress"?Aa(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Aa(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),En=Vr(Xt),rr=g({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wr=Vr(rr),zn=g({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vt}),Dr=Vr(zn),Tr=g({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zr=Vr(Tr),is=g({},Wo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Li=Vr(is),Oc=g({},Ji,{newState:0,oldState:0}),kl=Vr(Oc),Ko=[9,13,27,32],ea=Xr&&"CompositionEvent"in window,Is=null;Xr&&"documentMode"in document&&(Is=document.documentMode);var Jo=Xr&&"TextEvent"in window&&!Is,oo=Xr&&(!ea||Is&&8<Is&&11>=Is),Qr=" ",lo=!1;function uo(a,o){switch(a){case"keyup":return Ko.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Il(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ta=!1;function fr(a,o){switch(a){case"compositionend":return Il(o);case"keypress":return o.which!==32?null:(lo=!0,Qr);case"textInput":return a=o.data,a===Qr&&lo?null:a;default:return null}}function Ra(a,o){if(ta)return a==="compositionend"||!ea&&uo(a,o)?(a=Vo(),Xs=Go=Ki=null,ta=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return oo&&o.locale!=="ko"?null:o.data;default:return null}}var Ll={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Ll[a.type]:o==="textarea"}function Yi(a,o,d,p){qt?so?so.push(p):so=[p]:qt=p,o=Tp(o,"onChange"),0<o.length&&(d=new Zs("onChange","change",null,d,p),a.push({event:d,listeners:o}))}var Ls=null,ka=null;function Ou(a){E_(a,0)}function Ps(a){var o=qo(a);if(rs(o))return a}function co(a,o){if(a==="change")return o}var Pi=!1;if(Xr){var Ai;if(Xr){var na="oninput"in document;if(!na){var ra=document.createElement("div");ra.setAttribute("oninput","return;"),na=typeof ra.oninput=="function"}Ai=na}else Ai=!1;Pi=Ai&&(!document.documentMode||9<document.documentMode)}function Ia(){Ls&&(Ls.detachEvent("onpropertychange",Pl),ka=Ls=null)}function Pl(a){if(a.propertyName==="value"&&Ps(ka)){var o=[];Yi(o,ka,a,zo(a)),Ic(Ou,o)}}function Ml(a,o,d){a==="focusin"?(Ia(),Ls=o,ka=d,Ls.attachEvent("onpropertychange",Pl)):a==="focusout"&&Ia()}function br(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ps(ka)}function Dc(a,o){if(a==="click")return Ps(o)}function ia(a,o){if(a==="input"||a==="change")return Ps(o)}function sa(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var ei=typeof Object.is=="function"?Object.is:sa;function La(a,o){if(ei(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var d=Object.keys(a),p=Object.keys(o);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var S=d[p];if(!H.call(o,S)||!ei(a[S],o[S]))return!1}return!0}function Ol(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Dl(a,o){var d=Ol(a);a=0;for(var p;d;){if(d.nodeType===3){if(p=a+d.textContent.length,a<=o&&p>=o)return{node:d,offset:o-a};a=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Ol(d)}}function Pa(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Pa(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Ma(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Ys(a.document);o instanceof a.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)a=o.contentWindow;else break;o=Ys(a.document)}return o}function aa(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Yo=Xr&&"documentMode"in document&&11>=document.documentMode,Xi=null,Oa=null,hi=null,ss=!1;function Tn(a,o,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ss||Xi==null||Xi!==Ys(p)||(p=Xi,"selectionStart"in p&&aa(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),hi&&La(hi,p)||(hi=p,p=Tp(Oa,"onSelect"),0<p.length&&(o=new Zs("onSelect","select",null,o,d),a.push({event:o,listeners:p}),o.target=Xi)))}function vn(a,o){var d={};return d[a.toLowerCase()]=o.toLowerCase(),d["Webkit"+a]="webkit"+o,d["Moz"+a]="moz"+o,d}var Hn={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionrun:vn("Transition","TransitionRun"),transitionstart:vn("Transition","TransitionStart"),transitioncancel:vn("Transition","TransitionCancel"),transitionend:vn("Transition","TransitionEnd")},_r={},oa={};Xr&&(oa=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function Ms(a){if(_r[a])return _r[a];if(!Hn[a])return a;var o=Hn[a],d;for(d in o)if(o.hasOwnProperty(d)&&d in oa)return _r[a]=o[d];return a}var Xo=Ms("animationend"),Du=Ms("animationiteration"),vd=Ms("animationstart"),Jh=Ms("transitionrun"),Yh=Ms("transitionstart"),Xh=Ms("transitioncancel"),wd=Ms("transitionend"),bd=new Map,Zo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zo.push("scrollEnd");function as(a,o){bd.set(a,o),Ns(o,[a])}var Uu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Zi=[],Qo=0,Uc=0;function Fu(){for(var a=Qo,o=Uc=Qo=0;o<a;){var d=Zi[o];Zi[o++]=null;var p=Zi[o];Zi[o++]=null;var S=Zi[o];Zi[o++]=null;var k=Zi[o];if(Zi[o++]=null,p!==null&&S!==null){var Z=p.pending;Z===null?S.next=S:(S.next=Z.next,Z.next=S),p.pending=S}k!==0&&qu(d,S,k)}}function Bu(a,o,d,p){Zi[Qo++]=a,Zi[Qo++]=o,Zi[Qo++]=d,Zi[Qo++]=p,Uc|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function Fc(a,o,d,p){return Bu(a,o,d,p),pi(a)}function Da(a,o){return Bu(a,null,null,o),pi(a)}function qu(a,o,d){a.lanes|=d;var p=a.alternate;p!==null&&(p.lanes|=d);for(var S=!1,k=a.return;k!==null;)k.childLanes|=d,p=k.alternate,p!==null&&(p.childLanes|=d),k.tag===22&&(a=k.stateNode,a===null||a._visibility&1||(S=!0)),a=k,k=k.return;return a.tag===3?(k=a.stateNode,S&&o!==null&&(S=31-Ht(d),a=k.hiddenUpdates,p=a[S],p===null?a[S]=[o]:p.push(o),o.lane=d|536870912),k):null}function pi(a){if(50<zd)throw zd=0,E0=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ti={};function Bc(a,o,d,p){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(a,o,d,p){return new Bc(a,o,d,p)}function qc(a){return a=a.prototype,!(!a||!a.isReactComponent)}function os(a,o){var d=a.alternate;return d===null?(d=mi(a.tag,o,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=o,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,o=a.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function ju(a,o){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,o=d.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Ul(a,o,d,p,S,k){var Z=0;if(p=a,typeof a=="function")qc(a)&&(Z=1);else if(typeof a=="string")Z=XR(a,d,ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case O:return a=mi(31,d,o,S),a.elementType=O,a.lanes=k,a;case _:return fo(d.children,S,k,o);case R:Z=8,S|=24;break;case b:return a=mi(12,d,o,S|2),a.elementType=b,a.lanes=k,a;case F:return a=mi(13,d,o,S),a.elementType=F,a.lanes=k,a;case J:return a=mi(19,d,o,S),a.elementType=J,a.lanes=k,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:Z=10;break e;case N:Z=9;break e;case A:Z=11;break e;case V:Z=14;break e;case te:Z=16,p=null;break e}Z=29,d=Error(r(130,a===null?"null":typeof a,"")),p=null}return o=mi(Z,d,o,S),o.elementType=a,o.type=p,o.lanes=k,o}function fo(a,o,d,p){return a=mi(7,a,p,o),a.lanes=d,a}function zu(a,o,d){return a=mi(6,a,null,o),a.lanes=d,a}function jc(a){var o=mi(18,null,null,0);return o.stateNode=a,o}function Fl(a,o,d){return o=mi(4,a.children!==null?a.children:[],a.key,o),o.lanes=d,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var zc=new WeakMap;function ls(a,o){if(typeof a=="object"&&a!==null){var d=zc.get(a);return d!==void 0?d:(o={value:a,source:o,stack:P(o)},zc.set(a,o),o)}return{value:a,source:o,stack:P(o)}}var Bl=[],el=0,Hc=null,Hu=0,us=[],cs=0,ho=null,fs=1,ds="";function Qi(a,o){Bl[el++]=Hu,Bl[el++]=Hc,Hc=a,Hu=o}function Zh(a,o,d){us[cs++]=fs,us[cs++]=ds,us[cs++]=ho,ho=a;var p=fs;a=ds;var S=32-Ht(p)-1;p&=~(1<<S),d+=1;var k=32-Ht(o)+S;if(30<k){var Z=S-S%5;k=(p&(1<<Z)-1).toString(32),p>>=Z,S-=Z,fs=1<<32-Ht(o)+S|d<<S|p,ds=k+a}else fs=1<<k|d<<S|p,ds=a}function _d(a){a.return!==null&&(Qi(a,1),Zh(a,1,0))}function Gc(a){for(;a===Hc;)Hc=Bl[--el],Bl[el]=null,Hu=Bl[--el],Bl[el]=null;for(;a===ho;)ho=us[--cs],us[cs]=null,ds=us[--cs],us[cs]=null,fs=us[--cs],us[cs]=null}function Qh(a,o){us[cs++]=fs,us[cs++]=ds,us[cs++]=ho,fs=o.id,ds=o.overflow,ho=a}var ni=null,Yn=null,dn=!1,Ei=null,dr=!1,Os=Error(r(519));function po(a){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ql(ls(o,a)),Os}function Sd(a){var o=a.stateNode,d=a.type,p=a.memoizedProps;switch(o[On]=a,o[nr]=p,d){case"dialog":pn("cancel",o),pn("close",o);break;case"iframe":case"object":case"embed":pn("load",o);break;case"video":case"audio":for(d=0;d<Gd.length;d++)pn(Gd[d],o);break;case"source":pn("error",o);break;case"img":case"image":case"link":pn("error",o),pn("load",o);break;case"details":pn("toggle",o);break;case"input":pn("invalid",o),Cc(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":pn("invalid",o);break;case"textarea":pn("invalid",o),Nu(o,p.value,p.defaultValue,p.children)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||p.suppressHydrationWarning===!0||R_(o.textContent,d)?(p.popover!=null&&(pn("beforetoggle",o),pn("toggle",o)),p.onScroll!=null&&pn("scroll",o),p.onScrollEnd!=null&&pn("scrollend",o),p.onClick!=null&&(o.onclick=ks),o=!0):o=!1,o||po(a,!0)}function Ua(a){for(ni=a.return;ni;)switch(ni.tag){case 5:case 31:case 13:dr=!1;return;case 27:case 3:dr=!0;return;default:ni=ni.return}}function ri(a){if(a!==ni)return!1;if(!dn)return Ua(a),dn=!0,!1;var o=a.tag,d;if((d=o!==3&&o!==27)&&((d=o===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||q0(a.type,a.memoizedProps)),d=!d),d&&Yn&&po(a),Ua(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Yn=F_(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Yn=F_(a)}else o===27?(o=Yn,eu(a.type)?(a=V0,V0=null,Yn=a):Yn=o):Yn=ni?fa(a.stateNode.nextSibling):null;return!0}function tl(){Yn=ni=null,dn=!1}function xd(){var a=Ei;return a!==null&&(vs===null?vs=a:vs.push.apply(vs,a),Ei=null),a}function ql(a){Ei===null?Ei=[a]:Ei.push(a)}var Vc=K(null),mo=null,la=null;function go(a,o,d){$(Vc,o._currentValue),o._currentValue=d}function hs(a){a._currentValue=Vc.current,L(Vc)}function jl(a,o,d){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===d)break;a=a.return}}function nl(a,o,d,p){var S=a.child;for(S!==null&&(S.return=a);S!==null;){var k=S.dependencies;if(k!==null){var Z=S.child;k=k.firstContext;e:for(;k!==null;){var _e=k;k=S;for(var Ie=0;Ie<o.length;Ie++)if(_e.context===o[Ie]){k.lanes|=d,_e=k.alternate,_e!==null&&(_e.lanes|=d),jl(k.return,d,a),p||(Z=null);break e}k=_e.next}}else if(S.tag===18){if(Z=S.return,Z===null)throw Error(r(341));Z.lanes|=d,k=Z.alternate,k!==null&&(k.lanes|=d),jl(Z,d,a),Z=null}else Z=S.child;if(Z!==null)Z.return=S;else for(Z=S;Z!==null;){if(Z===a){Z=null;break}if(S=Z.sibling,S!==null){S.return=Z.return,Z=S;break}Z=Z.return}S=Z}}function yo(a,o,d,p){a=null;for(var S=o,k=!1;S!==null;){if(!k){if((S.flags&524288)!==0)k=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var Z=S.alternate;if(Z===null)throw Error(r(387));if(Z=Z.memoizedProps,Z!==null){var _e=S.type;ei(S.pendingProps.value,Z.value)||(a!==null?a.push(_e):a=[_e])}}else if(S===B.current){if(Z=S.alternate,Z===null)throw Error(r(387));Z.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(a!==null?a.push(Jd):a=[Jd])}S=S.return}a!==null&&nl(o,a,d,p),o.flags|=262144}function $c(a){for(a=a.firstContext;a!==null;){if(!ei(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function vo(a){mo=a,la=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ii(a){return ep(mo,a)}function Wc(a,o){return mo===null&&vo(a),ep(a,o)}function ep(a,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},la===null){if(a===null)throw Error(r(308));la=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else la=la.next=o;return d}var Gg=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(d,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(d){return d()})}},Vg=n.unstable_scheduleCallback,$g=n.unstable_NormalPriority,Sr={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zl(){return{controller:new Gg,data:new Map,refCount:0}}function Gu(a){a.refCount--,a.refCount===0&&Vg($g,function(){a.controller.abort()})}var Vu=null,Kc=0,v=0,T=null;function z(a,o){if(Vu===null){var d=Vu=[];Kc=0,v=I0(),T={status:"pending",value:void 0,then:function(p){d.push(p)}}}return Kc++,o.then(W,W),o}function W(){if(--Kc===0&&Vu!==null){T!==null&&(T.status="fulfilled");var a=Vu;Vu=null,v=0,T=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function ce(a,o){var d=[],p={status:"pending",value:null,reason:null,then:function(S){d.push(S)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var S=0;S<d.length;S++)(0,d[S])(o)},function(S){for(p.status="rejected",p.reason=S,S=0;S<d.length;S++)(0,d[S])(void 0)}),p}var ge=se.S;se.S=function(a,o){Q2=De(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&z(a,o),ge!==null&&ge(a,o)};var ve=K(null);function xe(){var a=ve.current;return a!==null?a:Zn.pooledCache}function Ae(a,o){o===null?$(ve,ve.current):$(ve,o.pool)}function Te(){var a=xe();return a===null?null:{parent:Sr._currentValue,pool:a}}var Pe=Error(r(460)),ze=Error(r(474)),Ee=Error(r(542)),Oe={then:function(){}};function qe(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ye(a,o,d){switch(d=a[d],d===void 0?a.push(o):d!==o&&(o.then(ks,ks),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,ct(a),a;default:if(typeof o.status=="string")o.then(ks,ks);else{if(a=Zn,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var S=o;S.status="fulfilled",S.value=p}},function(p){if(o.status==="pending"){var S=o;S.status="rejected",S.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,ct(a),a}throw Je=o,Pe}}function je(a){try{var o=a._init;return o(a._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Je=d,Pe):d}}var Je=null;function Qe(){if(Je===null)throw Error(r(459));var a=Je;return Je=null,a}function ct(a){if(a===Pe||a===Ee)throw Error(r(483))}var rt=null,St=0;function mt(a){var o=St;return St+=1,rt===null&&(rt=[]),Ye(rt,a,o)}function Kt(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function vt(a,o){throw o.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function fn(a){function o(Be,Me){if(a){var He=Be.deletions;He===null?(Be.deletions=[Me],Be.flags|=16):He.push(Me)}}function d(Be,Me){if(!a)return null;for(;Me!==null;)o(Be,Me),Me=Me.sibling;return null}function p(Be){for(var Me=new Map;Be!==null;)Be.key!==null?Me.set(Be.key,Be):Me.set(Be.index,Be),Be=Be.sibling;return Me}function S(Be,Me){return Be=os(Be,Me),Be.index=0,Be.sibling=null,Be}function k(Be,Me,He){return Be.index=He,a?(He=Be.alternate,He!==null?(He=He.index,He<Me?(Be.flags|=67108866,Me):He):(Be.flags|=67108866,Me)):(Be.flags|=1048576,Me)}function Z(Be){return a&&Be.alternate===null&&(Be.flags|=67108866),Be}function _e(Be,Me,He,et){return Me===null||Me.tag!==6?(Me=zu(He,Be.mode,et),Me.return=Be,Me):(Me=S(Me,He),Me.return=Be,Me)}function Ie(Be,Me,He,et){var Ft=He.type;return Ft===_?Xe(Be,Me,He.props.children,et,He.key):Me!==null&&(Me.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===te&&je(Ft)===Me.type)?(Me=S(Me,He.props),Kt(Me,He),Me.return=Be,Me):(Me=Ul(He.type,He.key,He.props,null,Be.mode,et),Kt(Me,He),Me.return=Be,Me)}function Ge(Be,Me,He,et){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==He.containerInfo||Me.stateNode.implementation!==He.implementation?(Me=Fl(He,Be.mode,et),Me.return=Be,Me):(Me=S(Me,He.children||[]),Me.return=Be,Me)}function Xe(Be,Me,He,et,Ft){return Me===null||Me.tag!==7?(Me=fo(He,Be.mode,et,Ft),Me.return=Be,Me):(Me=S(Me,He),Me.return=Be,Me)}function tt(Be,Me,He){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=zu(""+Me,Be.mode,He),Me.return=Be,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case m:return He=Ul(Me.type,Me.key,Me.props,null,Be.mode,He),Kt(He,Me),He.return=Be,He;case E:return Me=Fl(Me,Be.mode,He),Me.return=Be,Me;case te:return Me=je(Me),tt(Be,Me,He)}if(ye(Me)||U(Me))return Me=fo(Me,Be.mode,He,null),Me.return=Be,Me;if(typeof Me.then=="function")return tt(Be,mt(Me),He);if(Me.$$typeof===C)return tt(Be,Wc(Be,Me),He);vt(Be,Me)}return null}function $e(Be,Me,He,et){var Ft=Me!==null?Me.key:null;if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return Ft!==null?null:_e(Be,Me,""+He,et);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case m:return He.key===Ft?Ie(Be,Me,He,et):null;case E:return He.key===Ft?Ge(Be,Me,He,et):null;case te:return He=je(He),$e(Be,Me,He,et)}if(ye(He)||U(He))return Ft!==null?null:Xe(Be,Me,He,et,null);if(typeof He.then=="function")return $e(Be,Me,mt(He),et);if(He.$$typeof===C)return $e(Be,Me,Wc(Be,He),et);vt(Be,He)}return null}function We(Be,Me,He,et,Ft){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Be=Be.get(He)||null,_e(Me,Be,""+et,Ft);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case m:return Be=Be.get(et.key===null?He:et.key)||null,Ie(Me,Be,et,Ft);case E:return Be=Be.get(et.key===null?He:et.key)||null,Ge(Me,Be,et,Ft);case te:return et=je(et),We(Be,Me,He,et,Ft)}if(ye(et)||U(et))return Be=Be.get(He)||null,Xe(Me,Be,et,Ft,null);if(typeof et.then=="function")return We(Be,Me,He,mt(et),Ft);if(et.$$typeof===C)return We(Be,Me,He,Wc(Me,et),Ft);vt(Me,et)}return null}function bt(Be,Me,He,et){for(var Ft=null,Nn=null,Tt=Me,sn=Me=0,gn=null;Tt!==null&&sn<He.length;sn++){Tt.index>sn?(gn=Tt,Tt=null):gn=Tt.sibling;var Rn=$e(Be,Tt,He[sn],et);if(Rn===null){Tt===null&&(Tt=gn);break}a&&Tt&&Rn.alternate===null&&o(Be,Tt),Me=k(Rn,Me,sn),Nn===null?Ft=Rn:Nn.sibling=Rn,Nn=Rn,Tt=gn}if(sn===He.length)return d(Be,Tt),dn&&Qi(Be,sn),Ft;if(Tt===null){for(;sn<He.length;sn++)Tt=tt(Be,He[sn],et),Tt!==null&&(Me=k(Tt,Me,sn),Nn===null?Ft=Tt:Nn.sibling=Tt,Nn=Tt);return dn&&Qi(Be,sn),Ft}for(Tt=p(Tt);sn<He.length;sn++)gn=We(Tt,Be,sn,He[sn],et),gn!==null&&(a&&gn.alternate!==null&&Tt.delete(gn.key===null?sn:gn.key),Me=k(gn,Me,sn),Nn===null?Ft=gn:Nn.sibling=gn,Nn=gn);return a&&Tt.forEach(function(su){return o(Be,su)}),dn&&Qi(Be,sn),Ft}function Gt(Be,Me,He,et){if(He==null)throw Error(r(151));for(var Ft=null,Nn=null,Tt=Me,sn=Me=0,gn=null,Rn=He.next();Tt!==null&&!Rn.done;sn++,Rn=He.next()){Tt.index>sn?(gn=Tt,Tt=null):gn=Tt.sibling;var su=$e(Be,Tt,Rn.value,et);if(su===null){Tt===null&&(Tt=gn);break}a&&Tt&&su.alternate===null&&o(Be,Tt),Me=k(su,Me,sn),Nn===null?Ft=su:Nn.sibling=su,Nn=su,Tt=gn}if(Rn.done)return d(Be,Tt),dn&&Qi(Be,sn),Ft;if(Tt===null){for(;!Rn.done;sn++,Rn=He.next())Rn=tt(Be,Rn.value,et),Rn!==null&&(Me=k(Rn,Me,sn),Nn===null?Ft=Rn:Nn.sibling=Rn,Nn=Rn);return dn&&Qi(Be,sn),Ft}for(Tt=p(Tt);!Rn.done;sn++,Rn=He.next())Rn=We(Tt,Be,sn,Rn.value,et),Rn!==null&&(a&&Rn.alternate!==null&&Tt.delete(Rn.key===null?sn:Rn.key),Me=k(Rn,Me,sn),Nn===null?Ft=Rn:Nn.sibling=Rn,Nn=Rn);return a&&Tt.forEach(function(l8){return o(Be,l8)}),dn&&Qi(Be,sn),Ft}function Wn(Be,Me,He,et){if(typeof He=="object"&&He!==null&&He.type===_&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case m:e:{for(var Ft=He.key;Me!==null;){if(Me.key===Ft){if(Ft=He.type,Ft===_){if(Me.tag===7){d(Be,Me.sibling),et=S(Me,He.props.children),et.return=Be,Be=et;break e}}else if(Me.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===te&&je(Ft)===Me.type){d(Be,Me.sibling),et=S(Me,He.props),Kt(et,He),et.return=Be,Be=et;break e}d(Be,Me);break}else o(Be,Me);Me=Me.sibling}He.type===_?(et=fo(He.props.children,Be.mode,et,He.key),et.return=Be,Be=et):(et=Ul(He.type,He.key,He.props,null,Be.mode,et),Kt(et,He),et.return=Be,Be=et)}return Z(Be);case E:e:{for(Ft=He.key;Me!==null;){if(Me.key===Ft)if(Me.tag===4&&Me.stateNode.containerInfo===He.containerInfo&&Me.stateNode.implementation===He.implementation){d(Be,Me.sibling),et=S(Me,He.children||[]),et.return=Be,Be=et;break e}else{d(Be,Me);break}else o(Be,Me);Me=Me.sibling}et=Fl(He,Be.mode,et),et.return=Be,Be=et}return Z(Be);case te:return He=je(He),Wn(Be,Me,He,et)}if(ye(He))return bt(Be,Me,He,et);if(U(He)){if(Ft=U(He),typeof Ft!="function")throw Error(r(150));return He=Ft.call(He),Gt(Be,Me,He,et)}if(typeof He.then=="function")return Wn(Be,Me,mt(He),et);if(He.$$typeof===C)return Wn(Be,Me,Wc(Be,He),et);vt(Be,He)}return typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint"?(He=""+He,Me!==null&&Me.tag===6?(d(Be,Me.sibling),et=S(Me,He),et.return=Be,Be=et):(d(Be,Me),et=zu(He,Be.mode,et),et.return=Be,Be=et),Z(Be)):d(Be,Me)}return function(Be,Me,He,et){try{St=0;var Ft=Wn(Be,Me,He,et);return rt=null,Ft}catch(Tt){if(Tt===Pe||Tt===Ee)throw Tt;var Nn=mi(29,Tt,null,Be.mode);return Nn.lanes=et,Nn.return=Be,Nn}finally{}}}var Xn=fn(!0),Zt=fn(!1),gt=!1;function dt(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ir(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function jt(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function nn(a,o,d){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(Pn&2)!==0){var S=p.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),p.pending=o,o=pi(a),qu(a,null,d),o}return Bu(a,p,o,d),pi(a)}function In(a,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,d|=p,o.lanes=d,zi(a,d)}}function Ur(a,o){var d=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var S=null,k=null;if(d=d.firstBaseUpdate,d!==null){do{var Z={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};k===null?S=k=Z:k=k.next=Z,d=d.next}while(d!==null);k===null?S=k=o:k=k.next=o}else S=k=o;d={baseState:p.baseState,firstBaseUpdate:S,lastBaseUpdate:k,shared:p.shared,callbacks:p.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=o:a.next=o,d.lastBaseUpdate=o}var si=!1;function Gn(){if(si){var a=T;if(a!==null)throw a}}function Cr(a,o,d,p){si=!1;var S=a.updateQueue;gt=!1;var k=S.firstBaseUpdate,Z=S.lastBaseUpdate,_e=S.shared.pending;if(_e!==null){S.shared.pending=null;var Ie=_e,Ge=Ie.next;Ie.next=null,Z===null?k=Ge:Z.next=Ge,Z=Ie;var Xe=a.alternate;Xe!==null&&(Xe=Xe.updateQueue,_e=Xe.lastBaseUpdate,_e!==Z&&(_e===null?Xe.firstBaseUpdate=Ge:_e.next=Ge,Xe.lastBaseUpdate=Ie))}if(k!==null){var tt=S.baseState;Z=0,Xe=Ge=Ie=null,_e=k;do{var $e=_e.lane&-536870913,We=$e!==_e.lane;if(We?(mn&$e)===$e:(p&$e)===$e){$e!==0&&$e===v&&(si=!0),Xe!==null&&(Xe=Xe.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var bt=a,Gt=_e;$e=o;var Wn=d;switch(Gt.tag){case 1:if(bt=Gt.payload,typeof bt=="function"){tt=bt.call(Wn,tt,$e);break e}tt=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Gt.payload,$e=typeof bt=="function"?bt.call(Wn,tt,$e):bt,$e==null)break e;tt=g({},tt,$e);break e;case 2:gt=!0}}$e=_e.callback,$e!==null&&(a.flags|=64,We&&(a.flags|=8192),We=S.callbacks,We===null?S.callbacks=[$e]:We.push($e))}else We={lane:$e,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},Xe===null?(Ge=Xe=We,Ie=tt):Xe=Xe.next=We,Z|=$e;if(_e=_e.next,_e===null){if(_e=S.shared.pending,_e===null)break;We=_e,_e=We.next,We.next=null,S.lastBaseUpdate=We,S.shared.pending=null}}while(!0);Xe===null&&(Ie=tt),S.baseState=Ie,S.firstBaseUpdate=Ge,S.lastBaseUpdate=Xe,k===null&&(S.shared.lanes=0),Jl|=Z,a.lanes=Z,a.memoizedState=tt}}function gi(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Nr(a,o){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)gi(d[a],o)}var on=K(null),_n=K(0);function sr(a,o){a=dl,$(_n,a),$(on,o),dl=a|o.baseLanes}function Cn(){$(_n,dl),$(on,on.current)}function Fr(){dl=_n.current,L(on),L(_n)}var ar=K(null),Sn=null;function xr(a){var o=a.alternate;$(wn,wn.current&1),$(ar,a),Sn===null&&(o===null||on.current!==null||o.memoizedState!==null)&&(Sn=a)}function Ln(a){$(wn,wn.current),$(ar,a),Sn===null&&(Sn=a)}function Rr(a){a.tag===22?($(wn,wn.current),$(ar,a),Sn===null&&(Sn=a)):kr()}function kr(){$(wn,wn.current),$(ar,ar.current)}function Dn(a){L(ar),Sn===a&&(Sn=null),L(wn)}var wn=K(0);function yi(a){for(var o=a;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||H0(d)||G0(d)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var hr=0,Ot=null,Ut=null,xn=null,Mi=!1,ps=!1,Ti=!1,Ir=0,wo=0,bo=null,Jc=0;function Vn(){throw Error(r(321))}function Ad(a,o){if(o===null)return!1;for(var d=0;d<o.length&&d<a.length;d++)if(!ei(a[d],o[d]))return!1;return!0}function Ed(a,o,d,p,S,k){return hr=k,Ot=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,se.H=a===null||a.memoizedState===null?c2:e0,Ti=!1,k=d(p,S),Ti=!1,ps&&(k=Fa(o,d,p,S)),Yc(a),k}function Yc(a){se.H=Pd;var o=Ut!==null&&Ut.next!==null;if(hr=0,xn=Ut=Ot=null,Mi=!1,wo=0,bo=null,o)throw Error(r(300));a===null||Wr||(a=a.dependencies,a!==null&&$c(a)&&(Wr=!0))}function Fa(a,o,d,p){Ot=a;var S=0;do{if(ps&&(bo=null),wo=0,ps=!1,25<=S)throw Error(r(301));if(S+=1,xn=Ut=null,a.updateQueue!=null){var k=a.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}se.H=f2,k=o(d,p)}while(ps);return k}function Wg(){var a=se.H,o=a.useState()[0];return o=typeof o.then=="function"?_o(o):o,a=a.useState()[0],(Ut!==null?Ut.memoizedState:null)!==a&&(Ot.flags|=1024),o}function Td(){var a=Ir!==0;return Ir=0,a}function Cd(a,o,d){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~d}function Xc(a){if(Mi){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Mi=!1}hr=0,xn=Ut=Ot=null,ps=!1,wo=Ir=0,bo=null}function $r(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Ot.memoizedState=xn=a:xn=xn.next=a,xn}function pr(){if(Ut===null){var a=Ot.alternate;a=a!==null?a.memoizedState:null}else a=Ut.next;var o=xn===null?Ot.memoizedState:xn.next;if(o!==null)xn=o,Ut=a;else{if(a===null)throw Ot.alternate===null?Error(r(467)):Error(r(310));Ut=a,a={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},xn===null?Ot.memoizedState=xn=a:xn=xn.next=a}return xn}function $u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _o(a){var o=wo;return wo+=1,bo===null&&(bo=[]),a=Ye(bo,a,o),o=Ot,(xn===null?o.memoizedState:xn.next)===null&&(o=o.alternate,se.H=o===null||o.memoizedState===null?c2:e0),a}function Hl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return _o(a);if(a.$$typeof===C)return ii(a)}throw Error(r(438,String(a)))}function rl(a){var o=null,d=Ot.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var p=Ot.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(S){return S.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=$u(),Ot.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(a),p=0;p<a;p++)d[p]=le;return o.index++,d}function ua(a,o){return typeof o=="function"?o(a):o}function Zc(a){var o=pr();return Gl(o,Ut,a)}function Gl(a,o,d){var p=a.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=d;var S=a.baseQueue,k=p.pending;if(k!==null){if(S!==null){var Z=S.next;S.next=k.next,k.next=Z}o.baseQueue=S=k,p.pending=null}if(k=a.baseState,S===null)a.memoizedState=k;else{o=S.next;var _e=Z=null,Ie=null,Ge=o,Xe=!1;do{var tt=Ge.lane&-536870913;if(tt!==Ge.lane?(mn&tt)===tt:(hr&tt)===tt){var $e=Ge.revertLane;if($e===0)Ie!==null&&(Ie=Ie.next={lane:0,revertLane:0,gesture:null,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null}),tt===v&&(Xe=!0);else if((hr&$e)===$e){Ge=Ge.next,$e===v&&(Xe=!0);continue}else tt={lane:0,revertLane:Ge.revertLane,gesture:null,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},Ie===null?(_e=Ie=tt,Z=k):Ie=Ie.next=tt,Ot.lanes|=$e,Jl|=$e;tt=Ge.action,Ti&&d(k,tt),k=Ge.hasEagerState?Ge.eagerState:d(k,tt)}else $e={lane:tt,revertLane:Ge.revertLane,gesture:Ge.gesture,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null},Ie===null?(_e=Ie=$e,Z=k):Ie=Ie.next=$e,Ot.lanes|=tt,Jl|=tt;Ge=Ge.next}while(Ge!==null&&Ge!==o);if(Ie===null?Z=k:Ie.next=_e,!ei(k,a.memoizedState)&&(Wr=!0,Xe&&(d=T,d!==null)))throw d;a.memoizedState=k,a.baseState=Z,a.baseQueue=Ie,p.lastRenderedState=k}return S===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function Qc(a){var o=pr(),d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var p=d.dispatch,S=d.pending,k=o.memoizedState;if(S!==null){d.pending=null;var Z=S=S.next;do k=a(k,Z.action),Z=Z.next;while(Z!==S);ei(k,o.memoizedState)||(Wr=!0),o.memoizedState=k,o.baseQueue===null&&(o.baseState=k),d.lastRenderedState=k}return[k,p]}function ef(a,o,d){var p=Ot,S=pr(),k=dn;if(k){if(d===void 0)throw Error(r(407));d=d()}else d=o();var Z=!ei((Ut||S).memoizedState,d);if(Z&&(S.memoizedState=d,Wr=!0),S=S.queue,Kg(Rd.bind(null,p,S,a),[a]),S.getSnapshot!==o||Z||xn!==null&&xn.memoizedState.tag&1){if(p.flags|=2048,sl(9,{destroy:void 0},Nd.bind(null,p,S,d,o),null),Zn===null)throw Error(r(349));k||(hr&127)!==0||Ba(p,o,d)}return d}function Ba(a,o,d){a.flags|=16384,a={getSnapshot:o,value:d},o=Ot.updateQueue,o===null?(o=$u(),Ot.updateQueue=o,o.stores=[a]):(d=o.stores,d===null?o.stores=[a]:d.push(a))}function Nd(a,o,d,p){o.value=d,o.getSnapshot=p,tp(o)&&kd(a)}function Rd(a,o,d){return d(function(){tp(o)&&kd(a)})}function tp(a){var o=a.getSnapshot;a=a.value;try{var d=o();return!ei(a,d)}catch{return!0}}function kd(a){var o=Da(a,2);o!==null&&ws(o,a,2)}function So(a){var o=$r();if(typeof a=="function"){var d=a;if(a=d(),Ti){Pt(!0);try{d()}finally{Pt(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:a},o}function np(a,o,d,p){return a.baseState=d,Gl(a,Ut,typeof p=="function"?p:ua)}function rp(a,o,d,p,S){if(op(a))throw Error(r(485));if(a=o.action,a!==null){var k={payload:S,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){k.listeners.push(Z)}};se.T!==null?d(!0):k.isTransition=!1,p(k),d=o.pending,d===null?(k.next=o.pending=k,ip(o,k)):(k.next=d.next,o.pending=d.next=k)}}function ip(a,o){var d=o.action,p=o.payload,S=a.state;if(o.isTransition){var k=se.T,Z={};se.T=Z;try{var _e=d(S,p),Ie=se.S;Ie!==null&&Ie(Z,_e),Id(a,o,_e)}catch(Ge){il(a,o,Ge)}finally{k!==null&&Z.types!==null&&(k.types=Z.types),se.T=k}}else try{k=d(S,p),Id(a,o,k)}catch(Ge){il(a,o,Ge)}}function Id(a,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){sp(a,o,p)},function(p){return il(a,o,p)}):sp(a,o,d)}function sp(a,o,d){o.status="fulfilled",o.value=d,tf(o),a.state=d,o=a.pending,o!==null&&(d=o.next,d===o?a.pending=null:(d=d.next,o.next=d,ip(a,d)))}function il(a,o,d){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=d,tf(o),o=o.next;while(o!==p)}a.action=null}function tf(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Wu(a,o){return o}function ca(a,o){if(dn){var d=Zn.formState;if(d!==null){e:{var p=Ot;if(dn){if(Yn){t:{for(var S=Yn,k=dr;S.nodeType!==8;){if(!k){S=null;break t}if(S=fa(S.nextSibling),S===null){S=null;break t}}k=S.data,S=k==="F!"||k==="F"?S:null}if(S){Yn=fa(S.nextSibling),p=S.data==="F!";break e}}po(p)}p=!1}p&&(o=d[0])}}return d=$r(),d.memoizedState=d.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:o},d.queue=p,d=o2.bind(null,Ot,p),p.dispatch=d,p=So(!1),k=Qg.bind(null,Ot,!1,p.queue),p=$r(),S={state:o,dispatch:null,action:a,pending:null},p.queue=S,d=rp.bind(null,Ot,S,k,d),S.dispatch=d,p.memoizedState=a,[o,d,!1]}function qa(a){var o=pr();return ja(o,Ut,a)}function ja(a,o,d){if(o=Gl(a,o,Wu)[0],a=Zc(ua)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=_o(o)}catch(Z){throw Z===Pe?Ee:Z}else p=o;o=pr();var S=o.queue,k=S.dispatch;return d!==o.memoizedState&&(Ot.flags|=2048,sl(9,{destroy:void 0},nf.bind(null,S,d),null)),[p,k,a]}function nf(a,o){a.action=o}function rf(a){var o=pr(),d=Ut;if(d!==null)return ja(o,d,a);pr(),o=o.memoizedState,d=pr();var p=d.queue.dispatch;return d.memoizedState=a,[o,p,!1]}function sl(a,o,d,p){return a={tag:a,create:d,deps:p,inst:o,next:null},o=Ot.updateQueue,o===null&&(o=$u(),Ot.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=a.next=a:(p=d.next,d.next=a,a.next=p,o.lastEffect=a),a}function ap(){return pr().memoizedState}function Vl(a,o,d,p){var S=$r();Ot.flags|=a,S.memoizedState=sl(1|o,{destroy:void 0},d,p===void 0?null:p)}function $l(a,o,d,p){var S=pr();p=p===void 0?null:p;var k=S.memoizedState.inst;Ut!==null&&p!==null&&Ad(p,Ut.memoizedState.deps)?S.memoizedState=sl(o,k,d,p):(Ot.flags|=a,S.memoizedState=sl(1|o,k,d,p))}function Wb(a,o){Vl(8390656,8,a,o)}function Kg(a,o){$l(2048,8,a,o)}function nR(a){Ot.flags|=4;var o=Ot.updateQueue;if(o===null)o=$u(),Ot.updateQueue=o,o.events=[a];else{var d=o.events;d===null?o.events=[a]:d.push(a)}}function Kb(a){var o=pr().memoizedState;return nR({ref:o,nextImpl:a}),function(){if((Pn&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function Jb(a,o){return $l(4,2,a,o)}function Yb(a,o){return $l(4,4,a,o)}function Xb(a,o){if(typeof o=="function"){a=a();var d=o(a);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Zb(a,o,d){d=d!=null?d.concat([a]):null,$l(4,4,Xb.bind(null,o,a),d)}function Jg(){}function Qb(a,o){var d=pr();o=o===void 0?null:o;var p=d.memoizedState;return o!==null&&Ad(o,p[1])?p[0]:(d.memoizedState=[a,o],a)}function e2(a,o){var d=pr();o=o===void 0?null:o;var p=d.memoizedState;if(o!==null&&Ad(o,p[1]))return p[0];if(p=a(),Ti){Pt(!0);try{a()}finally{Pt(!1)}}return d.memoizedState=[p,o],p}function Yg(a,o,d){return d===void 0||(hr&1073741824)!==0&&(mn&261930)===0?a.memoizedState=o:(a.memoizedState=d,a=t_(),Ot.lanes|=a,Jl|=a,d)}function t2(a,o,d,p){return ei(d,o)?d:on.current!==null?(a=Yg(a,d,p),ei(a,o)||(Wr=!0),a):(hr&42)===0||(hr&1073741824)!==0&&(mn&261930)===0?(Wr=!0,a.memoizedState=d):(a=t_(),Ot.lanes|=a,Jl|=a,o)}function n2(a,o,d,p,S){var k=ie.p;ie.p=k!==0&&8>k?k:8;var Z=se.T,_e={};se.T=_e,Qg(a,!1,o,d);try{var Ie=S(),Ge=se.S;if(Ge!==null&&Ge(_e,Ie),Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var Xe=ce(Ie,p);Ld(a,o,Xe,Fs(a))}else Ld(a,o,p,Fs(a))}catch(tt){Ld(a,o,{then:function(){},status:"rejected",reason:tt},Fs())}finally{ie.p=k,Z!==null&&_e.types!==null&&(Z.types=_e.types),se.T=Z}}function rR(){}function Xg(a,o,d,p){if(a.tag!==5)throw Error(r(476));var S=r2(a).queue;n2(a,S,o,Se,d===null?rR:function(){return i2(a),d(p)})}function r2(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:Se},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:d},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function i2(a){var o=r2(a);o.next===null&&(o=a.alternate.memoizedState),Ld(a,o.next.queue,{},Fs())}function Zg(){return ii(Jd)}function s2(){return pr().memoizedState}function a2(){return pr().memoizedState}function iR(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var d=Fs();a=jt(d);var p=nn(o,a,d);p!==null&&(ws(p,o,d),In(p,o,d)),o={cache:zl()},a.payload=o;return}o=o.return}}function sR(a,o,d){var p=Fs();d={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},op(a)?l2(o,d):(d=Fc(a,o,d,p),d!==null&&(ws(d,a,p),u2(d,o,p)))}function o2(a,o,d){var p=Fs();Ld(a,o,d,p)}function Ld(a,o,d,p){var S={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(op(a))l2(o,S);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=o.lastRenderedReducer,k!==null))try{var Z=o.lastRenderedState,_e=k(Z,d);if(S.hasEagerState=!0,S.eagerState=_e,ei(_e,Z))return Bu(a,o,S,0),Zn===null&&Fu(),!1}catch{}finally{}if(d=Fc(a,o,S,p),d!==null)return ws(d,a,p),u2(d,o,p),!0}return!1}function Qg(a,o,d,p){if(p={lane:2,revertLane:I0(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},op(a)){if(o)throw Error(r(479))}else o=Fc(a,d,p,2),o!==null&&ws(o,a,2)}function op(a){var o=a.alternate;return a===Ot||o!==null&&o===Ot}function l2(a,o){ps=Mi=!0;var d=a.pending;d===null?o.next=o:(o.next=d.next,d.next=o),a.pending=o}function u2(a,o,d){if((d&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,d|=p,o.lanes=d,zi(a,d)}}var Pd={readContext:ii,use:Hl,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn,useHostTransitionStatus:Vn,useFormState:Vn,useActionState:Vn,useOptimistic:Vn,useMemoCache:Vn,useCacheRefresh:Vn};Pd.useEffectEvent=Vn;var c2={readContext:ii,use:Hl,useCallback:function(a,o){return $r().memoizedState=[a,o===void 0?null:o],a},useContext:ii,useEffect:Wb,useImperativeHandle:function(a,o,d){d=d!=null?d.concat([a]):null,Vl(4194308,4,Xb.bind(null,o,a),d)},useLayoutEffect:function(a,o){return Vl(4194308,4,a,o)},useInsertionEffect:function(a,o){Vl(4,2,a,o)},useMemo:function(a,o){var d=$r();o=o===void 0?null:o;var p=a();if(Ti){Pt(!0);try{a()}finally{Pt(!1)}}return d.memoizedState=[p,o],p},useReducer:function(a,o,d){var p=$r();if(d!==void 0){var S=d(o);if(Ti){Pt(!0);try{d(o)}finally{Pt(!1)}}}else S=o;return p.memoizedState=p.baseState=S,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:S},p.queue=a,a=a.dispatch=sR.bind(null,Ot,a),[p.memoizedState,a]},useRef:function(a){var o=$r();return a={current:a},o.memoizedState=a},useState:function(a){a=So(a);var o=a.queue,d=o2.bind(null,Ot,o);return o.dispatch=d,[a.memoizedState,d]},useDebugValue:Jg,useDeferredValue:function(a,o){var d=$r();return Yg(d,a,o)},useTransition:function(){var a=So(!1);return a=n2.bind(null,Ot,a.queue,!0,!1),$r().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,d){var p=Ot,S=$r();if(dn){if(d===void 0)throw Error(r(407));d=d()}else{if(d=o(),Zn===null)throw Error(r(349));(mn&127)!==0||Ba(p,o,d)}S.memoizedState=d;var k={value:d,getSnapshot:o};return S.queue=k,Wb(Rd.bind(null,p,k,a),[a]),p.flags|=2048,sl(9,{destroy:void 0},Nd.bind(null,p,k,d,o),null),d},useId:function(){var a=$r(),o=Zn.identifierPrefix;if(dn){var d=ds,p=fs;d=(p&~(1<<32-Ht(p)-1)).toString(32)+d,o="_"+o+"R_"+d,d=Ir++,0<d&&(o+="H"+d.toString(32)),o+="_"}else d=Jc++,o="_"+o+"r_"+d.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:Zg,useFormState:ca,useActionState:ca,useOptimistic:function(a){var o=$r();o.memoizedState=o.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=Qg.bind(null,Ot,!0,d),d.dispatch=o,[a,o]},useMemoCache:rl,useCacheRefresh:function(){return $r().memoizedState=iR.bind(null,Ot)},useEffectEvent:function(a){var o=$r(),d={impl:a};return o.memoizedState=d,function(){if((Pn&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},e0={readContext:ii,use:Hl,useCallback:Qb,useContext:ii,useEffect:Kg,useImperativeHandle:Zb,useInsertionEffect:Jb,useLayoutEffect:Yb,useMemo:e2,useReducer:Zc,useRef:ap,useState:function(){return Zc(ua)},useDebugValue:Jg,useDeferredValue:function(a,o){var d=pr();return t2(d,Ut.memoizedState,a,o)},useTransition:function(){var a=Zc(ua)[0],o=pr().memoizedState;return[typeof a=="boolean"?a:_o(a),o]},useSyncExternalStore:ef,useId:s2,useHostTransitionStatus:Zg,useFormState:qa,useActionState:qa,useOptimistic:function(a,o){var d=pr();return np(d,Ut,a,o)},useMemoCache:rl,useCacheRefresh:a2};e0.useEffectEvent=Kb;var f2={readContext:ii,use:Hl,useCallback:Qb,useContext:ii,useEffect:Kg,useImperativeHandle:Zb,useInsertionEffect:Jb,useLayoutEffect:Yb,useMemo:e2,useReducer:Qc,useRef:ap,useState:function(){return Qc(ua)},useDebugValue:Jg,useDeferredValue:function(a,o){var d=pr();return Ut===null?Yg(d,a,o):t2(d,Ut.memoizedState,a,o)},useTransition:function(){var a=Qc(ua)[0],o=pr().memoizedState;return[typeof a=="boolean"?a:_o(a),o]},useSyncExternalStore:ef,useId:s2,useHostTransitionStatus:Zg,useFormState:rf,useActionState:rf,useOptimistic:function(a,o){var d=pr();return Ut!==null?np(d,Ut,a,o):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:rl,useCacheRefresh:a2};f2.useEffectEvent=Kb;function t0(a,o,d,p){o=a.memoizedState,d=d(p,o),d=d==null?o:g({},o,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var n0={enqueueSetState:function(a,o,d){a=a._reactInternals;var p=Fs(),S=jt(p);S.payload=o,d!=null&&(S.callback=d),o=nn(a,S,p),o!==null&&(ws(o,a,p),In(o,a,p))},enqueueReplaceState:function(a,o,d){a=a._reactInternals;var p=Fs(),S=jt(p);S.tag=1,S.payload=o,d!=null&&(S.callback=d),o=nn(a,S,p),o!==null&&(ws(o,a,p),In(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var d=Fs(),p=jt(d);p.tag=2,o!=null&&(p.callback=o),o=nn(a,p,d),o!==null&&(ws(o,a,d),In(o,a,d))}};function d2(a,o,d,p,S,k,Z){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,k,Z):o.prototype&&o.prototype.isPureReactComponent?!La(d,p)||!La(S,k):!0}function h2(a,o,d,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,p),o.state!==a&&n0.enqueueReplaceState(o,o.state,null)}function Ku(a,o){var d=o;if("ref"in o){d={};for(var p in o)p!=="ref"&&(d[p]=o[p])}if(a=a.defaultProps){d===o&&(d=g({},d));for(var S in a)d[S]===void 0&&(d[S]=a[S])}return d}function p2(a){Uu(a)}function m2(a){console.error(a)}function g2(a){Uu(a)}function lp(a,o){try{var d=a.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function y2(a,o,d){try{var p=a.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function r0(a,o,d){return d=jt(d),d.tag=3,d.payload={element:null},d.callback=function(){lp(a,o)},d}function v2(a){return a=jt(a),a.tag=3,a}function w2(a,o,d,p){var S=d.type.getDerivedStateFromError;if(typeof S=="function"){var k=p.value;a.payload=function(){return S(k)},a.callback=function(){y2(o,d,p)}}var Z=d.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(a.callback=function(){y2(o,d,p),typeof S!="function"&&(Yl===null?Yl=new Set([this]):Yl.add(this));var _e=p.stack;this.componentDidCatch(p.value,{componentStack:_e!==null?_e:""})})}function aR(a,o,d,p,S){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=d.alternate,o!==null&&yo(o,d,S,!0),d=ar.current,d!==null){switch(d.tag){case 31:case 13:return Sn===null?bp():d.alternate===null&&Lr===0&&(Lr=3),d.flags&=-257,d.flags|=65536,d.lanes=S,p===Oe?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([p]):o.add(p),N0(a,p,S)),!1;case 22:return d.flags|=65536,p===Oe?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([p]):d.add(p)),N0(a,p,S)),!1}throw Error(r(435,d.tag))}return N0(a,p,S),bp(),!1}if(dn)return o=ar.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=S,p!==Os&&(a=Error(r(422),{cause:p}),ql(ls(a,d)))):(p!==Os&&(o=Error(r(423),{cause:p}),ql(ls(o,d))),a=a.current.alternate,a.flags|=65536,S&=-S,a.lanes|=S,p=ls(p,d),S=r0(a.stateNode,p,S),Ur(a,S),Lr!==4&&(Lr=2)),!1;var k=Error(r(520),{cause:p});if(k=ls(k,d),jd===null?jd=[k]:jd.push(k),Lr!==4&&(Lr=2),o===null)return!0;p=ls(p,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,a=S&-S,d.lanes|=a,a=r0(d.stateNode,p,a),Ur(d,a),!1;case 1:if(o=d.type,k=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Yl===null||!Yl.has(k))))return d.flags|=65536,S&=-S,d.lanes|=S,S=v2(S),w2(S,a,d,p),Ur(d,S),!1}d=d.return}while(d!==null);return!1}var i0=Error(r(461)),Wr=!1;function Ci(a,o,d,p){o.child=a===null?Zt(o,null,d,p):Xn(o,a.child,d,p)}function b2(a,o,d,p,S){d=d.render;var k=o.ref;if("ref"in p){var Z={};for(var _e in p)_e!=="ref"&&(Z[_e]=p[_e])}else Z=p;return vo(o),p=Ed(a,o,d,Z,k,S),_e=Td(),a!==null&&!Wr?(Cd(a,o,S),al(a,o,S)):(dn&&_e&&_d(o),o.flags|=1,Ci(a,o,p,S),o.child)}function _2(a,o,d,p,S){if(a===null){var k=d.type;return typeof k=="function"&&!qc(k)&&k.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=k,S2(a,o,k,p,S)):(a=Ul(d.type,null,p,o,o.mode,S),a.ref=o.ref,a.return=o,o.child=a)}if(k=a.child,!d0(a,S)){var Z=k.memoizedProps;if(d=d.compare,d=d!==null?d:La,d(Z,p)&&a.ref===o.ref)return al(a,o,S)}return o.flags|=1,a=os(k,p),a.ref=o.ref,a.return=o,o.child=a}function S2(a,o,d,p,S){if(a!==null){var k=a.memoizedProps;if(La(k,p)&&a.ref===o.ref)if(Wr=!1,o.pendingProps=p=k,d0(a,S))(a.flags&131072)!==0&&(Wr=!0);else return o.lanes=a.lanes,al(a,o,S)}return s0(a,o,d,p,S)}function x2(a,o,d,p){var S=p.children,k=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(k=k!==null?k.baseLanes|d:d,a!==null){for(p=o.child=a.child,S=0;p!==null;)S=S|p.lanes|p.childLanes,p=p.sibling;p=S&~k}else p=0,o.child=null;return A2(a,o,k,d,p)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Ae(o,k!==null?k.cachePool:null),k!==null?sr(o,k):Cn(),Rr(o);else return p=o.lanes=536870912,A2(a,o,k!==null?k.baseLanes|d:d,d,p)}else k!==null?(Ae(o,k.cachePool),sr(o,k),kr(),o.memoizedState=null):(a!==null&&Ae(o,null),Cn(),kr());return Ci(a,o,S,d),o.child}function Md(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function A2(a,o,d,p,S){var k=xe();return k=k===null?null:{parent:Sr._currentValue,pool:k},o.memoizedState={baseLanes:d,cachePool:k},a!==null&&Ae(o,null),Cn(),Rr(o),a!==null&&yo(a,o,p,!0),o.childLanes=S,null}function up(a,o){return o=fp({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function E2(a,o,d){return Xn(o,a.child,null,d),a=up(o,o.pendingProps),a.flags|=2,Dn(o),o.memoizedState=null,a}function oR(a,o,d){var p=o.pendingProps,S=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(dn){if(p.mode==="hidden")return a=up(o,p),o.lanes=536870912,Md(null,a);if(Ln(o),(a=Yn)?(a=U_(a,dr),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:ho!==null?{id:fs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},d=jc(a),d.return=o,o.child=d,ni=o,Yn=null)):a=null,a===null)throw po(o);return o.lanes=536870912,null}return up(o,p)}var k=a.memoizedState;if(k!==null){var Z=k.dehydrated;if(Ln(o),S)if(o.flags&256)o.flags&=-257,o=E2(a,o,d);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(r(558));else if(Wr||yo(a,o,d,!1),S=(d&a.childLanes)!==0,Wr||S){if(p=Zn,p!==null&&(Z=Hi(p,d),Z!==0&&Z!==k.retryLane))throw k.retryLane=Z,Da(a,Z),ws(p,a,Z),i0;bp(),o=E2(a,o,d)}else a=k.treeContext,Yn=fa(Z.nextSibling),ni=o,dn=!0,Ei=null,dr=!1,a!==null&&Qh(o,a),o=up(o,p),o.flags|=4096;return o}return a=os(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function cp(a,o){var d=o.ref;if(d===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(o.flags|=4194816)}}function s0(a,o,d,p,S){return vo(o),d=Ed(a,o,d,p,void 0,S),p=Td(),a!==null&&!Wr?(Cd(a,o,S),al(a,o,S)):(dn&&p&&_d(o),o.flags|=1,Ci(a,o,d,S),o.child)}function T2(a,o,d,p,S,k){return vo(o),o.updateQueue=null,d=Fa(o,p,d,S),Yc(a),p=Td(),a!==null&&!Wr?(Cd(a,o,k),al(a,o,k)):(dn&&p&&_d(o),o.flags|=1,Ci(a,o,d,k),o.child)}function C2(a,o,d,p,S){if(vo(o),o.stateNode===null){var k=ti,Z=d.contextType;typeof Z=="object"&&Z!==null&&(k=ii(Z)),k=new d(p,k),o.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=n0,o.stateNode=k,k._reactInternals=o,k=o.stateNode,k.props=p,k.state=o.memoizedState,k.refs={},dt(o),Z=d.contextType,k.context=typeof Z=="object"&&Z!==null?ii(Z):ti,k.state=o.memoizedState,Z=d.getDerivedStateFromProps,typeof Z=="function"&&(t0(o,d,Z,p),k.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(Z=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),Z!==k.state&&n0.enqueueReplaceState(k,k.state,null),Cr(o,p,k,S),Gn(),k.state=o.memoizedState),typeof k.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){k=o.stateNode;var _e=o.memoizedProps,Ie=Ku(d,_e);k.props=Ie;var Ge=k.context,Xe=d.contextType;Z=ti,typeof Xe=="object"&&Xe!==null&&(Z=ii(Xe));var tt=d.getDerivedStateFromProps;Xe=typeof tt=="function"||typeof k.getSnapshotBeforeUpdate=="function",_e=o.pendingProps!==_e,Xe||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(_e||Ge!==Z)&&h2(o,k,p,Z),gt=!1;var $e=o.memoizedState;k.state=$e,Cr(o,p,k,S),Gn(),Ge=o.memoizedState,_e||$e!==Ge||gt?(typeof tt=="function"&&(t0(o,d,tt,p),Ge=o.memoizedState),(Ie=gt||d2(o,d,Ie,p,$e,Ge,Z))?(Xe||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=Ge),k.props=p,k.state=Ge,k.context=Z,p=Ie):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{k=o.stateNode,ir(a,o),Z=o.memoizedProps,Xe=Ku(d,Z),k.props=Xe,tt=o.pendingProps,$e=k.context,Ge=d.contextType,Ie=ti,typeof Ge=="object"&&Ge!==null&&(Ie=ii(Ge)),_e=d.getDerivedStateFromProps,(Ge=typeof _e=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Z!==tt||$e!==Ie)&&h2(o,k,p,Ie),gt=!1,$e=o.memoizedState,k.state=$e,Cr(o,p,k,S),Gn();var We=o.memoizedState;Z!==tt||$e!==We||gt||a!==null&&a.dependencies!==null&&$c(a.dependencies)?(typeof _e=="function"&&(t0(o,d,_e,p),We=o.memoizedState),(Xe=gt||d2(o,d,Xe,p,$e,We,Ie)||a!==null&&a.dependencies!==null&&$c(a.dependencies))?(Ge||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(p,We,Ie),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(p,We,Ie)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||Z===a.memoizedProps&&$e===a.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Z===a.memoizedProps&&$e===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=We),k.props=p,k.state=We,k.context=Ie,p=Xe):(typeof k.componentDidUpdate!="function"||Z===a.memoizedProps&&$e===a.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Z===a.memoizedProps&&$e===a.memoizedState||(o.flags|=1024),p=!1)}return k=p,cp(a,o),p=(o.flags&128)!==0,k||p?(k=o.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:k.render(),o.flags|=1,a!==null&&p?(o.child=Xn(o,a.child,null,S),o.child=Xn(o,null,d,S)):Ci(a,o,d,S),o.memoizedState=k.state,a=o.child):a=al(a,o,S),a}function N2(a,o,d,p){return tl(),o.flags|=256,Ci(a,o,d,p),o.child}var a0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function o0(a){return{baseLanes:a,cachePool:Te()}}function l0(a,o,d){return a=a!==null?a.childLanes&~d:0,o&&(a|=Us),a}function R2(a,o,d){var p=o.pendingProps,S=!1,k=(o.flags&128)!==0,Z;if((Z=k)||(Z=a!==null&&a.memoizedState===null?!1:(wn.current&2)!==0),Z&&(S=!0,o.flags&=-129),Z=(o.flags&32)!==0,o.flags&=-33,a===null){if(dn){if(S?xr(o):kr(),(a=Yn)?(a=U_(a,dr),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:ho!==null?{id:fs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},d=jc(a),d.return=o,o.child=d,ni=o,Yn=null)):a=null,a===null)throw po(o);return G0(a)?o.lanes=32:o.lanes=536870912,null}var _e=p.children;return p=p.fallback,S?(kr(),S=o.mode,_e=fp({mode:"hidden",children:_e},S),p=fo(p,S,d,null),_e.return=o,p.return=o,_e.sibling=p,o.child=_e,p=o.child,p.memoizedState=o0(d),p.childLanes=l0(a,Z,d),o.memoizedState=a0,Md(null,p)):(xr(o),u0(o,_e))}var Ie=a.memoizedState;if(Ie!==null&&(_e=Ie.dehydrated,_e!==null)){if(k)o.flags&256?(xr(o),o.flags&=-257,o=c0(a,o,d)):o.memoizedState!==null?(kr(),o.child=a.child,o.flags|=128,o=null):(kr(),_e=p.fallback,S=o.mode,p=fp({mode:"visible",children:p.children},S),_e=fo(_e,S,d,null),_e.flags|=2,p.return=o,_e.return=o,p.sibling=_e,o.child=p,Xn(o,a.child,null,d),p=o.child,p.memoizedState=o0(d),p.childLanes=l0(a,Z,d),o.memoizedState=a0,o=Md(null,p));else if(xr(o),G0(_e)){if(Z=_e.nextSibling&&_e.nextSibling.dataset,Z)var Ge=Z.dgst;Z=Ge,p=Error(r(419)),p.stack="",p.digest=Z,ql({value:p,source:null,stack:null}),o=c0(a,o,d)}else if(Wr||yo(a,o,d,!1),Z=(d&a.childLanes)!==0,Wr||Z){if(Z=Zn,Z!==null&&(p=Hi(Z,d),p!==0&&p!==Ie.retryLane))throw Ie.retryLane=p,Da(a,p),ws(Z,a,p),i0;H0(_e)||bp(),o=c0(a,o,d)}else H0(_e)?(o.flags|=192,o.child=a.child,o=null):(a=Ie.treeContext,Yn=fa(_e.nextSibling),ni=o,dn=!0,Ei=null,dr=!1,a!==null&&Qh(o,a),o=u0(o,p.children),o.flags|=4096);return o}return S?(kr(),_e=p.fallback,S=o.mode,Ie=a.child,Ge=Ie.sibling,p=os(Ie,{mode:"hidden",children:p.children}),p.subtreeFlags=Ie.subtreeFlags&65011712,Ge!==null?_e=os(Ge,_e):(_e=fo(_e,S,d,null),_e.flags|=2),_e.return=o,p.return=o,p.sibling=_e,o.child=p,Md(null,p),p=o.child,_e=a.child.memoizedState,_e===null?_e=o0(d):(S=_e.cachePool,S!==null?(Ie=Sr._currentValue,S=S.parent!==Ie?{parent:Ie,pool:Ie}:S):S=Te(),_e={baseLanes:_e.baseLanes|d,cachePool:S}),p.memoizedState=_e,p.childLanes=l0(a,Z,d),o.memoizedState=a0,Md(a.child,p)):(xr(o),d=a.child,a=d.sibling,d=os(d,{mode:"visible",children:p.children}),d.return=o,d.sibling=null,a!==null&&(Z=o.deletions,Z===null?(o.deletions=[a],o.flags|=16):Z.push(a)),o.child=d,o.memoizedState=null,d)}function u0(a,o){return o=fp({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function fp(a,o){return a=mi(22,a,null,o),a.lanes=0,a}function c0(a,o,d){return Xn(o,a.child,null,d),a=u0(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function k2(a,o,d){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),jl(a.return,o,d)}function f0(a,o,d,p,S,k){var Z=a.memoizedState;Z===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:S,treeForkCount:k}:(Z.isBackwards=o,Z.rendering=null,Z.renderingStartTime=0,Z.last=p,Z.tail=d,Z.tailMode=S,Z.treeForkCount=k)}function I2(a,o,d){var p=o.pendingProps,S=p.revealOrder,k=p.tail;p=p.children;var Z=wn.current,_e=(Z&2)!==0;if(_e?(Z=Z&1|2,o.flags|=128):Z&=1,$(wn,Z),Ci(a,o,p,d),p=dn?Hu:0,!_e&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&k2(a,d,o);else if(a.tag===19)k2(a,d,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(S){case"forwards":for(d=o.child,S=null;d!==null;)a=d.alternate,a!==null&&yi(a)===null&&(S=d),d=d.sibling;d=S,d===null?(S=o.child,o.child=null):(S=d.sibling,d.sibling=null),f0(o,!1,S,d,k,p);break;case"backwards":case"unstable_legacy-backwards":for(d=null,S=o.child,o.child=null;S!==null;){if(a=S.alternate,a!==null&&yi(a)===null){o.child=S;break}a=S.sibling,S.sibling=d,d=S,S=a}f0(o,!0,d,null,k,p);break;case"together":f0(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function al(a,o,d){if(a!==null&&(o.dependencies=a.dependencies),Jl|=o.lanes,(d&o.childLanes)===0)if(a!==null){if(yo(a,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,d=os(a,a.pendingProps),o.child=d,d.return=o;a.sibling!==null;)a=a.sibling,d=d.sibling=os(a,a.pendingProps),d.return=o;d.sibling=null}return o.child}function d0(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&$c(a)))}function lR(a,o,d){switch(o.tag){case 3:j(o,o.stateNode.containerInfo),go(o,Sr,a.memoizedState.cache),tl();break;case 27:case 5:fe(o);break;case 4:j(o,o.stateNode.containerInfo);break;case 10:go(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ln(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(xr(o),o.flags|=128,null):(d&o.child.childLanes)!==0?R2(a,o,d):(xr(o),a=al(a,o,d),a!==null?a.sibling:null);xr(o);break;case 19:var S=(a.flags&128)!==0;if(p=(d&o.childLanes)!==0,p||(yo(a,o,d,!1),p=(d&o.childLanes)!==0),S){if(p)return I2(a,o,d);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),$(wn,wn.current),p)break;return null;case 22:return o.lanes=0,x2(a,o,d,o.pendingProps);case 24:go(o,Sr,a.memoizedState.cache)}return al(a,o,d)}function L2(a,o,d){if(a!==null)if(a.memoizedProps!==o.pendingProps)Wr=!0;else{if(!d0(a,d)&&(o.flags&128)===0)return Wr=!1,lR(a,o,d);Wr=(a.flags&131072)!==0}else Wr=!1,dn&&(o.flags&1048576)!==0&&Zh(o,Hu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(a=je(o.elementType),o.type=a,typeof a=="function")qc(a)?(p=Ku(a,p),o.tag=1,o=C2(null,o,a,p,d)):(o.tag=0,o=s0(null,o,a,p,d));else{if(a!=null){var S=a.$$typeof;if(S===A){o.tag=11,o=b2(null,o,a,p,d);break e}else if(S===V){o.tag=14,o=_2(null,o,a,p,d);break e}}throw o=M(a)||a,Error(r(306,o,""))}}return o;case 0:return s0(a,o,o.type,o.pendingProps,d);case 1:return p=o.type,S=Ku(p,o.pendingProps),C2(a,o,p,S,d);case 3:e:{if(j(o,o.stateNode.containerInfo),a===null)throw Error(r(387));p=o.pendingProps;var k=o.memoizedState;S=k.element,ir(a,o),Cr(o,p,null,d);var Z=o.memoizedState;if(p=Z.cache,go(o,Sr,p),p!==k.cache&&nl(o,[Sr],d,!0),Gn(),p=Z.element,k.isDehydrated)if(k={element:p,isDehydrated:!1,cache:Z.cache},o.updateQueue.baseState=k,o.memoizedState=k,o.flags&256){o=N2(a,o,p,d);break e}else if(p!==S){S=ls(Error(r(424)),o),ql(S),o=N2(a,o,p,d);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Yn=fa(a.firstChild),ni=o,dn=!0,Ei=null,dr=!0,d=Zt(o,null,p,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(tl(),p===S){o=al(a,o,d);break e}Ci(a,o,p,d)}o=o.child}return o;case 26:return cp(a,o),a===null?(d=H_(o.type,null,o.pendingProps,null))?o.memoizedState=d:dn||(d=o.type,a=o.pendingProps,p=Cp(ae.current).createElement(d),p[On]=o,p[nr]=a,Ni(p,d,a),yr(p),o.stateNode=p):o.memoizedState=H_(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return fe(o),a===null&&dn&&(p=o.stateNode=q_(o.type,o.pendingProps,ae.current),ni=o,dr=!0,S=Yn,eu(o.type)?(V0=S,Yn=fa(p.firstChild)):Yn=S),Ci(a,o,o.pendingProps.children,d),cp(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&dn&&((S=p=Yn)&&(p=FR(p,o.type,o.pendingProps,dr),p!==null?(o.stateNode=p,ni=o,Yn=fa(p.firstChild),dr=!1,S=!0):S=!1),S||po(o)),fe(o),S=o.type,k=o.pendingProps,Z=a!==null?a.memoizedProps:null,p=k.children,q0(S,k)?p=null:Z!==null&&q0(S,Z)&&(o.flags|=32),o.memoizedState!==null&&(S=Ed(a,o,Wg,null,null,d),Jd._currentValue=S),cp(a,o),Ci(a,o,p,d),o.child;case 6:return a===null&&dn&&((a=d=Yn)&&(d=BR(d,o.pendingProps,dr),d!==null?(o.stateNode=d,ni=o,Yn=null,a=!0):a=!1),a||po(o)),null;case 13:return R2(a,o,d);case 4:return j(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=Xn(o,null,p,d):Ci(a,o,p,d),o.child;case 11:return b2(a,o,o.type,o.pendingProps,d);case 7:return Ci(a,o,o.pendingProps,d),o.child;case 8:return Ci(a,o,o.pendingProps.children,d),o.child;case 12:return Ci(a,o,o.pendingProps.children,d),o.child;case 10:return p=o.pendingProps,go(o,o.type,p.value),Ci(a,o,p.children,d),o.child;case 9:return S=o.type._context,p=o.pendingProps.children,vo(o),S=ii(S),p=p(S),o.flags|=1,Ci(a,o,p,d),o.child;case 14:return _2(a,o,o.type,o.pendingProps,d);case 15:return S2(a,o,o.type,o.pendingProps,d);case 19:return I2(a,o,d);case 31:return oR(a,o,d);case 22:return x2(a,o,d,o.pendingProps);case 24:return vo(o),p=ii(Sr),a===null?(S=xe(),S===null&&(S=Zn,k=zl(),S.pooledCache=k,k.refCount++,k!==null&&(S.pooledCacheLanes|=d),S=k),o.memoizedState={parent:p,cache:S},dt(o),go(o,Sr,S)):((a.lanes&d)!==0&&(ir(a,o),Cr(o,null,null,d),Gn()),S=a.memoizedState,k=o.memoizedState,S.parent!==p?(S={parent:p,cache:p},o.memoizedState=S,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=S),go(o,Sr,p)):(p=k.cache,go(o,Sr,p),p!==S.cache&&nl(o,[Sr],d,!0))),Ci(a,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ol(a){a.flags|=4}function h0(a,o,d,p,S){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(S&335544128)===S)if(a.stateNode.complete)a.flags|=8192;else if(s_())a.flags|=8192;else throw Je=Oe,ze}else a.flags&=-16777217}function P2(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!K_(o))if(s_())a.flags|=8192;else throw Je=Oe,ze}function dp(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Ws():536870912,a.lanes|=o,lf|=o)}function Od(a,o){if(!dn)switch(a.tailMode){case"hidden":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function or(a){var o=a.alternate!==null&&a.alternate.child===a.child,d=0,p=0;if(o)for(var S=a.child;S!==null;)d|=S.lanes|S.childLanes,p|=S.subtreeFlags&65011712,p|=S.flags&65011712,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)d|=S.lanes|S.childLanes,p|=S.subtreeFlags,p|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=p,a.childLanes=d,o}function uR(a,o,d){var p=o.pendingProps;switch(Gc(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(o),null;case 1:return or(o),null;case 3:return d=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),hs(Sr),de(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(ri(o)?ol(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xd())),or(o),null;case 26:var S=o.type,k=o.memoizedState;return a===null?(ol(o),k!==null?(or(o),P2(o,k)):(or(o),h0(o,S,null,p,d))):k?k!==a.memoizedState?(ol(o),or(o),P2(o,k)):(or(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&ol(o),or(o),h0(o,S,a,p,d)),null;case 27:if(re(o),d=ae.current,S=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&ol(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return or(o),null}a=ee.current,ri(o)?Sd(o):(a=q_(S,p,d),o.stateNode=a,ol(o))}return or(o),null;case 5:if(re(o),S=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&ol(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return or(o),null}if(k=ee.current,ri(o))Sd(o);else{var Z=Cp(ae.current);switch(k){case 1:k=Z.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:k=Z.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":k=Z.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":k=Z.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":k=Z.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof p.is=="string"?Z.createElement("select",{is:p.is}):Z.createElement("select"),p.multiple?k.multiple=!0:p.size&&(k.size=p.size);break;default:k=typeof p.is=="string"?Z.createElement(S,{is:p.is}):Z.createElement(S)}}k[On]=o,k[nr]=p;e:for(Z=o.child;Z!==null;){if(Z.tag===5||Z.tag===6)k.appendChild(Z.stateNode);else if(Z.tag!==4&&Z.tag!==27&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===o)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===o)break e;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}o.stateNode=k;e:switch(Ni(k,S,p),S){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&ol(o)}}return or(o),h0(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,d),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&ol(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(r(166));if(a=ae.current,ri(o)){if(a=o.stateNode,d=o.memoizedProps,p=null,S=ni,S!==null)switch(S.tag){case 27:case 5:p=S.memoizedProps}a[On]=o,a=!!(a.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||R_(a.nodeValue,d)),a||po(o,!0)}else a=Cp(a).createTextNode(p),a[On]=o,o.stateNode=a}return or(o),null;case 31:if(d=o.memoizedState,a===null||a.memoizedState!==null){if(p=ri(o),d!==null){if(a===null){if(!p)throw Error(r(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[On]=o}else tl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;or(o),a=!1}else d=xd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),a=!0;if(!a)return o.flags&256?(Dn(o),o):(Dn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return or(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(S=ri(o),p!==null&&p.dehydrated!==null){if(a===null){if(!S)throw Error(r(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[On]=o}else tl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;or(o),S=!1}else S=xd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=S),S=!0;if(!S)return o.flags&256?(Dn(o),o):(Dn(o),null)}return Dn(o),(o.flags&128)!==0?(o.lanes=d,o):(d=p!==null,a=a!==null&&a.memoizedState!==null,d&&(p=o.child,S=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(S=p.alternate.memoizedState.cachePool.pool),k=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(k=p.memoizedState.cachePool.pool),k!==S&&(p.flags|=2048)),d!==a&&d&&(o.child.flags|=8192),dp(o,o.updateQueue),or(o),null);case 4:return de(),a===null&&O0(o.stateNode.containerInfo),or(o),null;case 10:return hs(o.type),or(o),null;case 19:if(L(wn),p=o.memoizedState,p===null)return or(o),null;if(S=(o.flags&128)!==0,k=p.rendering,k===null)if(S)Od(p,!1);else{if(Lr!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(k=yi(a),k!==null){for(o.flags|=128,Od(p,!1),a=k.updateQueue,o.updateQueue=a,dp(o,a),o.subtreeFlags=0,a=d,d=o.child;d!==null;)ju(d,a),d=d.sibling;return $(wn,wn.current&1|2),dn&&Qi(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&De()>yp&&(o.flags|=128,S=!0,Od(p,!1),o.lanes=4194304)}else{if(!S)if(a=yi(k),a!==null){if(o.flags|=128,S=!0,a=a.updateQueue,o.updateQueue=a,dp(o,a),Od(p,!0),p.tail===null&&p.tailMode==="hidden"&&!k.alternate&&!dn)return or(o),null}else 2*De()-p.renderingStartTime>yp&&d!==536870912&&(o.flags|=128,S=!0,Od(p,!1),o.lanes=4194304);p.isBackwards?(k.sibling=o.child,o.child=k):(a=p.last,a!==null?a.sibling=k:o.child=k,p.last=k)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=De(),a.sibling=null,d=wn.current,$(wn,S?d&1|2:d&1),dn&&Qi(o,p.treeForkCount),a):(or(o),null);case 22:case 23:return Dn(o),Fr(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(d&536870912)!==0&&(o.flags&128)===0&&(or(o),o.subtreeFlags&6&&(o.flags|=8192)):or(o),d=o.updateQueue,d!==null&&dp(o,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==d&&(o.flags|=2048),a!==null&&L(ve),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),hs(Sr),or(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function cR(a,o){switch(Gc(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return hs(Sr),de(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return re(o),null;case 31:if(o.memoizedState!==null){if(Dn(o),o.alternate===null)throw Error(r(340));tl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(Dn(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));tl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return L(wn),null;case 4:return de(),null;case 10:return hs(o.type),null;case 22:case 23:return Dn(o),Fr(),a!==null&&L(ve),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return hs(Sr),null;case 25:return null;default:return null}}function M2(a,o){switch(Gc(o),o.tag){case 3:hs(Sr),de();break;case 26:case 27:case 5:re(o);break;case 4:de();break;case 31:o.memoizedState!==null&&Dn(o);break;case 13:Dn(o);break;case 19:L(wn);break;case 10:hs(o.type);break;case 22:case 23:Dn(o),Fr(),a!==null&&L(ve);break;case 24:hs(Sr)}}function Dd(a,o){try{var d=o.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var S=p.next;d=S;do{if((d.tag&a)===a){p=void 0;var k=d.create,Z=d.inst;p=k(),Z.destroy=p}d=d.next}while(d!==S)}}catch(_e){Fn(o,o.return,_e)}}function Wl(a,o,d){try{var p=o.updateQueue,S=p!==null?p.lastEffect:null;if(S!==null){var k=S.next;p=k;do{if((p.tag&a)===a){var Z=p.inst,_e=Z.destroy;if(_e!==void 0){Z.destroy=void 0,S=o;var Ie=d,Ge=_e;try{Ge()}catch(Xe){Fn(S,Ie,Xe)}}}p=p.next}while(p!==k)}}catch(Xe){Fn(o,o.return,Xe)}}function O2(a){var o=a.updateQueue;if(o!==null){var d=a.stateNode;try{Nr(o,d)}catch(p){Fn(a,a.return,p)}}}function D2(a,o,d){d.props=Ku(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(p){Fn(a,o,p)}}function Ud(a,o){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof d=="function"?a.refCleanup=d(p):d.current=p}}catch(S){Fn(a,o,S)}}function xo(a,o){var d=a.ref,p=a.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(S){Fn(a,o,S)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(S){Fn(a,o,S)}else d.current=null}function U2(a){var o=a.type,d=a.memoizedProps,p=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break e;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(S){Fn(a,a.return,S)}}function p0(a,o,d){try{var p=a.stateNode;LR(p,a.type,d,o),p[nr]=o}catch(S){Fn(a,a.return,S)}}function F2(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&eu(a.type)||a.tag===4}function m0(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||F2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&eu(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function g0(a,o,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,o):(o=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,o.appendChild(a),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=ks));else if(p!==4&&(p===27&&eu(a.type)&&(d=a.stateNode,o=null),a=a.child,a!==null))for(g0(a,o,d),a=a.sibling;a!==null;)g0(a,o,d),a=a.sibling}function hp(a,o,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?d.insertBefore(a,o):d.appendChild(a);else if(p!==4&&(p===27&&eu(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(hp(a,o,d),a=a.sibling;a!==null;)hp(a,o,d),a=a.sibling}function B2(a){var o=a.stateNode,d=a.memoizedProps;try{for(var p=a.type,S=o.attributes;S.length;)o.removeAttributeNode(S[0]);Ni(o,p,d),o[On]=a,o[nr]=d}catch(k){Fn(a,a.return,k)}}var ll=!1,Kr=!1,y0=!1,q2=typeof WeakSet=="function"?WeakSet:Set,vi=null;function fR(a,o){if(a=a.containerInfo,F0=Mp,a=Ma(a),aa(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var S=p.anchorOffset,k=p.focusNode;p=p.focusOffset;try{d.nodeType,k.nodeType}catch{d=null;break e}var Z=0,_e=-1,Ie=-1,Ge=0,Xe=0,tt=a,$e=null;t:for(;;){for(var We;tt!==d||S!==0&&tt.nodeType!==3||(_e=Z+S),tt!==k||p!==0&&tt.nodeType!==3||(Ie=Z+p),tt.nodeType===3&&(Z+=tt.nodeValue.length),(We=tt.firstChild)!==null;)$e=tt,tt=We;for(;;){if(tt===a)break t;if($e===d&&++Ge===S&&(_e=Z),$e===k&&++Xe===p&&(Ie=Z),(We=tt.nextSibling)!==null)break;tt=$e,$e=tt.parentNode}tt=We}d=_e===-1||Ie===-1?null:{start:_e,end:Ie}}else d=null}d=d||{start:0,end:0}}else d=null;for(B0={focusedElem:a,selectionRange:d},Mp=!1,vi=o;vi!==null;)if(o=vi,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,vi=a;else for(;vi!==null;){switch(o=vi,k=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(d=0;d<a.length;d++)S=a[d],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&k!==null){a=void 0,d=o,S=k.memoizedProps,k=k.memoizedState,p=d.stateNode;try{var bt=Ku(d.type,S);a=p.getSnapshotBeforeUpdate(bt,k),p.__reactInternalSnapshotBeforeUpdate=a}catch(Gt){Fn(d,d.return,Gt)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,d=a.nodeType,d===9)z0(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":z0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,vi=a;break}vi=o.return}}function j2(a,o,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:cl(a,d),p&4&&Dd(5,d);break;case 1:if(cl(a,d),p&4)if(a=d.stateNode,o===null)try{a.componentDidMount()}catch(Z){Fn(d,d.return,Z)}else{var S=Ku(d.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(S,o,a.__reactInternalSnapshotBeforeUpdate)}catch(Z){Fn(d,d.return,Z)}}p&64&&O2(d),p&512&&Ud(d,d.return);break;case 3:if(cl(a,d),p&64&&(a=d.updateQueue,a!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=d.child.stateNode;break;case 1:o=d.child.stateNode}try{Nr(a,o)}catch(Z){Fn(d,d.return,Z)}}break;case 27:o===null&&p&4&&B2(d);case 26:case 5:cl(a,d),o===null&&p&4&&U2(d),p&512&&Ud(d,d.return);break;case 12:cl(a,d);break;case 31:cl(a,d),p&4&&G2(a,d);break;case 13:cl(a,d),p&4&&V2(a,d),p&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=bR.bind(null,d),qR(a,d))));break;case 22:if(p=d.memoizedState!==null||ll,!p){o=o!==null&&o.memoizedState!==null||Kr,S=ll;var k=Kr;ll=p,(Kr=o)&&!k?fl(a,d,(d.subtreeFlags&8772)!==0):cl(a,d),ll=S,Kr=k}break;case 30:break;default:cl(a,d)}}function z2(a){var o=a.alternate;o!==null&&(a.alternate=null,z2(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&io(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var mr=null,ms=!1;function ul(a,o,d){for(d=d.child;d!==null;)H2(a,o,d),d=d.sibling}function H2(a,o,d){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Rt,d)}catch{}switch(d.tag){case 26:Kr||xo(d,o),ul(a,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Kr||xo(d,o);var p=mr,S=ms;eu(d.type)&&(mr=d.stateNode,ms=!1),ul(a,o,d),$d(d.stateNode),mr=p,ms=S;break;case 5:Kr||xo(d,o);case 6:if(p=mr,S=ms,mr=null,ul(a,o,d),mr=p,ms=S,mr!==null)if(ms)try{(mr.nodeType===9?mr.body:mr.nodeName==="HTML"?mr.ownerDocument.body:mr).removeChild(d.stateNode)}catch(k){Fn(d,o,k)}else try{mr.removeChild(d.stateNode)}catch(k){Fn(d,o,k)}break;case 18:mr!==null&&(ms?(a=mr,O_(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),gf(a)):O_(mr,d.stateNode));break;case 4:p=mr,S=ms,mr=d.stateNode.containerInfo,ms=!0,ul(a,o,d),mr=p,ms=S;break;case 0:case 11:case 14:case 15:Wl(2,d,o),Kr||Wl(4,d,o),ul(a,o,d);break;case 1:Kr||(xo(d,o),p=d.stateNode,typeof p.componentWillUnmount=="function"&&D2(d,o,p)),ul(a,o,d);break;case 21:ul(a,o,d);break;case 22:Kr=(p=Kr)||d.memoizedState!==null,ul(a,o,d),Kr=p;break;default:ul(a,o,d)}}function G2(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{gf(a)}catch(d){Fn(o,o.return,d)}}}function V2(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{gf(a)}catch(d){Fn(o,o.return,d)}}function dR(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new q2),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new q2),o;default:throw Error(r(435,a.tag))}}function pp(a,o){var d=dR(a);o.forEach(function(p){if(!d.has(p)){d.add(p);var S=_R.bind(null,a,p);p.then(S,S)}})}function gs(a,o){var d=o.deletions;if(d!==null)for(var p=0;p<d.length;p++){var S=d[p],k=a,Z=o,_e=Z;e:for(;_e!==null;){switch(_e.tag){case 27:if(eu(_e.type)){mr=_e.stateNode,ms=!1;break e}break;case 5:mr=_e.stateNode,ms=!1;break e;case 3:case 4:mr=_e.stateNode.containerInfo,ms=!0;break e}_e=_e.return}if(mr===null)throw Error(r(160));H2(k,Z,S),mr=null,ms=!1,k=S.alternate,k!==null&&(k.return=null),S.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)$2(o,a),o=o.sibling}var za=null;function $2(a,o){var d=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:gs(o,a),ys(a),p&4&&(Wl(3,a,a.return),Dd(3,a),Wl(5,a,a.return));break;case 1:gs(o,a),ys(a),p&512&&(Kr||d===null||xo(d,d.return)),p&64&&ll&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var S=za;if(gs(o,a),ys(a),p&512&&(Kr||d===null||xo(d,d.return)),p&4){var k=d!==null?d.memoizedState:null;if(p=a.memoizedState,d===null)if(p===null)if(a.stateNode===null){e:{p=a.type,d=a.memoizedProps,S=S.ownerDocument||S;t:switch(p){case"title":k=S.getElementsByTagName("title")[0],(!k||k[Es]||k[On]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=S.createElement(p),S.head.insertBefore(k,S.querySelector("head > title"))),Ni(k,p,d),k[On]=a,yr(k),p=k;break e;case"link":var Z=$_("link","href",S).get(p+(d.href||""));if(Z){for(var _e=0;_e<Z.length;_e++)if(k=Z[_e],k.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&k.getAttribute("rel")===(d.rel==null?null:d.rel)&&k.getAttribute("title")===(d.title==null?null:d.title)&&k.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){Z.splice(_e,1);break t}}k=S.createElement(p),Ni(k,p,d),S.head.appendChild(k);break;case"meta":if(Z=$_("meta","content",S).get(p+(d.content||""))){for(_e=0;_e<Z.length;_e++)if(k=Z[_e],k.getAttribute("content")===(d.content==null?null:""+d.content)&&k.getAttribute("name")===(d.name==null?null:d.name)&&k.getAttribute("property")===(d.property==null?null:d.property)&&k.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&k.getAttribute("charset")===(d.charSet==null?null:d.charSet)){Z.splice(_e,1);break t}}k=S.createElement(p),Ni(k,p,d),S.head.appendChild(k);break;default:throw Error(r(468,p))}k[On]=a,yr(k),p=k}a.stateNode=p}else W_(S,a.type,a.stateNode);else a.stateNode=V_(S,p,a.memoizedProps);else k!==p?(k===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):k.count--,p===null?W_(S,a.type,a.stateNode):V_(S,p,a.memoizedProps)):p===null&&a.stateNode!==null&&p0(a,a.memoizedProps,d.memoizedProps)}break;case 27:gs(o,a),ys(a),p&512&&(Kr||d===null||xo(d,d.return)),d!==null&&p&4&&p0(a,a.memoizedProps,d.memoizedProps);break;case 5:if(gs(o,a),ys(a),p&512&&(Kr||d===null||xo(d,d.return)),a.flags&32){S=a.stateNode;try{$i(S,"")}catch(bt){Fn(a,a.return,bt)}}p&4&&a.stateNode!=null&&(S=a.memoizedProps,p0(a,S,d!==null?d.memoizedProps:S)),p&1024&&(y0=!0);break;case 6:if(gs(o,a),ys(a),p&4){if(a.stateNode===null)throw Error(r(162));p=a.memoizedProps,d=a.stateNode;try{d.nodeValue=p}catch(bt){Fn(a,a.return,bt)}}break;case 3:if(kp=null,S=za,za=Np(o.containerInfo),gs(o,a),za=S,ys(a),p&4&&d!==null&&d.memoizedState.isDehydrated)try{gf(o.containerInfo)}catch(bt){Fn(a,a.return,bt)}y0&&(y0=!1,W2(a));break;case 4:p=za,za=Np(a.stateNode.containerInfo),gs(o,a),ys(a),za=p;break;case 12:gs(o,a),ys(a);break;case 31:gs(o,a),ys(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,pp(a,p)));break;case 13:gs(o,a),ys(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(gp=De()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,pp(a,p)));break;case 22:S=a.memoizedState!==null;var Ie=d!==null&&d.memoizedState!==null,Ge=ll,Xe=Kr;if(ll=Ge||S,Kr=Xe||Ie,gs(o,a),Kr=Xe,ll=Ge,ys(a),p&8192)e:for(o=a.stateNode,o._visibility=S?o._visibility&-2:o._visibility|1,S&&(d===null||Ie||ll||Kr||Ju(a)),d=null,o=a;;){if(o.tag===5||o.tag===26){if(d===null){Ie=d=o;try{if(k=Ie.stateNode,S)Z=k.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{_e=Ie.stateNode;var tt=Ie.memoizedProps.style,$e=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;_e.style.display=$e==null||typeof $e=="boolean"?"":(""+$e).trim()}}catch(bt){Fn(Ie,Ie.return,bt)}}}else if(o.tag===6){if(d===null){Ie=o;try{Ie.stateNode.nodeValue=S?"":Ie.memoizedProps}catch(bt){Fn(Ie,Ie.return,bt)}}}else if(o.tag===18){if(d===null){Ie=o;try{var We=Ie.stateNode;S?D_(We,!0):D_(Ie.stateNode,!1)}catch(bt){Fn(Ie,Ie.return,bt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,pp(a,d))));break;case 19:gs(o,a),ys(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,pp(a,p)));break;case 30:break;case 21:break;default:gs(o,a),ys(a)}}function ys(a){var o=a.flags;if(o&2){try{for(var d,p=a.return;p!==null;){if(F2(p)){d=p;break}p=p.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var S=d.stateNode,k=m0(a);hp(a,k,S);break;case 5:var Z=d.stateNode;d.flags&32&&($i(Z,""),d.flags&=-33);var _e=m0(a);hp(a,_e,Z);break;case 3:case 4:var Ie=d.stateNode.containerInfo,Ge=m0(a);g0(a,Ge,Ie);break;default:throw Error(r(161))}}catch(Xe){Fn(a,a.return,Xe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function W2(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;W2(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function cl(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)j2(a,o.alternate,o),o=o.sibling}function Ju(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Wl(4,o,o.return),Ju(o);break;case 1:xo(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&D2(o,o.return,d),Ju(o);break;case 27:$d(o.stateNode);case 26:case 5:xo(o,o.return),Ju(o);break;case 22:o.memoizedState===null&&Ju(o);break;case 30:Ju(o);break;default:Ju(o)}a=a.sibling}}function fl(a,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,S=a,k=o,Z=k.flags;switch(k.tag){case 0:case 11:case 15:fl(S,k,d),Dd(4,k);break;case 1:if(fl(S,k,d),p=k,S=p.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Ge){Fn(p,p.return,Ge)}if(p=k,S=p.updateQueue,S!==null){var _e=p.stateNode;try{var Ie=S.shared.hiddenCallbacks;if(Ie!==null)for(S.shared.hiddenCallbacks=null,S=0;S<Ie.length;S++)gi(Ie[S],_e)}catch(Ge){Fn(p,p.return,Ge)}}d&&Z&64&&O2(k),Ud(k,k.return);break;case 27:B2(k);case 26:case 5:fl(S,k,d),d&&p===null&&Z&4&&U2(k),Ud(k,k.return);break;case 12:fl(S,k,d);break;case 31:fl(S,k,d),d&&Z&4&&G2(S,k);break;case 13:fl(S,k,d),d&&Z&4&&V2(S,k);break;case 22:k.memoizedState===null&&fl(S,k,d),Ud(k,k.return);break;case 30:break;default:fl(S,k,d)}o=o.sibling}}function v0(a,o){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Gu(d))}function w0(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Gu(a))}function Ha(a,o,d,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)K2(a,o,d,p),o=o.sibling}function K2(a,o,d,p){var S=o.flags;switch(o.tag){case 0:case 11:case 15:Ha(a,o,d,p),S&2048&&Dd(9,o);break;case 1:Ha(a,o,d,p);break;case 3:Ha(a,o,d,p),S&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Gu(a)));break;case 12:if(S&2048){Ha(a,o,d,p),a=o.stateNode;try{var k=o.memoizedProps,Z=k.id,_e=k.onPostCommit;typeof _e=="function"&&_e(Z,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(Ie){Fn(o,o.return,Ie)}}else Ha(a,o,d,p);break;case 31:Ha(a,o,d,p);break;case 13:Ha(a,o,d,p);break;case 23:break;case 22:k=o.stateNode,Z=o.alternate,o.memoizedState!==null?k._visibility&2?Ha(a,o,d,p):Fd(a,o):k._visibility&2?Ha(a,o,d,p):(k._visibility|=2,sf(a,o,d,p,(o.subtreeFlags&10256)!==0||!1)),S&2048&&v0(Z,o);break;case 24:Ha(a,o,d,p),S&2048&&w0(o.alternate,o);break;default:Ha(a,o,d,p)}}function sf(a,o,d,p,S){for(S=S&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var k=a,Z=o,_e=d,Ie=p,Ge=Z.flags;switch(Z.tag){case 0:case 11:case 15:sf(k,Z,_e,Ie,S),Dd(8,Z);break;case 23:break;case 22:var Xe=Z.stateNode;Z.memoizedState!==null?Xe._visibility&2?sf(k,Z,_e,Ie,S):Fd(k,Z):(Xe._visibility|=2,sf(k,Z,_e,Ie,S)),S&&Ge&2048&&v0(Z.alternate,Z);break;case 24:sf(k,Z,_e,Ie,S),S&&Ge&2048&&w0(Z.alternate,Z);break;default:sf(k,Z,_e,Ie,S)}o=o.sibling}}function Fd(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=a,p=o,S=p.flags;switch(p.tag){case 22:Fd(d,p),S&2048&&v0(p.alternate,p);break;case 24:Fd(d,p),S&2048&&w0(p.alternate,p);break;default:Fd(d,p)}o=o.sibling}}var Bd=8192;function af(a,o,d){if(a.subtreeFlags&Bd)for(a=a.child;a!==null;)J2(a,o,d),a=a.sibling}function J2(a,o,d){switch(a.tag){case 26:af(a,o,d),a.flags&Bd&&a.memoizedState!==null&&ZR(d,za,a.memoizedState,a.memoizedProps);break;case 5:af(a,o,d);break;case 3:case 4:var p=za;za=Np(a.stateNode.containerInfo),af(a,o,d),za=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=Bd,Bd=16777216,af(a,o,d),Bd=p):af(a,o,d));break;default:af(a,o,d)}}function Y2(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function qd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var p=o[d];vi=p,Z2(p,a)}Y2(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)X2(a),a=a.sibling}function X2(a){switch(a.tag){case 0:case 11:case 15:qd(a),a.flags&2048&&Wl(9,a,a.return);break;case 3:qd(a);break;case 12:qd(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,mp(a)):qd(a);break;default:qd(a)}}function mp(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var p=o[d];vi=p,Z2(p,a)}Y2(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Wl(8,o,o.return),mp(o);break;case 22:d=o.stateNode,d._visibility&2&&(d._visibility&=-3,mp(o));break;default:mp(o)}a=a.sibling}}function Z2(a,o){for(;vi!==null;){var d=vi;switch(d.tag){case 0:case 11:case 15:Wl(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Gu(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,vi=p;else e:for(d=a;vi!==null;){p=vi;var S=p.sibling,k=p.return;if(z2(p),p===d){vi=null;break e}if(S!==null){S.return=k,vi=S;break e}vi=k}}}var hR={getCacheForType:function(a){var o=ii(Sr),d=o.data.get(a);return d===void 0&&(d=a(),o.data.set(a,d)),d},cacheSignal:function(){return ii(Sr).controller.signal}},pR=typeof WeakMap=="function"?WeakMap:Map,Pn=0,Zn=null,hn=null,mn=0,Un=0,Ds=null,Kl=!1,of=!1,b0=!1,dl=0,Lr=0,Jl=0,Yu=0,_0=0,Us=0,lf=0,jd=null,vs=null,S0=!1,gp=0,Q2=0,yp=1/0,vp=null,Yl=null,ai=0,Xl=null,uf=null,hl=0,x0=0,A0=null,e_=null,zd=0,E0=null;function Fs(){return(Pn&2)!==0&&mn!==0?mn&-mn:se.T!==null?I0():Gr()}function t_(){if(Us===0)if((mn&536870912)===0||dn){var a=Jn;Jn<<=1,(Jn&3932160)===0&&(Jn=262144),Us=a}else Us=536870912;return a=ar.current,a!==null&&(a.flags|=32),Us}function ws(a,o,d){(a===Zn&&(Un===2||Un===9)||a.cancelPendingCommit!==null)&&(cf(a,0),Zl(a,mn,Us,!1)),Mt(a,d),((Pn&2)===0||a!==Zn)&&(a===Zn&&((Pn&2)===0&&(Yu|=d),Lr===4&&Zl(a,mn,Us,!1)),Ao(a))}function n_(a,o,d){if((Pn&6)!==0)throw Error(r(327));var p=!d&&(o&127)===0&&(o&a.expiredLanes)===0||xs(a,o),S=p?yR(a,o):C0(a,o,!0),k=p;do{if(S===0){of&&!p&&Zl(a,o,0,!1);break}else{if(d=a.current.alternate,k&&!mR(d)){S=C0(a,o,!1),k=!1;continue}if(S===2){if(k=o,a.errorRecoveryDisabledLanes&k)var Z=0;else Z=a.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){o=Z;e:{var _e=a;S=jd;var Ie=_e.current.memoizedState.isDehydrated;if(Ie&&(cf(_e,Z).flags|=256),Z=C0(_e,Z,!1),Z!==2){if(b0&&!Ie){_e.errorRecoveryDisabledLanes|=k,Yu|=k,S=4;break e}k=vs,vs=S,k!==null&&(vs===null?vs=k:vs.push.apply(vs,k))}S=Z}if(k=!1,S!==2)continue}}if(S===1){cf(a,0),Zl(a,o,0,!0);break}e:{switch(p=a,k=S,k){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Zl(p,o,Us,!Kl);break e;case 2:vs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(S=gp+300-De(),10<S)){if(Zl(p,o,Us,!Kl),yn(p,0,!0)!==0)break e;hl=o,p.timeoutHandle=P_(r_.bind(null,p,d,vs,vp,S0,o,Us,Yu,lf,Kl,k,"Throttled",-0,0),S);break e}r_(p,d,vs,vp,S0,o,Us,Yu,lf,Kl,k,null,-0,0)}}break}while(!0);Ao(a)}function r_(a,o,d,p,S,k,Z,_e,Ie,Ge,Xe,tt,$e,We){if(a.timeoutHandle=-1,tt=o.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},J2(o,k,tt);var bt=(k&62914560)===k?gp-De():(k&4194048)===k?Q2-De():0;if(bt=QR(tt,bt),bt!==null){hl=k,a.cancelPendingCommit=bt(f_.bind(null,a,o,k,d,p,S,Z,_e,Ie,Xe,tt,null,$e,We)),Zl(a,k,Z,!Ge);return}}f_(a,o,k,d,p,S,Z,_e,Ie)}function mR(a){for(var o=a;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var S=d[p],k=S.getSnapshot;S=S.value;try{if(!ei(k(),S))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Zl(a,o,d,p){o&=~_0,o&=~Yu,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var S=o;0<S;){var k=31-Ht(S),Z=1<<k;p[k]=-1,S&=~Z}d!==0&&Ks(a,d,o)}function wp(){return(Pn&6)===0?(Hd(0),!1):!0}function T0(){if(hn!==null){if(Un===0)var a=hn.return;else a=hn,la=mo=null,Xc(a),rt=null,St=0,a=hn;for(;a!==null;)M2(a.alternate,a),a=a.return;hn=null}}function cf(a,o){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,OR(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),hl=0,T0(),Zn=a,hn=d=os(a.current,null),mn=o,Un=0,Ds=null,Kl=!1,of=xs(a,o),b0=!1,lf=Us=_0=Yu=Jl=Lr=0,vs=jd=null,S0=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var S=31-Ht(p),k=1<<S;o|=a[S],p&=~k}return dl=o,Fu(),d}function i_(a,o){Ot=null,se.H=Pd,o===Pe||o===Ee?(o=Qe(),Un=3):o===ze?(o=Qe(),Un=4):Un=o===i0?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ds=o,hn===null&&(Lr=1,lp(a,ls(o,a.current)))}function s_(){var a=ar.current;return a===null?!0:(mn&4194048)===mn?Sn===null:(mn&62914560)===mn||(mn&536870912)!==0?a===Sn:!1}function a_(){var a=se.H;return se.H=Pd,a===null?Pd:a}function o_(){var a=se.A;return se.A=hR,a}function bp(){Lr=4,Kl||(mn&4194048)!==mn&&ar.current!==null||(of=!0),(Jl&134217727)===0&&(Yu&134217727)===0||Zn===null||Zl(Zn,mn,Us,!1)}function C0(a,o,d){var p=Pn;Pn|=2;var S=a_(),k=o_();(Zn!==a||mn!==o)&&(vp=null,cf(a,o)),o=!1;var Z=Lr;e:do try{if(Un!==0&&hn!==null){var _e=hn,Ie=Ds;switch(Un){case 8:T0(),Z=6;break e;case 3:case 2:case 9:case 6:ar.current===null&&(o=!0);var Ge=Un;if(Un=0,Ds=null,ff(a,_e,Ie,Ge),d&&of){Z=0;break e}break;default:Ge=Un,Un=0,Ds=null,ff(a,_e,Ie,Ge)}}gR(),Z=Lr;break}catch(Xe){i_(a,Xe)}while(!0);return o&&a.shellSuspendCounter++,la=mo=null,Pn=p,se.H=S,se.A=k,hn===null&&(Zn=null,mn=0,Fu()),Z}function gR(){for(;hn!==null;)l_(hn)}function yR(a,o){var d=Pn;Pn|=2;var p=a_(),S=o_();Zn!==a||mn!==o?(vp=null,yp=De()+500,cf(a,o)):of=xs(a,o);e:do try{if(Un!==0&&hn!==null){o=hn;var k=Ds;t:switch(Un){case 1:Un=0,Ds=null,ff(a,o,k,1);break;case 2:case 9:if(qe(k)){Un=0,Ds=null,u_(o);break}o=function(){Un!==2&&Un!==9||Zn!==a||(Un=7),Ao(a)},k.then(o,o);break e;case 3:Un=7;break e;case 4:Un=5;break e;case 7:qe(k)?(Un=0,Ds=null,u_(o)):(Un=0,Ds=null,ff(a,o,k,7));break;case 5:var Z=null;switch(hn.tag){case 26:Z=hn.memoizedState;case 5:case 27:var _e=hn;if(Z?K_(Z):_e.stateNode.complete){Un=0,Ds=null;var Ie=_e.sibling;if(Ie!==null)hn=Ie;else{var Ge=_e.return;Ge!==null?(hn=Ge,_p(Ge)):hn=null}break t}}Un=0,Ds=null,ff(a,o,k,5);break;case 6:Un=0,Ds=null,ff(a,o,k,6);break;case 8:T0(),Lr=6;break e;default:throw Error(r(462))}}vR();break}catch(Xe){i_(a,Xe)}while(!0);return la=mo=null,se.H=p,se.A=S,Pn=d,hn!==null?0:(Zn=null,mn=0,Fu(),Lr)}function vR(){for(;hn!==null&&!we();)l_(hn)}function l_(a){var o=L2(a.alternate,a,dl);a.memoizedProps=a.pendingProps,o===null?_p(a):hn=o}function u_(a){var o=a,d=o.alternate;switch(o.tag){case 15:case 0:o=T2(d,o,o.pendingProps,o.type,void 0,mn);break;case 11:o=T2(d,o,o.pendingProps,o.type.render,o.ref,mn);break;case 5:Xc(o);default:M2(d,o),o=hn=ju(o,dl),o=L2(d,o,dl)}a.memoizedProps=a.pendingProps,o===null?_p(a):hn=o}function ff(a,o,d,p){la=mo=null,Xc(o),rt=null,St=0;var S=o.return;try{if(aR(a,S,o,d,mn)){Lr=1,lp(a,ls(d,a.current)),hn=null;return}}catch(k){if(S!==null)throw hn=S,k;Lr=1,lp(a,ls(d,a.current)),hn=null;return}o.flags&32768?(dn||p===1?a=!0:of||(mn&536870912)!==0?a=!1:(Kl=a=!0,(p===2||p===9||p===3||p===6)&&(p=ar.current,p!==null&&p.tag===13&&(p.flags|=16384))),c_(o,a)):_p(o)}function _p(a){var o=a;do{if((o.flags&32768)!==0){c_(o,Kl);return}a=o.return;var d=uR(o.alternate,o,dl);if(d!==null){hn=d;return}if(o=o.sibling,o!==null){hn=o;return}hn=o=a}while(o!==null);Lr===0&&(Lr=5)}function c_(a,o){do{var d=cR(a.alternate,a);if(d!==null){d.flags&=32767,hn=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(a=a.sibling,a!==null)){hn=a;return}hn=a=d}while(a!==null);Lr=6,hn=null}function f_(a,o,d,p,S,k,Z,_e,Ie){a.cancelPendingCommit=null;do Sp();while(ai!==0);if((Pn&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(k=o.lanes|o.childLanes,k|=Uc,va(a,d,k,Z,_e,Ie),a===Zn&&(hn=Zn=null,mn=0),uf=o,Xl=a,hl=d,x0=k,A0=S,e_=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,SR(ot,function(){return g_(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=se.T,se.T=null,S=ie.p,ie.p=2,Z=Pn,Pn|=4;try{fR(a,o,d)}finally{Pn=Z,ie.p=S,se.T=p}}ai=1,d_(),h_(),p_()}}function d_(){if(ai===1){ai=0;var a=Xl,o=uf,d=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||d){d=se.T,se.T=null;var p=ie.p;ie.p=2;var S=Pn;Pn|=4;try{$2(o,a);var k=B0,Z=Ma(a.containerInfo),_e=k.focusedElem,Ie=k.selectionRange;if(Z!==_e&&_e&&_e.ownerDocument&&Pa(_e.ownerDocument.documentElement,_e)){if(Ie!==null&&aa(_e)){var Ge=Ie.start,Xe=Ie.end;if(Xe===void 0&&(Xe=Ge),"selectionStart"in _e)_e.selectionStart=Ge,_e.selectionEnd=Math.min(Xe,_e.value.length);else{var tt=_e.ownerDocument||document,$e=tt&&tt.defaultView||window;if($e.getSelection){var We=$e.getSelection(),bt=_e.textContent.length,Gt=Math.min(Ie.start,bt),Wn=Ie.end===void 0?Gt:Math.min(Ie.end,bt);!We.extend&&Gt>Wn&&(Z=Wn,Wn=Gt,Gt=Z);var Be=Dl(_e,Gt),Me=Dl(_e,Wn);if(Be&&Me&&(We.rangeCount!==1||We.anchorNode!==Be.node||We.anchorOffset!==Be.offset||We.focusNode!==Me.node||We.focusOffset!==Me.offset)){var He=tt.createRange();He.setStart(Be.node,Be.offset),We.removeAllRanges(),Gt>Wn?(We.addRange(He),We.extend(Me.node,Me.offset)):(He.setEnd(Me.node,Me.offset),We.addRange(He))}}}}for(tt=[],We=_e;We=We.parentNode;)We.nodeType===1&&tt.push({element:We,left:We.scrollLeft,top:We.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<tt.length;_e++){var et=tt[_e];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Mp=!!F0,B0=F0=null}finally{Pn=S,ie.p=p,se.T=d}}a.current=o,ai=2}}function h_(){if(ai===2){ai=0;var a=Xl,o=uf,d=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||d){d=se.T,se.T=null;var p=ie.p;ie.p=2;var S=Pn;Pn|=4;try{j2(a,o.alternate,o)}finally{Pn=S,ie.p=p,se.T=d}}ai=3}}function p_(){if(ai===4||ai===3){ai=0,Re();var a=Xl,o=uf,d=hl,p=e_;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ai=5:(ai=0,uf=Xl=null,m_(a,a.pendingLanes));var S=a.pendingLanes;if(S===0&&(Yl=null),Er(d),o=o.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Rt,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=se.T,S=ie.p,ie.p=2,se.T=null;try{for(var k=a.onRecoverableError,Z=0;Z<p.length;Z++){var _e=p[Z];k(_e.value,{componentStack:_e.stack})}}finally{se.T=o,ie.p=S}}(hl&3)!==0&&Sp(),Ao(a),S=a.pendingLanes,(d&261930)!==0&&(S&42)!==0?a===E0?zd++:(zd=0,E0=a):zd=0,Hd(0)}}function m_(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Gu(o)))}function Sp(){return d_(),h_(),p_(),g_()}function g_(){if(ai!==5)return!1;var a=Xl,o=x0;x0=0;var d=Er(hl),p=se.T,S=ie.p;try{ie.p=32>d?32:d,se.T=null,d=A0,A0=null;var k=Xl,Z=hl;if(ai=0,uf=Xl=null,hl=0,(Pn&6)!==0)throw Error(r(331));var _e=Pn;if(Pn|=4,X2(k.current),K2(k,k.current,Z,d),Pn=_e,Hd(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Rt,k)}catch{}return!0}finally{ie.p=S,se.T=p,m_(a,o)}}function y_(a,o,d){o=ls(d,o),o=r0(a.stateNode,o,2),a=nn(a,o,2),a!==null&&(Mt(a,2),Ao(a))}function Fn(a,o,d){if(a.tag===3)y_(a,a,d);else for(;o!==null;){if(o.tag===3){y_(o,a,d);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Yl===null||!Yl.has(p))){a=ls(d,a),d=v2(2),p=nn(o,d,2),p!==null&&(w2(d,p,o,a),Mt(p,2),Ao(p));break}}o=o.return}}function N0(a,o,d){var p=a.pingCache;if(p===null){p=a.pingCache=new pR;var S=new Set;p.set(o,S)}else S=p.get(o),S===void 0&&(S=new Set,p.set(o,S));S.has(d)||(b0=!0,S.add(d),a=wR.bind(null,a,o,d),o.then(a,a))}function wR(a,o,d){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Zn===a&&(mn&d)===d&&(Lr===4||Lr===3&&(mn&62914560)===mn&&300>De()-gp?(Pn&2)===0&&cf(a,0):_0|=d,lf===mn&&(lf=0)),Ao(a)}function v_(a,o){o===0&&(o=Ws()),a=Da(a,o),a!==null&&(Mt(a,o),Ao(a))}function bR(a){var o=a.memoizedState,d=0;o!==null&&(d=o.retryLane),v_(a,d)}function _R(a,o){var d=0;switch(a.tag){case 31:case 13:var p=a.stateNode,S=a.memoizedState;S!==null&&(d=S.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(o),v_(a,d)}function SR(a,o){return be(a,o)}var xp=null,df=null,R0=!1,Ap=!1,k0=!1,Ql=0;function Ao(a){a!==df&&a.next===null&&(df===null?xp=df=a:df=df.next=a),Ap=!0,R0||(R0=!0,AR())}function Hd(a,o){if(!k0&&Ap){k0=!0;do for(var d=!1,p=xp;p!==null;){if(a!==0){var S=p.pendingLanes;if(S===0)var k=0;else{var Z=p.suspendedLanes,_e=p.pingedLanes;k=(1<<31-Ht(42|a)+1)-1,k&=S&~(Z&~_e),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(d=!0,S_(p,k))}else k=mn,k=yn(p,p===Zn?k:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(k&3)===0||xs(p,k)||(d=!0,S_(p,k));p=p.next}while(d);k0=!1}}function xR(){w_()}function w_(){Ap=R0=!1;var a=0;Ql!==0&&MR()&&(a=Ql);for(var o=De(),d=null,p=xp;p!==null;){var S=p.next,k=b_(p,o);k===0?(p.next=null,d===null?xp=S:d.next=S,S===null&&(df=d)):(d=p,(a!==0||(k&3)!==0)&&(Ap=!0)),p=S}ai!==0&&ai!==5||Hd(a),Ql!==0&&(Ql=0)}function b_(a,o){for(var d=a.suspendedLanes,p=a.pingedLanes,S=a.expirationTimes,k=a.pendingLanes&-62914561;0<k;){var Z=31-Ht(k),_e=1<<Z,Ie=S[Z];Ie===-1?((_e&d)===0||(_e&p)!==0)&&(S[Z]=ci(_e,o)):Ie<=o&&(a.expiredLanes|=_e),k&=~_e}if(o=Zn,d=mn,d=yn(a,a===o?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,d===0||a===o&&(Un===2||Un===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&ne(p),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||xs(a,d)){if(o=d&-d,o===a.callbackPriority)return o;switch(p!==null&&ne(p),Er(d)){case 2:case 8:d=at;break;case 32:d=ot;break;case 268435456:d=Nt;break;default:d=ot}return p=__.bind(null,a),d=be(d,p),a.callbackPriority=o,a.callbackNode=d,o}return p!==null&&p!==null&&ne(p),a.callbackPriority=2,a.callbackNode=null,2}function __(a,o){if(ai!==0&&ai!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(Sp()&&a.callbackNode!==d)return null;var p=mn;return p=yn(a,a===Zn?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(n_(a,p,o),b_(a,De()),a.callbackNode!=null&&a.callbackNode===d?__.bind(null,a):null)}function S_(a,o){if(Sp())return null;n_(a,o,!0)}function AR(){DR(function(){(Pn&6)!==0?be(Ke,xR):w_()})}function I0(){if(Ql===0){var a=v;a===0&&(a=jn,jn<<=1,(jn&261888)===0&&(jn=256)),Ql=a}return Ql}function x_(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Rs(""+a)}function A_(a,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,a.id&&d.setAttribute("form",a.id),o.parentNode.insertBefore(d,o),a=new FormData(a),d.parentNode.removeChild(d),a}function ER(a,o,d,p,S){if(o==="submit"&&d&&d.stateNode===S){var k=x_((S[nr]||null).action),Z=p.submitter;Z&&(o=(o=Z[nr]||null)?x_(o.formAction):Z.getAttribute("formAction"),o!==null&&(k=o,Z=null));var _e=new Zs("action","action",null,p,S);a.push({event:_e,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Ql!==0){var Ie=Z?A_(S,Z):new FormData(S);Xg(d,{pending:!0,data:Ie,method:S.method,action:k},null,Ie)}}else typeof k=="function"&&(_e.preventDefault(),Ie=Z?A_(S,Z):new FormData(S),Xg(d,{pending:!0,data:Ie,method:S.method,action:k},k,Ie))},currentTarget:S}]})}}for(var L0=0;L0<Zo.length;L0++){var P0=Zo[L0],TR=P0.toLowerCase(),CR=P0[0].toUpperCase()+P0.slice(1);as(TR,"on"+CR)}as(Xo,"onAnimationEnd"),as(Du,"onAnimationIteration"),as(vd,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(Jh,"onTransitionRun"),as(Yh,"onTransitionStart"),as(Xh,"onTransitionCancel"),as(wd,"onTransitionEnd"),wa("onMouseEnter",["mouseout","mouseover"]),wa("onMouseLeave",["mouseout","mouseover"]),wa("onPointerEnter",["pointerout","pointerover"]),wa("onPointerLeave",["pointerout","pointerover"]),Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gd));function E_(a,o){o=(o&4)!==0;for(var d=0;d<a.length;d++){var p=a[d],S=p.event;p=p.listeners;e:{var k=void 0;if(o)for(var Z=p.length-1;0<=Z;Z--){var _e=p[Z],Ie=_e.instance,Ge=_e.currentTarget;if(_e=_e.listener,Ie!==k&&S.isPropagationStopped())break e;k=_e,S.currentTarget=Ge;try{k(S)}catch(Xe){Uu(Xe)}S.currentTarget=null,k=Ie}else for(Z=0;Z<p.length;Z++){if(_e=p[Z],Ie=_e.instance,Ge=_e.currentTarget,_e=_e.listener,Ie!==k&&S.isPropagationStopped())break e;k=_e,S.currentTarget=Ge;try{k(S)}catch(Xe){Uu(Xe)}S.currentTarget=null,k=Ie}}}}function pn(a,o){var d=o[Gi];d===void 0&&(d=o[Gi]=new Set);var p=a+"__bubble";d.has(p)||(T_(o,a,2,!1),d.add(p))}function M0(a,o,d){var p=0;o&&(p|=4),T_(d,a,p,o)}var Ep="_reactListening"+Math.random().toString(36).slice(2);function O0(a){if(!a[Ep]){a[Ep]=!0,bu.forEach(function(d){d!=="selectionchange"&&(NR.has(d)||M0(d,!1,a),M0(d,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Ep]||(o[Ep]=!0,M0("selectionchange",!1,o))}}function T_(a,o,d,p){switch(t5(o)){case 2:var S=n8;break;case 8:S=r8;break;default:S=Y0}d=S.bind(null,o,d,a),S=void 0,!Pu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),p?S!==void 0?a.addEventListener(o,d,{capture:!0,passive:S}):a.addEventListener(o,d,!0):S!==void 0?a.addEventListener(o,d,{passive:S}):a.addEventListener(o,d,!1)}function D0(a,o,d,p,S){var k=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var Z=p.tag;if(Z===3||Z===4){var _e=p.stateNode.containerInfo;if(_e===S)break;if(Z===4)for(Z=p.return;Z!==null;){var Ie=Z.tag;if((Ie===3||Ie===4)&&Z.stateNode.containerInfo===S)return;Z=Z.return}for(;_e!==null;){if(Z=Ts(_e),Z===null)return;if(Ie=Z.tag,Ie===5||Ie===6||Ie===26||Ie===27){p=k=Z;continue e}_e=_e.parentNode}}p=p.return}Ic(function(){var Ge=k,Xe=zo(d),tt=[];e:{var $e=bd.get(a);if($e!==void 0){var We=Zs,bt=a;switch(a){case"keypress":if(Aa(d)===0)break e;case"keydown":case"keyup":We=En;break;case"focusin":bt="focus",We=Na;break;case"focusout":bt="blur",We=Na;break;case"beforeblur":case"afterblur":We=Na;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=Qs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=Lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=Dr;break;case Xo:case Du:case vd:We=D;break;case wd:We=Zr;break;case"scroll":case"scrollend":We=Rl;break;case"wheel":We=Li;break;case"copy":case"cut":case"paste":We=Ce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=wr;break;case"toggle":case"beforetoggle":We=kl}var Gt=(o&4)!==0,Wn=!Gt&&(a==="scroll"||a==="scrollend"),Be=Gt?$e!==null?$e+"Capture":null:$e;Gt=[];for(var Me=Ge,He;Me!==null;){var et=Me;if(He=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||He===null||Be===null||(et=Wi(Me,Be),et!=null&&Gt.push(Vd(Me,et,He))),Wn)break;Me=Me.return}0<Gt.length&&($e=new We($e,bt,null,d,Xe),tt.push({event:$e,listeners:Gt}))}}if((o&7)===0){e:{if($e=a==="mouseover"||a==="pointerover",We=a==="mouseout"||a==="pointerout",$e&&d!==xa&&(bt=d.relatedTarget||d.fromElement)&&(Ts(bt)||bt[fi]))break e;if((We||$e)&&($e=Xe.window===Xe?Xe:($e=Xe.ownerDocument)?$e.defaultView||$e.parentWindow:window,We?(bt=d.relatedTarget||d.toElement,We=Ge,bt=bt?Ts(bt):null,bt!==null&&(Wn=s(bt),Gt=bt.tag,bt!==Wn||Gt!==5&&Gt!==27&&Gt!==6)&&(bt=null)):(We=null,bt=Ge),We!==bt)){if(Gt=Qs,et="onMouseLeave",Be="onMouseEnter",Me="mouse",(a==="pointerout"||a==="pointerover")&&(Gt=wr,et="onPointerLeave",Be="onPointerEnter",Me="pointer"),Wn=We==null?$e:qo(We),He=bt==null?$e:qo(bt),$e=new Gt(et,Me+"leave",We,d,Xe),$e.target=Wn,$e.relatedTarget=He,et=null,Ts(Xe)===Ge&&(Gt=new Gt(Be,Me+"enter",bt,d,Xe),Gt.target=He,Gt.relatedTarget=Wn,et=Gt),Wn=et,We&&bt)t:{for(Gt=RR,Be=We,Me=bt,He=0,et=Be;et;et=Gt(et))He++;et=0;for(var Ft=Me;Ft;Ft=Gt(Ft))et++;for(;0<He-et;)Be=Gt(Be),He--;for(;0<et-He;)Me=Gt(Me),et--;for(;He--;){if(Be===Me||Me!==null&&Be===Me.alternate){Gt=Be;break t}Be=Gt(Be),Me=Gt(Me)}Gt=null}else Gt=null;We!==null&&C_(tt,$e,We,Gt,!1),bt!==null&&Wn!==null&&C_(tt,Wn,bt,Gt,!0)}}e:{if($e=Ge?qo(Ge):window,We=$e.nodeName&&$e.nodeName.toLowerCase(),We==="select"||We==="input"&&$e.type==="file")var Nn=co;else if(Mu($e))if(Pi)Nn=ia;else{Nn=br;var Tt=Ml}else We=$e.nodeName,!We||We.toLowerCase()!=="input"||$e.type!=="checkbox"&&$e.type!=="radio"?Ge&&ku(Ge.elementType)&&(Nn=co):Nn=Dc;if(Nn&&(Nn=Nn(a,Ge))){Yi(tt,Nn,d,Xe);break e}Tt&&Tt(a,$e,Ge),a==="focusout"&&Ge&&$e.type==="number"&&Ge.memoizedProps.value!=null&&Tu($e,"number",$e.value)}switch(Tt=Ge?qo(Ge):window,a){case"focusin":(Mu(Tt)||Tt.contentEditable==="true")&&(Xi=Tt,Oa=Ge,hi=null);break;case"focusout":hi=Oa=Xi=null;break;case"mousedown":ss=!0;break;case"contextmenu":case"mouseup":case"dragend":ss=!1,Tn(tt,d,Xe);break;case"selectionchange":if(Yo)break;case"keydown":case"keyup":Tn(tt,d,Xe)}var sn;if(ea)e:{switch(a){case"compositionstart":var gn="onCompositionStart";break e;case"compositionend":gn="onCompositionEnd";break e;case"compositionupdate":gn="onCompositionUpdate";break e}gn=void 0}else ta?uo(a,d)&&(gn="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(gn="onCompositionStart");gn&&(oo&&d.locale!=="ko"&&(ta||gn!=="onCompositionStart"?gn==="onCompositionEnd"&&ta&&(sn=Vo()):(Ki=Xe,Go="value"in Ki?Ki.value:Ki.textContent,ta=!0)),Tt=Tp(Ge,gn),0<Tt.length&&(gn=new Fe(gn,a,null,d,Xe),tt.push({event:gn,listeners:Tt}),sn?gn.data=sn:(sn=Il(d),sn!==null&&(gn.data=sn)))),(sn=Jo?fr(a,d):Ra(a,d))&&(gn=Tp(Ge,"onBeforeInput"),0<gn.length&&(Tt=new Fe("onBeforeInput","beforeinput",null,d,Xe),tt.push({event:Tt,listeners:gn}),Tt.data=sn)),ER(tt,a,Ge,d,Xe)}E_(tt,o)})}function Vd(a,o,d){return{instance:a,listener:o,currentTarget:d}}function Tp(a,o){for(var d=o+"Capture",p=[];a!==null;){var S=a,k=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||k===null||(S=Wi(a,d),S!=null&&p.unshift(Vd(a,S,k)),S=Wi(a,o),S!=null&&p.push(Vd(a,S,k))),a.tag===3)return p;a=a.return}return[]}function RR(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function C_(a,o,d,p,S){for(var k=o._reactName,Z=[];d!==null&&d!==p;){var _e=d,Ie=_e.alternate,Ge=_e.stateNode;if(_e=_e.tag,Ie!==null&&Ie===p)break;_e!==5&&_e!==26&&_e!==27||Ge===null||(Ie=Ge,S?(Ge=Wi(d,k),Ge!=null&&Z.unshift(Vd(d,Ge,Ie))):S||(Ge=Wi(d,k),Ge!=null&&Z.push(Vd(d,Ge,Ie)))),d=d.return}Z.length!==0&&a.push({event:o,listeners:Z})}var kR=/\r\n?/g,IR=/\u0000|\uFFFD/g;function N_(a){return(typeof a=="string"?a:""+a).replace(kR,`
`).replace(IR,"")}function R_(a,o){return o=N_(o),N_(a)===o}function $n(a,o,d,p,S,k){switch(d){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||$i(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&$i(a,""+p);break;case"className":Tl(a,"class",p);break;case"tabIndex":Tl(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Tl(a,d,p);break;case"style":Rc(a,p,k);break;case"data":if(o!=="object"){Tl(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||d!=="href")){a.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(d);break}p=Rs(""+p),a.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(d==="formAction"?(o!=="input"&&$n(a,o,"name",S.name,S,null),$n(a,o,"formEncType",S.formEncType,S,null),$n(a,o,"formMethod",S.formMethod,S,null),$n(a,o,"formTarget",S.formTarget,S,null)):($n(a,o,"encType",S.encType,S,null),$n(a,o,"method",S.method,S,null),$n(a,o,"target",S.target,S,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(d);break}p=Rs(""+p),a.setAttribute(d,p);break;case"onClick":p!=null&&(a.onclick=ks);break;case"onScroll":p!=null&&pn("scroll",a);break;case"onScrollEnd":p!=null&&pn("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(d=p.__html,d!=null){if(S.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}d=Rs(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,""+p):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":p===!0?a.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,p):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(d,p):a.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(d):a.setAttribute(d,p);break;case"popover":pn("beforetoggle",a),pn("toggle",a),ba(a,"popover",p);break;case"xlinkActuate":Mn(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Mn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Mn(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Mn(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Mn(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Mn(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Mn(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Mn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Mn(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":ba(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Iu.get(d)||d,ba(a,d,p))}}function U0(a,o,d,p,S,k){switch(d){case"style":Rc(a,p,k);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(d=p.__html,d!=null){if(S.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof p=="string"?$i(a,p):(typeof p=="number"||typeof p=="bigint")&&$i(a,""+p);break;case"onScroll":p!=null&&pn("scroll",a);break;case"onScrollEnd":p!=null&&pn("scrollend",a);break;case"onClick":p!=null&&(a.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vi.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(S=d.endsWith("Capture"),o=d.slice(2,S?d.length-7:void 0),k=a[nr]||null,k=k!=null?k[d]:null,typeof k=="function"&&a.removeEventListener(o,k,S),typeof p=="function")){typeof k!="function"&&k!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(o,p,S);break e}d in a?a[d]=p:p===!0?a.setAttribute(d,""):ba(a,d,p)}}}function Ni(a,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pn("error",a),pn("load",a);var p=!1,S=!1,k;for(k in d)if(d.hasOwnProperty(k)){var Z=d[k];if(Z!=null)switch(k){case"src":p=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:$n(a,o,k,Z,d,null)}}S&&$n(a,o,"srcSet",d.srcSet,d,null),p&&$n(a,o,"src",d.src,d,null);return;case"input":pn("invalid",a);var _e=k=Z=S=null,Ie=null,Ge=null;for(p in d)if(d.hasOwnProperty(p)){var Xe=d[p];if(Xe!=null)switch(p){case"name":S=Xe;break;case"type":Z=Xe;break;case"checked":Ie=Xe;break;case"defaultChecked":Ge=Xe;break;case"value":k=Xe;break;case"defaultValue":_e=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(137,o));break;default:$n(a,o,p,Xe,d,null)}}Cc(a,k,_e,Ie,Ge,Z,S,!1);return;case"select":pn("invalid",a),p=Z=k=null;for(S in d)if(d.hasOwnProperty(S)&&(_e=d[S],_e!=null))switch(S){case"value":k=_e;break;case"defaultValue":Z=_e;break;case"multiple":p=_e;default:$n(a,o,S,_e,d,null)}o=k,d=Z,a.multiple=!!p,o!=null?xi(a,!!p,o,!1):d!=null&&xi(a,!!p,d,!0);return;case"textarea":pn("invalid",a),k=S=p=null;for(Z in d)if(d.hasOwnProperty(Z)&&(_e=d[Z],_e!=null))switch(Z){case"value":p=_e;break;case"defaultValue":S=_e;break;case"children":k=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(91));break;default:$n(a,o,Z,_e,d,null)}Nu(a,p,S,k);return;case"option":for(Ie in d)if(d.hasOwnProperty(Ie)&&(p=d[Ie],p!=null))switch(Ie){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:$n(a,o,Ie,p,d,null)}return;case"dialog":pn("beforetoggle",a),pn("toggle",a),pn("cancel",a),pn("close",a);break;case"iframe":case"object":pn("load",a);break;case"video":case"audio":for(p=0;p<Gd.length;p++)pn(Gd[p],a);break;case"image":pn("error",a),pn("load",a);break;case"details":pn("toggle",a);break;case"embed":case"source":case"link":pn("error",a),pn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ge in d)if(d.hasOwnProperty(Ge)&&(p=d[Ge],p!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:$n(a,o,Ge,p,d,null)}return;default:if(ku(o)){for(Xe in d)d.hasOwnProperty(Xe)&&(p=d[Xe],p!==void 0&&U0(a,o,Xe,p,d,void 0));return}}for(_e in d)d.hasOwnProperty(_e)&&(p=d[_e],p!=null&&$n(a,o,_e,p,d,null))}function LR(a,o,d,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,k=null,Z=null,_e=null,Ie=null,Ge=null,Xe=null;for(We in d){var tt=d[We];if(d.hasOwnProperty(We)&&tt!=null)switch(We){case"checked":break;case"value":break;case"defaultValue":Ie=tt;default:p.hasOwnProperty(We)||$n(a,o,We,null,p,tt)}}for(var $e in p){var We=p[$e];if(tt=d[$e],p.hasOwnProperty($e)&&(We!=null||tt!=null))switch($e){case"type":k=We;break;case"name":S=We;break;case"checked":Ge=We;break;case"defaultChecked":Xe=We;break;case"value":Z=We;break;case"defaultValue":_e=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(r(137,o));break;default:We!==tt&&$n(a,o,$e,We,p,tt)}}Eu(a,Z,_e,Ie,Ge,Xe,k,S);return;case"select":We=Z=_e=$e=null;for(k in d)if(Ie=d[k],d.hasOwnProperty(k)&&Ie!=null)switch(k){case"value":break;case"multiple":We=Ie;default:p.hasOwnProperty(k)||$n(a,o,k,null,p,Ie)}for(S in p)if(k=p[S],Ie=d[S],p.hasOwnProperty(S)&&(k!=null||Ie!=null))switch(S){case"value":$e=k;break;case"defaultValue":_e=k;break;case"multiple":Z=k;default:k!==Ie&&$n(a,o,S,k,p,Ie)}o=_e,d=Z,p=We,$e!=null?xi(a,!!d,$e,!1):!!p!=!!d&&(o!=null?xi(a,!!d,o,!0):xi(a,!!d,d?[]:"",!1));return;case"textarea":We=$e=null;for(_e in d)if(S=d[_e],d.hasOwnProperty(_e)&&S!=null&&!p.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:$n(a,o,_e,null,p,S)}for(Z in p)if(S=p[Z],k=d[Z],p.hasOwnProperty(Z)&&(S!=null||k!=null))switch(Z){case"value":$e=S;break;case"defaultValue":We=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:S!==k&&$n(a,o,Z,S,p,k)}Cu(a,$e,We);return;case"option":for(var bt in d)if($e=d[bt],d.hasOwnProperty(bt)&&$e!=null&&!p.hasOwnProperty(bt))switch(bt){case"selected":a.selected=!1;break;default:$n(a,o,bt,null,p,$e)}for(Ie in p)if($e=p[Ie],We=d[Ie],p.hasOwnProperty(Ie)&&$e!==We&&($e!=null||We!=null))switch(Ie){case"selected":a.selected=$e&&typeof $e!="function"&&typeof $e!="symbol";break;default:$n(a,o,Ie,$e,p,We)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in d)$e=d[Gt],d.hasOwnProperty(Gt)&&$e!=null&&!p.hasOwnProperty(Gt)&&$n(a,o,Gt,null,p,$e);for(Ge in p)if($e=p[Ge],We=d[Ge],p.hasOwnProperty(Ge)&&$e!==We&&($e!=null||We!=null))switch(Ge){case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(r(137,o));break;default:$n(a,o,Ge,$e,p,We)}return;default:if(ku(o)){for(var Wn in d)$e=d[Wn],d.hasOwnProperty(Wn)&&$e!==void 0&&!p.hasOwnProperty(Wn)&&U0(a,o,Wn,void 0,p,$e);for(Xe in p)$e=p[Xe],We=d[Xe],!p.hasOwnProperty(Xe)||$e===We||$e===void 0&&We===void 0||U0(a,o,Xe,$e,p,We);return}}for(var Be in d)$e=d[Be],d.hasOwnProperty(Be)&&$e!=null&&!p.hasOwnProperty(Be)&&$n(a,o,Be,null,p,$e);for(tt in p)$e=p[tt],We=d[tt],!p.hasOwnProperty(tt)||$e===We||$e==null&&We==null||$n(a,o,tt,$e,p,We)}function k_(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,d=performance.getEntriesByType("resource"),p=0;p<d.length;p++){var S=d[p],k=S.transferSize,Z=S.initiatorType,_e=S.duration;if(k&&_e&&k_(Z)){for(Z=0,_e=S.responseEnd,p+=1;p<d.length;p++){var Ie=d[p],Ge=Ie.startTime;if(Ge>_e)break;var Xe=Ie.transferSize,tt=Ie.initiatorType;Xe&&k_(tt)&&(Ie=Ie.responseEnd,Z+=Xe*(Ie<_e?1:(_e-Ge)/(Ie-Ge)))}if(--p,o+=8*(k+Z)/(S.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var F0=null,B0=null;function Cp(a){return a.nodeType===9?a:a.ownerDocument}function I_(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L_(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function q0(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var j0=null;function MR(){var a=window.event;return a&&a.type==="popstate"?a===j0?!1:(j0=a,!0):(j0=null,!1)}var P_=typeof setTimeout=="function"?setTimeout:void 0,OR=typeof clearTimeout=="function"?clearTimeout:void 0,M_=typeof Promise=="function"?Promise:void 0,DR=typeof queueMicrotask=="function"?queueMicrotask:typeof M_<"u"?function(a){return M_.resolve(null).then(a).catch(UR)}:P_;function UR(a){setTimeout(function(){throw a})}function eu(a){return a==="head"}function O_(a,o){var d=o,p=0;do{var S=d.nextSibling;if(a.removeChild(d),S&&S.nodeType===8)if(d=S.data,d==="/$"||d==="/&"){if(p===0){a.removeChild(S),gf(o);return}p--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")p++;else if(d==="html")$d(a.ownerDocument.documentElement);else if(d==="head"){d=a.ownerDocument.head,$d(d);for(var k=d.firstChild;k;){var Z=k.nextSibling,_e=k.nodeName;k[Es]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&k.rel.toLowerCase()==="stylesheet"||d.removeChild(k),k=Z}}else d==="body"&&$d(a.ownerDocument.body);d=S}while(d);gf(o)}function D_(a,o){var d=a;a=0;do{var p=d.nextSibling;if(d.nodeType===1?o?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(o?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),p&&p.nodeType===8)if(d=p.data,d==="/$"){if(a===0)break;a--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||a++;d=p}while(d)}function z0(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":z0(d),io(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function FR(a,o,d,p){for(;a.nodeType===1;){var S=d;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[Es])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(k=a.getAttribute("rel"),k==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(k!==S.rel||a.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||a.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||a.getAttribute("title")!==(S.title==null?null:S.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(k=a.getAttribute("src"),(k!==(S.src==null?null:S.src)||a.getAttribute("type")!==(S.type==null?null:S.type)||a.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&k&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var k=S.name==null?null:""+S.name;if(S.type==="hidden"&&a.getAttribute("name")===k)return a}else return a;if(a=fa(a.nextSibling),a===null)break}return null}function BR(a,o,d){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=fa(a.nextSibling),a===null))return null;return a}function U_(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=fa(a.nextSibling),a===null))return null;return a}function H0(a){return a.data==="$?"||a.data==="$~"}function G0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function qR(a,o){var d=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||d.readyState!=="loading")o();else{var p=function(){o(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function fa(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var V0=null;function F_(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"||d==="/&"){if(o===0)return fa(a.nextSibling);o--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||o++}a=a.nextSibling}return null}function B_(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(o===0)return a;o--}else d!=="/$"&&d!=="/&"||o++}a=a.previousSibling}return null}function q_(a,o,d){switch(o=Cp(d),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function $d(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);io(a)}var da=new Map,j_=new Set;function Np(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var pl=ie.d;ie.d={f:jR,r:zR,D:HR,C:GR,L:VR,m:$R,X:KR,S:WR,M:JR};function jR(){var a=pl.f(),o=wp();return a||o}function zR(a){var o=Cs(a);o!==null&&o.tag===5&&o.type==="form"?i2(o):pl.r(a)}var hf=typeof document>"u"?null:document;function z_(a,o,d){var p=hf;if(p&&typeof o=="string"&&o){var S=di(o);S='link[rel="'+a+'"][href="'+S+'"]',typeof d=="string"&&(S+='[crossorigin="'+d+'"]'),j_.has(S)||(j_.add(S),a={rel:a,crossOrigin:d,href:o},p.querySelector(S)===null&&(o=p.createElement("link"),Ni(o,"link",a),yr(o),p.head.appendChild(o)))}}function HR(a){pl.D(a),z_("dns-prefetch",a,null)}function GR(a,o){pl.C(a,o),z_("preconnect",a,o)}function VR(a,o,d){pl.L(a,o,d);var p=hf;if(p&&a&&o){var S='link[rel="preload"][as="'+di(o)+'"]';o==="image"&&d&&d.imageSrcSet?(S+='[imagesrcset="'+di(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(S+='[imagesizes="'+di(d.imageSizes)+'"]')):S+='[href="'+di(a)+'"]';var k=S;switch(o){case"style":k=pf(a);break;case"script":k=mf(a)}da.has(k)||(a=g({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:a,as:o},d),da.set(k,a),p.querySelector(S)!==null||o==="style"&&p.querySelector(Wd(k))||o==="script"&&p.querySelector(Kd(k))||(o=p.createElement("link"),Ni(o,"link",a),yr(o),p.head.appendChild(o)))}}function $R(a,o){pl.m(a,o);var d=hf;if(d&&a){var p=o&&typeof o.as=="string"?o.as:"script",S='link[rel="modulepreload"][as="'+di(p)+'"][href="'+di(a)+'"]',k=S;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=mf(a)}if(!da.has(k)&&(a=g({rel:"modulepreload",href:a},o),da.set(k,a),d.querySelector(S)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Kd(k)))return}p=d.createElement("link"),Ni(p,"link",a),yr(p),d.head.appendChild(p)}}}function WR(a,o,d){pl.S(a,o,d);var p=hf;if(p&&a){var S=Js(p).hoistableStyles,k=pf(a);o=o||"default";var Z=S.get(k);if(!Z){var _e={loading:0,preload:null};if(Z=p.querySelector(Wd(k)))_e.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},d),(d=da.get(k))&&$0(a,d);var Ie=Z=p.createElement("link");yr(Ie),Ni(Ie,"link",a),Ie._p=new Promise(function(Ge,Xe){Ie.onload=Ge,Ie.onerror=Xe}),Ie.addEventListener("load",function(){_e.loading|=1}),Ie.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,Rp(Z,o,p)}Z={type:"stylesheet",instance:Z,count:1,state:_e},S.set(k,Z)}}}function KR(a,o){pl.X(a,o);var d=hf;if(d&&a){var p=Js(d).hoistableScripts,S=mf(a),k=p.get(S);k||(k=d.querySelector(Kd(S)),k||(a=g({src:a,async:!0},o),(o=da.get(S))&&W0(a,o),k=d.createElement("script"),yr(k),Ni(k,"link",a),d.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},p.set(S,k))}}function JR(a,o){pl.M(a,o);var d=hf;if(d&&a){var p=Js(d).hoistableScripts,S=mf(a),k=p.get(S);k||(k=d.querySelector(Kd(S)),k||(a=g({src:a,async:!0,type:"module"},o),(o=da.get(S))&&W0(a,o),k=d.createElement("script"),yr(k),Ni(k,"link",a),d.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},p.set(S,k))}}function H_(a,o,d,p){var S=(S=ae.current)?Np(S):null;if(!S)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=pf(d.href),d=Js(S).hoistableStyles,p=d.get(o),p||(p={type:"style",instance:null,count:0,state:null},d.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=pf(d.href);var k=Js(S).hoistableStyles,Z=k.get(a);if(Z||(S=S.ownerDocument||S,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(a,Z),(k=S.querySelector(Wd(a)))&&!k._p&&(Z.instance=k,Z.state.loading=5),da.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},da.set(a,d),k||YR(S,a,d,Z.state))),o&&p===null)throw Error(r(528,""));return Z}if(o&&p!==null)throw Error(r(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=mf(d),d=Js(S).hoistableScripts,p=d.get(o),p||(p={type:"script",instance:null,count:0,state:null},d.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function pf(a){return'href="'+di(a)+'"'}function Wd(a){return'link[rel="stylesheet"]['+a+"]"}function G_(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function YR(a,o,d,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),Ni(o,"link",d),yr(o),a.head.appendChild(o))}function mf(a){return'[src="'+di(a)+'"]'}function Kd(a){return"script[async]"+a}function V_(a,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+di(d.href)+'"]');if(p)return o.instance=p,yr(p),p;var S=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),yr(p),Ni(p,"style",S),Rp(p,d.precedence,a),o.instance=p;case"stylesheet":S=pf(d.href);var k=a.querySelector(Wd(S));if(k)return o.state.loading|=4,o.instance=k,yr(k),k;p=G_(d),(S=da.get(S))&&$0(p,S),k=(a.ownerDocument||a).createElement("link"),yr(k);var Z=k;return Z._p=new Promise(function(_e,Ie){Z.onload=_e,Z.onerror=Ie}),Ni(k,"link",p),o.state.loading|=4,Rp(k,d.precedence,a),o.instance=k;case"script":return k=mf(d.src),(S=a.querySelector(Kd(k)))?(o.instance=S,yr(S),S):(p=d,(S=da.get(k))&&(p=g({},d),W0(p,S)),a=a.ownerDocument||a,S=a.createElement("script"),yr(S),Ni(S,"link",p),a.head.appendChild(S),o.instance=S);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,Rp(p,d.precedence,a));return o.instance}function Rp(a,o,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=p.length?p[p.length-1]:null,k=S,Z=0;Z<p.length;Z++){var _e=p[Z];if(_e.dataset.precedence===o)k=_e;else if(k!==S)break}k?k.parentNode.insertBefore(a,k.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(a,o.firstChild))}function $0(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function W0(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var kp=null;function $_(a,o,d){if(kp===null){var p=new Map,S=kp=new Map;S.set(d,p)}else S=kp,p=S.get(d),p||(p=new Map,S.set(d,p));if(p.has(a))return p;for(p.set(a,null),d=d.getElementsByTagName(a),S=0;S<d.length;S++){var k=d[S];if(!(k[Es]||k[On]||a==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=k.getAttribute(o)||"";Z=a+Z;var _e=p.get(Z);_e?_e.push(k):p.set(Z,[k])}}return p}function W_(a,o,d){a=a.ownerDocument||a,a.head.insertBefore(d,o==="title"?a.querySelector("head > title"):null)}function XR(a,o,d){if(d===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function K_(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function ZR(a,o,d,p){if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var S=pf(p.href),k=o.querySelector(Wd(S));if(k){o=k._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=Ip.bind(a),o.then(a,a)),d.state.loading|=4,d.instance=k,yr(k);return}k=o.ownerDocument||o,p=G_(p),(S=da.get(S))&&$0(p,S),k=k.createElement("link"),yr(k);var Z=k;Z._p=new Promise(function(_e,Ie){Z.onload=_e,Z.onerror=Ie}),Ni(k,"link",p),d.instance=k}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(d,o),(o=d.state.preload)&&(d.state.loading&3)===0&&(a.count++,d=Ip.bind(a),o.addEventListener("load",d),o.addEventListener("error",d))}}var K0=0;function QR(a,o){return a.stylesheets&&a.count===0&&Pp(a,a.stylesheets),0<a.count||0<a.imgCount?function(d){var p=setTimeout(function(){if(a.stylesheets&&Pp(a,a.stylesheets),a.unsuspend){var k=a.unsuspend;a.unsuspend=null,k()}},6e4+o);0<a.imgBytes&&K0===0&&(K0=62500*PR());var S=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Pp(a,a.stylesheets),a.unsuspend)){var k=a.unsuspend;a.unsuspend=null,k()}},(a.imgBytes>K0?50:800)+o);return a.unsuspend=d,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(S)}}:null}function Ip(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pp(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Lp=null;function Pp(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Lp=new Map,o.forEach(e8,a),Lp=null,Ip.call(a))}function e8(a,o){if(!(o.state.loading&4)){var d=Lp.get(a);if(d)var p=d.get(null);else{d=new Map,Lp.set(a,d);for(var S=a.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<S.length;k++){var Z=S[k];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(d.set(Z.dataset.precedence,Z),p=Z)}p&&d.set(null,p)}S=o.instance,Z=S.getAttribute("data-precedence"),k=d.get(Z)||p,k===p&&d.set(null,S),d.set(Z,S),this.count++,p=Ip.bind(this),S.addEventListener("load",p),S.addEventListener("error",p),k?k.parentNode.insertBefore(S,k.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(S,a.firstChild)),o.state.loading|=4}}var Jd={$$typeof:C,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function t8(a,o,d,p,S,k,Z,_e,Ie){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.hiddenUpdates=ts(null),this.identifierPrefix=p,this.onUncaughtError=S,this.onCaughtError=k,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ie,this.incompleteTransitions=new Map}function J_(a,o,d,p,S,k,Z,_e,Ie,Ge,Xe,tt){return a=new t8(a,o,d,Z,Ie,Ge,Xe,tt,_e),o=1,k===!0&&(o|=24),k=mi(3,null,null,o),a.current=k,k.stateNode=a,o=zl(),o.refCount++,a.pooledCache=o,o.refCount++,k.memoizedState={element:p,isDehydrated:d,cache:o},dt(k),a}function Y_(a){return a?(a=ti,a):ti}function X_(a,o,d,p,S,k){S=Y_(S),p.context===null?p.context=S:p.pendingContext=S,p=jt(o),p.payload={element:d},k=k===void 0?null:k,k!==null&&(p.callback=k),d=nn(a,p,o),d!==null&&(ws(d,a,o),In(d,a,o))}function Z_(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<o?d:o}}function J0(a,o){Z_(a,o),(a=a.alternate)&&Z_(a,o)}function Q_(a){if(a.tag===13||a.tag===31){var o=Da(a,67108864);o!==null&&ws(o,a,67108864),J0(a,67108864)}}function e5(a){if(a.tag===13||a.tag===31){var o=Fs();o=er(o);var d=Da(a,o);d!==null&&ws(d,a,o),J0(a,o)}}var Mp=!0;function n8(a,o,d,p){var S=se.T;se.T=null;var k=ie.p;try{ie.p=2,Y0(a,o,d,p)}finally{ie.p=k,se.T=S}}function r8(a,o,d,p){var S=se.T;se.T=null;var k=ie.p;try{ie.p=8,Y0(a,o,d,p)}finally{ie.p=k,se.T=S}}function Y0(a,o,d,p){if(Mp){var S=X0(p);if(S===null)D0(a,o,p,Op,d),n5(a,p);else if(s8(S,a,o,d,p))p.stopPropagation();else if(n5(a,p),o&4&&-1<i8.indexOf(a)){for(;S!==null;){var k=Cs(S);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var Z=kt(k.pendingLanes);if(Z!==0){var _e=k;for(_e.pendingLanes|=2,_e.entangledLanes|=2;Z;){var Ie=1<<31-Ht(Z);_e.entanglements[1]|=Ie,Z&=~Ie}Ao(k),(Pn&6)===0&&(yp=De()+500,Hd(0))}}break;case 31:case 13:_e=Da(k,2),_e!==null&&ws(_e,k,2),wp(),J0(k,2)}if(k=X0(p),k===null&&D0(a,o,p,Op,d),k===S)break;S=k}S!==null&&p.stopPropagation()}else D0(a,o,p,null,d)}}function X0(a){return a=zo(a),Z0(a)}var Op=null;function Z0(a){if(Op=null,a=Ts(a),a!==null){var o=s(a);if(o===null)a=null;else{var d=o.tag;if(d===13){if(a=u(o),a!==null)return a;a=null}else if(d===31){if(a=l(o),a!==null)return a;a=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Op=a,null}function t5(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case Ke:return 2;case at:return 8;case ot:case pt:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var Q0=!1,tu=null,nu=null,ru=null,Yd=new Map,Xd=new Map,iu=[],i8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n5(a,o){switch(a){case"focusin":case"focusout":tu=null;break;case"dragenter":case"dragleave":nu=null;break;case"mouseover":case"mouseout":ru=null;break;case"pointerover":case"pointerout":Yd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(o.pointerId)}}function Zd(a,o,d,p,S,k){return a===null||a.nativeEvent!==k?(a={blockedOn:o,domEventName:d,eventSystemFlags:p,nativeEvent:k,targetContainers:[S]},o!==null&&(o=Cs(o),o!==null&&Q_(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),a)}function s8(a,o,d,p,S){switch(o){case"focusin":return tu=Zd(tu,a,o,d,p,S),!0;case"dragenter":return nu=Zd(nu,a,o,d,p,S),!0;case"mouseover":return ru=Zd(ru,a,o,d,p,S),!0;case"pointerover":var k=S.pointerId;return Yd.set(k,Zd(Yd.get(k)||null,a,o,d,p,S)),!0;case"gotpointercapture":return k=S.pointerId,Xd.set(k,Zd(Xd.get(k)||null,a,o,d,p,S)),!0}return!1}function r5(a){var o=Ts(a.target);if(o!==null){var d=s(o);if(d!==null){if(o=d.tag,o===13){if(o=u(d),o!==null){a.blockedOn=o,ro(a.priority,function(){e5(d)});return}}else if(o===31){if(o=l(d),o!==null){a.blockedOn=o,ro(a.priority,function(){e5(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Dp(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var d=X0(a.nativeEvent);if(d===null){d=a.nativeEvent;var p=new d.constructor(d.type,d);xa=p,d.target.dispatchEvent(p),xa=null}else return o=Cs(d),o!==null&&Q_(o),a.blockedOn=d,!1;o.shift()}return!0}function i5(a,o,d){Dp(a)&&d.delete(o)}function a8(){Q0=!1,tu!==null&&Dp(tu)&&(tu=null),nu!==null&&Dp(nu)&&(nu=null),ru!==null&&Dp(ru)&&(ru=null),Yd.forEach(i5),Xd.forEach(i5)}function Up(a,o){a.blockedOn===o&&(a.blockedOn=null,Q0||(Q0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,a8)))}var Fp=null;function s5(a){Fp!==a&&(Fp=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Fp===a&&(Fp=null);for(var o=0;o<a.length;o+=3){var d=a[o],p=a[o+1],S=a[o+2];if(typeof p!="function"){if(Z0(p||d)===null)continue;break}var k=Cs(d);k!==null&&(a.splice(o,3),o-=3,Xg(k,{pending:!0,data:S,method:d.method,action:p},p,S))}}))}function gf(a){function o(Ie){return Up(Ie,a)}tu!==null&&Up(tu,a),nu!==null&&Up(nu,a),ru!==null&&Up(ru,a),Yd.forEach(o),Xd.forEach(o);for(var d=0;d<iu.length;d++){var p=iu[d];p.blockedOn===a&&(p.blockedOn=null)}for(;0<iu.length&&(d=iu[0],d.blockedOn===null);)r5(d),d.blockedOn===null&&iu.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var S=d[p],k=d[p+1],Z=S[nr]||null;if(typeof k=="function")Z||s5(d);else if(Z){var _e=null;if(k&&k.hasAttribute("formAction")){if(S=k,Z=k[nr]||null)_e=Z.formAction;else if(Z0(S)!==null)continue}else _e=Z.action;typeof _e=="function"?d[p+1]=_e:(d.splice(p,3),p-=3),s5(d)}}}function a5(){function a(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(Z){return S=Z})},focusReset:"manual",scroll:"manual"})}function o(){S!==null&&(S(),S=null),p||setTimeout(d,20)}function d(){if(!p&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,S=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(d,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),S!==null&&(S(),S=null)}}}function ey(a){this._internalRoot=a}Bp.prototype.render=ey.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var d=o.current,p=Fs();X_(d,p,a,o,null,null)},Bp.prototype.unmount=ey.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;X_(a.current,2,null,a,null,null),wp(),o[fi]=null}};function Bp(a){this._internalRoot=a}Bp.prototype.unstable_scheduleHydration=function(a){if(a){var o=Gr();a={blockedOn:null,target:a,priority:o};for(var d=0;d<iu.length&&o!==0&&o<iu[d].priority;d++);iu.splice(d,0,a),d===0&&r5(a)}};var o5=e.version;if(o5!=="19.2.0")throw Error(r(527,o5,"19.2.0"));ie.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=f(o),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var o8={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qp.isDisabled&&qp.supportsFiber)try{Rt=qp.inject(o8),ht=qp}catch{}}return eh.createRoot=function(a,o){if(!i(a))throw Error(r(299));var d=!1,p="",S=p2,k=m2,Z=g2;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(S=o.onUncaughtError),o.onCaughtError!==void 0&&(k=o.onCaughtError),o.onRecoverableError!==void 0&&(Z=o.onRecoverableError)),o=J_(a,1,!1,null,null,d,p,null,S,k,Z,a5),a[fi]=o.current,O0(a),new ey(o)},eh.hydrateRoot=function(a,o,d){if(!i(a))throw Error(r(299));var p=!1,S="",k=p2,Z=m2,_e=g2,Ie=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onUncaughtError!==void 0&&(k=d.onUncaughtError),d.onCaughtError!==void 0&&(Z=d.onCaughtError),d.onRecoverableError!==void 0&&(_e=d.onRecoverableError),d.formState!==void 0&&(Ie=d.formState)),o=J_(a,1,!0,o,d??null,p,S,Ie,k,Z,_e,a5),o.context=Y_(null),d=o.current,p=Fs(),p=er(p),S=jt(p),S.callback=null,nn(d,S,p),d=p,o.current.lanes=d,Mt(o,d),Ao(o),a[fi]=o.current,O0(a),new Bp(o)},eh.version="19.2.0",eh}var y5;function v8(){if(y5)return ry.exports;y5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ry.exports=y8(),ry.exports}var w8=v8();const b8=hg(w8),rn=({type:n,...e})=>({logo:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:G.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5-10-5-10 5zM12 14.47l-8-4v3.06l8 4 8-4v-3.06l-8 4z"})}),text:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})}),image:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),sparkles:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22l-.648-1.438a3.375 3.375 0 00-2.67-2.67L11.5 18l1.438-.648a3.375 3.375 0 002.67-2.67L16.25 13l.648 1.438a3.375 3.375 0 002.67 2.67L21.5 18l-1.438.648a3.375 3.375 0 00-2.67 2.67z"})}),document:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),loader:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...e,children:[G.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),G.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),info:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),impact:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.361-6.867 8.21 8.21 0 00-2.723 2.47z"}),G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 00.495-7.467 5.99 5.99 0 00-1.925 3.546 5.974 5.974 0 01-2.133-1.001A3.75 3.75 0 0012 18z"})]}),tag:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),github:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...e,children:G.jsx("path",{d:"M8 0a8 8 0 0 0-2.53 15.59c.4.07.55-.17.55-.38l-.01-1.49c-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48l-.01 2.2c0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8a8 8 0 0 0-8-8z"})}),language:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 21l5.25-11.25L21 21m-9-3h7.5M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h5.25m-5.25-5.25h5.25"})}),download:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),settings:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),folder:G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:G.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25H11.69z"})})})[n]||G.jsx("svg",{...e});var _8=c3();const S8=hg(_8),mc=({onClose:n,children:e})=>{const t=document.getElementById("root");return it.useEffect(()=>{const r=i=>{i.key==="Escape"&&n()};return window.addEventListener("keydown",r),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[n]),t?S8.createPortal(G.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 backdrop-blur-sm",onClick:n,role:"dialog","aria-modal":"true",children:G.jsx("div",{className:"bg-base-200 rounded-lg shadow-xl w-full max-w-2xl m-4 p-6 border border-base-300 animate-modal-show",onClick:r=>r.stopPropagation(),children:e})}),t):null};var Fv=function(n,e){return Fv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Fv(n,e)};function f3(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fv(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hm=function(){return Hm=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Hm.apply(this,arguments)};function od(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function d3(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var l=n.length-1;l>=0;l--)(u=n[l])&&(s=(i<3?u(s):i>3?u(e,t,s):u(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function h3(n,e){return function(t,r){e(t,r,n)}}function p3(n,e,t,r,i,s){function u(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var l=r.kind,c=l==="getter"?"get":l==="setter"?"set":"value",f=!e&&n?r.static?n:n.prototype:null,h=e||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),g,y=!1,m=t.length-1;m>=0;m--){var E={};for(var _ in r)E[_]=_==="access"?{}:r[_];for(var _ in r.access)E.access[_]=r.access[_];E.addInitializer=function(b){if(y)throw new TypeError("Cannot add initializers after decoration has completed");s.push(u(b||null))};var R=(0,t[m])(l==="accessor"?{get:h.get,set:h.set}:h[c],E);if(l==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(g=u(R.get))&&(h.get=g),(g=u(R.set))&&(h.set=g),(g=u(R.init))&&i.unshift(g)}else(g=u(R))&&(l==="field"?i.unshift(g):h[c]=g)}f&&Object.defineProperty(f,r.name,h),y=!0}function m3(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function g3(n){return typeof n=="symbol"?n:"".concat(n)}function y3(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function v3(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Ct(n,e,t,r){function i(s){return s instanceof t?s:new t(function(u){u(s)})}return new(t||(t=Promise))(function(s,u){function l(h){try{f(r.next(h))}catch(g){u(g)}}function c(h){try{f(r.throw(h))}catch(g){u(g)}}function f(h){h.done?s(h.value):i(h.value).then(l,c)}f((r=r.apply(n,e||[])).next())})}function w3(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=l(0),u.throw=l(1),u.return=l(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,f[0]&&(t=0)),t;)try{if(r=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],i=0}finally{r=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var pg=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function b3(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&pg(e,n,t)}function Gm(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zw(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],u;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){u={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(u)throw u.error}}return s}function _3(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(zw(arguments[e]));return n}function S3(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],u=0,l=s.length;u<l;u++,i++)r[i]=s[u];return r}function x3(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function Zf(n){return this instanceof Zf?(this.v=n,this):new Zf(n)}function A3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",u),i[Symbol.asyncIterator]=function(){return this},i;function u(m){return function(E){return Promise.resolve(E).then(m,g)}}function l(m,E){r[m]&&(i[m]=function(_){return new Promise(function(R,b){s.push([m,_,R,b])>1||c(m,_)})},E&&(i[m]=E(i[m])))}function c(m,E){try{f(r[m](E))}catch(_){y(s[0][3],_)}}function f(m){m.value instanceof Zf?Promise.resolve(m.value.v).then(h,g):y(s[0][2],m)}function h(m){c("next",m)}function g(m){c("throw",m)}function y(m,E){m(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function E3(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(u){return(t=!t)?{value:Zf(n[i](u)),done:!1}:s?s(u):u}:s}}function T3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Gm=="function"?Gm(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(u){return new Promise(function(l,c){u=n[s](u),i(l,c,u.done,u.value)})}}function i(s,u,l,c){Promise.resolve(c).then(function(f){s({value:f,done:l})},u)}}function C3(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var x8=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},Bv=function(n){return Bv=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},Bv(n)};function N3(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=Bv(n),r=0;r<t.length;r++)t[r]!=="default"&&pg(e,n,t[r]);return x8(e,n),e}function R3(n){return n&&n.__esModule?n:{default:n}}function k3(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function I3(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function L3(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function P3(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var A8=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function M3(n){function e(s){n.error=n.hasError?new A8(s,n.error,"An error was suppressed during disposal."):s,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(s).then(i,function(u){return e(u),i()})}else r|=1}catch(u){e(u)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function O3(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,s,u){return r?e?".jsx":".js":i&&(!s||!u)?t:i+s+"."+u.toLowerCase()+"js"}):n}const E8={__extends:f3,__assign:Hm,__rest:od,__decorate:d3,__param:h3,__esDecorate:p3,__runInitializers:m3,__propKey:g3,__setFunctionName:y3,__metadata:v3,__awaiter:Ct,__generator:w3,__createBinding:pg,__exportStar:b3,__values:Gm,__read:zw,__spread:_3,__spreadArrays:S3,__spreadArray:x3,__await:Zf,__asyncGenerator:A3,__asyncDelegator:E3,__asyncValues:T3,__makeTemplateObject:C3,__importStar:N3,__importDefault:R3,__classPrivateFieldGet:k3,__classPrivateFieldSet:I3,__classPrivateFieldIn:L3,__addDisposableResource:P3,__disposeResources:M3,__rewriteRelativeImportExtension:O3},T8=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:P3,get __assign(){return Hm},__asyncDelegator:E3,__asyncGenerator:A3,__asyncValues:T3,__await:Zf,__awaiter:Ct,__classPrivateFieldGet:k3,__classPrivateFieldIn:L3,__classPrivateFieldSet:I3,__createBinding:pg,__decorate:d3,__disposeResources:M3,__esDecorate:p3,__exportStar:b3,__extends:f3,__generator:w3,__importDefault:R3,__importStar:N3,__makeTemplateObject:C3,__metadata:v3,__param:h3,__propKey:g3,__read:zw,__rest:od,__rewriteRelativeImportExtension:O3,__runInitializers:m3,__setFunctionName:y3,__spread:_3,__spreadArray:x3,__spreadArrays:S3,__values:Gm,default:E8},Symbol.toStringTag,{value:"Module"})),C8="modulepreload",N8=function(n){return"/"+n},v5={},ma=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=u(t.map(f=>{if(f=N8(f),f in v5)return;v5[f]=!0;const h=f.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":C8,h||(y.as="script"),y.crossOrigin="",y.href=f,c&&y.setAttribute("nonce",c),document.head.appendChild(y),h)return new Promise((m,E)=>{y.addEventListener("load",m),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(u){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u}return i.then(u=>{for(const l of u||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},R8=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>bc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Hw extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class w5 extends Hw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class b5 extends Hw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _5 extends Hw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qv;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(qv||(qv={}));class k8{constructor(e,{headers:t={},customFetch:r,region:i=qv.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=R8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ct(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:s,method:u,body:l,signal:c}=r;let f={},{region:h}=r;h||(h=this.region);const g=new URL(`${this.url}/${t}`);h&&h!=="any"&&(f["x-region"]=h,g.searchParams.set("forceFunctionRegion",h));let y;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(f["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(f["Content-Type"]="application/json",y=JSON.stringify(l)):y=l;const m=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),s),body:y,signal:c}).catch(b=>{throw b.name==="AbortError"?b:new w5(b)}),E=m.headers.get("x-relay-error");if(E&&E==="true")throw new b5(m);if(!m.ok)throw new _5(m);let _=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),R;return _==="application/json"?R=yield m.json():_==="application/octet-stream"||_==="application/pdf"?R=yield m.blob():_==="text/event-stream"?R=m:_==="multipart/form-data"?R=yield m.formData():R=yield m.text(),{data:R,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new w5(s)}:{data:null,error:s,response:s instanceof _5||s instanceof b5?s.context:void 0}}})}}var Di={};const ld=u3(T8);var jp={},zp={},Hp={},Gp={},Vp={},I8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qf=I8();const L8=Qf.fetch,D3=Qf.fetch.bind(Qf),U3=Qf.Headers,P8=Qf.Request,M8=Qf.Response,bc=Object.freeze(Object.defineProperty({__proto__:null,Headers:U3,Request:P8,Response:M8,default:D3,fetch:L8},Symbol.toStringTag,{value:"Module"})),O8=u3(bc);var $p={},S5;function F3(){if(S5)return $p;S5=1,Object.defineProperty($p,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return $p.default=n,$p}var x5;function B3(){if(x5)return Vp;x5=1,Object.defineProperty(Vp,"__esModule",{value:!0});const n=ld,e=n.__importDefault(O8),t=n.__importDefault(F3());class r{constructor(s){var u,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(u=s.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,u){return this.headers=new Headers(this.headers),this.headers.set(s,u),this}then(s,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,g,y,m;let E=null,_=null,R=null,b=f.status,N=f.statusText;if(f.ok){if(this.method!=="HEAD"){const J=await f.text();J===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?_=J:_=JSON.parse(J))}const A=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),F=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");A&&F&&F.length>1&&(R=parseInt(F[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(E={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,R=null,b=406,N="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const A=await f.text();try{E=JSON.parse(A),Array.isArray(E)&&f.status===404&&(_=[],E=null,b=200,N="OK")}catch{f.status===404&&A===""?(b=204,N="No Content"):E={message:A}}if(E&&this.isMaybeSingle&&(!((m=E==null?void 0:E.details)===null||m===void 0)&&m.includes("0 rows"))&&(E=null,b=200,N="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:_,count:R,status:b,statusText:N}});return this.shouldThrowOnError||(c=c.catch(f=>{var h,g,y;return{error:{message:`${(h=f==null?void 0:f.name)!==null&&h!==void 0?h:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(g=f==null?void 0:f.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=f==null?void 0:f.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),c.then(s,u)}returns(){return this}overrideTypes(){return this}}return Vp.default=r,Vp}var A5;function q3(){if(A5)return Gp;A5=1,Object.defineProperty(Gp,"__esModule",{value:!0});const e=ld.__importDefault(B3());class t extends e.default{select(i){let s=!1;const u=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:u,foreignTable:l,referencedTable:c=l}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:u=s}={}){const l=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:u,referencedTable:l=u}={}){const c=typeof l>"u"?"offset":`${l}.offset`,f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(f,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:u=!1,buffers:l=!1,wal:c=!1,format:f="text"}={}){var h;const g=[i?"analyze":null,s?"verbose":null,u?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${y}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Gp.default=t,Gp}var E5;function Gw(){if(E5)return Hp;E5=1,Object.defineProperty(Hp,"__esModule",{value:!0});const e=ld.__importDefault(q3());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const u=Array.from(new Set(s)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${u})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:u,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const f=u===void 0?"":`(${u})`;return this.url.searchParams.append(i,`${c}fts${f}.${s}`),this}match(i){return Object.entries(i).forEach(([s,u])=>{this.url.searchParams.append(s,`eq.${u}`)}),this}not(i,s,u){return this.url.searchParams.append(i,`not.${s}.${u}`),this}or(i,{foreignTable:s,referencedTable:u=s}={}){const l=u?`${u}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,s,u){return this.url.searchParams.append(i,`${s}.${u}`),this}}return Hp.default=t,Hp}var T5;function j3(){if(T5)return zp;T5=1,Object.defineProperty(zp,"__esModule",{value:!0});const e=ld.__importDefault(Gw());class t{constructor(i,{headers:s={},schema:u,fetch:l}){this.url=i,this.headers=new Headers(s),this.schema=u,this.fetch=l}select(i,s){const{head:u=!1,count:l}=s??{},c=u?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:u=!0}={}){var l;const c="POST";if(s&&this.headers.append("Prefer",`count=${s}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(f.length>0){const h=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:u=!1,count:l,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((y,m)=>y.concat(Object.keys(m)),[]);if(g.length>0){const y=[...new Set(g)].map(m=>`"${m}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:s}={}){var u;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:i}={}){var s;const u="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return zp.default=t,zp}var C5;function D8(){if(C5)return jp;C5=1,Object.defineProperty(jp,"__esModule",{value:!0});const n=ld,e=n.__importDefault(j3()),t=n.__importDefault(Gw());class r{constructor(s,{headers:u={},schema:l,fetch:c}={}){this.url=s,this.headers=new Headers(u),this.schemaName=l,this.fetch=c}from(s){const u=new URL(`${this.url}/${s}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,u={},{head:l=!1,get:c=!1,count:f}={}){var h;let g;const y=new URL(`${this.url}/rpc/${s}`);let m;l||c?(g=l?"HEAD":"GET",Object.entries(u).filter(([_,R])=>R!==void 0).map(([_,R])=>[_,Array.isArray(R)?`{${R.join(",")}}`:`${R}`]).forEach(([_,R])=>{y.searchParams.append(_,R)})):(g="POST",m=u);const E=new Headers(this.headers);return f&&E.set("Prefer",`count=${f}`),new t.default({method:g,url:y,headers:E,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return jp.default=r,jp}var N5;function U8(){if(N5)return Di;N5=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.PostgrestError=Di.PostgrestBuilder=Di.PostgrestTransformBuilder=Di.PostgrestFilterBuilder=Di.PostgrestQueryBuilder=Di.PostgrestClient=void 0;const n=ld,e=n.__importDefault(D8());Di.PostgrestClient=e.default;const t=n.__importDefault(j3());Di.PostgrestQueryBuilder=t.default;const r=n.__importDefault(Gw());Di.PostgrestFilterBuilder=r.default;const i=n.__importDefault(q3());Di.PostgrestTransformBuilder=i.default;const s=n.__importDefault(B3());Di.PostgrestBuilder=s.default;const u=n.__importDefault(F3());return Di.PostgrestError=u.default,Di.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:u.default},Di}var F8=U8();const B8=hg(F8),{PostgrestClient:q8,PostgrestQueryBuilder:hV,PostgrestFilterBuilder:pV,PostgrestTransformBuilder:mV,PostgrestBuilder:gV,PostgrestError:yV}=B8;class j8{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const z8="2.76.1",H8=`realtime-js/${z8}`,G8="1.0.0",jv=1e4,V8=1e3,$8=100;var Sh;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Sh||(Sh={}));var li;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(li||(li={}));var Xa;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Xa||(Xa={}));var zv;(function(n){n.websocket="websocket"})(zv||(zv={}));var sc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(sc||(sc={}));class W8{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let u=this.HEADER_LENGTH+2;const l=r.decode(e.slice(u,u+i));u=u+i;const c=r.decode(e.slice(u,u+s));u=u+s;const f=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:l,event:c,payload:f}}}class z3{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tr;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(tr||(tr={}));const R5=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,u)=>(s[u]=K8(u,n,e,i),s),{}):{}},K8=(n,e,t,r)=>{const i=e.find(l=>l.name===n),s=i==null?void 0:i.type,u=t[n];return s&&!r.includes(s)?H3(s,u):Hv(u)},H3=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Z8(e,t)}switch(n){case tr.bool:return J8(e);case tr.float4:case tr.float8:case tr.int2:case tr.int4:case tr.int8:case tr.numeric:case tr.oid:return Y8(e);case tr.json:case tr.jsonb:return X8(e);case tr.timestamp:return Q8(e);case tr.abstime:case tr.date:case tr.daterange:case tr.int4range:case tr.int8range:case tr.money:case tr.reltime:case tr.text:case tr.time:case tr.timestamptz:case tr.timetz:case tr.tsrange:case tr.tstzrange:return Hv(e);default:return Hv(e)}},Hv=n=>n,J8=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Y8=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},X8=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Z8=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const u=n.slice(1,t);try{s=JSON.parse("["+u+"]")}catch{s=u?u.split(","):[]}return s.map(l=>H3(e,l))}return n},Q8=n=>typeof n=="string"?n.replace(" ","T"):n,G3=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class oy{constructor(e,t,r={},i=jv){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var k5;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(k5||(k5={}));class xh{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:u,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xh.syncState(this.state,i,s,u),this.pendingDiffs.forEach(c=>{this.state=xh.syncDiff(this.state,c,s,u)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:u,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=xh.syncDiff(this.state,i,s,u),l())}),this.onJoin((i,s,u)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:u})}),this.onLeave((i,s,u)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),u=this.transformState(t),l={},c={};return this.map(s,(f,h)=>{u[f]||(c[f]=h)}),this.map(u,(f,h)=>{const g=s[f];if(g){const y=h.map(R=>R.presence_ref),m=g.map(R=>R.presence_ref),E=h.filter(R=>m.indexOf(R.presence_ref)<0),_=g.filter(R=>y.indexOf(R.presence_ref)<0);E.length>0&&(l[f]=E),_.length>0&&(c[f]=_)}else l[f]=h}),this.syncDiff(s,{joins:l,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,c)=>{var f;const h=(f=e[l])!==null&&f!==void 0?f:[];if(e[l]=this.cloneDeep(c),h.length>0){const g=e[l].map(m=>m.presence_ref),y=h.filter(m=>g.indexOf(m.presence_ref)<0);e[l].unshift(...y)}r(l,h,c)}),this.map(u,(l,c)=>{let f=e[l];if(!f)return;const h=c.map(g=>g.presence_ref);f=f.filter(g=>h.indexOf(g.presence_ref)<0),e[l]=f,i(l,f,c),f.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var I5;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(I5||(I5={}));var Ah;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ah||(Ah={}));var _l;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(_l||(_l={}));class Vw{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=li.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new oy(this,Xa.join,this.params,this.timeout),this.rejoinTimer=new z3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=li.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=li.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=li.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xa.reply,{},(u,l)=>{this._trigger(this._replyEventName(l),u)}),this.presence=new xh(this),this.broadcastEndpointURL=G3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==li.closed){const{config:{broadcast:u,presence:l,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Ah.PRESENCE]&&this.bindings[Ah.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,g={},y={broadcast:u,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(_l.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(_l.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var E;if(this.socket.setAuth(),m===void 0){e==null||e(_l.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,R=(E=_==null?void 0:_.length)!==null&&E!==void 0?E:0,b=[];for(let N=0;N<R;N++){const C=_[N],{filter:{event:A,schema:F,table:J,filter:V}}=C,te=m&&m[N];if(te&&te.event===A&&te.schema===F&&te.table===J&&te.filter===V)b.push(Object.assign(Object.assign({},C),{id:te.id}));else{this.unsubscribe(),this.state=li.errored,e==null||e(_l.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(_l.SUBSCRIBED);return}}).receive("error",m=>{this.state=li.errored,e==null||e(_l.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_l.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===li.joined&&e===Ah.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const f=await l.json();c=f.error||f.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:u}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var u,l,c;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(u=this.params)===null||u===void 0?void 0:u.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=li.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xa.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new oy(this,Xa.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=li.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),u}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new oy(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>$8){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const u=e.toLocaleLowerCase(),{close:l,error:c,leave:f,join:h}=Xa;if(r&&[l,c,f,h].indexOf(u)>=0&&r!==this._joinRef())return;let y=this._onMessage(u,t,r);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var E,_,R;return((E=m.filter)===null||E===void 0?void 0:E.event)==="*"||((R=(_=m.filter)===null||_===void 0?void 0:_.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===u}).map(m=>m.callback(y,r)):(s=this.bindings[u])===null||s===void 0||s.filter(m=>{var E,_,R,b,N,C;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in m){const A=m.id,F=(E=m.filter)===null||E===void 0?void 0:E.event;return A&&((_=t.ids)===null||_===void 0?void 0:_.includes(A))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((R=t.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const A=(N=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return A==="*"||A===((C=t==null?void 0:t.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===u}).map(m=>{if(typeof y=="object"&&"ids"in y){const E=y.data,{schema:_,table:R,commit_timestamp:b,type:N,errors:C}=E;y=Object.assign(Object.assign({},{schema:_,table:R,commit_timestamp:b,eventType:N,new:{},old:{},errors:C}),this._getPayloadRecords(E))}m.callback(y,r)})}_isClosed(){return this.state===li.closed}_isJoined(){return this.state===li.joined}_isJoining(){return this.state===li.joining}_isLeaving(){return this.state===li.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Vw.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xa.close,{},e)}_onError(e){this._on(Xa.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=li.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=R5(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=R5(e.columns,e.old_record)),t}}const ly=()=>{},Wp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ek=[1e3,2e3,5e3,1e4],tk=1e4,nk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class rk{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jv,this.transport=null,this.heartbeatIntervalMs=Wp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ly,this.ref=0,this.reconnectTimer=null,this.logger=ly,this.conn=null,this.sendBuffer=[],this.serializer=new W8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...u)=>ma(async()=>{const{default:l}=await Promise.resolve().then(()=>bc);return{default:l}},void 0).then(({default:l})=>l(...u)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...u)=>s(...u)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${zv.websocket}`,this.httpEndpoint=G3(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=j8.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:G8}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Sh.connecting:return sc.Connecting;case Sh.open:return sc.Open;case Sh.closing:return sc.Closing;default:return sc.Closed}}isConnected(){return this.connectionState()===sc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Vw(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,u=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(V8,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Wp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:u}=t,l=u?`(${u})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${i} ${l}`.trim(),s),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,s,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xa.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([nk],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:H8};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Xa.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new z3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,u,l,c,f,h;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:jv,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Wp.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:ly,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(g=>ek[g-1]||tk),this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:((g,y)=>y(JSON.stringify(g))),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class $w extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ar(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class ik extends $w{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Gv extends $w{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Ww=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>bc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},sk=()=>Ct(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ma(()=>Promise.resolve().then(()=>bc),void 0)).Response:Response}),Vv=n=>{if(Array.isArray(n))return n.map(t=>Vv(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Vv(r)}),e},ak=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},uy=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ok=(n,e,t)=>Ct(void 0,void 0,void 0,function*(){const r=yield sk();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,u=(i==null?void 0:i.statusCode)||s+"";e(new ik(uy(i),s,u))}).catch(i=>{e(new Gv(uy(i),i))}):e(new Gv(uy(n),n))}),lk=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(ak(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Fh(n,e,t,r,i,s){return Ct(this,void 0,void 0,function*(){return new Promise((u,l)=>{n(t,lk(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>u(c)).catch(c=>ok(c,l,r))})})}function Lh(n,e,t,r){return Ct(this,void 0,void 0,function*(){return Fh(n,"GET",e,t,r)})}function Ka(n,e,t,r,i){return Ct(this,void 0,void 0,function*(){return Fh(n,"POST",e,r,i,t)})}function $v(n,e,t,r,i){return Ct(this,void 0,void 0,function*(){return Fh(n,"PUT",e,r,i,t)})}function uk(n,e,t,r){return Ct(this,void 0,void 0,function*(){return Fh(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Kw(n,e,t,r,i){return Ct(this,void 0,void 0,function*(){return Fh(n,"DELETE",e,r,i,t)})}class ck{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Ct(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ar(e))return{data:null,error:e};throw e}})}}var V3;class fk{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[V3]="BlobDownloadBuilder",this.promise=null}asStream(){return new ck(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ct(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ar(e))return{data:null,error:e};throw e}})}}V3=Symbol.toStringTag;const dk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},L5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hk{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ww(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Ct(this,void 0,void 0,function*(){try{let s;const u=Object.assign(Object.assign({},L5),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const c=u.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",u.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",u.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const f=this._removeEmptyFolders(t),h=this._getFinalPath(f),g=yield(e=="PUT"?$v:Ka)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:l},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ar(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Ct(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),u=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${u}`);l.searchParams.set("token",t);try{let c;const f=Object.assign({upsert:L5.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const g=yield $v(this.fetch,l.toString(),c,{headers:h});return{data:{path:s,fullPath:g.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ar(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Ct(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield Ka(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),u=new URL(this.url+s.url),l=u.searchParams.get("token");if(!l)throw new $w("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}update(e,t,r){return Ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Ct(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Ct(this,void 0,void 0,function*(){try{return{data:{path:(yield Ka(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Ct(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ka(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${u}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Ct(this,void 0,void 0,function*(){try{const i=yield Ka(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=s?`?${s}`:"",l=this._getFinalPath(e),c=()=>Lh(this.fetch,`${this.url}/${i}/${l}${u}`,{headers:this.headers,noResolveJson:!0});return new fk(c,this.shouldThrowOnError)}info(e){return Ct(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Lh(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Vv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}exists(e){return Ct(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield uk(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r)&&r instanceof Gv){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${f}`)}}}remove(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Kw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ct(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},dk),t),{prefix:e||""});return{data:yield Ka(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}listV2(e,t){return Ct(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ka(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const $3="2.76.1",W3={"X-Client-Info":`storage-js/${$3}`};class pk{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},W3),t),this.fetch=Ww(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ct(this,void 0,void 0,function*(){try{return{data:yield Lh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ar(e))return{data:null,error:e};throw e}})}getBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Lh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}createBucket(e){return Ct(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Ka(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ar(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Ct(this,void 0,void 0,function*(){try{return{data:yield $v(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ar(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Kw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}}class mk{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},W3),t),this.fetch=Ww(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}listBuckets(e){return Ct(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,s=yield Lh(this.fetch,i,{headers:this.headers});return{data:Array.isArray(s)?s.filter(l=>l.type==="ANALYTICS"):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Kw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ar(t))return{data:null,error:t};throw t}})}}const Jw={"X-Client-Info":`storage-js/${$3}`,"Content-Type":"application/json"};class K3 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Gs(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class cy extends K3{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gk extends K3{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var P5;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(P5||(P5={}));const Yw=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>bc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},yk=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},M5=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),vk=(n,e,t)=>Ct(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const i=n.status||500,s=n;if(typeof s.json=="function")s.json().then(u=>{const l=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||i+"";e(new cy(M5(u),i,l))}).catch(()=>{const u=i+"",l=s.statusText||`HTTP ${i} error`;e(new cy(l,i,u))});else{const u=i+"",l=s.statusText||`HTTP ${i} error`;e(new cy(l,i,u))}}else e(new gk(M5(n),n))}),wk=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(yk(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function bk(n,e,t,r,i,s){return Ct(this,void 0,void 0,function*(){return new Promise((u,l)=>{n(t,wk(e,r,i,s)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const f=c.headers.get("content-type");return!f||!f.includes("application/json")?{}:c.json()}).then(c=>u(c)).catch(c=>vk(c,l,r))})})}function Vs(n,e,t,r,i){return Ct(this,void 0,void 0,function*(){return bk(n,"POST",e,r,i,t)})}class _k{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jw),t),this.fetch=Yw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ct(this,void 0,void 0,function*(){try{return{data:(yield Vs(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Ct(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gs(r))return{data:null,error:r};throw r}})}listIndexes(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Ct(this,void 0,void 0,function*(){try{return{data:(yield Vs(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gs(r))return{data:null,error:r};throw r}})}}class Sk{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jw),t),this.fetch=Yw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ct(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vs(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}getVectors(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}listVectors(e){return Ct(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Vs(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}queryVectors(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Ct(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vs(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}}class xk{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jw),t),this.fetch=Yw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:(yield Vs(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}getBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}listBuckets(){return Ct(this,arguments,void 0,function*(e={}){try{return{data:yield Vs(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:(yield Vs(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gs(t))return{data:null,error:t};throw t}})}}class Ak extends xk{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Ek(this.url,this.headers,e,this.fetch)}}class Ek extends _k{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ct(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ct(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ct(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ct(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Tk(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Tk extends Sk{constructor(e,t,r,i,s){super(e,t,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ct(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ct(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ct(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ct(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ct(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Ck extends pk{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new hk(this.url,this.headers,e,this.fetch)}get vectors(){return new Ak(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mk(this.url+"/iceberg",this.headers,this.fetch)}}const Nk="2.76.1";let fh="";typeof Deno<"u"?fh="deno":typeof document<"u"?fh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fh="react-native":fh="node";const Rk={"X-Client-Info":`supabase-js-${fh}/${Nk}`},kk={headers:Rk},Ik={schema:"public"},Lk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Pk={},Mk=n=>{let e;return n?e=n:typeof fetch>"u"?e=D3:e=fetch,(...t)=>e(...t)},Ok=()=>typeof Headers>"u"?U3:Headers,Dk=(n,e,t)=>{const r=Mk(t),i=Ok();return async(s,u)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:n;let f=new i(u==null?void 0:u.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},u),{headers:f}))}};function Uk(n){return n.endsWith("/")?n:n+"/"}function Fk(n,e){var t,r;const{db:i,auth:s,realtime:u,global:l}=n,{db:c,auth:f,realtime:h,global:g}=e,y={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),s),realtime:Object.assign(Object.assign({},h),u),storage:{},global:Object.assign(Object.assign(Object.assign({},g),l),{headers:Object.assign(Object.assign({},(t=g==null?void 0:g.headers)!==null&&t!==void 0?t:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}function Bk(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Uk(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const J3="2.76.1",kf=30*1e3,Wv=3,fy=Wv*kf,qk="http://localhost:9999",jk="supabase.auth.token",zk={"X-Client-Info":`gotrue-js/${J3}`},Kv="X-Supabase-Api-Version",Y3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gk=600*1e3;class Ph extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function zt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Vk extends Ph{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function $k(n){return zt(n)&&n.name==="AuthApiError"}class ac extends Ph{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class mu extends Ph{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class fu extends mu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Wk(n){return zt(n)&&n.name==="AuthSessionMissingError"}class yf extends mu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kp extends mu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jp extends mu{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Kk(n){return zt(n)&&n.name==="AuthImplicitGrantRedirectError"}class O5 extends mu{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jv extends mu{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function dy(n){return zt(n)&&n.name==="AuthRetryableFetchError"}class D5 extends mu{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Yv extends mu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),U5=` 	
\r=`.split(""),Jk=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<U5.length;e+=1)n[U5[e].charCodeAt(0)]=-2;for(let e=0;e<Vm.length;e+=1)n[Vm[e].charCodeAt(0)]=e;return n})();function F5(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Vm[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Vm[r]),e.queuedBits-=6}}function X3(n,e,t){const r=Jk[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function B5(n){const e=[],t=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=u=>{Zk(u,r,t)};for(let u=0;u<n.length;u+=1)X3(n.charCodeAt(u),i,s);return e.join("")}function Yk(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Xk(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}Yk(r,e)}}function Zk(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function jf(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)X3(n.charCodeAt(i),t,r);return new Uint8Array(e)}function Qk(n){const e=[];return Xk(n,t=>e.push(t)),new Uint8Array(e)}function uc(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>F5(i,t,r)),F5(null,t,r),e.join("")}function eI(n){return Math.round(Date.now()/1e3)+n}function tI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const zs=()=>typeof window<"u"&&typeof document<"u",Xu={tested:!1,writable:!1},Z3=()=>{if(!zs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xu.tested)return Xu.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Xu.tested=!0,Xu.writable=!0}catch{Xu.tested=!0,Xu.writable=!1}return Xu.writable};function nI(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const Q3=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>bc);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},rI=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",If=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Zu=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},au=async(n,e)=>{await n.removeItem(e)};class mg{constructor(){this.promise=new mg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}mg.promiseConstructor=Promise;function hy(n){const e=n.split(".");if(e.length!==3)throw new Yv("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Hk.test(e[r]))throw new Yv("JWT not in base64url format");return{header:JSON.parse(B5(e[0])),payload:JSON.parse(B5(e[1])),signature:jf(e[2]),raw:{header:e[0],payload:e[1]}}}async function iI(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function sI(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const u=await n(s);if(!e(s,null,u)){r(u);return}}catch(u){if(!e(s,u)){i(u);return}}})()})}function aI(n){return("0"+n.toString(16)).substr(-2)}function oI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,aI).join("")}async function lI(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function uI(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await lI(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vf(n,e,t=!1){const r=oI();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await If(n,`${e}-code-verifier`,i);const s=await uI(r);return[s,r===s?"plain":"s256"]}const cI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fI(n){const e=n.headers.get(Kv);if(!e||!e.match(cI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dI(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function hI(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wf(n){if(!pI.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function py(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function q5(n){return JSON.parse(JSON.stringify(n))}const nc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),mI=[502,503,504];async function j5(n){var e;if(!rI(n))throw new Jv(nc(n),0);if(mI.includes(n.status))throw new Jv(nc(n),n.status);let t;try{t=await n.json()}catch(s){throw new ac(nc(s),s)}let r;const i=fI(n);if(i&&i.getTime()>=Y3["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new D5(nc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new fu}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,u)=>s&&typeof u=="string",!0))throw new D5(nc(t),n.status,t.weak_password.reasons);throw new Vk(nc(t),n.status||500,r)}const gI=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function tn(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Kv]||(s[Kv]=Y3["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const u=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const l=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",c=await yI(n,e,t+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function yI(n,e,t,r,i,s){const u=gI(e,r,i,s);let l;try{l=await n(t,Object.assign({},u))}catch(c){throw console.error(c),new Jv(nc(c),0)}if(l.ok||await j5(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await j5(c)}}function $a(n){var e;let t=null;bI(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=eI(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function z5(n){const e=$a(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function du(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function vI(n){return{data:n,error:null}}function wI(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,u=od(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},u);return{data:{properties:l,user:c},error:null}}function H5(n){return n}function bI(n){return n.access_token&&n.refresh_token&&n.expires_in}const my=["global","local","others"];class _I{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Q3(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=my[0]){if(my.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${my.join(", ")}`);try{return await tn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await tn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:du})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=od(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await tn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:wI,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(zt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await tn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:du})}catch(t){if(zt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,u,l,c;try{const f={nextPage:null,lastPage:0,total:0},h=await tn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:H5});if(h.error)throw h.error;const g=await h.json(),y=(u=h.headers.get("x-total-count"))!==null&&u!==void 0?u:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(E=>{const _=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(E.split(";")[1].split("=")[1]);f[`${R}Page`]=_}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(zt(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){wf(e);try{return await tn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:du})}catch(t){if(zt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wf(e);try{return await tn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:du})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){wf(e);try{return await tn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:du})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wf(e.userId);try{const{data:t,error:r}=await tn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wf(e.userId),wf(e.id);try{return{data:await tn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,s,u,l,c;try{const f={nextPage:null,lastPage:0,total:0},h=await tn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:H5});if(h.error)throw h.error;const g=await h.json(),y=(u=h.headers.get("x-total-count"))!==null&&u!==void 0?u:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(E=>{const _=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(E.split(";")[1].split("=")[1]);f[`${R}Page`]=_}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(zt(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await tn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await tn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await tn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await tn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}}function G5(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const bf={debug:!!(globalThis&&Z3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class e4 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class SI extends e4{}async function xI(n,e,t){bf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){bf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{bf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw bf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new SI(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(bf.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function AI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function t4(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function EI(n){return parseInt(n,16)}function TI(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function CI(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:u,notBefore:l,requestId:c,resources:f,scheme:h,uri:g,version:y}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const m=t4(n.address),E=h?`${h}://${r}`:r,_=n.statement?`${n.statement}
`:"",R=`${E} wants you to sign in with your Ethereum account:
${m}

${_}`;let b=`URI: ${g}
Version: ${y}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${s.toISOString()}`;if(i&&(b+=`
Expiration Time: ${i.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),f){let N=`
Resources:`;for(const C of f){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);N+=`
- ${C}`}b+=N}return`${R}
${b}`}class Jr extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class $m extends Jr{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function NI({error:n,options:e}){var t,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Jr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Jr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Jr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Jr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Jr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Jr({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Jr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Jr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const u=window.location.hostname;if(n4(u)){if(s.rp.id!==u)return new Jr({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Jr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Jr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Jr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Jr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function RI({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Jr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Jr({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(n4(r)){if(t.rpId!==r)return new Jr({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Jr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Jr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Jr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class kI{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const II=new kI;function LI(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=od(n,["challenge","user","excludeCredentials"]),s=jf(e).buffer,u=Object.assign(Object.assign({},t),{id:jf(t.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:u});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const f=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},f),{id:jf(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function PI(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=od(n,["challenge","allowCredentials"]),i=jf(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const l=t[u];s.allowCredentials[u]=Object.assign(Object.assign({},l),{id:jf(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function MI(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:uc(new Uint8Array(n.response.attestationObject)),clientDataJSON:uc(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function OI(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:uc(new Uint8Array(i.authenticatorData)),clientDataJSON:uc(new Uint8Array(i.clientDataJSON)),signature:uc(new Uint8Array(i.signature)),userHandle:i.userHandle?uc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function n4(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function V5(){var n,e;return!!(zs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function DI(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new $m("Browser returned unexpected credential type",e)}:{data:null,error:new $m("Empty credential response",e)}}catch(e){return{data:null,error:NI({error:e,options:n})}}}async function UI(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new $m("Browser returned unexpected credential type",e)}:{data:null,error:new $m("Empty credential response",e)}}catch(e){return{data:null,error:RI({error:e,options:n})}}}const FI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},BI={userVerification:"preferred",hints:["security-key"]};function Wm(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const s in i){const u=i[s];if(u!==void 0)if(Array.isArray(u))r[s]=u;else if(t(u))r[s]=u;else if(e(u)){const l=r[s];e(l)?r[s]=Wm(l,u):r[s]=Wm(u)}else r[s]=u}return r}function qI(n,e){return Wm(FI,n,e||{})}function jI(n,e){return Wm(BI,n,e||{})}class zI{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{const{data:u,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:l};const c=i??II.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:f}=u.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(u.webauthn.type){case"create":{const f=qI(u.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:g}=await DI({publicKey:f,signal:c});return h?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:h}},error:null}:{data:null,error:g}}case"request":{const f=jI(u.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:g}=await UI(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:f,signal:c}));return h?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:h}},error:null}:{data:null,error:g}}}}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new ac("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!t)return{data:null,error:new Ph("rpId is required for WebAuthn authentication")};try{if(!V5())return{data:null,error:new ac("Browser does not support WebAuthn",null)};const{data:u,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!u)return{data:null,error:l};const{webauthn:c}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:r,credential_response:c.credential_response}})}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new ac("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!t)return{data:null,error:new Ph("rpId is required for WebAuthn registration")};try{if(!V5())return{data:null,error:new ac("Browser does not support WebAuthn",null)};const{data:u,error:l}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(h=>{var g;return(g=h.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:f}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});return c?this._verify({factorId:u.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:f}}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new ac("Unexpected error in register",u)}}}}AI();const HI={url:qk,storageKey:jk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $5(n,e,t){return await t()}const _f={};class Mh{get jwks(){var e,t;return(t=(e=_f[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){_f[this.storageKey]=Object.assign(Object.assign({},_f[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=_f[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_f[this.storageKey]=Object.assign(Object.assign({},_f[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mh.nextInstanceID,Mh.nextInstanceID+=1,this.instanceID>0&&zs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},HI),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new _I({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Q3(i.fetch),this.lock=i.lock||$5,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:zs()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=xI:this.lock=$5,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zI(this)},this.persistSession?(i.storage?this.storage=i.storage:Z3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=G5(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=G5(this.memoryStorage)),zs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${J3}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=nI(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),zs()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Kk(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:u,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",u,"redirect type",l),await this._saveSession(u),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return zt(t)?{error:t}:{error:new ac("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:$a}),{data:u,error:l}=s;if(l||!u)return{data:{user:null,session:null},error:l};const c=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(zt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:h,password:g,options:y}=e;let m=null,E=null;this.flowType==="pkce"&&([m,E]=await vf(this.storage,this.storageKey)),s=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:h,password:g,data:(t=y==null?void 0:y.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:m,code_challenge_method:E},xform:$a})}else if("phone"in e){const{phone:h,password:g,options:y}=e;s=await tn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:$a})}else throw new Kp("You must provide either an email or phone number and a password");const{data:u,error:l}=s;if(l||!u)return{data:{user:null,session:null},error:l};const c=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(zt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:u,options:l}=e;t=await tn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:u,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:z5})}else if("phone"in e){const{phone:s,password:u,options:l}=e;t=await tn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:u,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:z5})}else throw new Kp("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new yf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,u,l,c,f,h,g,y;let m,E;if("message"in e)m=e.message,E=e.signature;else{const{chain:_,wallet:R,statement:b,options:N}=e;let C;if(zs())if(typeof R=="object")C=R;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")C=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=R}const A=new URL((t=N==null?void 0:N.url)!==null&&t!==void 0?t:window.location.href),F=await C.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const J=t4(F[0]);let V=(r=N==null?void 0:N.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!V){const O=await C.request({method:"eth_chainId"});V=EI(O)}const te={domain:A.host,address:J,statement:b,uri:A.href,version:"1",chainId:V,nonce:(i=N==null?void 0:N.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(u=(s=N==null?void 0:N.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(l=N==null?void 0:N.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=N==null?void 0:N.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(f=N==null?void 0:N.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=N==null?void 0:N.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=CI(te),E=await C.request({method:"personal_sign",params:[TI(m),J]})}try{const{data:_,error:R}=await tn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:E},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:$a});if(R)throw R;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new yf}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:R})}catch(_){if(zt(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var t,r,i,s,u,l,c,f,h,g,y,m;let E,_;if("message"in e)E=e.message,_=e.signature;else{const{chain:R,wallet:b,statement:N,options:C}=e;let A;if(zs())if(typeof b=="object")A=b;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))A=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=b}const F=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in A&&A.signIn){const J=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),N?{statement:N}:null));let V;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")V=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)V=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)E=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),_=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${F.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(i=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=C==null?void 0:C.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((f=C==null?void 0:C.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((g=(h=C==null?void 0:C.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||g===void 0)&&g.length?["Resources",...C.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const J=await A.signMessage(new TextEncoder().encode(E),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=J}}try{const{data:R,error:b}=await tn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:uc(_)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:$a});if(b)throw b;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new yf}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:b})}catch(R){if(zt(R))return{data:{user:null,session:null},error:R};throw R}}async _exchangeCodeForSession(e){const t=await Zu(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:u}=await tn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:$a});if(await au(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new yf}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:u})}catch(s){if(zt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:u}=e,l=await tn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:$a}),{data:c,error:f}=l;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new yf}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,u;try{if("email"in e){const{email:l,options:c}=e;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await vf(this.storage,this.storageKey));const{error:g}=await tn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:l,options:c}=e,{data:f,error:h}=await tn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(u=c==null?void 0:c.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h}}throw new Kp("You must provide either an email or phone number.")}catch(l){if(zt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:l}=await tn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:$a});if(l)throw l;if(!u)throw new Error("An error occurred on token verification.");const c=u.session,f=u.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(zt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,u=null;return this.flowType==="pkce"&&([s,u]=await vf(this.storage,this.storageKey)),await tn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:u}),headers:this.headers,xform:vI})}catch(s){if(zt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new fu;const{error:i}=await tn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(zt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:u}=await tn(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:u,error:l}=await tn(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:l}}throw new Kp("You must provide either an email or phone number and a type")}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Zu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fy:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await Zu(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=py()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,f,h)=>(!u&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,h))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await tn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:du}):await this._useSession(async t=>{var r,i,s;const{data:u,error:l}=t;if(l)throw l;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fu}:await tn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:du})})}catch(t){if(zt(t))return Wk(t)&&(await this._removeSession(),await au(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new fu;const u=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await vf(this.storage,this.storageKey));const{data:f,error:h}=await tn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:u.access_token,xform:du});if(h)throw h;return u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(zt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fu;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:u}=hy(e.access_token);if(u.exp&&(r=u.exp,i=r<=t),i){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(zt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:u,error:l}=t;if(l)throw l;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new fu;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(zt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!zs())throw new Jp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new O5("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jp("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new O5("No code detected.");const{data:N,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:u,expires_in:l,expires_at:c,token_type:f}=e;if(!s||!l||!u||!f)throw new Jp("No session defined in URL");const h=Math.round(Date.now()/1e3),g=parseInt(l);let y=h+g;c&&(y=parseInt(c));const m=y-h;m*1e3<=kf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${g}s`);const E=y-g;h-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,y,h):h-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,y,h);const{data:_,error:R}=await this._getUser(s);if(R)throw R;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:g,expires_at:y,refresh_token:u,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(zt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Zu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const u=(r=i.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:l}=await this.admin.signOut(u,e);if(l&&!($k(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await au(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=tI(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:u}=t;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await vf(this.storage,this.storageKey,!0));try{return await tn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(zt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var u,l,c,f,h;const{data:g,error:y}=s;if(y)throw y;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await tn(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return zs()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(zt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:s}}=t;if(i)throw i;const{options:u,provider:l,token:c,access_token:f,nonce:h}=e,g=await tn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:$a}),{data:y,error:m}=g;return m?{data:{user:null,session:null},error:m}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new yf}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:m})}catch(i){if(zt(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:u}=t;if(u)throw u;return await tn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await sI(async i=>(i>0&&await iI(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await tn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$a})),(i,s)=>{const u=200*Math.pow(2,i);return s&&dy(s)&&Date.now()+u-r<kf})}catch(r){if(this._debug(t,"error",r),zt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),zs()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Zu(this.storage,this.storageKey);if(i&&this.userStorage){let u=await Zu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:i.user},await If(this.userStorage,this.storageKey+"-user",u)),i.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:py()}else if(i&&!i.user&&!i.user){const u=await Zu(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(i.user=u.user,await au(this.storage,this.storageKey+"-user"),await If(this.storage,this.storageKey,i)):i.user=py()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<fy;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${fy}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:u}=await this._callRefreshToken(i.refresh_token);u&&(console.error(u),dy(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:l}=await this._getUser(i.access_token);!l&&(u!=null&&u.user)?(i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new fu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new mg;const{data:s,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!s.session)throw new fu;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),zt(s)){const u={data:null,error:s};return dy(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],u=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){s.push(c)}});if(await Promise.all(u),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await If(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=q5(i);await If(this.storage,this.storageKey,s)}else{const i=q5(t);await If(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await au(this.storage,this.storageKey),await au(this.storage,this.storageKey+"-code-verifier"),await au(this.storage,this.storageKey+"-user"),this.userStorage&&await au(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kf);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/kf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${kf}ms, refresh threshold is ${Wv} ticks`),i<=Wv&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof e4)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,u]=await vf(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(u)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await tn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:u}=t;if(u)return{data:null,error:u};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:f}=await tn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?MI(e.webauthn.credential_response):OI(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await tn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(t){if(zt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const u=await tn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:l}=u;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:LI(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:PI(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(zt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=hy(i.access_token);let l=null;u.aal&&(l=u.aal);let c=l;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=u.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Gk>i)return r;const{data:s,error:u}=await tn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:m,error:E}=await this.getSession();if(E||!m.session)return{data:null,error:E};r=m.session.access_token}const{header:i,payload:s,signature:u,raw:{header:l,payload:c}}=hy(r);t!=null&&t.allowExpired||dI(s.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:i,signature:u},error:null}}const h=hI(i.alg),g=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,g,u,Qk(`${l}.${c}`)))throw new Yv("Invalid JWT signature");return{data:{claims:s,header:i,signature:u},error:null}}catch(r){if(zt(r))return{data:null,error:r};throw r}}}Mh.nextInstanceID=0;const GI=Mh;class VI extends GI{constructor(e){super(e)}}class $I{constructor(e,t,r){var i,s,u;this.supabaseUrl=e,this.supabaseKey=t;const l=Bk(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:Ik,realtime:Pk,auth:Object.assign(Object.assign({},Lk),{storageKey:c}),global:kk},h=Fk(r??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=h.auth)!==null&&u!==void 0?u:{},this.headers,h.global.fetch),this.fetch=Dk(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new q8(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Ck(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new k8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:u,flowType:l,lock:c,debug:f},h,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VI({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),h),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:l,lock:c,debug:f,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new rk(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const WI=(n,e,t)=>new $I(n,e,t);function KI(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}KI()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");class r4{constructor(){this.STORAGE_KEY="sci-necromancer-abstracts",this.METADATA_KEY="sci-necromancer-metadata",this.VERSION_KEY="sci-necromancer-version",this.CURRENT_VERSION="1.0.0",this.initializeStorage()}initializeStorage(){const e=localStorage.getItem(this.VERSION_KEY);(!e||e!==this.CURRENT_VERSION)&&(this.migrateData(e),localStorage.setItem(this.VERSION_KEY,this.CURRENT_VERSION))}migrateData(e){if(!e){const t=[];localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t));const r={lastSync:null,totalAbstracts:0,lastBackup:null};localStorage.setItem(this.METADATA_KEY,JSON.stringify(r))}}getStoredAbstracts(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e).map(r=>({...r,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt)})):[]}catch(e){return console.error("Error reading stored abstracts:",e),[]}}saveStoredAbstracts(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this.updateMetadata({totalAbstracts:e.length})}catch(t){throw console.error("Error saving abstracts to localStorage:",t),new Error("Failed to save abstract to local storage")}}updateMetadata(e){try{const r={...JSON.parse(localStorage.getItem(this.METADATA_KEY)||"{}"),...e};localStorage.setItem(this.METADATA_KEY,JSON.stringify(r))}catch(t){console.error("Error updating metadata:",t)}}generateId(){return`abstract_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}validateAbstract(e){return!!(e.title&&e.conference&&e.abstractType&&e.abstractData&&e.originalText)}async saveAbstract(e){if(!this.validateAbstract(e))throw new Error("Invalid abstract data: missing required fields");const t=this.getStoredAbstracts(),r=new Date,i=this.generateId(),s={...e,id:i,createdAt:r,updatedAt:r};return t.push(s),this.saveStoredAbstracts(t),i}async loadAbstract(e){return this.getStoredAbstracts().find(i=>i.id===e)||null}async listAbstracts(e){const t=this.getStoredAbstracts();return e?t.filter(r=>r.userId===e):t.sort((r,i)=>i.updatedAt.getTime()-r.updatedAt.getTime())}async deleteAbstract(e){const t=this.getStoredAbstracts(),r=t.filter(i=>i.id!==e);if(r.length===t.length)throw new Error(`Abstract with id ${e} not found`);this.saveStoredAbstracts(r)}async updateAbstract(e,t){const r=this.getStoredAbstracts(),i=r.findIndex(s=>s.id===e);if(i===-1)throw new Error(`Abstract with id ${e} not found`);r[i]={...r[i],...t,updatedAt:new Date},this.saveStoredAbstracts(r)}async searchAbstracts(e){const t=this.getStoredAbstracts(),r=e.toLowerCase();return t.filter(i=>i.title.toLowerCase().includes(r)||i.abstractData.impact.toLowerCase().includes(r)||i.abstractData.synopsis.toLowerCase().includes(r)||i.keywords.some(s=>s.toLowerCase().includes(r)))}async getStorageInfo(){const e=new Blob([localStorage.getItem(this.STORAGE_KEY)||""]).size,t=5*1024*1024-e;return{used:e,available:Math.max(0,t),total:5*1024*1024}}async exportData(){const e=this.getStoredAbstracts(),t=JSON.parse(localStorage.getItem(this.METADATA_KEY)||"{}");return JSON.stringify({version:this.CURRENT_VERSION,exportDate:new Date().toISOString(),abstracts:e,metadata:t},null,2)}async importData(e){try{const t=JSON.parse(e);if(!t.abstracts||!Array.isArray(t.abstracts))throw new Error("Invalid import data format");const r=t.abstracts.filter(s=>this.validateAbstract(s));if(r.length===0)throw new Error("No valid abstracts found in import data");const i=r.map(s=>({...s,createdAt:new Date(s.createdAt),updatedAt:new Date(s.updatedAt)}));this.saveStoredAbstracts(i)}catch(t){throw new Error(`Failed to import data: ${t instanceof Error?t.message:"Unknown error"}`)}}}class JI{constructor(e,t){this.isOnline=navigator.onLine,this.supabase=WI(e,t),this.localService=new r4,window.addEventListener("online",()=>{this.isOnline=!0,this.syncPendingChanges()}),window.addEventListener("offline",()=>{this.isOnline=!1})}async getCurrentUser(){const{data:{user:e}}=await this.supabase.auth.getUser();return e}async ensureAuthenticated(){const e=await this.getCurrentUser();if(!e)throw new Error("User not authenticated. Please sign in to use cloud sync.");return e}async saveAbstract(e){const t=await this.localService.saveAbstract(e);if(this.isOnline)try{const r=await this.getCurrentUser(),i=new Date().toISOString(),{data:s,error:u}=await this.supabase.from("abstracts").insert({local_id:t,title:e.title,conference:e.conference,abstract_type:e.abstractType,abstract_data:e.abstractData,original_text:e.originalText,categories:e.categories,keywords:e.keywords,user_id:r==null?void 0:r.id,created_at:i,updated_at:i}).select().single();u?(console.error("Failed to sync to cloud:",u),this.markForSync(t)):await this.localService.updateAbstract(t,{id:s.id,userId:r==null?void 0:r.id})}catch(r){console.error("Cloud sync error:",r),this.markForSync(t)}else this.markForSync(t);return t}async loadAbstract(e){const t=await this.localService.loadAbstract(e);if(!this.isOnline||t)return t;try{const r=await this.getCurrentUser();if(!r)return t;const{data:i,error:s}=await this.supabase.from("abstracts").select("*").eq("id",e).eq("user_id",r.id).single();if(s||!i)return t;const u={id:i.id,title:i.title,conference:i.conference,abstractType:i.abstract_type,abstractData:i.abstract_data,originalText:i.original_text,categories:i.categories||[],keywords:i.keywords||[],createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at),userId:i.user_id};return t||await this.localService.saveAbstract({title:u.title,conference:u.conference,abstractType:u.abstractType,abstractData:u.abstractData,originalText:u.originalText,categories:u.categories,keywords:u.keywords,userId:u.userId}),u}catch(r){return console.error("Failed to load from cloud:",r),t}}async listAbstracts(e){const t=await this.localService.listAbstracts(e);if(!this.isOnline)return t;try{const r=await this.getCurrentUser();if(!r)return t;const{data:i,error:s}=await this.supabase.from("abstracts").select("*").eq("user_id",r.id).order("updated_at",{ascending:!1});if(s)return console.error("Failed to fetch from cloud:",s),t;const u=i.map(c=>({id:c.id,title:c.title,conference:c.conference,abstractType:c.abstract_type,abstractData:c.abstract_data,originalText:c.original_text,categories:c.categories||[],keywords:c.keywords||[],createdAt:new Date(c.created_at),updatedAt:new Date(c.updated_at),userId:c.user_id})),l=this.mergeAbstractLists(t,u);for(const c of u)t.find(h=>h.id===c.id)||await this.localService.saveAbstract({title:c.title,conference:c.conference,abstractType:c.abstractType,abstractData:c.abstractData,originalText:c.originalText,categories:c.categories,keywords:c.keywords,userId:c.userId});return l}catch(r){return console.error("Failed to sync with cloud:",r),t}}async deleteAbstract(e){if(await this.localService.deleteAbstract(e),this.isOnline)try{const t=await this.getCurrentUser();if(t){const{error:r}=await this.supabase.from("abstracts").delete().eq("id",e).eq("user_id",t.id);r&&console.error("Failed to delete from cloud:",r)}}catch(t){console.error("Cloud delete error:",t)}}async updateAbstract(e,t){if(await this.localService.updateAbstract(e,t),this.isOnline)try{const r=await this.getCurrentUser();if(r){const i={updated_at:new Date().toISOString()};t.title&&(i.title=t.title),t.conference&&(i.conference=t.conference),t.abstractType&&(i.abstract_type=t.abstractType),t.abstractData&&(i.abstract_data=t.abstractData),t.originalText&&(i.original_text=t.originalText),t.categories&&(i.categories=t.categories),t.keywords&&(i.keywords=t.keywords);const{error:s}=await this.supabase.from("abstracts").update(i).eq("id",e).eq("user_id",r.id);s&&(console.error("Failed to update in cloud:",s),this.markForSync(e))}}catch(r){console.error("Cloud update error:",r),this.markForSync(e)}else this.markForSync(e)}async signIn(e,t){const{error:r}=await this.supabase.auth.signInWithPassword({email:e,password:t});if(r)throw new Error(`Sign in failed: ${r.message}`);await this.syncPendingChanges()}async signUp(e,t){const{error:r}=await this.supabase.auth.signUp({email:e,password:t});if(r)throw new Error(`Sign up failed: ${r.message}`)}async signOut(){const{error:e}=await this.supabase.auth.signOut();if(e)throw new Error(`Sign out failed: ${e.message}`)}mergeAbstractLists(e,t){const r=new Map;return e.forEach(i=>r.set(i.id,i)),t.forEach(i=>{const s=r.get(i.id);(!s||i.updatedAt>s.updatedAt)&&r.set(i.id,i)}),Array.from(r.values()).sort((i,s)=>s.updatedAt.getTime()-i.updatedAt.getTime())}markForSync(e){const t=JSON.parse(localStorage.getItem("pending-sync")||"[]");t.includes(e)||(t.push(e),localStorage.setItem("pending-sync",JSON.stringify(t)))}async syncPendingChanges(){if(!this.isOnline)return;const e=JSON.parse(localStorage.getItem("pending-sync")||"[]"),t=[];for(const i of e)try{const s=await this.localService.loadAbstract(i);s&&(await this.saveAbstract({title:s.title,conference:s.conference,abstractType:s.abstractType,abstractData:s.abstractData,originalText:s.originalText,categories:s.categories,keywords:s.keywords,userId:s.userId}),t.push(i))}catch(s){console.error(`Failed to sync abstract ${i}:`,s)}const r=e.filter(i=>!t.includes(i));localStorage.setItem("pending-sync",JSON.stringify(r))}async getSyncStatus(){const e=JSON.parse(localStorage.getItem("pending-sync")||"[]"),t=localStorage.getItem("last-sync");return{isOnline:this.isOnline,lastSync:t?new Date(t):null,pendingChanges:e.length,conflictCount:0}}async resolveConflicts(e){for(const t of e)try{if(t.resolution==="local")await this.updateAbstract(t.abstractId,t.localVersion);else if(t.resolution==="remote")await this.localService.updateAbstract(t.abstractId,t.remoteVersion);else if(t.resolution==="merge"){const r=this.mergeAbstracts(t.localVersion,t.remoteVersion);await this.updateAbstract(t.abstractId,r)}}catch(r){console.error(`Failed to resolve conflict for ${t.abstractId}:`,r)}}mergeAbstracts(e,t){return{...e,title:e.updatedAt>t.updatedAt?e.title:t.title,abstractData:e.updatedAt>t.updatedAt?e.abstractData:t.abstractData,categories:e.updatedAt>t.updatedAt?e.categories:t.categories,keywords:e.updatedAt>t.updatedAt?e.keywords:t.keywords,updatedAt:new Date}}}class Am{constructor(e){this.cloudService=null,this.useCloud=!1,this.localService=new r4,e&&(this.cloudService=new JI(e.url,e.key),this.useCloud=!0)}async saveAbstract(e){return this.useCloud&&this.cloudService?await this.cloudService.saveAbstract(e):await this.localService.saveAbstract(e)}async loadAbstract(e){return this.useCloud&&this.cloudService?await this.cloudService.loadAbstract(e):await this.localService.loadAbstract(e)}async listAbstracts(e){return this.useCloud&&this.cloudService?await this.cloudService.listAbstracts(e):await this.localService.listAbstracts(e)}async deleteAbstract(e){return this.useCloud&&this.cloudService?await this.cloudService.deleteAbstract(e):await this.localService.deleteAbstract(e)}async updateAbstract(e,t){return this.useCloud&&this.cloudService?await this.cloudService.updateAbstract(e,t):await this.localService.updateAbstract(e,t)}async signIn(e,t){this.cloudService&&await this.cloudService.signIn(e,t)}async signUp(e,t){this.cloudService&&await this.cloudService.signUp(e,t)}async signOut(){this.cloudService&&await this.cloudService.signOut()}async getSyncStatus(){return this.cloudService?await this.cloudService.getSyncStatus():null}async searchAbstracts(e){return await this.localService.searchAbstracts(e)}async exportData(){return await this.localService.exportData()}async importData(e){return await this.localService.importData(e)}getLocalService(){return this.localService}getCloudService(){return this.cloudService}}const i4={provider:"google",openAITextModel:"gpt-4o",openAIVisionModel:"gpt-4o",openAIApiKey:"",databaseUrl:"",supabaseConfig:void 0,exportPreferences:{defaultFormat:"pdf",includeMetadata:!0}},ud=it.createContext({settings:i4,saveSettings:()=>{},databaseService:new Am}),YI=({children:n})=>{const[e,t]=it.useState(i4),[r,i]=it.useState(new Am);it.useEffect(()=>{try{const u=localStorage.getItem("app-settings");if(u){const l=JSON.parse(u);t(l),l.supabaseConfig&&i(new Am(l.supabaseConfig))}}catch(u){console.error("Failed to load settings from localStorage",u)}},[]);const s=u=>{try{localStorage.setItem("app-settings",JSON.stringify(u)),t(u),u.supabaseConfig!==e.supabaseConfig&&i(new Am(u.supabaseConfig))}catch(l){console.error("Failed to save settings to localStorage",l)}};return G.jsx(ud.Provider,{value:{settings:e,saveSettings:s,databaseService:r},children:n})};function $t(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function Ve(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}let s4=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return s4=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};function Xv(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Zv=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Bt extends Error{}class Ii extends Bt{constructor(e,t,r,i){super(`${Ii.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.requestID=i==null?void 0:i.get("x-request-id"),this.error=t;const s=t;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new gg({message:r,cause:Zv(t)});const s=t==null?void 0:t.error;return e===400?new a4(e,s,r,i):e===401?new o4(e,s,r,i):e===403?new l4(e,s,r,i):e===404?new u4(e,s,r,i):e===409?new c4(e,s,r,i):e===422?new f4(e,s,r,i):e===429?new d4(e,s,r,i):e>=500?new h4(e,s,r,i):new Ii(e,s,r,i)}}class pa extends Ii{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class gg extends Ii{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Xw extends gg{constructor({message:e}={}){super({message:e??"Request timed out."})}}class a4 extends Ii{}class o4 extends Ii{}class l4 extends Ii{}class u4 extends Ii{}class c4 extends Ii{}class f4 extends Ii{}class d4 extends Ii{}class h4 extends Ii{}class p4 extends Bt{constructor(){super("Could not parse response content as the length limit was reached")}}class m4 extends Bt{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class dh extends Error{constructor(e){super(e)}}const XI=/^[a-z][a-z0-9+.-]*:/i,ZI=n=>XI.test(n);let bs=n=>(bs=Array.isArray,bs(n)),W5=bs;function g4(n){return typeof n!="object"?{}:n??{}}function QI(n){if(!n)return!0;for(const e in n)return!1;return!0}function eL(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function gy(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const tL=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Bt(`${n} must be an integer`);if(e<0)throw new Bt(`${n} must be a positive integer`);return e},nL=n=>{try{return JSON.parse(n)}catch{return}},Bh=n=>new Promise(e=>setTimeout(e,n)),Lf="6.7.0",rL=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function iL(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const sL=()=>{var t;const n=iL();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lf,"X-Stainless-OS":J5(Deno.build.os),"X-Stainless-Arch":K5(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lf,"X-Stainless-OS":J5(globalThis.process.platform??"unknown"),"X-Stainless-Arch":K5(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=aL();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Lf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function aL(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,u=r[3]||0;return{browser:e,version:`${i}.${s}.${u}`}}}return null}const K5=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",J5=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Y5;const oL=()=>Y5??(Y5=sL());function lL(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function y4(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function v4(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return y4({start(){},async pull(t){const{done:r,value:i}=await e.next();r?t.close():t.enqueue(i)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function w4(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function uL(n){var r,i;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((i=(r=n[Symbol.asyncIterator]()).return)==null?void 0:i.call(r));return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const cL=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),b4="RFC3986",_4=n=>String(n),X5={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:_4},fL="RFC1738";let Qv=(n,e)=>(Qv=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Qv(n,e));const Eo=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),yy=1024,dL=(n,e,t,r,i)=>{if(n.length===0)return n;let s=n;if(typeof n=="symbol"?s=Symbol.prototype.toString.call(n):typeof n!="string"&&(s=String(n)),t==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let u="";for(let l=0;l<s.length;l+=yy){const c=s.length>=yy?s.slice(l,l+yy):s,f=[];for(let h=0;h<c.length;++h){let g=c.charCodeAt(h);if(g===45||g===46||g===95||g===126||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||i===fL&&(g===40||g===41)){f[f.length]=c.charAt(h);continue}if(g<128){f[f.length]=Eo[g];continue}if(g<2048){f[f.length]=Eo[192|g>>6]+Eo[128|g&63];continue}if(g<55296||g>=57344){f[f.length]=Eo[224|g>>12]+Eo[128|g>>6&63]+Eo[128|g&63];continue}h+=1,g=65536+((g&1023)<<10|c.charCodeAt(h)&1023),f[f.length]=Eo[240|g>>18]+Eo[128|g>>12&63]+Eo[128|g>>6&63]+Eo[128|g&63]}u+=f.join("")}return u};function hL(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function Z5(n,e){if(bs(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const S4={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},x4=function(n,e){Array.prototype.push.apply(n,bs(e)?e:[e])};let Q5;const ui={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:dL,encodeValuesOnly:!1,format:b4,formatter:_4,indices:!1,serializeDate(n){return(Q5??(Q5=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function pL(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const vy={};function A4(n,e,t,r,i,s,u,l,c,f,h,g,y,m,E,_,R,b){let N=n,C=b,A=0,F=!1;for(;(C=C.get(vy))!==void 0&&!F;){const le=C.get(n);if(A+=1,typeof le<"u"){if(le===A)throw new RangeError("Cyclic object value");F=!0}typeof C.get(vy)>"u"&&(A=0)}if(typeof f=="function"?N=f(e,N):N instanceof Date?N=y==null?void 0:y(N):t==="comma"&&bs(N)&&(N=Z5(N,function(le){return le instanceof Date?y==null?void 0:y(le):le})),N===null){if(s)return c&&!_?c(e,ui.encoder,R,"key",m):e;N=""}if(pL(N)||hL(N)){if(c){const le=_?e:c(e,ui.encoder,R,"key",m);return[(E==null?void 0:E(le))+"="+(E==null?void 0:E(c(N,ui.encoder,R,"value",m)))]}return[(E==null?void 0:E(e))+"="+(E==null?void 0:E(String(N)))]}const J=[];if(typeof N>"u")return J;let V;if(t==="comma"&&bs(N))_&&c&&(N=Z5(N,c)),V=[{value:N.length>0?N.join(",")||null:void 0}];else if(bs(f))V=f;else{const le=Object.keys(N);V=h?le.sort(h):le}const te=l?String(e).replace(/\./g,"%2E"):String(e),O=r&&bs(N)&&N.length===1?te+"[]":te;if(i&&bs(N)&&N.length===0)return O+"[]";for(let le=0;le<V.length;++le){const Q=V[le],U=typeof Q=="object"&&typeof Q.value<"u"?Q.value:N[Q];if(u&&U===null)continue;const X=g&&l?Q.replace(/\./g,"%2E"):Q,M=bs(N)?typeof t=="function"?t(O,X):O:O+(g?"."+X:"["+X+"]");b.set(n,A);const ye=new WeakMap;ye.set(vy,b),x4(J,A4(U,M,t,r,i,s,u,l,t==="comma"&&_&&bs(N)?null:c,f,h,g,y,m,E,_,R,ye))}return J}function mL(n=ui){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||ui.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=b4;if(typeof n.format<"u"){if(!Qv(X5,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=X5[t];let i=ui.filter;(typeof n.filter=="function"||bs(n.filter))&&(i=n.filter);let s;if(n.arrayFormat&&n.arrayFormat in S4?s=n.arrayFormat:"indices"in n?s=n.indices?"indices":"repeat":s=ui.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:ui.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:ui.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:ui.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:ui.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?ui.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:ui.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:ui.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:ui.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:ui.encodeValuesOnly,filter:i,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:ui.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:ui.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:ui.strictNullHandling}}function gL(n,e={}){let t=n;const r=mL(e);let i,s;typeof r.filter=="function"?(s=r.filter,t=s("",t)):bs(r.filter)&&(s=r.filter,i=s);const u=[];if(typeof t!="object"||t===null)return"";const l=S4[r.arrayFormat],c=l==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);const f=new WeakMap;for(let y=0;y<i.length;++y){const m=i[y];r.skipNulls&&t[m]===null||x4(u,A4(t[m],m,l,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,f))}const h=u.join(r.delimiter);let g=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),h.length>0?g+h:""}function yL(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}let eS;function Zw(n){let e;return(eS??(e=new globalThis.TextEncoder,eS=e.encode.bind(e)))(n)}let tS;function nS(n){let e;return(tS??(e=new globalThis.TextDecoder,tS=e.decode.bind(e)))(n)}var qs,js;class yg{constructor(){qs.set(this,void 0),js.set(this,void 0),$t(this,qs,new Uint8Array),$t(this,js,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Zw(e):e;$t(this,qs,yL([Ve(this,qs,"f"),t]));const r=[];let i;for(;(i=vL(Ve(this,qs,"f"),Ve(this,js,"f")))!=null;){if(i.carriage&&Ve(this,js,"f")==null){$t(this,js,i.index);continue}if(Ve(this,js,"f")!=null&&(i.index!==Ve(this,js,"f")+1||i.carriage)){r.push(nS(Ve(this,qs,"f").subarray(0,Ve(this,js,"f")-1))),$t(this,qs,Ve(this,qs,"f").subarray(Ve(this,js,"f"))),$t(this,js,null);continue}const s=Ve(this,js,"f")!==null?i.preceding-1:i.preceding,u=nS(Ve(this,qs,"f").subarray(0,s));r.push(u),$t(this,qs,Ve(this,qs,"f").subarray(i.index)),$t(this,js,null)}return r}flush(){return Ve(this,qs,"f").length?this.decode(`
`):[]}}qs=new WeakMap,js=new WeakMap;yg.NEWLINE_CHARS=new Set([`
`,"\r"]);yg.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function vL(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function wL(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}const Km={off:0,error:200,warn:300,info:400,debug:500},rS=(n,e,t)=>{if(n){if(eL(Km,n))return n;Ri(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Km))}`)}};function hh(){}function Yp(n,e,t){return!e||Km[n]>Km[t]?hh:e[n].bind(e)}const bL={error:hh,warn:hh,info:hh,debug:hh};let iS=new WeakMap;function Ri(n){const e=n.logger,t=n.logLevel??"off";if(!e)return bL;const r=iS.get(e);if(r&&r[0]===t)return r[1];const i={error:Yp("error",e,t),warn:Yp("warn",e,t),info:Yp("info",e,t),debug:Yp("debug",e,t)};return iS.set(e,[t,i]),i}const rc=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var th;class Po{constructor(e,t,r){this.iterator=e,th.set(this,void 0),this.controller=t,$t(this,th,r)}static fromSSEResponse(e,t,r){let i=!1;const s=r?Ri(r):console;async function*u(){if(i)throw new Bt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let l=!1;try{for await(const c of _L(e,t))if(!l){if(c.data.startsWith("[DONE]")){l=!0;continue}if(c.event===null||!c.event.startsWith("thread.")){let f;try{f=JSON.parse(c.data)}catch(h){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),h}if(f&&f.error)throw new Ii(void 0,f.error,void 0,e.headers);yield f}else{let f;try{f=JSON.parse(c.data)}catch(h){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),h}if(c.event=="error")throw new Ii(void 0,f.error,f.message,void 0);yield{event:c.event,data:f}}}l=!0}catch(c){if(Xv(c))return;throw c}finally{l||t.abort()}}return new Po(u,t,r)}static fromReadableStream(e,t,r){let i=!1;async function*s(){const l=new yg,c=w4(e);for await(const f of c)for(const h of l.decode(f))yield h;for(const f of l.flush())yield f}async function*u(){if(i)throw new Bt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let l=!1;try{for await(const c of s())l||c&&(yield JSON.parse(c));l=!0}catch(c){if(Xv(c))return;throw c}finally{l||t.abort()}}return new Po(u,t,r)}[(th=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const u=r.next();e.push(u),t.push(u)}return s.shift()}});return[new Po(()=>i(e),this.controller,Ve(this,th,"f")),new Po(()=>i(t),this.controller,Ve(this,th,"f"))]}toReadableStream(){const e=this;let t;return y4({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await t.next();if(s)return r.close();const u=Zw(JSON.stringify(i)+`
`);r.enqueue(u)}catch(i){r.error(i)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}}async function*_L(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Bt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Bt("Attempted to iterate over a response with no body");const t=new xL,r=new yg,i=w4(n.body);for await(const s of SL(i))for(const u of r.decode(s)){const l=t.decode(u);l&&(yield l)}for(const s of r.flush()){const u=t.decode(s);u&&(yield u)}}async function*SL(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Zw(t):t;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=wL(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class xL{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=AL(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function AL(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function E4(n,e){const{response:t,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,u=await(async()=>{var g;if(e.options.stream)return Ri(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Po.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const l=t.headers.get("content-type"),c=(g=l==null?void 0:l.split(";")[0])==null?void 0:g.trim();if((c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))){const y=await t.json();return T4(y,t)}return await t.text()})();return Ri(n).debug(`[${r}] response parsed`,rc({retryOfRequestLogID:i,url:t.url,status:t.status,body:u,durationMs:Date.now()-s})),u}function T4(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ph;class vg extends Promise{constructor(e,t,r=E4){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r,ph.set(this,void 0),$t(this,ph,e)}_thenUnwrap(e){return new vg(Ve(this,ph,"f"),this.responsePromise,async(t,r)=>T4(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Ve(this,ph,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ph=new WeakMap;var Xp;class Qw{constructor(e,t,r,i){Xp.set(this,void 0),$t(this,Xp,e),this.options=i,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Bt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Ve(this,Xp,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Xp=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class EL extends vg{constructor(e,t,r){super(e,t,async(i,s)=>new r(i,s.response,await E4(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}let wg=class extends Qw{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}};class Yr extends Qw{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),t=(r=e[e.length-1])==null?void 0:r.id;return t?{...this.options,query:{...g4(this.options.query),after:t}}:null}}class Jm extends Qw{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...g4(this.options.query),after:e}}:null}}const C4=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Eh(n,e,t){return C4(),new File(n,e??"unknown_file",t)}function Em(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const eb=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",sS=async(n,e)=>ew(n.body)?{...n,body:await N4(n.body,e)}:n,gc=async(n,e)=>({...n,body:await N4(n.body,e)}),aS=new WeakMap;function TL(n){const e=typeof n=="function"?n:n.fetch,t=aS.get(e);if(t)return t;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return aS.set(e,r),r}const N4=async(n,e)=>{if(!await TL(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([r,i])=>tw(t,r,i))),t},R4=n=>n instanceof Blob&&"name"in n,CL=n=>typeof n=="object"&&n!==null&&(n instanceof Response||eb(n)||R4(n)),ew=n=>{if(CL(n))return!0;if(Array.isArray(n))return n.some(ew);if(n&&typeof n=="object"){for(const e in n)if(ew(n[e]))return!0}return!1},tw=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,Eh([await t.blob()],Em(t)));else if(eb(t))n.append(e,Eh([await new Response(v4(t)).blob()],Em(t)));else if(R4(t))n.append(e,t,Em(t));else if(Array.isArray(t))await Promise.all(t.map(r=>tw(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,i])=>tw(n,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},k4=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",NL=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&k4(n),RL=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function kL(n,e,t){if(C4(),n=await n,NL(n))return n instanceof File?n:Eh([await n.arrayBuffer()],n.name);if(RL(n)){const i=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Eh(await nw(i),e,t)}const r=await nw(n);if(e||(e=Em(n)),!(t!=null&&t.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(t={...t,type:i})}return Eh(r,e,t)}async function nw(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(k4(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(eb(n))for await(const r of n)e.push(...await nw(r));else{const r=(t=n==null?void 0:n.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof n}${r?`; constructor: ${r}`:""}${IL(n)}`)}return e}function IL(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class Lt{constructor(e){this._client=e}}function I4(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const oS=Object.freeze(Object.create(null)),LL=(n=I4)=>function(t,...r){if(t.length===1)return t[0];let i=!1;const s=[],u=t.reduce((h,g,y)=>{var _;/[?#]/.test(g)&&(i=!0);const m=r[y];let E=(i?encodeURIComponent:n)(""+m);return y!==r.length&&(m==null||typeof m=="object"&&m.toString===((_=Object.getPrototypeOf(Object.getPrototypeOf(m.hasOwnProperty??oS)??oS))==null?void 0:_.toString))&&(E=m+"",s.push({start:h.length+g.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(m).slice(8,-1)} is not a valid path parameter`})),h+g+(y===r.length?"":E)},""),l=u.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=c.exec(l))!==null;)s.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(s.sort((h,g)=>h.start-g.start),s.length>0){let h=0;const g=s.reduce((y,m)=>{const E=" ".repeat(m.start-h),_="^".repeat(m.length);return h=m.start+m.length,y+E+_},"");throw new Bt(`Path parameters result in path with invalid segments:
${s.map(y=>y.error).join(`
`)}
${u}
${g}`)}return u},ft=LL(I4);let L4=class extends Lt{list(e,t={},r){return this._client.getAPIList(ft`/chat/completions/${e}/messages`,Yr,{query:t,...r})}};function Ym(n){return n!==void 0&&"function"in n&&n.function!==void 0}function tb(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function qh(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function PL(n,e){return!e||!P4(e)?{...n,choices:n.choices.map(t=>(M4(t.message.tool_calls),{...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:nb(n,e)}function nb(n,e){const t=n.choices.map(r=>{var i;if(r.finish_reason==="length")throw new p4;if(r.finish_reason==="content_filter")throw new m4;return M4(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>OL(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?ML(e,r.message.content):null}}});return{...n,choices:t}}function ML(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function OL(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(i=>{var s;return Ym(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:qh(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function DL(n,e){var r;if(!n||!("tools"in n)||!n.tools)return!1;const t=(r=n.tools)==null?void 0:r.find(i=>{var s;return Ym(i)&&((s=i.function)==null?void 0:s.name)===e.function.name});return Ym(t)&&(qh(t)||(t==null?void 0:t.function.strict)||!1)}function P4(n){var e;return tb(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>qh(t)||t.type==="function"&&t.function.strict===!0))??!1}function M4(n){for(const e of n||[])if(e.type!=="function")throw new Bt(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function UL(n){for(const e of n??[]){if(e.type!=="function")throw new Bt(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Bt(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Xm=n=>(n==null?void 0:n.role)==="assistant",O4=n=>(n==null?void 0:n.role)==="tool";var rw,Tm,Cm,mh,gh,Nm,yh,bl,vh,Zm,Qm,Pf,D4;class rb{constructor(){rw.add(this),this.controller=new AbortController,Tm.set(this,void 0),Cm.set(this,()=>{}),mh.set(this,()=>{}),gh.set(this,void 0),Nm.set(this,()=>{}),yh.set(this,()=>{}),bl.set(this,{}),vh.set(this,!1),Zm.set(this,!1),Qm.set(this,!1),Pf.set(this,!1),$t(this,Tm,new Promise((e,t)=>{$t(this,Cm,e,"f"),$t(this,mh,t,"f")})),$t(this,gh,new Promise((e,t)=>{$t(this,Nm,e,"f"),$t(this,yh,t,"f")})),Ve(this,Tm,"f").catch(()=>{}),Ve(this,gh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Ve(this,rw,"m",D4).bind(this))},0)}_connected(){this.ended||(Ve(this,Cm,"f").call(this),this._emit("connect"))}get ended(){return Ve(this,vh,"f")}get errored(){return Ve(this,Zm,"f")}get aborted(){return Ve(this,Qm,"f")}abort(){this.controller.abort()}on(e,t){return(Ve(this,bl,"f")[e]||(Ve(this,bl,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=Ve(this,bl,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===t);return i>=0&&r.splice(i,1),this}once(e,t){return(Ve(this,bl,"f")[e]||(Ve(this,bl,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{$t(this,Pf,!0),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){$t(this,Pf,!0),await Ve(this,gh,"f")}_emit(e,...t){if(Ve(this,vh,"f"))return;e==="end"&&($t(this,vh,!0),Ve(this,Nm,"f").call(this));const r=Ve(this,bl,"f")[e];if(r&&(Ve(this,bl,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!Ve(this,Pf,"f")&&!(r!=null&&r.length)&&Promise.reject(i),Ve(this,mh,"f").call(this,i),Ve(this,yh,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!Ve(this,Pf,"f")&&!(r!=null&&r.length)&&Promise.reject(i),Ve(this,mh,"f").call(this,i),Ve(this,yh,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Tm=new WeakMap,Cm=new WeakMap,mh=new WeakMap,gh=new WeakMap,Nm=new WeakMap,yh=new WeakMap,bl=new WeakMap,vh=new WeakMap,Zm=new WeakMap,Qm=new WeakMap,Pf=new WeakMap,rw=new WeakSet,D4=function(e){if($t(this,Zm,!0),e instanceof Error&&e.name==="AbortError"&&(e=new pa),e instanceof pa)return $t(this,Qm,!0),this._emit("abort",e);if(e instanceof Bt)return this._emit("error",e);if(e instanceof Error){const t=new Bt(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Bt(String(e)))};function FL(n){return typeof n.parse=="function"}var es,iw,eg,sw,aw,ow,U4,F4;const BL=10;class B4 extends rb{constructor(){super(...arguments),es.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),O4(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Xm(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Bt("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ve(this,es,"m",iw).call(this)}async finalMessage(){return await this.done(),Ve(this,es,"m",eg).call(this)}async finalFunctionToolCall(){return await this.done(),Ve(this,es,"m",sw).call(this)}async finalFunctionToolCallResult(){return await this.done(),Ve(this,es,"m",aw).call(this)}async totalUsage(){return await this.done(),Ve(this,es,"m",ow).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Ve(this,es,"m",eg).call(this);t&&this._emit("finalMessage",t);const r=Ve(this,es,"m",iw).call(this);r&&this._emit("finalContent",r);const i=Ve(this,es,"m",sw).call(this);i&&this._emit("finalFunctionToolCall",i);const s=Ve(this,es,"m",aw).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",Ve(this,es,"m",ow).call(this))}async _createChatCompletion(e,t,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ve(this,es,"m",U4).call(this,t);const s=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(nb(s,t))}async _runChatCompletion(e,t,r){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,r)}async _runTools(e,t,r){var m,E,_;const i="tool",{tool_choice:s="auto",stream:u,...l}=t,c=typeof s!="string"&&s.type==="function"&&((m=s==null?void 0:s.function)==null?void 0:m.name),{maxChatCompletions:f=BL}=r||{},h=t.tools.map(R=>{if(qh(R)){if(!R.$callback)throw new Bt("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:R.$callback,name:R.function.name,description:R.function.description||"",parameters:R.function.parameters,parse:R.$parseRaw,strict:!0}}}return R}),g={};for(const R of h)R.type==="function"&&(g[R.function.name||R.function.function.name]=R.function);const y="tools"in t?h.map(R=>R.type==="function"?{type:"function",function:{name:R.function.name||R.function.function.name,parameters:R.function.parameters,description:R.function.description,strict:R.function.strict}}:R):void 0;for(const R of t.messages)this._addMessage(R,!1);for(let R=0;R<f;++R){const N=(E=(await this._createChatCompletion(e,{...l,tool_choice:s,tools:y,messages:[...this.messages]},r)).choices[0])==null?void 0:E.message;if(!N)throw new Bt("missing message in ChatCompletion response");if(!((_=N.tool_calls)!=null&&_.length))return;for(const C of N.tool_calls){if(C.type!=="function")continue;const A=C.id,{name:F,arguments:J}=C.function,V=g[F];if(V){if(c&&c!==F){const Q=`Invalid tool_call: ${JSON.stringify(F)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:A,content:Q});continue}}else{const Q=`Invalid tool_call: ${JSON.stringify(F)}. Available options are: ${Object.keys(g).map(U=>JSON.stringify(U)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:A,content:Q});continue}let te;try{te=FL(V)?await V.parse(J):J}catch(Q){const U=Q instanceof Error?Q.message:String(Q);this._addMessage({role:i,tool_call_id:A,content:U});continue}const O=await V.function(te,this),le=Ve(this,es,"m",F4).call(this,O);if(this._addMessage({role:i,tool_call_id:A,content:le}),c)return}}}}es=new WeakSet,iw=function(){return Ve(this,es,"m",eg).call(this).content??null},eg=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Xm(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new Bt("stream ended without producing a ChatCompletionMessage with role=assistant")},sw=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(Xm(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.filter(s=>s.type==="function").at(-1))==null?void 0:t.function}},aw=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(O4(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===t.tool_call_id))}))return t.content}},ow=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},U4=function(e){if(e.n!=null&&e.n>1)throw new Bt("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},F4=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ib extends B4{static runTools(e,t,r){const i=new ib,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,s)),i}_addMessage(e,t=!0){super._addMessage(e,t),Xm(e)&&e.content&&this._emit("content",e.content)}}const q4=1,j4=2,z4=4,H4=8,G4=16,V4=32,$4=64,W4=128,K4=256,J4=W4|K4,Y4=G4|V4|J4|$4,X4=q4|j4|Y4,Z4=z4|H4,qL=X4|Z4,wi={STR:q4,NUM:j4,ARR:z4,OBJ:H4,NULL:G4,BOOL:V4,NAN:$4,INFINITY:W4,MINUS_INFINITY:K4,INF:J4,SPECIAL:Y4,ATOM:X4,COLLECTION:Z4,ALL:qL};class jL extends Error{}class zL extends Error{}function HL(n,e=wi.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return GL(n.trim(),e)}const GL=(n,e)=>{const t=n.length;let r=0;const i=y=>{throw new jL(`${y} at position ${r}`)},s=y=>{throw new zL(`${y} at position ${r}`)},u=()=>(g(),r>=t&&i("Unexpected end of input"),n[r]==='"'?l():n[r]==="{"?c():n[r]==="["?f():n.substring(r,r+4)==="null"||wi.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||wi.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||wi.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||wi.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||wi.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||wi.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):h()),l=()=>{const y=r;let m=!1;for(r++;r<t&&(n[r]!=='"'||m&&n[r-1]==="\\");)m=n[r]==="\\"?!m:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(y,++r-Number(m)))}catch(E){s(String(E))}else if(wi.STR&e)try{return JSON.parse(n.substring(y,r-Number(m))+'"')}catch{return JSON.parse(n.substring(y,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{r++,g();const y={};try{for(;n[r]!=="}";){if(g(),r>=t&&wi.OBJ&e)return y;const m=l();g(),r++;try{const E=u();Object.defineProperty(y,m,{value:E,writable:!0,enumerable:!0,configurable:!0})}catch(E){if(wi.OBJ&e)return y;throw E}g(),n[r]===","&&r++}}catch{if(wi.OBJ&e)return y;i("Expected '}' at end of object")}return r++,y},f=()=>{r++;const y=[];try{for(;n[r]!=="]";)y.push(u()),g(),n[r]===","&&r++}catch{if(wi.ARR&e)return y;i("Expected ']' at end of array")}return r++,y},h=()=>{if(r===0){n==="-"&&wi.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(m){if(wi.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}s(String(m))}}const y=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(wi.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(y,r))}catch{n.substring(y,r)==="-"&&wi.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(y,n.lastIndexOf("e")))}catch(E){s(String(E))}}},g=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return u()},lS=n=>HL(n,wi.ALL^wi.NUM);var oi,ml,Sf,ou,wy,Zp,by,_y,Sy,Qp,xy,uS;class Oh extends B4{constructor(e){super(),oi.add(this),ml.set(this,void 0),Sf.set(this,void 0),ou.set(this,void 0),$t(this,ml,e),$t(this,Sf,[])}get currentChatCompletionSnapshot(){return Ve(this,ou,"f")}static fromReadableStream(e){const t=new Oh(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const i=new Oh(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,r){var u;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ve(this,oi,"m",wy).call(this);const s=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of s)Ve(this,oi,"m",by).call(this,l);if((u=s.controller.signal)!=null&&u.aborted)throw new pa;return this._addChatCompletion(Ve(this,oi,"m",Qp).call(this))}async _fromReadableStream(e,t){var u;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Ve(this,oi,"m",wy).call(this),this._connected();const i=Po.fromReadableStream(e,this.controller);let s;for await(const l of i)s&&s!==l.id&&this._addChatCompletion(Ve(this,oi,"m",Qp).call(this)),Ve(this,oi,"m",by).call(this,l),s=l.id;if((u=i.controller.signal)!=null&&u.aborted)throw new pa;return this._addChatCompletion(Ve(this,oi,"m",Qp).call(this))}[(ml=new WeakMap,Sf=new WeakMap,ou=new WeakMap,oi=new WeakSet,wy=function(){this.ended||$t(this,ou,void 0)},Zp=function(t){let r=Ve(this,Sf,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Ve(this,Sf,"f")[t.index]=r,r)},by=function(t){var i,s,u,l,c,f,h,g,y,m,E,_,R,b,N;if(this.ended)return;const r=Ve(this,oi,"m",uS).call(this,t);this._emit("chunk",t,r);for(const C of t.choices){const A=r.choices[C.index];C.delta.content!=null&&((i=A.message)==null?void 0:i.role)==="assistant"&&((s=A.message)!=null&&s.content)&&(this._emit("content",C.delta.content,A.message.content),this._emit("content.delta",{delta:C.delta.content,snapshot:A.message.content,parsed:A.message.parsed})),C.delta.refusal!=null&&((u=A.message)==null?void 0:u.role)==="assistant"&&((l=A.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:C.delta.refusal,snapshot:A.message.refusal}),((c=C.logprobs)==null?void 0:c.content)!=null&&((f=A.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(h=C.logprobs)==null?void 0:h.content,snapshot:((g=A.logprobs)==null?void 0:g.content)??[]}),((y=C.logprobs)==null?void 0:y.refusal)!=null&&((m=A.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(E=C.logprobs)==null?void 0:E.refusal,snapshot:((_=A.logprobs)==null?void 0:_.refusal)??[]});const F=Ve(this,oi,"m",Zp).call(this,A);A.finish_reason&&(Ve(this,oi,"m",Sy).call(this,A),F.current_tool_call_index!=null&&Ve(this,oi,"m",_y).call(this,A,F.current_tool_call_index));for(const J of C.delta.tool_calls??[])F.current_tool_call_index!==J.index&&(Ve(this,oi,"m",Sy).call(this,A),F.current_tool_call_index!=null&&Ve(this,oi,"m",_y).call(this,A,F.current_tool_call_index)),F.current_tool_call_index=J.index;for(const J of C.delta.tool_calls??[]){const V=(R=A.message.tool_calls)==null?void 0:R[J.index];V!=null&&V.type&&((V==null?void 0:V.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(b=V.function)==null?void 0:b.name,index:J.index,arguments:V.function.arguments,parsed_arguments:V.function.parsed_arguments,arguments_delta:((N=J.function)==null?void 0:N.arguments)??""}):(V==null||V.type,void 0))}}},_y=function(t,r){var u,l,c;if(Ve(this,oi,"m",Zp).call(this,t).done_tool_calls.has(r))return;const s=(u=t.message.tool_calls)==null?void 0:u[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const f=(c=(l=Ve(this,ml,"f"))==null?void 0:l.tools)==null?void 0:c.find(h=>Ym(h)&&h.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:qh(f)?f.$parseRaw(s.function.arguments):f!=null&&f.function.strict?JSON.parse(s.function.arguments):null})}else s.type},Sy=function(t){var i,s;const r=Ve(this,oi,"m",Zp).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const u=Ve(this,oi,"m",xy).call(this);this._emit("content.done",{content:t.message.content,parsed:u?u.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(s=t.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Qp=function(){if(this.ended)throw new Bt("stream has ended, this shouldn't happen");const t=Ve(this,ou,"f");if(!t)throw new Bt("request ended without sending any chunks");return $t(this,ou,void 0),$t(this,Sf,[]),VL(t,Ve(this,ml,"f"))},xy=function(){var r;const t=(r=Ve(this,ml,"f"))==null?void 0:r.response_format;return tb(t)?t:null},uS=function(t){var r,i,s,u;let l=Ve(this,ou,"f");const{choices:c,...f}=t;l?Object.assign(l,f):l=$t(this,ou,{...f,choices:[]});for(const{delta:h,finish_reason:g,index:y,logprobs:m=null,...E}of t.choices){let _=l.choices[y];if(_||(_=l.choices[y]={finish_reason:g,index:y,message:{},logprobs:m,...E}),m)if(!_.logprobs)_.logprobs=Object.assign({},m);else{const{content:J,refusal:V,...te}=m;Object.assign(_.logprobs,te),J&&((r=_.logprobs).content??(r.content=[]),_.logprobs.content.push(...J)),V&&((i=_.logprobs).refusal??(i.refusal=[]),_.logprobs.refusal.push(...V))}if(g&&(_.finish_reason=g,Ve(this,ml,"f")&&P4(Ve(this,ml,"f")))){if(g==="length")throw new p4;if(g==="content_filter")throw new m4}if(Object.assign(_,E),!h)continue;const{content:R,refusal:b,function_call:N,role:C,tool_calls:A,...F}=h;if(Object.assign(_.message,F),b&&(_.message.refusal=(_.message.refusal||"")+b),C&&(_.message.role=C),N&&(_.message.function_call?(N.name&&(_.message.function_call.name=N.name),N.arguments&&((s=_.message.function_call).arguments??(s.arguments=""),_.message.function_call.arguments+=N.arguments)):_.message.function_call=N),R&&(_.message.content=(_.message.content||"")+R,!_.message.refusal&&Ve(this,oi,"m",xy).call(this)&&(_.message.parsed=lS(_.message.content))),A){_.message.tool_calls||(_.message.tool_calls=[]);for(const{index:J,id:V,type:te,function:O,...le}of A){const Q=(u=_.message.tool_calls)[J]??(u[J]={});Object.assign(Q,le),V&&(Q.id=V),te&&(Q.type=te),O&&(Q.function??(Q.function={name:O.name??"",arguments:""})),O!=null&&O.name&&(Q.function.name=O.name),O!=null&&O.arguments&&(Q.function.arguments+=O.arguments,DL(Ve(this,ml,"f"),Q)&&(Q.function.parsed_arguments=lS(Q.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",i=>{const s=t.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const s of t)s.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const s of t)s.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,u)=>t.push({resolve:s,reject:u})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Po(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function VL(n,e){const{id:t,choices:r,created:i,model:s,system_fingerprint:u,...l}=n,c={...l,id:t,choices:r.map(({message:f,finish_reason:h,index:g,logprobs:y,...m})=>{if(!h)throw new Bt(`missing finish_reason for choice ${g}`);const{content:E=null,function_call:_,tool_calls:R,...b}=f,N=f.role;if(!N)throw new Bt(`missing role for choice ${g}`);if(_){const{arguments:C,name:A}=_;if(C==null)throw new Bt(`missing function_call.arguments for choice ${g}`);if(!A)throw new Bt(`missing function_call.name for choice ${g}`);return{...m,message:{content:E,function_call:{arguments:C,name:A},role:N,refusal:f.refusal??null},finish_reason:h,index:g,logprobs:y}}return R?{...m,index:g,finish_reason:h,logprobs:y,message:{...b,role:N,content:E,refusal:f.refusal??null,tool_calls:R.map((C,A)=>{const{function:F,type:J,id:V,...te}=C,{arguments:O,name:le,...Q}=F||{};if(V==null)throw new Bt(`missing choices[${g}].tool_calls[${A}].id
${em(n)}`);if(J==null)throw new Bt(`missing choices[${g}].tool_calls[${A}].type
${em(n)}`);if(le==null)throw new Bt(`missing choices[${g}].tool_calls[${A}].function.name
${em(n)}`);if(O==null)throw new Bt(`missing choices[${g}].tool_calls[${A}].function.arguments
${em(n)}`);return{...te,id:V,type:J,function:{...Q,name:le,arguments:O}}})}}:{...m,message:{...b,content:E,role:N,refusal:f.refusal??null},finish_reason:h,index:g,logprobs:y}}),created:i,model:s,object:"chat.completion",...u?{system_fingerprint:u}:{}};return PL(c,e)}function em(n){return JSON.stringify(n)}class tg extends Oh{static fromReadableStream(e){const t=new tg(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,r){const i=new tg(t),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,s)),i}}let sb=class extends Lt{constructor(){super(...arguments),this.messages=new L4(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(ft`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(ft`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/chat/completions",Yr,{query:e,...t})}delete(e,t){return this._client.delete(ft`/chat/completions/${e}`,t)}parse(e,t){return UL(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>nb(r,e))}runTools(e,t){return e.stream?tg.runTools(this._client,e,t):ib.runTools(this._client,e,t)}stream(e,t){return Oh.createChatCompletion(this._client,e,t)}};sb.Messages=L4;let ab=class extends Lt{constructor(){super(...arguments),this.completions=new sb(this._client)}};ab.Completions=sb;const Q4=Symbol("brand.privateNullableHeaders");function*$L(n){if(!n)return;if(Q4 in n){const{values:r,nulls:i}=n;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,t;n instanceof Headers?t=n.entries():W5(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=W5(r[1])?r[1]:[r[1]];let u=!1;for(const l of s)l!==void 0&&(e&&!u&&(u=!0,yield[i,null]),yield[i,l])}}const _t=n=>{const e=new Headers,t=new Set;for(const r of n){const i=new Set;for(const[s,u]of $L(r)){const l=s.toLowerCase();i.has(l)||(e.delete(s),i.add(l)),u===null?(e.delete(s),t.add(l)):(e.append(s,u),t.delete(l))}}return{[Q4]:!0,values:e,nulls:t}};class eC extends Lt{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:_t([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class tC extends Lt{create(e,t){return this._client.post("/audio/transcriptions",gc({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class nC extends Lt{create(e,t){return this._client.post("/audio/translations",gc({body:e,...t,__metadata:{model:e.model}},this._client))}}class jh extends Lt{constructor(){super(...arguments),this.transcriptions=new tC(this._client),this.translations=new nC(this._client),this.speech=new eC(this._client)}}jh.Transcriptions=tC;jh.Translations=nC;jh.Speech=eC;let rC=class extends Lt{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(ft`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",Yr,{query:e,...t})}cancel(e,t){return this._client.post(ft`/batches/${e}/cancel`,t)}};class iC extends Lt{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(ft`/assistants/${e}`,{...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(ft`/assistants/${e}`,{body:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},t){return this._client.getAPIList("/assistants",Yr,{query:e,...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(ft`/assistants/${e}`,{...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}let sC=class extends Lt{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}};class aC extends Lt{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}let bg=class extends Lt{constructor(){super(...arguments),this.sessions=new sC(this._client),this.transcriptionSessions=new aC(this._client)}};bg.Sessions=sC;bg.TranscriptionSessions=aC;class oC extends Lt{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:_t([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}cancel(e,t){return this._client.post(ft`/chatkit/sessions/${e}/cancel`,{...t,headers:_t([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}}let lC=class extends Lt{retrieve(e,t){return this._client.get(ft`/chatkit/threads/${e}`,{...t,headers:_t([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",Jm,{query:e,...t,headers:_t([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(ft`/chatkit/threads/${e}`,{...t,headers:_t([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}listItems(e,t={},r){return this._client.getAPIList(ft`/chatkit/threads/${e}/items`,Jm,{query:t,...r,headers:_t([{"OpenAI-Beta":"chatkit_beta=v1"},r==null?void 0:r.headers])})}};class _g extends Lt{constructor(){super(...arguments),this.sessions=new oC(this._client),this.threads=new lC(this._client)}}_g.Sessions=oC;_g.Threads=lC;class uC extends Lt{create(e,t,r){return this._client.post(ft`/threads/${e}/messages`,{body:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){const{thread_id:i}=t;return this._client.get(ft`/threads/${i}/messages/${e}`,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){const{thread_id:i,...s}=t;return this._client.post(ft`/threads/${i}/messages/${e}`,{body:s,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(ft`/threads/${e}/messages`,Yr,{query:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t,r){const{thread_id:i}=t;return this._client.delete(ft`/threads/${i}/messages/${e}`,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class cC extends Lt{retrieve(e,t,r){const{thread_id:i,run_id:s,...u}=t;return this._client.get(ft`/threads/${i}/runs/${s}/steps/${e}`,{query:u,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t,r){const{thread_id:i,...s}=t;return this._client.getAPIList(ft`/threads/${i}/runs/${e}/steps`,Yr,{query:s,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const WL=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var Ay={};const xf=n=>{var e,t,r,i;if(typeof globalThis.process<"u")return((e=Ay==null?void 0:Ay[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(i=(r=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:i.trim()};var ki,cc,lw,ko,Rm,Ja,fc,Ff,oc,ng,Hs,km,Im,Th,wh,bh,cS,fS,dS,hS,pS,mS,gS;class Ch extends rb{constructor(){super(...arguments),ki.add(this),lw.set(this,[]),ko.set(this,{}),Rm.set(this,{}),Ja.set(this,void 0),fc.set(this,void 0),Ff.set(this,void 0),oc.set(this,void 0),ng.set(this,void 0),Hs.set(this,void 0),km.set(this,void 0),Im.set(this,void 0),Th.set(this,void 0)}[(lw=new WeakMap,ko=new WeakMap,Rm=new WeakMap,Ja=new WeakMap,fc=new WeakMap,Ff=new WeakMap,oc=new WeakMap,ng=new WeakMap,Hs=new WeakMap,km=new WeakMap,Im=new WeakMap,Th=new WeakMap,ki=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const s=t.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const s of t)s.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const s of t)s.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,u)=>t.push({resolve:s,reject:u})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new cc;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var s;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Po.fromReadableStream(e,this.controller);for await(const u of i)Ve(this,ki,"m",wh).call(this,u);if((s=i.controller.signal)!=null&&s.aborted)throw new pa;return this._addRun(Ve(this,ki,"m",bh).call(this))}toReadableStream(){return new Po(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,i){const s=new cc;return s._run(()=>s._runToolAssistantStream(e,t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,t,r,i){var c;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const u={...r,stream:!0},l=await e.submitToolOutputs(t,u,{...i,signal:this.controller.signal});this._connected();for await(const f of l)Ve(this,ki,"m",wh).call(this,f);if((c=l.controller.signal)!=null&&c.aborted)throw new pa;return this._addRun(Ve(this,ki,"m",bh).call(this))}static createThreadAssistantStream(e,t,r){const i=new cc;return i._run(()=>i._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,r,i){const s=new cc;return s._run(()=>s._runAssistantStream(e,t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Ve(this,km,"f")}currentRun(){return Ve(this,Im,"f")}currentMessageSnapshot(){return Ve(this,Ja,"f")}currentRunStepSnapshot(){return Ve(this,Th,"f")}async finalRunSteps(){return await this.done(),Object.values(Ve(this,ko,"f"))}async finalMessages(){return await this.done(),Object.values(Ve(this,Rm,"f"))}async finalRun(){if(await this.done(),!Ve(this,fc,"f"))throw Error("Final run was not received.");return Ve(this,fc,"f")}async _createThreadAssistantStream(e,t,r){var l;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...t,stream:!0},u=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const c of u)Ve(this,ki,"m",wh).call(this,c);if((l=u.controller.signal)!=null&&l.aborted)throw new pa;return this._addRun(Ve(this,ki,"m",bh).call(this))}async _createAssistantStream(e,t,r,i){var c;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const u={...r,stream:!0},l=await e.create(t,u,{...i,signal:this.controller.signal});this._connected();for await(const f of l)Ve(this,ki,"m",wh).call(this,f);if((c=l.controller.signal)!=null&&c.aborted)throw new pa;return this._addRun(Ve(this,ki,"m",bh).call(this))}static accumulateDelta(e,t){for(const[r,i]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(gy(s)&&gy(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(u=>typeof u=="string"||typeof u=="number")){s.push(...i);continue}for(const u of i){if(!gy(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const l=u.index;if(l==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const c=s[l];c==null?s.push(u):s[l]=this.accumulateDelta(c,u)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,i){return await this._createAssistantStream(t,e,r,i)}async _runToolAssistantStream(e,t,r,i){return await this._createToolAssistantStream(t,e,r,i)}}cc=Ch,wh=function(e){if(!this.ended)switch($t(this,km,e),Ve(this,ki,"m",dS).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Ve(this,ki,"m",gS).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ve(this,ki,"m",fS).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Ve(this,ki,"m",cS).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},bh=function(){if(this.ended)throw new Bt("stream has ended, this shouldn't happen");if(!Ve(this,fc,"f"))throw Error("Final run has not been received");return Ve(this,fc,"f")},cS=function(e){const[t,r]=Ve(this,ki,"m",pS).call(this,e,Ve(this,Ja,"f"));$t(this,Ja,t),Ve(this,Rm,"f")[t.id]=t;for(const i of r){const s=t.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,u=t.content[i.index];if(u&&u.type=="text")this._emit("textDelta",s,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Ve(this,Ff,"f")){if(Ve(this,oc,"f"))switch(Ve(this,oc,"f").type){case"text":this._emit("textDone",Ve(this,oc,"f").text,Ve(this,Ja,"f"));break;case"image_file":this._emit("imageFileDone",Ve(this,oc,"f").image_file,Ve(this,Ja,"f"));break}$t(this,Ff,i.index)}$t(this,oc,t.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(Ve(this,Ff,"f")!==void 0){const i=e.data.content[Ve(this,Ff,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Ve(this,Ja,"f"));break;case"text":this._emit("textDone",i.text,Ve(this,Ja,"f"));break}}Ve(this,Ja,"f")&&this._emit("messageDone",e.data),$t(this,Ja,void 0)}},fS=function(e){const t=Ve(this,ki,"m",hS).call(this,e);switch($t(this,Th,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==Ve(this,ng,"f")?this._emit("toolCallDelta",s,t.step_details.tool_calls[s.index]):(Ve(this,Hs,"f")&&this._emit("toolCallDone",Ve(this,Hs,"f")),$t(this,ng,s.index),$t(this,Hs,t.step_details.tool_calls[s.index]),Ve(this,Hs,"f")&&this._emit("toolCallCreated",Ve(this,Hs,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$t(this,Th,void 0),e.data.step_details.type=="tool_calls"&&Ve(this,Hs,"f")&&(this._emit("toolCallDone",Ve(this,Hs,"f")),$t(this,Hs,void 0)),this._emit("runStepDone",e.data,t);break}},dS=function(e){Ve(this,lw,"f").push(e),this._emit("event",e)},hS=function(e){switch(e.event){case"thread.run.step.created":return Ve(this,ko,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Ve(this,ko,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=cc.accumulateDelta(t,r.delta);Ve(this,ko,"f")[e.data.id]=i}return Ve(this,ko,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Ve(this,ko,"f")[e.data.id]=e.data;break}if(Ve(this,ko,"f")[e.data.id])return Ve(this,ko,"f")[e.data.id];throw new Error("No snapshot available")},pS=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in t.content){let u=t.content[s.index];t.content[s.index]=Ve(this,ki,"m",mS).call(this,s,u)}else t.content[s.index]=s,r.push(s);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},mS=function(e,t){return cc.accumulateDelta(t,e)},gS=function(e){switch($t(this,Im,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":$t(this,fc,e.data),Ve(this,Hs,"f")&&(this._emit("toolCallDone",Ve(this,Hs,"f")),$t(this,Hs,void 0));break}};let ob=class extends Lt{constructor(){super(...arguments),this.steps=new cC(this._client)}create(e,t,r){const{include:i,...s}=t;return this._client.post(ft`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:t.stream??!1})}retrieve(e,t,r){const{thread_id:i}=t;return this._client.get(ft`/threads/${i}/runs/${e}`,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){const{thread_id:i,...s}=t;return this._client.post(ft`/threads/${i}/runs/${e}`,{body:s,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(ft`/threads/${e}/runs`,Yr,{query:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,t,r){const{thread_id:i}=t;return this._client.post(ft`/threads/${i}/runs/${e}/cancel`,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,t,r){return Ch.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){var s;const i=_t([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:u,response:l}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(u.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(c=h)}}await Bh(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return u}}}stream(e,t,r){return Ch.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r){const{thread_id:i,...s}=t;return this._client.post(ft`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,r){const i=await this.submitToolOutputs(e,t,r);return await this.poll(i.id,t,r)}submitToolOutputsStream(e,t,r){return Ch.createToolAssistantStream(e,this._client.beta.threads.runs,t,r)}};ob.Steps=cC;class Sg extends Lt{constructor(){super(...arguments),this.runs=new ob(this._client),this.messages=new uC(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(ft`/threads/${e}`,{...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(ft`/threads/${e}`,{body:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t){return this._client.delete(ft`/threads/${e}`,{...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.id,{thread_id:r.thread_id},t)}createAndRunStream(e,t){return Ch.createThreadAssistantStream(e,this._client.beta.threads,t)}}Sg.Runs=ob;Sg.Messages=uC;class cd extends Lt{constructor(){super(...arguments),this.realtime=new bg(this._client),this.chatkit=new _g(this._client),this.assistants=new iC(this._client),this.threads=new Sg(this._client)}}cd.Realtime=bg;cd.ChatKit=_g;cd.Assistants=iC;cd.Threads=Sg;class fC extends Lt{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class dC extends Lt{retrieve(e,t,r){const{container_id:i}=t;return this._client.get(ft`/containers/${i}/files/${e}/content`,{...r,headers:_t([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let lb=class extends Lt{constructor(){super(...arguments),this.content=new dC(this._client)}create(e,t,r){return this._client.post(ft`/containers/${e}/files`,gc({body:t,...r},this._client))}retrieve(e,t,r){const{container_id:i}=t;return this._client.get(ft`/containers/${i}/files/${e}`,r)}list(e,t={},r){return this._client.getAPIList(ft`/containers/${e}/files`,Yr,{query:t,...r})}delete(e,t,r){const{container_id:i}=t;return this._client.delete(ft`/containers/${i}/files/${e}`,{...r,headers:_t([{Accept:"*/*"},r==null?void 0:r.headers])})}};lb.Content=dC;class ub extends Lt{constructor(){super(...arguments),this.files=new lb(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(ft`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",Yr,{query:e,...t})}delete(e,t){return this._client.delete(ft`/containers/${e}`,{...t,headers:_t([{Accept:"*/*"},t==null?void 0:t.headers])})}}ub.Files=lb;class hC extends Lt{create(e,t,r){const{include:i,...s}=t;return this._client.post(ft`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,t,r){const{conversation_id:i,...s}=t;return this._client.get(ft`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,t={},r){return this._client.getAPIList(ft`/conversations/${e}/items`,Jm,{query:t,...r})}delete(e,t,r){const{conversation_id:i}=t;return this._client.delete(ft`/conversations/${i}/items/${e}`,r)}}class cb extends Lt{constructor(){super(...arguments),this.items=new hC(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(ft`/conversations/${e}`,t)}update(e,t,r){return this._client.post(ft`/conversations/${e}`,{body:t,...r})}delete(e,t){return this._client.delete(ft`/conversations/${e}`,t)}}cb.Items=hC;class pC extends Lt{create(e,t){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Ri(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return r?s:(Ri(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(u=>(u&&u.data&&u.data.forEach(l=>{const c=l.embedding;l.embedding=WL(c)}),u)))}}class mC extends Lt{retrieve(e,t,r){const{eval_id:i,run_id:s}=t;return this._client.get(ft`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,t,r){const{eval_id:i,...s}=t;return this._client.getAPIList(ft`/evals/${i}/runs/${e}/output_items`,Yr,{query:s,...r})}}class fb extends Lt{constructor(){super(...arguments),this.outputItems=new mC(this._client)}create(e,t,r){return this._client.post(ft`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){const{eval_id:i}=t;return this._client.get(ft`/evals/${i}/runs/${e}`,r)}list(e,t={},r){return this._client.getAPIList(ft`/evals/${e}/runs`,Yr,{query:t,...r})}delete(e,t,r){const{eval_id:i}=t;return this._client.delete(ft`/evals/${i}/runs/${e}`,r)}cancel(e,t,r){const{eval_id:i}=t;return this._client.post(ft`/evals/${i}/runs/${e}`,r)}}fb.OutputItems=mC;class db extends Lt{constructor(){super(...arguments),this.runs=new fb(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(ft`/evals/${e}`,t)}update(e,t,r){return this._client.post(ft`/evals/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/evals",Yr,{query:e,...t})}delete(e,t){return this._client.delete(ft`/evals/${e}`,t)}}db.Runs=fb;let gC=class extends Lt{create(e,t){return this._client.post("/files",gc({body:e,...t},this._client))}retrieve(e,t){return this._client.get(ft`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",Yr,{query:e,...t})}delete(e,t){return this._client.delete(ft`/files/${e}`,t)}content(e,t){return this._client.get(ft`/files/${e}/content`,{...t,headers:_t([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let u=await this.retrieve(e);for(;!u.status||!i.has(u.status);)if(await Bh(t),u=await this.retrieve(e),Date.now()-s>r)throw new Xw({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return u}};class yC extends Lt{}let vC=class extends Lt{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class hb extends Lt{constructor(){super(...arguments),this.graders=new vC(this._client)}}hb.Graders=vC;class wC extends Lt{create(e,t,r){return this._client.getAPIList(ft`/fine_tuning/checkpoints/${e}/permissions`,wg,{body:t,method:"post",...r})}retrieve(e,t={},r){return this._client.get(ft`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}delete(e,t,r){const{fine_tuned_model_checkpoint:i}=t;return this._client.delete(ft`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let pb=class extends Lt{constructor(){super(...arguments),this.permissions=new wC(this._client)}};pb.Permissions=wC;class bC extends Lt{list(e,t={},r){return this._client.getAPIList(ft`/fine_tuning/jobs/${e}/checkpoints`,Yr,{query:t,...r})}}class mb extends Lt{constructor(){super(...arguments),this.checkpoints=new bC(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(ft`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",Yr,{query:e,...t})}cancel(e,t){return this._client.post(ft`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return this._client.getAPIList(ft`/fine_tuning/jobs/${e}/events`,Yr,{query:t,...r})}pause(e,t){return this._client.post(ft`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(ft`/fine_tuning/jobs/${e}/resume`,t)}}mb.Checkpoints=bC;class fd extends Lt{constructor(){super(...arguments),this.methods=new yC(this._client),this.jobs=new mb(this._client),this.checkpoints=new pb(this._client),this.alpha=new hb(this._client)}}fd.Methods=yC;fd.Jobs=mb;fd.Checkpoints=pb;fd.Alpha=hb;class _C extends Lt{}class gb extends Lt{constructor(){super(...arguments),this.graderModels=new _C(this._client)}}gb.GraderModels=_C;class SC extends Lt{createVariation(e,t){return this._client.post("/images/variations",gc({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",gc({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}let xC=class extends Lt{retrieve(e,t){return this._client.get(ft`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",wg,e)}delete(e,t){return this._client.delete(ft`/models/${e}`,t)}};class AC extends Lt{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class EC extends Lt{accept(e,t,r){return this._client.post(ft`/realtime/calls/${e}/accept`,{body:t,...r,headers:_t([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,t){return this._client.post(ft`/realtime/calls/${e}/hangup`,{...t,headers:_t([{Accept:"*/*"},t==null?void 0:t.headers])})}refer(e,t,r){return this._client.post(ft`/realtime/calls/${e}/refer`,{body:t,...r,headers:_t([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,t={},r){return this._client.post(ft`/realtime/calls/${e}/reject`,{body:t,...r,headers:_t([{Accept:"*/*"},r==null?void 0:r.headers])})}}class TC extends Lt{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}}class xg extends Lt{constructor(){super(...arguments),this.clientSecrets=new TC(this._client),this.calls=new EC(this._client)}}xg.ClientSecrets=TC;xg.Calls=EC;function KL(n,e){return!e||!YL(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:CC(n,e)}function CC(n,e){const t=n.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:QL(e,i)};if(i.type==="message"){const s=i.content.map(u=>u.type==="output_text"?{...u,parsed:JL(e,u.text)}:u);return{...i,content:s}}return i}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||uw(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function JL(n,e){var t,r,i,s;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=n.text)==null?void 0:i.format)?((s=n.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function YL(n){var e;return!!tb((e=n.text)==null?void 0:e.format)}function XL(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function ZL(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function QL(n,e){const t=ZL(n.tools??[],e.name);return{...e,...e,parsed_arguments:XL(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function uw(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}var Af,tm,lu,nm,yS,vS,wS,bS;class yb extends rb{constructor(e){super(),Af.add(this),tm.set(this,void 0),lu.set(this,void 0),nm.set(this,void 0),$t(this,tm,e)}static createResponse(e,t,r){const i=new yb(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,r){var l;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ve(this,Af,"m",yS).call(this);let s,u=null;"response_id"in t?(s=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),u=t.starting_after??null):s=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of s)Ve(this,Af,"m",vS).call(this,c,u);if((l=s.controller.signal)!=null&&l.aborted)throw new pa;return Ve(this,Af,"m",wS).call(this)}[(tm=new WeakMap,lu=new WeakMap,nm=new WeakMap,Af=new WeakSet,yS=function(){this.ended||$t(this,lu,void 0)},vS=function(t,r){if(this.ended)return;const i=(u,l)=>{(r==null||l.sequence_number>r)&&this._emit(u,l)},s=Ve(this,Af,"m",bS).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{const u=s.output[t.output_index];if(!u)throw new Bt(`missing output at index ${t.output_index}`);if(u.type==="message"){const l=u.content[t.content_index];if(!l)throw new Bt(`missing content at index ${t.content_index}`);if(l.type!=="output_text")throw new Bt(`expected content to be 'output_text', got ${l.type}`);i("response.output_text.delta",{...t,snapshot:l.text})}break}case"response.function_call_arguments.delta":{const u=s.output[t.output_index];if(!u)throw new Bt(`missing output at index ${t.output_index}`);u.type==="function_call"&&i("response.function_call_arguments.delta",{...t,snapshot:u.arguments});break}default:i(t.type,t);break}},wS=function(){if(this.ended)throw new Bt("stream has ended, this shouldn't happen");const t=Ve(this,lu,"f");if(!t)throw new Bt("request ended without sending any events");$t(this,lu,void 0);const r=eP(t,Ve(this,tm,"f"));return $t(this,nm,r),r},bS=function(t){var i;let r=Ve(this,lu,"f");if(!r){if(t.type!=="response.created")throw new Bt(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=$t(this,lu,t.response),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const s=r.output[t.output_index];if(!s)throw new Bt(`missing output at index ${t.output_index}`);const u=s.type,l=t.part;u==="message"&&l.type!=="reasoning_text"?s.content.push(l):u==="reasoning"&&l.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(l));break}case"response.output_text.delta":{const s=r.output[t.output_index];if(!s)throw new Bt(`missing output at index ${t.output_index}`);if(s.type==="message"){const u=s.content[t.content_index];if(!u)throw new Bt(`missing content at index ${t.content_index}`);if(u.type!=="output_text")throw new Bt(`expected content to be 'output_text', got ${u.type}`);u.text+=t.delta}break}case"response.function_call_arguments.delta":{const s=r.output[t.output_index];if(!s)throw new Bt(`missing output at index ${t.output_index}`);s.type==="function_call"&&(s.arguments+=t.delta);break}case"response.reasoning_text.delta":{const s=r.output[t.output_index];if(!s)throw new Bt(`missing output at index ${t.output_index}`);if(s.type==="reasoning"){const u=(i=s.content)==null?void 0:i[t.content_index];if(!u)throw new Bt(`missing content at index ${t.content_index}`);if(u.type!=="reasoning_text")throw new Bt(`expected content to be 'reasoning_text', got ${u.type}`);u.text+=t.delta}break}case"response.completed":{$t(this,lu,t.response);break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const s=t.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const s of t)s.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const s of t)s.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,u)=>t.push({resolve:s,reject:u})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Ve(this,nm,"f");if(!e)throw new Bt("stream ended without producing a ChatCompletion");return e}}function eP(n,e){return KL(n,e)}class NC extends Lt{list(e,t={},r){return this._client.getAPIList(ft`/responses/${e}/input_items`,Yr,{query:t,...r})}}class RC extends Lt{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}}class Ag extends Lt{constructor(){super(...arguments),this.inputItems=new NC(this._client),this.inputTokens=new RC(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&uw(r),r))}retrieve(e,t={},r){return this._client.get(ft`/responses/${e}`,{query:t,...r,stream:(t==null?void 0:t.stream)??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&uw(i),i))}delete(e,t){return this._client.delete(ft`/responses/${e}`,{...t,headers:_t([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>CC(r,e))}stream(e,t){return yb.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(ft`/responses/${e}/cancel`,t)}}Ag.InputItems=NC;Ag.InputTokens=RC;class kC extends Lt{create(e,t,r){return this._client.post(ft`/uploads/${e}/parts`,gc({body:t,...r},this._client))}}class vb extends Lt{constructor(){super(...arguments),this.parts=new kC(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(ft`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(ft`/uploads/${e}/complete`,{body:t,...r})}}vb.Parts=kC;const tP=async n=>{const e=await Promise.allSettled(n),t=e.filter(i=>i.status==="rejected");if(t.length){for(const i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class IC extends Lt{create(e,t,r){return this._client.post(ft`/vector_stores/${e}/file_batches`,{body:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){const{vector_store_id:i}=t;return this._client.get(ft`/vector_stores/${i}/file_batches/${e}`,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,t,r){const{vector_store_id:i}=t;return this._client.post(ft`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){const i=await this.create(e,t);return await this.poll(e,i.id,r)}listFiles(e,t,r){const{vector_store_id:i,...s}=t;return this._client.getAPIList(ft`/vector_stores/${i}/file_batches/${e}/files`,Yr,{query:s,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,t,r){var s;const i=_t([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const{data:u,response:l}=await this.retrieve(t,{vector_store_id:e},{...r,headers:i}).withResponse();switch(u.status){case"in_progress":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{const f=l.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(c=h)}}await Bh(c);break;case"failed":case"cancelled":case"completed":return u}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,u=Math.min(s,t.length),l=this._client,c=t.values(),f=[...r];async function h(y){for(let m of y){const E=await l.files.create({file:m,purpose:"assistants"},i);f.push(E.id)}}const g=Array(u).fill(c).map(h);return await tP(g),await this.createAndPoll(e,{file_ids:f})}}let LC=class extends Lt{create(e,t,r){return this._client.post(ft`/vector_stores/${e}/files`,{body:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,t,r){const{vector_store_id:i}=t;return this._client.get(ft`/vector_stores/${i}/files/${e}`,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,t,r){const{vector_store_id:i,...s}=t;return this._client.post(ft`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,t={},r){return this._client.getAPIList(ft`/vector_stores/${e}/files`,Yr,{query:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,t,r){const{vector_store_id:i}=t;return this._client.delete(ft`/vector_stores/${i}/files/${e}`,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}async poll(e,t,r){var s;const i=_t([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((s=r==null?void 0:r.pollIntervalMs)==null?void 0:s.toString())??void 0}]);for(;;){const u=await this.retrieve(t,{vector_store_id:e},{...r,headers:i}).withResponse(),l=u.data;switch(l.status){case"in_progress":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{const f=u.response.headers.get("openai-poll-after-ms");if(f){const h=parseInt(f);isNaN(h)||(c=h)}}await Bh(c);break;case"failed":case"completed":return l}}}async upload(e,t,r){const i=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,t,r){const i=await this.upload(e,t,r);return await this.poll(e,i.id,r)}content(e,t,r){const{vector_store_id:i}=t;return this._client.getAPIList(ft`/vector_stores/${i}/files/${e}/content`,wg,{...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}};class Eg extends Lt{constructor(){super(...arguments),this.files=new LC(this._client),this.fileBatches=new IC(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(ft`/vector_stores/${e}`,{...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,r){return this._client.post(ft`/vector_stores/${e}`,{body:t,...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",Yr,{query:e,...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(ft`/vector_stores/${e}`,{...t,headers:_t([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,r){return this._client.getAPIList(ft`/vector_stores/${e}/search`,wg,{body:t,method:"post",...r,headers:_t([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Eg.Files=LC;Eg.FileBatches=IC;class PC extends Lt{create(e,t){return this._client.post("/videos",sS({body:e,...t},this._client))}retrieve(e,t){return this._client.get(ft`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",Jm,{query:e,...t})}delete(e,t){return this._client.delete(ft`/videos/${e}`,t)}downloadContent(e,t={},r){return this._client.get(ft`/videos/${e}/content`,{query:t,...r,headers:_t([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}remix(e,t,r){return this._client.post(ft`/videos/${e}/remix`,sS({body:t,...r},this._client))}}var Mf,MC,Lm;class OC extends Lt{constructor(){super(...arguments),Mf.add(this)}async unwrap(e,t,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,t,r,i),JSON.parse(e)}async verifySignature(e,t,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Ve(this,Mf,"m",MC).call(this,r);const s=_t([t]).values,u=Ve(this,Mf,"m",Lm).call(this,s,"webhook-signature"),l=Ve(this,Mf,"m",Lm).call(this,s,"webhook-timestamp"),c=Ve(this,Mf,"m",Lm).call(this,s,"webhook-id"),f=parseInt(l,10);if(isNaN(f))throw new dh("Invalid webhook timestamp format");const h=Math.floor(Date.now()/1e3);if(h-f>i)throw new dh("Webhook timestamp is too old");if(f>h+i)throw new dh("Webhook timestamp is too new");const g=u.split(" ").map(_=>_.startsWith("v1,")?_.substring(3):_),y=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),m=c?`${c}.${l}.${e}`:`${l}.${e}`,E=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const _ of g)try{const R=Buffer.from(_,"base64");if(await crypto.subtle.verify("HMAC",E,R,new TextEncoder().encode(m)))return}catch{continue}throw new dh("The given webhook signature does not match the expected signature")}}Mf=new WeakSet,MC=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Lm=function(e,t){if(!e)throw new Error("Headers are required");const r=e.get(t);if(r==null)throw new Error(`Missing required header: ${t}`);return r};var cw,wb,Pm,DC;class an{constructor({baseURL:e=xf("OPENAI_BASE_URL"),apiKey:t=xf("OPENAI_API_KEY"),organization:r=xf("OPENAI_ORG_ID")??null,project:i=xf("OPENAI_PROJECT_ID")??null,webhookSecret:s=xf("OPENAI_WEBHOOK_SECRET")??null,...u}={}){if(cw.add(this),Pm.set(this,void 0),this.completions=new fC(this),this.chat=new ab(this),this.embeddings=new pC(this),this.files=new gC(this),this.images=new SC(this),this.audio=new jh(this),this.moderations=new AC(this),this.models=new xC(this),this.fineTuning=new fd(this),this.graders=new gb(this),this.vectorStores=new Eg(this),this.webhooks=new OC(this),this.beta=new cd(this),this.batches=new rC(this),this.uploads=new vb(this),this.responses=new Ag(this),this.realtime=new xg(this),this.conversations=new cb(this),this.evals=new db(this),this.containers=new ub(this),this.videos=new PC(this),t===void 0)throw new Bt("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const l={apiKey:t,organization:r,project:i,webhookSecret:s,...u,baseURL:e||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&rL())throw new Bt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=l.baseURL,this.timeout=l.timeout??wb.DEFAULT_TIMEOUT,this.logger=l.logger??console;const c="warn";this.logLevel=c,this.logLevel=rS(l.logLevel,"ClientOptions.logLevel",this)??rS(xf("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??c,this.fetchOptions=l.fetchOptions,this.maxRetries=l.maxRetries??2,this.fetch=l.fetch??lL(),$t(this,Pm,cL),this._options=l,this.apiKey=typeof t=="string"?t:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return _t([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return gL(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Lf}`}defaultIdempotencyKey(){return`stainless-node-retry-${s4()}`}makeStatusError(e,t,r,i){return Ii.generate(e,t,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let t;try{t=await e()}catch(r){throw r instanceof Bt?r:new Bt(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof t!="string"||!t)throw new Bt(`Expected 'apiKey' function argument to return a string but it returned ${t}`);return this.apiKey=t,!0}buildURL(e,t,r){const i=!Ve(this,cw,"m",DC).call(this)&&r||this.baseURL,s=ZI(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return QI(u)||(t={...u,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:t,...i})))}request(e,t=null){return new vg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){var b,N;const i=await e,s=i.maxRetries??this.maxRetries;t==null&&(t=s),await this.prepareOptions(i);const{req:u,url:l,timeout:c}=await this.buildRequest(i,{retryCount:s-t});await this.prepareRequest(u,{url:l,options:i});const f="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=r===void 0?"":`, retryOf: ${r}`,g=Date.now();if(Ri(this).debug(`[${f}] sending request`,rc({retryOfRequestLogID:r,method:i.method,url:l,options:i,headers:u.headers})),(b=i.signal)!=null&&b.aborted)throw new pa;const y=new AbortController,m=await this.fetchWithTimeout(l,u,c,y).catch(Zv),E=Date.now();if(m instanceof globalThis.Error){const C=`retrying, ${t} attempts remaining`;if((N=i.signal)!=null&&N.aborted)throw new pa;const A=Xv(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return Ri(this).info(`[${f}] connection ${A?"timed out":"failed"} - ${C}`),Ri(this).debug(`[${f}] connection ${A?"timed out":"failed"} (${C})`,rc({retryOfRequestLogID:r,url:l,durationMs:E-g,message:m.message})),this.retryRequest(i,t,r??f);throw Ri(this).info(`[${f}] connection ${A?"timed out":"failed"} - error; no more retries left`),Ri(this).debug(`[${f}] connection ${A?"timed out":"failed"} (error; no more retries left)`,rc({retryOfRequestLogID:r,url:l,durationMs:E-g,message:m.message})),A?new Xw:new gg({cause:m})}const _=[...m.headers.entries()].filter(([C])=>C==="x-request-id").map(([C,A])=>", "+C+": "+JSON.stringify(A)).join(""),R=`[${f}${h}${_}] ${u.method} ${l} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${E-g}ms`;if(!m.ok){const C=await this.shouldRetry(m);if(t&&C){const O=`retrying, ${t} attempts remaining`;return await uL(m.body),Ri(this).info(`${R} - ${O}`),Ri(this).debug(`[${f}] response error (${O})`,rc({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,durationMs:E-g})),this.retryRequest(i,t,r??f,m.headers)}const A=C?"error; no more retries left":"error; not retryable";Ri(this).info(`${R} - ${A}`);const F=await m.text().catch(O=>Zv(O).message),J=nL(F),V=J?void 0:F;throw Ri(this).debug(`[${f}] response error (${A})`,rc({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,message:V,durationMs:Date.now()-g})),this.makeStatusError(m.status,J,V,m.headers)}return Ri(this).info(R),Ri(this).debug(`[${f}] response start`,rc({retryOfRequestLogID:r,url:m.url,status:m.status,headers:m.headers,durationMs:E-g})),{response:m,options:i,controller:y,requestLogID:f,retryOfRequestLogID:r,startTime:g}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){const r=this.makeRequest(t,null,void 0);return new EL(this,r,e)}async fetchWithTimeout(e,t,r,i){const{signal:s,method:u,...l}=t||{};s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),f=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h={signal:i.signal,...f?{duplex:"half"}:{},method:"GET",...l};u&&(h.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,i){let s;const u=i==null?void 0:i.get("retry-after-ms");if(u){const c=parseFloat(u);Number.isNaN(c)||(s=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,c)}return await Bh(s),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const s=t-e,u=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return u*l*1e3}async buildRequest(e,{retryCount:t=0}={}){const r={...e},{method:i,path:s,query:u,defaultBaseURL:l}=r,c=this.buildURL(s,u,l);"timeout"in r&&tL("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:f,body:h}=this.buildBody({options:r}),g=await this.buildHeaders({options:e,method:i,bodyHeaders:f,retryCount:t});return{req:{method:i,headers:g,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"},...h&&{body:h},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const u=_t([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...oL(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=_t([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:v4(e)}:Ve(this,Pm,"f").call(this,{body:e,headers:r})}}wb=an,Pm=new WeakMap,cw=new WeakSet,DC=function(){return this.baseURL!=="https://api.openai.com/v1"};an.OpenAI=wb;an.DEFAULT_TIMEOUT=6e5;an.OpenAIError=Bt;an.APIError=Ii;an.APIConnectionError=gg;an.APIConnectionTimeoutError=Xw;an.APIUserAbortError=pa;an.NotFoundError=u4;an.ConflictError=c4;an.RateLimitError=d4;an.BadRequestError=a4;an.AuthenticationError=o4;an.InternalServerError=h4;an.PermissionDeniedError=l4;an.UnprocessableEntityError=f4;an.InvalidWebhookSignatureError=dh;an.toFile=kL;an.Completions=fC;an.Chat=ab;an.Embeddings=pC;an.Files=gC;an.Images=SC;an.Audio=jh;an.Moderations=AC;an.Models=xC;an.FineTuning=fd;an.Graders=gb;an.VectorStores=Eg;an.Webhooks=OC;an.Beta=cd;an.Batches=rC;an.Uploads=vb;an.Responses=Ag;an.Realtime=xg;an.Conversations=cb;an.Evals=db;an.Containers=ub;an.Videos=PC;const UC=`
ISMRM Global Guidance for Abstract Submission:
1.  **Title:** Concise, specific, and representative of the research.
2.  **Authors & Affiliations:** List all authors and their primary institutional affiliations.
3.  **Impact Statement:** A short (approx. 50 words) statement summarizing the 'so what' of the study. It should be compelling and highlight the significance of the findings.
4.  **Synopsis:** A longer (approx. 200-250 words) structured summary including Introduction, Methods, Results, and Conclusion.
    -   **Introduction:** State the hypothesis or purpose of the study.
    -   **Methods:** Describe the experimental methods, including techniques, subjects, and data analysis procedures.
    -   **Results:** Present the main findings of the study, supported by data.
    -   **Conclusion:** Summarize the study's conclusions and their implications.
5.  **Figures & Tables:** Include figures and tables to illustrate results, with clear captions.
6.  **References:** Provide references where appropriate.
`,nP=`
Guidance for Abstract Category & Keyword Analysis:
Your task is to analyze the provided text and identify the most relevant scientific categories and keywords based on the ISMRM classification system.

1.  **Read the Text:** Thoroughly read the abstract text to understand its core topic, methods, and findings.
2.  **Identify Main Category:** Determine the primary field of research. This is the 'main' category. Examples: 'Neuro', 'Body', 'Cardiovascular'.
3.  **Identify Subcategories:** Identify more specific sub-fields. These are the 'sub' categories. Example: For 'Neuro', a subcategory could be 'fMRI', 'DTI', or 'Spectroscopy'.
4.  **Identify Secondary Categories:** Identify any other relevant but less central topics. These are 'secondary' categories.
5.  **Extract Keywords:** Pull out 3-7 specific terms that are crucial to the study. These should include the imaging technique, the anatomy or disease studied, and the main concept being investigated.
6.  **Assign Probabilities:** For each identified category, estimate a probability of relevance (0.0 to 1.0). The main category should have the highest probability.
7.  **Format Output:** Present the results in a structured JSON format.
`,rP=`
Partial List of ISMRM Abstract Categories & Keywords for Routing:

**Main Categories:**
-   Neuro
-   Body
-   Cardiovascular
-   Musculoskeletal (MSK)
-   Interventional
-   Preclinical & Basic Science
-   Data Analysis & Reconstruction
-   Engineering

**Subcategories (Examples):**
-   (Neuro): fMRI, DTI, Perfusion, Spectroscopy, Brain, Spine
-   (Body): Abdomen, Pelvis, Liver, Prostate, Oncology
-   (Cardiovascular): Heart, Vessels, Flow, Myocardium
-   (MSK): Cartilage, Muscle, Bone, Joints
-   (Data Analysis): Machine Learning, AI, Deep Learning, Image Reconstruction, Quantitative Imaging

**Keywords (Examples):**
-   Techniques: Diffusion, BOLD, T1 mapping, T2 mapping, CEST, MR-PET
-   Anatomy: Hippocampus, Kidney, Aorta, Knee
-   Pathology: Tumor, Stroke, Infarction, Arthritis
-   Concepts: Accuracy, Reproducibility, Contrast, Resolution
`,FC=`
Writing Style and Humanization Guidelines:

**Core Principle:** The final text must be indistinguishable from that written by a human expert. Balance formal academic writing with clear, direct expression.

**Style Rules:**
1.  **Clarity & Conciseness:** Ensure every sentence has a clear subject. Avoid long, complex, or nested sentences. Use short sentences where possible to improve readability.
2.  **Rhythm Control:** Vary sentence structure and length to create a natural reading rhythm. Avoid a monotonous, flat narrative.

**Constraints:**
1.  **Faithfulness to Original Meaning:** Core information, key data, and scientific intent must not be altered or omitted.
2.  **Style Consistency:** The writing style must align with the formal, scientific context of an ISMRM abstract.
3.  **Natural Expression:** Prioritize sincere, organic phrasing. Avoid excessive embellishment or technical flair that obscures meaning.
4.  **Logical Rigor:** The optimization process must not disrupt the original text's logical structure.

**Eliminate AI-Generated Tone:**
-   **Strictly Prohibited Phrases:** You MUST NOT use common AI colloquialisms or sentence starters. For example, completely avoid:
    -   "It is worth noting that..."
    -   "It is not difficult to find..."
    -   "Based on the above analysis..."
    -   "In conclusion, this study demonstrates..." (be more direct)
    -   "The findings of this study suggest..."
    -   "This paper explores..."
-   **Directness:** Instead of saying "Results indicated that...", say "We found that...". Be direct and active.
`,BC=n=>`
    You are an expert academic assistant specializing in ISMRM conference submissions.
    Your task is to analyze the following academic text based on ISMRM guidelines.
    
    **Instructions:**
    1.  Read the text carefully.
    2.  Identify the main, sub, and secondary scientific categories relevant to the text. Refer to the category list for examples.
    3.  Assign a probability score (0.0 to 1.0) for each identified category, reflecting its relevance.
    4.  Extract 3-7 of the most important keywords from the text.
    5.  Return your findings in a structured JSON format that adheres to the provided schema.

    **Reference: Category & Keyword List**
    ---
    ${rP}
    ---
    
    **Reference: Analysis Guidance**
    ---
    ${nP}
    ---

    **Academic Text for Analysis:**
    ---
    ${n}
    ---

    Now, perform the analysis and provide the JSON output.
  `,qC=(n,e,t)=>{const r=e.map(s=>s.name).join(", "),i=t.join(", ");return`
    You are an expert academic assistant applying Occam's Razor to classify research for an ISMRM submission.
    Based on the provided text and its identified categories/keywords, determine the most appropriate abstract type(s).
    
    **Classification Rules (Simplified):**
    -   If categories heavily feature 'Body', 'Neuro', 'Pediatrics', 'Cardiovascular', 'Interventional', 'MSK', or 'Preclinical', there is a high probability (>75%) for 'MRI in Clinical Practice Abstract' and a moderate probability (>25%) for 'Standard Abstract'.
    -   If the content explicitly mentions a 'hypothesis', 'mimicking', or 'simulation', there is a very high probability (>90%) for 'Registered Abstract'.
    -   For most other technical or methods-focused research (e.g., 'Data Analysis', 'Engineering'), 'Standard Abstract' is the most likely (>75%), with 'ISMRT Abstract' being a possibility (>50%) if it involves technologist-focused work.
    
    **Instructions:**
    -   Analyze the inputs below.
    -   Output a JSON array of objects, where each object contains the abstract 'type' and a 'probability' score.
    -   Only include types with a probability of 30% or higher.
    
    **Content for Classification:**
    ---
    **Text Snippet:** ${n.substring(0,500)}...
    **Selected Categories:** ${r}
    **Selected Keywords:** ${i}
    ---
    
    Provide only the JSON array that adheres to the schema.
  `},jC=(n,e,t,r)=>`
    You are an expert academic writer tasked with generating a publication-ready abstract for the ISMRM conference.
    
    **Task:**
    Generate a structured abstract containing three sections: 'impact', 'synopsis', and 'keywords'.
    
    **Context:**
    -   **Abstract Type:** ${e}
    -   **Confirmed Categories:** ${t.map(i=>i.name).join(", ")}
    -   **Confirmed Keywords:** ${r.join(", ")}
    
    **Guidelines & Constraints:**
    1.  **Overall Guidance:** Strictly adhere to the 'ISMRM Global Guidance for Abstract Submission'.
    2.  **Writing Style:** You MUST follow the 'Humanization Guidelines' precisely to ensure the output sounds natural, clear, and is free of any AI-like phrasing. This is critical.
    3.  **Output Format:** The final output must be a single JSON object matching the provided schema. Do not include any explanatory text outside the JSON.
    
    **Reference 1: ISMRM Global Guidance**
    ---
    ${UC}
    ---
    
    **Reference 2: Humanization Guidelines (CRITICAL)**
    ---
    ${FC}
    ---
    
    **Source Text:**
    ---
    ${n}
    ---
    
    Now, generate the complete, structured abstract as a JSON object.
  `,zC=n=>`
    You are an expert academic writer tasked with creatively expanding a core idea into a full, publication-ready abstract for the ISMRM conference.

    **Task:**
    Take the following core idea and generate a complete, structured abstract containing 'impact', 'synopsis', and 'keywords'. You must invent plausible, scientifically sound details for the methods, results, and conclusions that align with the initial concept.

    **Core Idea:** "${n}"

    **Guidelines & Constraints:**
    1.  **Overall Guidance:** The generated abstract must strictly adhere to the 'ISMRM Global Guidance for Abstract Submission'.
    2.  **Writing Style:** You MUST follow the 'Humanization Guidelines' precisely. The output must be indistinguishable from that of a human expert—clear, direct, and free of AI clichés. This is the highest priority.
    3.  **Plausibility:** The invented details (e.g., sample sizes, statistical results, specific MRI parameters) should be realistic for a typical MR research study.
    4.  **Keywords:** Generate 3-5 relevant keywords that fit the expanded abstract.
    5.  **Output Format:** The final output must be a single JSON object matching the provided schema. Do not include any explanatory text outside the JSON.

    **Reference 1: ISMRM Global Guidance**
    ---
    ${UC}
    ---

    **Reference 2: Humanization Guidelines (CRITICAL)**
    ---
    ${FC}
    ---

    Now, based on the core idea, generate the complete, structured abstract as a JSON object.
  `,dd=()=>{try{const n=localStorage.getItem("app-settings");if(n)return JSON.parse(n)}catch(n){console.warn("Failed to parse settings from localStorage:",n)}return{}},bb=()=>{try{const e=dd().openAIApiKey||"";if(!e||e.trim()==="")throw new Error("OpenAI API key not configured. Please add your API key in Model Manager settings.");if(!e.startsWith("sk-"))throw new Error('Invalid OpenAI API key format. API keys should start with "sk-".');return new an({apiKey:e,dangerouslyAllowBrowser:!0,maxRetries:0})}catch(n){throw n instanceof Error?n:(console.error("Error initializing OpenAI client:",n),new Error("Failed to initialize OpenAI client. Please check your API key configuration."))}},iP=n=>(n==null?void 0:n.status)===401?new Error("Invalid OpenAI API key. Please check your API key in Model Manager settings."):(n==null?void 0:n.status)===429?new Error("OpenAI API rate limit exceeded. Please try again in a few moments."):(n==null?void 0:n.status)===500?new Error("OpenAI service is temporarily unavailable. Please try again later."):(n==null?void 0:n.status)===400?new Error("Invalid request to OpenAI API. Please check your input and try again."):(n==null?void 0:n.code)==="insufficient_quota"?new Error("OpenAI API quota exceeded. Please check your billing settings."):n!=null&&n.message?new Error(`OpenAI API error: ${n.message}`):new Error("An unexpected error occurred with the OpenAI API. Please try again."),HC=async(n,e=3,t=1e3)=>{let r;for(let i=0;i<e;i++)try{return await n()}catch(s){const u=iP(s);if(r=u,(s==null?void 0:s.status)===401||(s==null?void 0:s.status)===400||(s==null?void 0:s.code)==="insufficient_quota")throw u;if(i<e-1){const l=t*Math.pow(2,i);console.log(`OpenAI API call failed (attempt ${i+1}/${e}). Retrying in ${l}ms...`),await new Promise(c=>setTimeout(c,l))}}throw r},sP={name:"analyze_content",description:"Analyze academic text and extract categories and keywords",parameters:{type:"object",properties:{categories:{type:"array",description:"List of identified categories with their type and probability",items:{type:"object",properties:{name:{type:"string"},type:{type:"string",enum:["main","sub","secondary"]},probability:{type:"number",minimum:0,maximum:1}},required:["name","type","probability"]}},keywords:{type:"array",description:"List of 3-7 relevant keywords",items:{type:"string"},minItems:3,maxItems:7}},required:["categories","keywords"]}},aP={name:"suggest_abstract_types",description:"Suggest suitable abstract types with probabilities",parameters:{type:"object",properties:{suggestions:{type:"array",description:"List of abstract type suggestions with probabilities",items:{type:"object",properties:{type:{type:"string",enum:["Standard Abstract","MRI in Clinical Practice Abstract","ISMRT Abstract","Registered Abstract"]},probability:{type:"number",minimum:0,maximum:1}},required:["type","probability"]}}},required:["suggestions"]}},GC={name:"generate_abstract",description:"Generate a structured abstract with impact, synopsis, and keywords",parameters:{type:"object",properties:{impact:{type:"string",description:"A concise, high-impact statement (approx. 50 words) summarizing key findings"},synopsis:{type:"string",description:"A detailed summary (approx. 200-250 words) covering introduction, methods, results, and conclusion"},keywords:{type:"array",items:{type:"string"},description:"The list of user-confirmed keywords"}},required:["impact","synopsis","keywords"]}},VC=async n=>{try{return!n||n.trim()===""?{valid:!1,error:"API key is required"}:n.startsWith("sk-")?n.length<20?{valid:!1,error:"API key appears to be too short"}:(await new an({apiKey:n,dangerouslyAllowBrowser:!0}).chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"user",content:"Hi"}],max_tokens:1}),{valid:!0}):{valid:!1,error:'Invalid API key format. OpenAI API keys should start with "sk-"'}}catch(e){return console.error("OpenAI API key validation failed:",e),(e==null?void 0:e.status)===401?{valid:!1,error:"Invalid API key. Please check your OpenAI API key."}:(e==null?void 0:e.status)===429?{valid:!1,error:"API rate limit exceeded. Your key is valid but you've hit rate limits."}:(e==null?void 0:e.status)===403?{valid:!1,error:"API key doesn't have permission to access this resource."}:(e==null?void 0:e.code)==="insufficient_quota"?{valid:!1,error:"API key is valid but you've exceeded your quota. Please check your billing."}:{valid:!1,error:(e==null?void 0:e.message)||"Failed to validate API key"}}},$C=async(n,e)=>{const t=bb(),r=[];let i=!1,s=!1;try{await t.chat.completions.create({model:n,messages:[{role:"user",content:"test"}],max_tokens:1}),i=!0}catch(u){(u==null?void 0:u.status)===404?r.push(`Text model "${n}" not found or not accessible`):r.push(`Text model test failed: ${(u==null?void 0:u.message)||"Unknown error"}`)}try{e!==n&&await t.chat.completions.create({model:e,messages:[{role:"user",content:"test"}],max_tokens:1}),s=!0}catch(u){(u==null?void 0:u.status)===404?r.push(`Vision model "${e}" not found or not accessible`):r.push(`Vision model test failed: ${(u==null?void 0:u.message)||"Unknown error"}`)}return{textModel:i,visionModel:s,errors:r}};async function Tg(n,e,t="gpt-4o"){const r=bb();return HC(async()=>{var u,l,c;const s=(c=(l=(u=(await r.chat.completions.create({model:t,messages:[{role:"user",content:n}],tools:[{type:"function",function:e}],tool_choice:{type:"function",function:{name:e.name}},temperature:.1})).choices[0])==null?void 0:u.message)==null?void 0:l.tool_calls)==null?void 0:c[0];if(!s||s.type!=="function"||!s.function.arguments)throw new Error("No function call response received from OpenAI");try{return JSON.parse(s.function.arguments)}catch(f){throw console.error("Error parsing OpenAI function response:",f),new Error("Failed to parse OpenAI response")}})}const oP=async n=>{const e=BC(n),r=dd().openAITextModel||"gpt-4o",i=await Tg(e,sP,r);return{categories:i.categories,keywords:i.keywords}},lP=async(n,e,t)=>{const r=qC(n,e,t),s=dd().openAITextModel||"gpt-4o";return(await Tg(r,aP,s)).suggestions.filter(l=>l.probability>=.3).sort((l,c)=>c.probability-l.probability)},uP=async(n,e,t,r)=>{const i=jC(n,e,t,r),u=dd().openAITextModel||"gpt-4o";return await Tg(i,GC,u)},cP=async n=>{const e=zC(n),r=dd().openAITextModel||"gpt-4o";return await Tg(e,GC,r)},fP=async(n,e)=>{const t=bb(),i=dd().openAIVisionModel||"gpt-4o";return HC(async()=>{var s,u,l;if(n.base64&&n.file){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(n.file.type))throw new Error(`Unsupported image format: ${n.file.type}. Supported formats: JPEG, PNG, GIF, WebP`);const f=20*1024*1024;if(n.file.size>f)throw new Error("Image file too large. Maximum size is 20MB. Please compress your image and try again.");const h=`
        Analyze this scientific/medical image for academic publication quality. 
        
        **Image Specifications Required:** ${n.specs}
        
        **Analysis Tasks:**
        1. Assess image quality, clarity, and resolution
        2. Check if the image meets academic publication standards
        3. Identify any improvements needed for professional presentation
        4. Suggest specific optimizations for the given specifications
        
        **Provide specific, actionable feedback for improving this image for academic submission.**
      `,y=(u=(s=(await t.chat.completions.create({model:i,messages:[{role:"user",content:[{type:"text",text:h},{type:"image_url",image_url:{url:`data:${n.file.type};base64,${n.base64}`,detail:"high"}}]}],max_tokens:1e3,temperature:.1})).choices[0])==null?void 0:s.message)==null?void 0:u.content;throw y?new Error(`Image Analysis Complete:

${y}

Note: OpenAI doesn't support direct image editing. Please apply the suggested improvements manually or switch to Google AI for automated image optimization.`):new Error("No analysis received from OpenAI vision model")}else{const c=`
        Create a high-quality scientific or medical imaging figure for academic publication.
        
        **Context:** ${e}
        **Specifications:** ${n.specs}
        
        **Requirements:**
        - Professional, publication-ready quality
        - Clear, well-labeled diagrams or images
        - Appropriate for academic/medical journals
        - High contrast and readability
        - Scientific accuracy and attention to detail
        
        Style: Clean, professional medical/scientific illustration
      `.trim();if(c.length>4e3)throw new Error("Image generation prompt too long. Please provide shorter specifications.");const h=(l=(await t.images.generate({model:"dall-e-3",prompt:c,size:"1024x1024",quality:"hd",response_format:"b64_json",style:"natural"})).data[0])==null?void 0:l.b64_json;if(!h)throw new Error("No image data received from DALL-E 3");return h}})},dP=Object.freeze(Object.defineProperty({__proto__:null,analyzeContent:oP,generateCreativeAbstract:cP,generateFinalAbstract:uP,generateImage:fP,suggestAbstractType:lP,testModelAvailability:$C,validateOpenAIApiKey:VC},Symbol.toStringTag,{value:"Module"})),hP=({onClose:n})=>{const{settings:e,saveSettings:t}=it.useContext(ud),[r,i]=it.useState(e),[s,u]=it.useState(!1),[l,c]=it.useState(null),[f,h]=it.useState(!1),[g,y]=it.useState(null),m=()=>{t(r),n()},E=b=>{i(N=>({...N,provider:b})),c(null),y(null)},_=async()=>{if(!r.openAIApiKey){c({valid:!1,error:"Please enter an API key first"});return}u(!0),c(null);try{const b=await VC(r.openAIApiKey);c(b)}catch{c({valid:!1,error:"Validation failed due to network error"})}finally{u(!1)}},R=async()=>{if(!r.openAIApiKey){y({textModel:!1,visionModel:!1,errors:["Please configure and validate your API key first"]});return}h(!0),y(null);try{const b=await $C(r.openAITextModel,r.openAIVisionModel);y(b)}catch{y({textModel:!1,visionModel:!1,errors:["Model testing failed due to network error"]})}finally{h(!1)}};return G.jsx(mc,{onClose:n,children:G.jsxs("div",{className:"space-y-6",children:[G.jsxs("div",{children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Model Manager"}),G.jsx("p",{className:"text-text-secondary mt-1",children:"Configure your backend AI provider and other settings."})]}),G.jsxs("div",{className:"space-y-4",children:[G.jsx("h3",{className:"text-md font-semibold text-text-primary",children:"AI Provider"}),G.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[G.jsx(_S,{label:"Google AI",isActive:r.provider==="google",onClick:()=>E("google")}),G.jsx(_S,{label:"OpenAI",isActive:r.provider==="openai",onClick:()=>E("openai")})]}),G.jsx("div",{className:"text-xs text-text-secondary p-2 bg-base-100 rounded-md",children:r.provider==="google"?"Uses the API key provided by the environment. No configuration needed.":"Requires a valid OpenAI API key. Configure your API key below to use OpenAI models."})]}),G.jsxs("div",{className:`space-y-4 transition-opacity duration-300 ${r.provider==="openai"?"opacity-100":"opacity-50 pointer-events-none"}`,children:[G.jsx("h3",{className:"text-md font-semibold text-text-primary",children:"OpenAI Configuration"}),G.jsxs("div",{className:"space-y-2",children:[G.jsx(rm,{label:"API Key",id:"openai-api-key",value:r.openAIApiKey||"",onChange:b=>{i(N=>({...N,openAIApiKey:b.target.value})),c(null)},placeholder:"sk-...",type:"password"}),G.jsxs("div",{className:"flex gap-2 items-center",children:[G.jsx("button",{onClick:_,disabled:s||!r.openAIApiKey,className:"px-3 py-1 text-sm rounded-md bg-blue-500 hover:bg-blue-600 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Validating...":"Validate Key"}),l&&G.jsx("span",{className:`text-sm font-medium ${l.valid?"text-green-600":"text-red-600"}`,children:l.valid?"✓ Valid":`✗ ${l.error}`})]})]}),G.jsx(rm,{label:"Text Model",id:"openai-text-model",value:r.openAITextModel,onChange:b=>{i(N=>({...N,openAITextModel:b.target.value})),y(null)},placeholder:"e.g., gpt-4o"}),G.jsx(rm,{label:"Vision-Language Model",id:"openai-vision-model",value:r.openAIVisionModel,onChange:b=>{i(N=>({...N,openAIVisionModel:b.target.value})),y(null)},placeholder:"e.g., gpt-4o"}),G.jsxs("div",{className:"space-y-2",children:[G.jsx("button",{onClick:R,disabled:f||!r.openAIApiKey,className:"px-3 py-1 text-sm rounded-md bg-purple-500 hover:bg-purple-600 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Testing Models...":"Test Model Access"}),g&&G.jsxs("div",{className:"text-sm space-y-1",children:[G.jsxs("div",{className:`font-medium ${g.textModel?"text-green-600":"text-red-600"}`,children:["Text Model: ",g.textModel?"✓ Available":"✗ Not Available"]}),G.jsxs("div",{className:`font-medium ${g.visionModel?"text-green-600":"text-red-600"}`,children:["Vision Model: ",g.visionModel?"✓ Available":"✗ Not Available"]}),g.errors.length>0&&G.jsx("div",{className:"text-red-600 text-xs",children:g.errors.map((b,N)=>G.jsxs("div",{children:["• ",b]},N))})]})]})]}),G.jsxs("div",{className:"space-y-4",children:[G.jsx("h3",{className:"text-md font-semibold text-text-primary",children:"Database (Optional)"}),G.jsx(rm,{label:"Database URL",id:"db-url",value:r.databaseUrl,onChange:b=>i(N=>({...N,databaseUrl:b.target.value})),placeholder:"e.g., https://xyz.supabase.co"})]}),G.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-base-300",children:[G.jsx("button",{onClick:n,className:"px-4 py-2 rounded-md text-text-secondary hover:bg-base-300 transition-colors",children:"Cancel"}),G.jsx("button",{onClick:m,className:"px-4 py-2 rounded-md bg-brand-primary hover:bg-brand-secondary text-white font-semibold transition-colors",children:"Save Settings"})]})]})})},_S=({label:n,isActive:e,onClick:t})=>G.jsx("button",{onClick:t,className:`w-full p-4 rounded-lg border-2 transition-all duration-200 ${e?"bg-brand-primary/20 border-brand-primary text-brand-primary":"bg-base-100 border-base-300 hover:border-base-300/50"}`,children:G.jsx("span",{className:"font-semibold",children:n})}),rm=({label:n,id:e,value:t,onChange:r,placeholder:i,type:s="text"})=>G.jsxs("div",{children:[G.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-text-secondary mb-2",children:n}),G.jsx("input",{type:s,id:e,value:t,onChange:r,placeholder:i,className:"w-full p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})]}),pP=({databaseService:n,onLoadAbstract:e,onClose:t,isVisible:r})=>{const[i,s]=it.useState([]),[u,l]=it.useState([]),[c,f]=it.useState(""),[h,g]=it.useState("all"),[y,m]=it.useState("all"),[E,_]=it.useState("date"),[R,b]=it.useState("desc"),[N,C]=it.useState(!1),[A,F]=it.useState(null),[J,V]=it.useState(null),[te,O]=it.useState(null);it.useEffect(()=>{r&&(le(),Q())},[r]),it.useEffect(()=>{U()},[i,c,h,y,E,R]);const le=async()=>{C(!0),F(null);try{const me=await n.listAbstracts();s(me)}catch(me){F(me instanceof Error?me.message:"Failed to load abstracts")}finally{C(!1)}},Q=async()=>{try{const me=await n.getSyncStatus();V(me)}catch(me){console.error("Failed to load sync status:",me)}},U=()=>{let me=[...i];if(c.trim()){const Ne=c.toLowerCase();me=me.filter(K=>K.title.toLowerCase().includes(Ne)||K.abstractData.impact.toLowerCase().includes(Ne)||K.abstractData.synopsis.toLowerCase().includes(Ne)||K.keywords.some(L=>L.toLowerCase().includes(Ne)))}h!=="all"&&(me=me.filter(Ne=>Ne.conference===h)),y!=="all"&&(me=me.filter(Ne=>Ne.abstractType===y)),me.sort((Ne,K)=>{let L=0;switch(E){case"date":L=Ne.updatedAt.getTime()-K.updatedAt.getTime();break;case"title":L=Ne.title.localeCompare(K.title);break;case"conference":L=Ne.conference.localeCompare(K.conference);break}return R==="asc"?L:-L}),l(me)},X=async me=>{try{await n.deleteAbstract(me),s(Ne=>Ne.filter(K=>K.id!==me)),O(null)}catch(Ne){F(Ne instanceof Error?Ne.message:"Failed to delete abstract")}},M=me=>{e(me),t()},ye=me=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(me),se=me=>{switch(me){case"ISMRM":return"#4CAF50";case"RSNA":return"#2196F3";case"JACC":return"#FF9800";default:return"#9E9E9E"}},ie=async()=>{try{const me=await n.exportData(),Ne=new Blob([me],{type:"application/json"}),K=URL.createObjectURL(Ne),L=document.createElement("a");L.href=K,L.download=`sci-necromancer-abstracts-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(K)}catch(me){F(me instanceof Error?me.message:"Failed to export abstracts")}},Se=async me=>{var K;const Ne=(K=me.target.files)==null?void 0:K[0];if(Ne)try{const L=await Ne.text();await n.importData(L),await le()}catch(L){F(L instanceof Error?L.message:"Failed to import abstracts")}};return r?G.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[G.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-5/6 flex flex-col",children:[G.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[G.jsxs("div",{children:[G.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Abstract Manager"}),G.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[i.length," abstracts saved",J&&G.jsxs("span",{className:"ml-2",children:["• ",J.isOnline?"🟢 Online":"🔴 Offline",J.pendingChanges>0&&G.jsxs("span",{className:"text-orange-600",children:["• ",J.pendingChanges," pending sync"]})]})]})]}),G.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"×"})]}),G.jsx("div",{className:"p-6 border-b bg-gray-50",children:G.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[G.jsx("div",{className:"flex-1 min-w-64",children:G.jsx("input",{type:"text",placeholder:"Search abstracts...",value:c,onChange:me=>f(me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),G.jsxs("select",{value:h,onChange:me=>g(me.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[G.jsx("option",{value:"all",children:"All Conferences"}),G.jsx("option",{value:"ISMRM",children:"ISMRM"}),G.jsx("option",{value:"RSNA",children:"RSNA"}),G.jsx("option",{value:"JACC",children:"JACC"})]}),G.jsxs("select",{value:y,onChange:me=>m(me.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[G.jsx("option",{value:"all",children:"All Types"}),G.jsx("option",{value:"Standard Abstract",children:"Standard"}),G.jsx("option",{value:"MRI in Clinical Practice Abstract",children:"Clinical Practice"}),G.jsx("option",{value:"ISMRT Abstract",children:"ISMRT"}),G.jsx("option",{value:"Registered Abstract",children:"Registered"})]}),G.jsxs("select",{value:`${E}-${R}`,onChange:me=>{const[Ne,K]=me.target.value.split("-");_(Ne),b(K)},className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[G.jsx("option",{value:"date-desc",children:"Newest First"}),G.jsx("option",{value:"date-asc",children:"Oldest First"}),G.jsx("option",{value:"title-asc",children:"Title A-Z"}),G.jsx("option",{value:"title-desc",children:"Title Z-A"}),G.jsx("option",{value:"conference-asc",children:"Conference A-Z"})]}),G.jsx("button",{onClick:ie,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Export"}),G.jsxs("label",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors cursor-pointer",children:["Import",G.jsx("input",{type:"file",accept:".json",onChange:Se,className:"hidden"})]})]})}),G.jsx("div",{className:"flex-1 overflow-hidden",children:N?G.jsx("div",{className:"flex items-center justify-center h-full",children:G.jsx("div",{className:"text-lg text-gray-600",children:"Loading abstracts..."})}):A?G.jsx("div",{className:"flex items-center justify-center h-full",children:G.jsxs("div",{className:"text-red-600 text-center",children:[G.jsx("p",{className:"text-lg font-semibold",children:"Error"}),G.jsx("p",{children:A}),G.jsx("button",{onClick:le,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]})}):u.length===0?G.jsx("div",{className:"flex items-center justify-center h-full",children:G.jsxs("div",{className:"text-gray-500 text-center",children:[G.jsx("p",{className:"text-lg",children:"No abstracts found"}),G.jsx("p",{className:"text-sm mt-2",children:c||h!=="all"||y!=="all"?"Try adjusting your filters":"Create your first abstract to get started"})]})}):G.jsx("div",{className:"h-full overflow-y-auto",children:G.jsx("div",{className:"grid gap-4 p-6",children:u.map(me=>G.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:G.jsxs("div",{className:"flex items-start justify-between",children:[G.jsxs("div",{className:"flex-1",children:[G.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:me.title}),G.jsx("span",{className:"px-2 py-1 text-xs font-medium text-white rounded",style:{backgroundColor:se(me.conference)},children:me.conference}),G.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:me.abstractType.replace(" Abstract","")})]}),G.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:me.abstractData.impact}),G.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[G.jsxs("span",{children:["Updated: ",ye(me.updatedAt)]}),G.jsxs("span",{children:["Keywords: ",me.keywords.length]}),me.userId&&G.jsx("span",{className:"text-green-600",children:"☁️ Synced"})]})]}),G.jsxs("div",{className:"flex gap-2 ml-4",children:[G.jsx("button",{onClick:()=>M(me),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Load"}),G.jsx("button",{onClick:()=>O(me.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Delete"})]})]})},me.id))})})})]}),te&&G.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:G.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Delete"}),G.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this abstract? This action cannot be undone."}),G.jsxs("div",{className:"flex gap-3 justify-end",children:[G.jsx("button",{onClick:()=>O(null),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),G.jsx("button",{onClick:()=>X(te),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]}):null},WC=it.createContext({loadAbstract:()=>{},abstractToLoad:null,clearLoadedAbstract:()=>{}}),Cg=()=>it.useContext(WC),mP=({children:n})=>{const[e,t]=it.useState(null),r=s=>{t(s)},i=()=>{t(null)};return G.jsx(WC.Provider,{value:{loadAbstract:r,abstractToLoad:e,clearLoadedAbstract:i},children:n})},gP=()=>{const[n,e]=it.useState(!1),[t,r]=it.useState(!1),[i,s]=it.useState(!1),{databaseService:u}=it.useContext(ud),{loadAbstract:l}=Cg(),c=f=>{l(f),s(!1)};return G.jsxs(G.Fragment,{children:[G.jsx("header",{className:"bg-base-200/50 backdrop-blur-sm sticky top-0 z-50",children:G.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:G.jsxs("div",{className:"flex items-center justify-between h-16 border-b border-base-300",children:[G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx(rn,{type:"logo",className:"h-8 w-8 text-brand-primary"}),G.jsx("h1",{className:"text-xl font-bold text-text-primary tracking-tight",children:"Academic Submission Generator"})]}),G.jsxs("div",{className:"flex items-center gap-4",children:[G.jsx("button",{onClick:()=>s(!0),"aria-label":"Open abstract manager",className:"text-text-secondary hover:text-text-primary transition-colors",title:"Manage saved abstracts",children:G.jsx(rn,{type:"folder",className:"h-6 w-6"})}),G.jsx("button",{onClick:()=>r(!0),"aria-label":"Open model settings",className:"text-text-secondary hover:text-text-primary transition-colors",children:G.jsx(rn,{type:"settings",className:"h-6 w-6"})}),G.jsx("a",{href:"https://github.com/your-repo/academic-submission-generator",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub Repository",className:"text-text-secondary hover:text-text-primary transition-colors",children:G.jsx(rn,{type:"github",className:"h-6 w-6"})}),G.jsxs("div",{className:"relative",children:[G.jsx("button",{onClick:()=>e(!n),className:"flex items-center gap-1 text-text-secondary hover:text-text-primary transition-colors focus:outline-none",children:G.jsx(rn,{type:"language",className:"h-6 w-6"})}),n&&G.jsxs("div",{className:"absolute right-0 mt-2 w-32 bg-base-200 border border-base-300 rounded-md shadow-lg py-1 animate-fade-in",children:[G.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-text-primary hover:bg-base-300",children:"English"}),G.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-text-secondary opacity-50 cursor-not-allowed",children:"中文 (TBD)"})]})]})]})]})})}),t&&G.jsx(hP,{onClose:()=>r(!1)}),i&&G.jsx(pP,{databaseService:u,onLoadAbstract:c,onClose:()=>s(!1),isVisible:i})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yP,vP;function wP(){return{geminiUrl:yP,vertexUrl:vP}}function bP(n,e,t,r){var i,s;if(!(n!=null&&n.baseUrl)){const u=wP();return e?(i=u.vertexUrl)!==null&&i!==void 0?i:t:(s=u.geminiUrl)!==null&&s!==void 0?s:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _c{}function At(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function x(n,e,t){for(let s=0;s<e.length-1;s++){const u=e[s];if(u.endsWith("[]")){const l=u.slice(0,-2);if(!(l in n))if(Array.isArray(t))n[l]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[l])){const c=n[l];if(Array.isArray(t))for(let f=0;f<c.length;f++){const h=c[f];x(h,e.slice(s+1),t[f])}else for(const f of c)x(f,e.slice(s+1),t)}return}else if(u.endsWith("[0]")){const l=u.slice(0,-3);l in n||(n[l]=[{}]);const c=n[l];x(c[0],e.slice(s+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function w(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const u=n[s];return Array.isArray(u)?u.map(l=>w(l,e.slice(r+1),t)):t}else return t}else n=n[i]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function _P(n,e){for(const[t,r]of Object.entries(e)){const i=t.split("."),s=r.split("."),u=new Set;let l=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){l=c;break}if(l!==-1&&s.length>l)for(let c=l;c<s.length;c++){const f=s[c];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}fw(n,i,s,0,u)}}function fw(n,e,t,r,i){if(r>=e.length||typeof n!="object"||n===null)return;const s=e[r];if(s.endsWith("[]")){const u=s.slice(0,-2),l=n;if(u in l&&Array.isArray(l[u]))for(const c of l[u])fw(c,e,t,r+1,i)}else if(s==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,l=Object.keys(u).filter(f=>!f.startsWith("_")&&!i.has(f)),c={};for(const f of l)c[f]=u[f];for(const[f,h]of Object.entries(c)){const g=[];for(const y of t.slice(r))y==="*"?g.push(f):g.push(y);x(u,g,h)}for(const f of l)delete u[f]}}else{const u=n;s in u&&fw(u[s],e,t,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _b(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SP(n){const e={},t=w(n,["operationName"]);t!=null&&x(e,["operationName"],t);const r=w(n,["resourceName"]);return r!=null&&x(e,["_url","resourceName"],r),e}function xP(n){const e={},t=w(n,["name"]);t!=null&&x(e,["name"],t);const r=w(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=w(n,["done"]);i!=null&&x(e,["done"],i);const s=w(n,["error"]);s!=null&&x(e,["error"],s);const u=w(n,["response","generateVideoResponse"]);return u!=null&&x(e,["response"],EP(u)),e}function AP(n){const e={},t=w(n,["name"]);t!=null&&x(e,["name"],t);const r=w(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=w(n,["done"]);i!=null&&x(e,["done"],i);const s=w(n,["error"]);s!=null&&x(e,["error"],s);const u=w(n,["response"]);return u!=null&&x(e,["response"],TP(u)),e}function EP(n){const e={},t=w(n,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(u=>CP(u))),x(e,["generatedVideos"],s)}const r=w(n,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=w(n,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function TP(n){const e={},t=w(n,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(u=>NP(u))),x(e,["generatedVideos"],s)}const r=w(n,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=w(n,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function CP(n){const e={},t=w(n,["video"]);return t!=null&&x(e,["video"],IP(t)),e}function NP(n){const e={},t=w(n,["_self"]);return t!=null&&x(e,["video"],LP(t)),e}function RP(n){const e={},t=w(n,["operationName"]);return t!=null&&x(e,["_url","operationName"],t),e}function kP(n){const e={},t=w(n,["operationName"]);return t!=null&&x(e,["_url","operationName"],t),e}function IP(n){const e={},t=w(n,["uri"]);t!=null&&x(e,["uri"],t);const r=w(n,["encodedVideo"]);r!=null&&x(e,["videoBytes"],_b(r));const i=w(n,["encoding"]);return i!=null&&x(e,["mimeType"],i),e}function LP(n){const e={},t=w(n,["gcsUri"]);t!=null&&x(e,["uri"],t);const r=w(n,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],_b(r));const i=w(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var SS;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(SS||(SS={}));var xS;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(xS||(xS={}));var AS;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(AS||(AS={}));var ur;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ur||(ur={}));var ES;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ES||(ES={}));var TS;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(TS||(TS={}));var CS;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(CS||(CS={}));var NS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(NS||(NS={}));var RS;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(RS||(RS={}));var kS;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kS||(kS={}));var IS;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(IS||(IS={}));var LS;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(LS||(LS={}));var PS;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(PS||(PS={}));var MS;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(MS||(MS={}));var OS;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(OS||(OS={}));var DS;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(DS||(DS={}));var ed;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ed||(ed={}));var US;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(US||(US={}));var dw;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(dw||(dw={}));var FS;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(FS||(FS={}));var BS;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(BS||(BS={}));var qS;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(qS||(qS={}));var jS;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(jS||(jS={}));var zS;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(zS||(zS={}));var HS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(HS||(HS={}));var GS;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(GS||(GS={}));var VS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(VS||(VS={}));var $S;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($S||($S={}));var WS;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(WS||(WS={}));var KS;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(KS||(KS={}));var JS;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(JS||(JS={}));var YS;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(YS||(YS={}));var XS;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(XS||(XS={}));var ZS;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ZS||(ZS={}));var QS;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(QS||(QS={}));var ex;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ex||(ex={}));var tx;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(tx||(tx={}));var nx;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(nx||(nx={}));var rx;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(rx||(rx={}));var ix;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(ix||(ix={}));var sx;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(sx||(sx={}));var ax;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(ax||(ax={}));var ox;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ox||(ox={}));var lx;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(lx||(lx={}));var ux;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(ux||(ux={}));var cx;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(cx||(cx={}));var fx;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fx||(fx={}));var dx;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(dx||(dx={}));var Bf;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Bf||(Bf={}));class hw{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class nh{get text(){var e,t,r,i,s,u,l,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const g=[];for(const y of(c=(l=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[m,E]of Object.entries(y))m!=="text"&&m!=="thought"&&(E!==null||E!==void 0)&&g.push(m);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;h=!0,f+=y.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,t,r,i,s,u,l,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const g of(c=(l=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[y,m]of Object.entries(g))y!=="inlineData"&&(m!==null||m!==void 0)&&h.push(y);g.inlineData&&typeof g.inlineData.data=="string"&&(f+=atob(g.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,r,i,s,u,l,c;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(l=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,r,i,s,u,l,c,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(l=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,r,i,s,u,l,c,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(l=(u=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class hx{}class px{}class PP{}class MP{}class OP{}class DP{}class mx{}class gx{}class yx{}class UP{}class rg{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const r=new rg;let i;const s=e;return t?i=AP(s):i=xP(s),Object.assign(r,i),r}}class vx{}class wx{}class bx{}class FP{}class BP{}class qP{}class _x{}class jP{get text(){var e,t,r;let i="",s=!1;const u=[];for(const l of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(l))c!=="text"&&c!=="thought"&&f!==null&&u.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,i+=l.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,t,r;let i="";const s=[];for(const u of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(u))l!=="inlineData"&&c!==null&&s.push(l);u.inlineData&&typeof u.inlineData.data=="string"&&(i+=atob(u.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class zP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kn(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function KC(n,e){const t=kn(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function JC(n){return Array.isArray(n)?n.map(e=>ig(e)):[ig(n)]}function ig(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function YC(n){const e=ig(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function XC(n){const e=ig(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Sx(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function ZC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Sx(e)):[Sx(n)]}function pw(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function xx(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Ax(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ji(n){if(n==null)throw new Error("ContentUnion is required");return pw(n)?n:{role:"user",parts:ZC(n)}}function Sb(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=ji(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=ji(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ji(t)):[ji(e)]}function ga(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(xx(n)||Ax(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ji(n)]}const e=[],t=[],r=pw(n[0]);for(const i of n){const s=pw(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(xx(i)||Ax(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return r||e.push({role:"user",parts:ZC(t)}),e}function HP(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(ur).includes(t[0].toUpperCase())?t[0].toUpperCase():ur.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(ur).includes(r.toUpperCase())?r.toUpperCase():ur.TYPE_UNSPECIFIED})}}function zf(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=n.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,n=s[1]):s[1].type==="null"&&(e.nullable=!0,n=s[0])),n.type instanceof Array&&HP(n.type,e);for(const[u,l]of Object.entries(n))if(l!=null)if(u=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(ur).includes(l.toUpperCase())?l.toUpperCase():ur.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=zf(l);else if(r.includes(u)){const c=[];for(const f of l){if(f.type=="null"){e.nullable=!0;continue}c.push(zf(f))}e[u]=c}else if(i.includes(u)){const c={};for(const[f,h]of Object.entries(l))c[f]=zf(h);e[u]=c}else{if(u==="additionalProperties")continue;e[u]=l}return e}function xb(n){return zf(n)}function Ab(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Eb(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function hd(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=zf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=zf(e.response));return n}function pd(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function GP(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function Al(n,e){if(typeof e!="string")throw new Error("name must be a string");return GP(n,e,"cachedContents")}function QC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function gu(n){return _b(n)}function VP(n){return n!=null&&typeof n=="object"&&"name"in n}function $P(n){return n!=null&&typeof n=="object"&&"video"in n}function WP(n){return n!=null&&typeof n=="object"&&"uri"in n}function e6(n){var e;let t;if(VP(n)&&(t=n.name),!(WP(n)&&(t=n.uri,t===void 0))&&!($P(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function t6(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function n6(n){for(const e of["models","tunedModels","publisherModels"])if(KP(n,e))return n[e];return[]}function KP(n,e){return n!==null&&typeof n=="object"&&e in n}function JP(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function YP(n,e={}){const t=[],r=new Set;for(const i of n){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const u=JP(i,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function r6(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function XP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function i6(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const i=t.inlinedResponses;if(!Array.isArray(i)||i.length===0)return n;let s=!1;for(const u of i){if(typeof u!="object"||u===null)continue;const c=u.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function md(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function s6(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZP(n){const e={},t=w(n,["responsesFile"]);t!=null&&x(e,["fileName"],t);const r=w(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>RM(u))),x(e,["inlinedResponses"],s)}const i=w(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u)),x(e,["inlinedEmbedContentResponses"],s)}return e}function QP(n){const e={},t=w(n,["predictionsFormat"]);t!=null&&x(e,["format"],t);const r=w(n,["gcsDestination","outputUriPrefix"]);r!=null&&x(e,["gcsUri"],r);const i=w(n,["bigqueryDestination","outputUri"]);return i!=null&&x(e,["bigqueryUri"],i),e}function eM(n){const e={},t=w(n,["format"]);t!=null&&x(e,["predictionsFormat"],t);const r=w(n,["gcsUri"]);r!=null&&x(e,["gcsDestination","outputUriPrefix"],r);const i=w(n,["bigqueryUri"]);if(i!=null&&x(e,["bigqueryDestination","outputUri"],i),w(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(w(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(w(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Mm(n){const e={},t=w(n,["name"]);t!=null&&x(e,["name"],t);const r=w(n,["metadata","displayName"]);r!=null&&x(e,["displayName"],r);const i=w(n,["metadata","state"]);i!=null&&x(e,["state"],s6(i));const s=w(n,["metadata","createTime"]);s!=null&&x(e,["createTime"],s);const u=w(n,["metadata","endTime"]);u!=null&&x(e,["endTime"],u);const l=w(n,["metadata","updateTime"]);l!=null&&x(e,["updateTime"],l);const c=w(n,["metadata","model"]);c!=null&&x(e,["model"],c);const f=w(n,["metadata","output"]);return f!=null&&x(e,["dest"],ZP(i6(f))),e}function mw(n){const e={},t=w(n,["name"]);t!=null&&x(e,["name"],t);const r=w(n,["displayName"]);r!=null&&x(e,["displayName"],r);const i=w(n,["state"]);i!=null&&x(e,["state"],s6(i));const s=w(n,["error"]);s!=null&&x(e,["error"],s);const u=w(n,["createTime"]);u!=null&&x(e,["createTime"],u);const l=w(n,["startTime"]);l!=null&&x(e,["startTime"],l);const c=w(n,["endTime"]);c!=null&&x(e,["endTime"],c);const f=w(n,["updateTime"]);f!=null&&x(e,["updateTime"],f);const h=w(n,["model"]);h!=null&&x(e,["model"],h);const g=w(n,["inputConfig"]);g!=null&&x(e,["src"],tM(g));const y=w(n,["outputConfig"]);return y!=null&&x(e,["dest"],QP(i6(y))),e}function tM(n){const e={},t=w(n,["instancesFormat"]);t!=null&&x(e,["format"],t);const r=w(n,["gcsSource","uris"]);r!=null&&x(e,["gcsUri"],r);const i=w(n,["bigquerySource","inputUri"]);return i!=null&&x(e,["bigqueryUri"],i),e}function nM(n,e){const t={};if(w(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(w(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(w(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=w(e,["fileName"]);r!=null&&x(t,["fileName"],r);const i=w(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>NM(n,u))),x(t,["requests","requests"],s)}return t}function rM(n){const e={},t=w(n,["format"]);t!=null&&x(e,["instancesFormat"],t);const r=w(n,["gcsUri"]);r!=null&&x(e,["gcsSource","uris"],r);const i=w(n,["bigqueryUri"]);if(i!=null&&x(e,["bigquerySource","inputUri"],i),w(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(w(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function iM(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["data"]);t!=null&&x(e,["data"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function sM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],md(n,r)),t}function aM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],md(n,r)),t}function oM(n){const e={},t=w(n,["content"]);t!=null&&x(e,["content"],t);const r=w(n,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],lM(r));const i=w(n,["tokenCount"]);i!=null&&x(e,["tokenCount"],i);const s=w(n,["finishReason"]);s!=null&&x(e,["finishReason"],s);const u=w(n,["urlContextMetadata"]);u!=null&&x(e,["urlContextMetadata"],u);const l=w(n,["avgLogprobs"]);l!=null&&x(e,["avgLogprobs"],l);const c=w(n,["groundingMetadata"]);c!=null&&x(e,["groundingMetadata"],c);const f=w(n,["index"]);f!=null&&x(e,["index"],f);const h=w(n,["logprobsResult"]);h!=null&&x(e,["logprobsResult"],h);const g=w(n,["safetyRatings"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(m=>m)),x(e,["safetyRatings"],y)}return e}function lM(n){const e={},t=w(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["citations"],r)}return e}function a6(n){const e={},t=w(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>DM(s))),x(e,["parts"],i)}const r=w(n,["role"]);return r!=null&&x(e,["role"],r),e}function uM(n,e){const t={},r=w(n,["displayName"]);if(e!==void 0&&r!=null&&x(e,["batch","displayName"],r),w(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function cM(n,e){const t={},r=w(n,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=w(n,["dest"]);return e!==void 0&&i!=null&&x(e,["outputConfig"],eM(XP(i))),t}function Ex(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["src"]);i!=null&&x(t,["batch","inputConfig"],nM(n,r6(n,i)));const s=w(e,["config"]);return s!=null&&uM(s,t),t}function fM(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["model"],kn(n,r));const i=w(e,["src"]);i!=null&&x(t,["inputConfig"],rM(r6(n,i)));const s=w(e,["config"]);return s!=null&&cM(s,t),t}function dM(n,e){const t={},r=w(n,["displayName"]);return e!==void 0&&r!=null&&x(e,["batch","displayName"],r),t}function hM(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["src"]);i!=null&&x(t,["batch","inputConfig"],bM(n,i));const s=w(e,["config"]);return s!=null&&dM(s,t),t}function pM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],md(n,r)),t}function mM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],md(n,r)),t}function gM(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["name"]);r!=null&&x(e,["name"],r);const i=w(n,["done"]);i!=null&&x(e,["done"],i);const s=w(n,["error"]);return s!=null&&x(e,["error"],s),e}function yM(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["name"]);r!=null&&x(e,["name"],r);const i=w(n,["done"]);i!=null&&x(e,["done"],i);const s=w(n,["error"]);return s!=null&&x(e,["error"],s),e}function vM(n,e){const t={},r=w(e,["contents"]);if(r!=null){let s=Sb(n,r);Array.isArray(s)&&(s=s.map(u=>u)),x(t,["requests[]","request","content"],s)}const i=w(e,["config"]);return i!=null&&(x(t,["_self"],wM(i,t)),_P(t,{"requests[].*":"requests[].request.*"})),t}function wM(n,e){const t={},r=w(n,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const i=w(n,["title"]);e!==void 0&&i!=null&&x(e,["requests[]","title"],i);const s=w(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&x(e,["requests[]","outputDimensionality"],s),w(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(w(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function bM(n,e){const t={},r=w(e,["fileName"]);r!=null&&x(t,["file_name"],r);const i=w(e,["inlinedRequests"]);return i!=null&&x(t,["requests"],vM(n,i)),t}function _M(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function SM(n,e,t){const r={},i=w(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],a6(ji(i)));const s=w(e,["temperature"]);s!=null&&x(r,["temperature"],s);const u=w(e,["topP"]);u!=null&&x(r,["topP"],u);const l=w(e,["topK"]);l!=null&&x(r,["topK"],l);const c=w(e,["candidateCount"]);c!=null&&x(r,["candidateCount"],c);const f=w(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const h=w(e,["stopSequences"]);h!=null&&x(r,["stopSequences"],h);const g=w(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const y=w(e,["logprobs"]);y!=null&&x(r,["logprobs"],y);const m=w(e,["presencePenalty"]);m!=null&&x(r,["presencePenalty"],m);const E=w(e,["frequencyPenalty"]);E!=null&&x(r,["frequencyPenalty"],E);const _=w(e,["seed"]);_!=null&&x(r,["seed"],_);const R=w(e,["responseMimeType"]);R!=null&&x(r,["responseMimeType"],R);const b=w(e,["responseSchema"]);b!=null&&x(r,["responseSchema"],xb(b));const N=w(e,["responseJsonSchema"]);if(N!=null&&x(r,["responseJsonSchema"],N),w(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(w(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=w(e,["safetySettings"]);if(t!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(X=>UM(X))),x(t,["safetySettings"],U)}const A=w(e,["tools"]);if(t!==void 0&&A!=null){let U=pd(A);Array.isArray(U)&&(U=U.map(X=>FM(hd(X)))),x(t,["tools"],U)}const F=w(e,["toolConfig"]);if(t!==void 0&&F!=null&&x(t,["toolConfig"],F),w(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=w(e,["cachedContent"]);t!==void 0&&J!=null&&x(t,["cachedContent"],Al(n,J));const V=w(e,["responseModalities"]);V!=null&&x(r,["responseModalities"],V);const te=w(e,["mediaResolution"]);te!=null&&x(r,["mediaResolution"],te);const O=w(e,["speechConfig"]);if(O!=null&&x(r,["speechConfig"],Ab(O)),w(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=w(e,["thinkingConfig"]);le!=null&&x(r,["thinkingConfig"],le);const Q=w(e,["imageConfig"]);return Q!=null&&x(r,["imageConfig"],Q),r}function xM(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>oM(f))),x(e,["candidates"],c)}const i=w(n,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const s=w(n,["promptFeedback"]);s!=null&&x(e,["promptFeedback"],s);const u=w(n,["responseId"]);u!=null&&x(e,["responseId"],u);const l=w(n,["usageMetadata"]);return l!=null&&x(e,["usageMetadata"],l),e}function AM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],md(n,r)),t}function EM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],md(n,r)),t}function TM(n){const e={};if(w(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=w(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function CM(n){const e={},t=w(n,["timeRangeFilter"]);if(t!=null&&x(e,["timeRangeFilter"],t),w(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function NM(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["request","model"],kn(n,r));const i=w(e,["contents"]);if(i!=null){let l=ga(i);Array.isArray(l)&&(l=l.map(c=>a6(c))),x(t,["request","contents"],l)}const s=w(e,["metadata"]);s!=null&&x(t,["metadata"],s);const u=w(e,["config"]);return u!=null&&x(t,["request","generationConfig"],SM(n,u,w(t,["request"],{}))),t}function RM(n){const e={},t=w(n,["response"]);t!=null&&x(e,["response"],xM(t));const r=w(n,["error"]);return r!=null&&x(e,["error"],r),e}function kM(n,e){const t={},r=w(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=w(n,["pageToken"]);if(e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),w(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function IM(n,e){const t={},r=w(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=w(n,["pageToken"]);e!==void 0&&i!=null&&x(e,["_query","pageToken"],i);const s=w(n,["filter"]);return e!==void 0&&s!=null&&x(e,["_query","filter"],s),t}function LM(n){const e={},t=w(n,["config"]);return t!=null&&kM(t,e),e}function PM(n){const e={},t=w(n,["config"]);return t!=null&&IM(t,e),e}function MM(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=w(n,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>Mm(u))),x(e,["batchJobs"],s)}return e}function OM(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=w(n,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>mw(u))),x(e,["batchJobs"],s)}return e}function DM(n){const e={},t=w(n,["videoMetadata"]);t!=null&&x(e,["videoMetadata"],t);const r=w(n,["thought"]);r!=null&&x(e,["thought"],r);const i=w(n,["inlineData"]);i!=null&&x(e,["inlineData"],iM(i));const s=w(n,["fileData"]);s!=null&&x(e,["fileData"],_M(s));const u=w(n,["thoughtSignature"]);u!=null&&x(e,["thoughtSignature"],u);const l=w(n,["functionCall"]);l!=null&&x(e,["functionCall"],l);const c=w(n,["codeExecutionResult"]);c!=null&&x(e,["codeExecutionResult"],c);const f=w(n,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=w(n,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const g=w(n,["text"]);return g!=null&&x(e,["text"],g),e}function UM(n){const e={};if(w(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=w(n,["category"]);t!=null&&x(e,["category"],t);const r=w(n,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function FM(n){const e={},t=w(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),x(e,["functionDeclarations"],f)}if(w(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=w(n,["googleSearch"]);r!=null&&x(e,["googleSearch"],CM(r));const i=w(n,["googleSearchRetrieval"]);if(i!=null&&x(e,["googleSearchRetrieval"],i),w(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=w(n,["googleMaps"]);s!=null&&x(e,["googleMaps"],TM(s));const u=w(n,["urlContext"]);u!=null&&x(e,["urlContext"],u);const l=w(n,["computerUse"]);l!=null&&x(e,["computerUse"],l);const c=w(n,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yc;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(yc||(yc={}));class zh{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!r||Object.keys(r).length===0?u={config:{}}:typeof r=="object"?u=Object.assign({},r):u=r,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(s=(i=u.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BM extends _c{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new zh(yc.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Ex(this.apiClient,e),r=t._url,i=At("{model}:batchGenerateContent",r),l=t.batch.inputConfig.requests,c=l.requests,f=[];for(const h of c){const g=Object.assign({},h);if(g.systemInstruction){const y=g.systemInstruction;delete g.systemInstruction;const m=g.request;m.systemInstruction=y,g.request=m}f.push(g)}return l.requests=f,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),u=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(u)r.dest=`${u}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=fM(this.apiClient,e);return l=At("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u.then(h=>mw(h))}else{const f=Ex(this.apiClient,e);return l=At("{model}:batchGenerateContent",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u.then(h=>Mm(h))}}async createEmbeddingsInternal(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hM(this.apiClient,e);return s=At("{model}:asyncBatchEmbedContent",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Mm(c))}}async get(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=EM(this.apiClient,e);return l=At("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u.then(h=>mw(h))}else{const f=AM(this.apiClient,e);return l=At("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u.then(h=>Mm(h))}}async cancel(e){var t,r,i,s;let u="",l={};if(this.apiClient.isVertexAI()){const c=aM(this.apiClient,e);u=At("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:u,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=sM(this.apiClient,e);u=At("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:u,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=PM(e);return l=At("batchPredictionJobs",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=OM(h),y=new _x;return Object.assign(y,g),y})}else{const f=LM(e);return l=At("batches",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=MM(h),y=new _x;return Object.assign(y,g),y})}}async delete(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=mM(this.apiClient,e);return l=At("batchPredictionJobs/{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>yM(h))}else{const f=pM(this.apiClient,e);return l=At("batches/{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>gM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qM(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["data"]);t!=null&&x(e,["data"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function Tx(n){const e={},t=w(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>oO(s))),x(e,["parts"],i)}const r=w(n,["role"]);return r!=null&&x(e,["role"],r),e}function jM(n,e){const t={},r=w(n,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=w(n,["expireTime"]);e!==void 0&&i!=null&&x(e,["expireTime"],i);const s=w(n,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const u=w(n,["contents"]);if(e!==void 0&&u!=null){let h=ga(u);Array.isArray(h)&&(h=h.map(g=>Tx(g))),x(e,["contents"],h)}const l=w(n,["systemInstruction"]);e!==void 0&&l!=null&&x(e,["systemInstruction"],Tx(ji(l)));const c=w(n,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>lO(g))),x(e,["tools"],h)}const f=w(n,["toolConfig"]);if(e!==void 0&&f!=null&&x(e,["toolConfig"],f),w(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function zM(n,e){const t={},r=w(n,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=w(n,["expireTime"]);e!==void 0&&i!=null&&x(e,["expireTime"],i);const s=w(n,["displayName"]);e!==void 0&&s!=null&&x(e,["displayName"],s);const u=w(n,["contents"]);if(e!==void 0&&u!=null){let g=ga(u);Array.isArray(g)&&(g=g.map(y=>y)),x(e,["contents"],g)}const l=w(n,["systemInstruction"]);e!==void 0&&l!=null&&x(e,["systemInstruction"],ji(l));const c=w(n,["tools"]);if(e!==void 0&&c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>uO(y))),x(e,["tools"],g)}const f=w(n,["toolConfig"]);e!==void 0&&f!=null&&x(e,["toolConfig"],f);const h=w(n,["kmsKeyName"]);return e!==void 0&&h!=null&&x(e,["encryption_spec","kmsKeyName"],h),t}function HM(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["model"],KC(n,r));const i=w(e,["config"]);return i!=null&&jM(i,t),t}function GM(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["model"],KC(n,r));const i=w(e,["config"]);return i!=null&&zM(i,t),t}function VM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],Al(n,r)),t}function $M(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],Al(n,r)),t}function WM(n){const e={},t=w(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function KM(n){const e={},t=w(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function JM(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function YM(n){const e={};if(w(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=w(n,["description"]);t!=null&&x(e,["description"],t);const r=w(n,["name"]);r!=null&&x(e,["name"],r);const i=w(n,["parameters"]);i!=null&&x(e,["parameters"],i);const s=w(n,["parametersJsonSchema"]);s!=null&&x(e,["parametersJsonSchema"],s);const u=w(n,["response"]);u!=null&&x(e,["response"],u);const l=w(n,["responseJsonSchema"]);return l!=null&&x(e,["responseJsonSchema"],l),e}function XM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],Al(n,r)),t}function ZM(n,e){const t={},r=w(e,["name"]);return r!=null&&x(t,["_url","name"],Al(n,r)),t}function QM(n){const e={};if(w(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=w(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function eO(n){const e={},t=w(n,["timeRangeFilter"]);if(t!=null&&x(e,["timeRangeFilter"],t),w(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function tO(n,e){const t={},r=w(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=w(n,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),t}function nO(n,e){const t={},r=w(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=w(n,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),t}function rO(n){const e={},t=w(n,["config"]);return t!=null&&tO(t,e),e}function iO(n){const e={},t=w(n,["config"]);return t!=null&&nO(t,e),e}function sO(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=w(n,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u)),x(e,["cachedContents"],s)}return e}function aO(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=w(n,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u)),x(e,["cachedContents"],s)}return e}function oO(n){const e={},t=w(n,["videoMetadata"]);t!=null&&x(e,["videoMetadata"],t);const r=w(n,["thought"]);r!=null&&x(e,["thought"],r);const i=w(n,["inlineData"]);i!=null&&x(e,["inlineData"],qM(i));const s=w(n,["fileData"]);s!=null&&x(e,["fileData"],JM(s));const u=w(n,["thoughtSignature"]);u!=null&&x(e,["thoughtSignature"],u);const l=w(n,["functionCall"]);l!=null&&x(e,["functionCall"],l);const c=w(n,["codeExecutionResult"]);c!=null&&x(e,["codeExecutionResult"],c);const f=w(n,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=w(n,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const g=w(n,["text"]);return g!=null&&x(e,["text"],g),e}function lO(n){const e={},t=w(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),x(e,["functionDeclarations"],f)}if(w(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=w(n,["googleSearch"]);r!=null&&x(e,["googleSearch"],eO(r));const i=w(n,["googleSearchRetrieval"]);if(i!=null&&x(e,["googleSearchRetrieval"],i),w(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=w(n,["googleMaps"]);s!=null&&x(e,["googleMaps"],QM(s));const u=w(n,["urlContext"]);u!=null&&x(e,["urlContext"],u);const l=w(n,["computerUse"]);l!=null&&x(e,["computerUse"],l);const c=w(n,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}function uO(n){const e={},t=w(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(y=>YM(y))),x(e,["functionDeclarations"],g)}const r=w(n,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=w(n,["googleSearch"]);i!=null&&x(e,["googleSearch"],i);const s=w(n,["googleSearchRetrieval"]);s!=null&&x(e,["googleSearchRetrieval"],s);const u=w(n,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const l=w(n,["googleMaps"]);l!=null&&x(e,["googleMaps"],l);const c=w(n,["urlContext"]);c!=null&&x(e,["urlContext"],c);const f=w(n,["computerUse"]);f!=null&&x(e,["computerUse"],f);const h=w(n,["codeExecution"]);return h!=null&&x(e,["codeExecution"],h),e}function cO(n,e){const t={},r=w(n,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=w(n,["expireTime"]);return e!==void 0&&i!=null&&x(e,["expireTime"],i),t}function fO(n,e){const t={},r=w(n,["ttl"]);e!==void 0&&r!=null&&x(e,["ttl"],r);const i=w(n,["expireTime"]);return e!==void 0&&i!=null&&x(e,["expireTime"],i),t}function dO(n,e){const t={},r=w(e,["name"]);r!=null&&x(t,["_url","name"],Al(n,r));const i=w(e,["config"]);return i!=null&&cO(i,t),t}function hO(n,e){const t={},r=w(e,["name"]);r!=null&&x(t,["_url","name"],Al(n,r));const i=w(e,["config"]);return i!=null&&fO(i,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pO extends _c{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zh(yc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=GM(this.apiClient,e);return l=At("cachedContents",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u.then(h=>h)}else{const f=HM(this.apiClient,e);return l=At("cachedContents",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u.then(h=>h)}}async get(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=ZM(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u.then(h=>h)}else{const f=XM(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u.then(h=>h)}}async delete(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=$M(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=KM(h),y=new wx;return Object.assign(y,g),y})}else{const f=VM(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=WM(h),y=new wx;return Object.assign(y,g),y})}}async update(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=hO(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u.then(h=>h)}else{const f=dO(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u.then(h=>h)}}async listInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=iO(e);return l=At("cachedContents",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=aO(h),y=new bx;return Object.assign(y,g),y})}else{const f=rO(e);return l=At("cachedContents",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=sO(h),y=new bx;return Object.assign(y,g),y})}}}function Cx(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lr(n){return this instanceof lr?(this.v=n,this):new lr(n)}function Hf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",u),i[Symbol.asyncIterator]=function(){return this},i;function u(m){return function(E){return Promise.resolve(E).then(m,g)}}function l(m,E){r[m]&&(i[m]=function(_){return new Promise(function(R,b){s.push([m,_,R,b])>1||c(m,_)})},E&&(i[m]=E(i[m])))}function c(m,E){try{f(r[m](E))}catch(_){y(s[0][3],_)}}function f(m){m.value instanceof lr?Promise.resolve(m.value.v).then(h,g):y(s[0][2],m)}function h(m){c("next",m)}function g(m){c("throw",m)}function y(m,E){m(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Nh(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Cx=="function"?Cx(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(u){return new Promise(function(l,c){u=n[s](u),i(l,c,u.done,u.value)})}}function i(s,u,l,c){Promise.resolve(c).then(function(f){s({value:f,done:l})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mO(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:o6(t)}function o6(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function gO(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Nx(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const i=[];let s=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),s&&!o6(n[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class yO{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new vO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vO{constructor(e,t,r,i={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),gO(s)}async sendMessage(e){var t;await this.sendPromise;const r=ji(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,u,l;const c=await i,f=(u=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||u===void 0?void 0:u.content,h=c.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let y=[];h!=null&&(y=(l=h.slice(g))!==null&&l!==void 0?l:[]);const m=f?[f]:[];this.recordHistory(r,m,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const r=ji(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const t=e?Nx(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var r,i;return Hf(this,arguments,function*(){var u,l,c,f;const h=[];try{for(var g=!0,y=Nh(e),m;m=yield lr(y.next()),u=m.done,!u;g=!0){f=m.value,g=!1;const E=f;if(mO(E)){const _=(i=(r=E.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;_!==void 0&&h.push(_)}yield yield lr(E)}}catch(E){l={error:E}}finally{try{!g&&!u&&(c=y.return)&&(yield lr(c.call(y)))}finally{if(l)throw l.error}}this.recordHistory(t,h)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(s=>s.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Nx(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ng extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ng.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wO(n){const e={},t=w(n,["file"]);return t!=null&&x(e,["file"],t),e}function bO(n){const e={},t=w(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function _O(n){const e={},t=w(n,["name"]);return t!=null&&x(e,["_url","file"],e6(t)),e}function SO(n){const e={},t=w(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function xO(n){const e={},t=w(n,["name"]);return t!=null&&x(e,["_url","file"],e6(t)),e}function AO(n,e){const t={},r=w(n,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const i=w(n,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),t}function EO(n){const e={},t=w(n,["config"]);return t!=null&&AO(t,e),e}function TO(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=w(n,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>u)),x(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CO extends _c{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zh(yc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=EO(e);return s=At("files",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=TO(c),h=new FP;return Object.assign(h,f),h})}}async createInternal(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=wO(e);return s=At("upload/v1beta/files",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=bO(c),h=new BP;return Object.assign(h,f),h})}}async get(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=xO(e);return s=At("files/{file}",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_O(e);return s=At("files/{file}",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=SO(c),h=new qP;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Om(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["data"]);t!=null&&x(e,["data"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function NO(n){const e={},t=w(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>HO(s))),x(e,["parts"],i)}const r=w(n,["role"]);return r!=null&&x(e,["role"],r),e}function RO(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function kO(n){const e={};if(w(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=w(n,["description"]);t!=null&&x(e,["description"],t);const r=w(n,["name"]);r!=null&&x(e,["name"],r);const i=w(n,["parameters"]);i!=null&&x(e,["parameters"],i);const s=w(n,["parametersJsonSchema"]);s!=null&&x(e,["parametersJsonSchema"],s);const u=w(n,["response"]);u!=null&&x(e,["response"],u);const l=w(n,["responseJsonSchema"]);return l!=null&&x(e,["responseJsonSchema"],l),e}function IO(n){const e={},t=w(n,["modelSelectionConfig"]);t!=null&&x(e,["modelConfig"],t);const r=w(n,["audioTimestamp"]);r!=null&&x(e,["audioTimestamp"],r);const i=w(n,["candidateCount"]);i!=null&&x(e,["candidateCount"],i);const s=w(n,["enableAffectiveDialog"]);s!=null&&x(e,["enableAffectiveDialog"],s);const u=w(n,["frequencyPenalty"]);u!=null&&x(e,["frequencyPenalty"],u);const l=w(n,["logprobs"]);l!=null&&x(e,["logprobs"],l);const c=w(n,["maxOutputTokens"]);c!=null&&x(e,["maxOutputTokens"],c);const f=w(n,["mediaResolution"]);f!=null&&x(e,["mediaResolution"],f);const h=w(n,["presencePenalty"]);h!=null&&x(e,["presencePenalty"],h);const g=w(n,["responseJsonSchema"]);g!=null&&x(e,["responseJsonSchema"],g);const y=w(n,["responseLogprobs"]);y!=null&&x(e,["responseLogprobs"],y);const m=w(n,["responseMimeType"]);m!=null&&x(e,["responseMimeType"],m);const E=w(n,["responseModalities"]);E!=null&&x(e,["responseModalities"],E);const _=w(n,["responseSchema"]);_!=null&&x(e,["responseSchema"],_);const R=w(n,["routingConfig"]);R!=null&&x(e,["routingConfig"],R);const b=w(n,["seed"]);b!=null&&x(e,["seed"],b);const N=w(n,["speechConfig"]);N!=null&&x(e,["speechConfig"],l6(N));const C=w(n,["stopSequences"]);C!=null&&x(e,["stopSequences"],C);const A=w(n,["temperature"]);A!=null&&x(e,["temperature"],A);const F=w(n,["thinkingConfig"]);F!=null&&x(e,["thinkingConfig"],F);const J=w(n,["topK"]);J!=null&&x(e,["topK"],J);const V=w(n,["topP"]);if(V!=null&&x(e,["topP"],V),w(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function LO(n){const e={};if(w(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=w(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function PO(n){const e={},t=w(n,["timeRangeFilter"]);if(t!=null&&x(e,["timeRangeFilter"],t),w(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function MO(n,e){const t={},r=w(n,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const i=w(n,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const s=w(n,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const u=w(n,["topP"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topP"],u);const l=w(n,["topK"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topK"],l);const c=w(n,["maxOutputTokens"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","maxOutputTokens"],c);const f=w(n,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const h=w(n,["seed"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","seed"],h);const g=w(n,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],Eb(g));const y=w(n,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const m=w(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],m);const E=w(n,["systemInstruction"]);e!==void 0&&E!=null&&x(e,["setup","systemInstruction"],NO(ji(E)));const _=w(n,["tools"]);if(e!==void 0&&_!=null){let J=pd(_);Array.isArray(J)&&(J=J.map(V=>VO(hd(V)))),x(e,["setup","tools"],J)}const R=w(n,["sessionResumption"]);e!==void 0&&R!=null&&x(e,["setup","sessionResumption"],GO(R));const b=w(n,["inputAudioTranscription"]);e!==void 0&&b!=null&&x(e,["setup","inputAudioTranscription"],b);const N=w(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&x(e,["setup","outputAudioTranscription"],N);const C=w(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&x(e,["setup","realtimeInputConfig"],C);const A=w(n,["contextWindowCompression"]);e!==void 0&&A!=null&&x(e,["setup","contextWindowCompression"],A);const F=w(n,["proactivity"]);return e!==void 0&&F!=null&&x(e,["setup","proactivity"],F),t}function OO(n,e){const t={},r=w(n,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],IO(r));const i=w(n,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const s=w(n,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const u=w(n,["topP"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topP"],u);const l=w(n,["topK"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topK"],l);const c=w(n,["maxOutputTokens"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","maxOutputTokens"],c);const f=w(n,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const h=w(n,["seed"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","seed"],h);const g=w(n,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],l6(Eb(g)));const y=w(n,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const m=w(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],m);const E=w(n,["systemInstruction"]);e!==void 0&&E!=null&&x(e,["setup","systemInstruction"],ji(E));const _=w(n,["tools"]);if(e!==void 0&&_!=null){let J=pd(_);Array.isArray(J)&&(J=J.map(V=>$O(hd(V)))),x(e,["setup","tools"],J)}const R=w(n,["sessionResumption"]);e!==void 0&&R!=null&&x(e,["setup","sessionResumption"],R);const b=w(n,["inputAudioTranscription"]);e!==void 0&&b!=null&&x(e,["setup","inputAudioTranscription"],b);const N=w(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&x(e,["setup","outputAudioTranscription"],N);const C=w(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&x(e,["setup","realtimeInputConfig"],C);const A=w(n,["contextWindowCompression"]);e!==void 0&&A!=null&&x(e,["setup","contextWindowCompression"],A);const F=w(n,["proactivity"]);return e!==void 0&&F!=null&&x(e,["setup","proactivity"],F),t}function DO(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["setup","model"],kn(n,r));const i=w(e,["config"]);return i!=null&&x(t,["config"],MO(i,t)),t}function UO(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["setup","model"],kn(n,r));const i=w(e,["config"]);return i!=null&&x(t,["config"],OO(i,t)),t}function FO(n){const e={},t=w(n,["musicGenerationConfig"]);return t!=null&&x(e,["musicGenerationConfig"],t),e}function BO(n){const e={},t=w(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["weightedPrompts"],r)}return e}function qO(n){const e={},t=w(n,["media"]);if(t!=null){let f=JC(t);Array.isArray(f)&&(f=f.map(h=>Om(h))),x(e,["mediaChunks"],f)}const r=w(n,["audio"]);r!=null&&x(e,["audio"],Om(XC(r)));const i=w(n,["audioStreamEnd"]);i!=null&&x(e,["audioStreamEnd"],i);const s=w(n,["video"]);s!=null&&x(e,["video"],Om(YC(s)));const u=w(n,["text"]);u!=null&&x(e,["text"],u);const l=w(n,["activityStart"]);l!=null&&x(e,["activityStart"],l);const c=w(n,["activityEnd"]);return c!=null&&x(e,["activityEnd"],c),e}function jO(n){const e={},t=w(n,["media"]);if(t!=null){let f=JC(t);Array.isArray(f)&&(f=f.map(h=>h)),x(e,["mediaChunks"],f)}const r=w(n,["audio"]);r!=null&&x(e,["audio"],XC(r));const i=w(n,["audioStreamEnd"]);i!=null&&x(e,["audioStreamEnd"],i);const s=w(n,["video"]);s!=null&&x(e,["video"],YC(s));const u=w(n,["text"]);u!=null&&x(e,["text"],u);const l=w(n,["activityStart"]);l!=null&&x(e,["activityStart"],l);const c=w(n,["activityEnd"]);return c!=null&&x(e,["activityEnd"],c),e}function zO(n){const e={},t=w(n,["setupComplete"]);t!=null&&x(e,["setupComplete"],t);const r=w(n,["serverContent"]);r!=null&&x(e,["serverContent"],r);const i=w(n,["toolCall"]);i!=null&&x(e,["toolCall"],i);const s=w(n,["toolCallCancellation"]);s!=null&&x(e,["toolCallCancellation"],s);const u=w(n,["usageMetadata"]);u!=null&&x(e,["usageMetadata"],WO(u));const l=w(n,["goAway"]);l!=null&&x(e,["goAway"],l);const c=w(n,["sessionResumptionUpdate"]);return c!=null&&x(e,["sessionResumptionUpdate"],c),e}function HO(n){const e={},t=w(n,["videoMetadata"]);t!=null&&x(e,["videoMetadata"],t);const r=w(n,["thought"]);r!=null&&x(e,["thought"],r);const i=w(n,["inlineData"]);i!=null&&x(e,["inlineData"],Om(i));const s=w(n,["fileData"]);s!=null&&x(e,["fileData"],RO(s));const u=w(n,["thoughtSignature"]);u!=null&&x(e,["thoughtSignature"],u);const l=w(n,["functionCall"]);l!=null&&x(e,["functionCall"],l);const c=w(n,["codeExecutionResult"]);c!=null&&x(e,["codeExecutionResult"],c);const f=w(n,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=w(n,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const g=w(n,["text"]);return g!=null&&x(e,["text"],g),e}function GO(n){const e={},t=w(n,["handle"]);if(t!=null&&x(e,["handle"],t),w(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function l6(n){const e={},t=w(n,["voiceConfig"]);if(t!=null&&x(e,["voiceConfig"],t),w(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=w(n,["languageCode"]);return r!=null&&x(e,["languageCode"],r),e}function VO(n){const e={},t=w(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),x(e,["functionDeclarations"],f)}if(w(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=w(n,["googleSearch"]);r!=null&&x(e,["googleSearch"],PO(r));const i=w(n,["googleSearchRetrieval"]);if(i!=null&&x(e,["googleSearchRetrieval"],i),w(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=w(n,["googleMaps"]);s!=null&&x(e,["googleMaps"],LO(s));const u=w(n,["urlContext"]);u!=null&&x(e,["urlContext"],u);const l=w(n,["computerUse"]);l!=null&&x(e,["computerUse"],l);const c=w(n,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}function $O(n){const e={},t=w(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(y=>kO(y))),x(e,["functionDeclarations"],g)}const r=w(n,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=w(n,["googleSearch"]);i!=null&&x(e,["googleSearch"],i);const s=w(n,["googleSearchRetrieval"]);s!=null&&x(e,["googleSearchRetrieval"],s);const u=w(n,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const l=w(n,["googleMaps"]);l!=null&&x(e,["googleMaps"],l);const c=w(n,["urlContext"]);c!=null&&x(e,["urlContext"],c);const f=w(n,["computerUse"]);f!=null&&x(e,["computerUse"],f);const h=w(n,["codeExecution"]);return h!=null&&x(e,["codeExecution"],h),e}function WO(n){const e={},t=w(n,["promptTokenCount"]);t!=null&&x(e,["promptTokenCount"],t);const r=w(n,["cachedContentTokenCount"]);r!=null&&x(e,["cachedContentTokenCount"],r);const i=w(n,["candidatesTokenCount"]);i!=null&&x(e,["responseTokenCount"],i);const s=w(n,["toolUsePromptTokenCount"]);s!=null&&x(e,["toolUsePromptTokenCount"],s);const u=w(n,["thoughtsTokenCount"]);u!=null&&x(e,["thoughtsTokenCount"],u);const l=w(n,["totalTokenCount"]);l!=null&&x(e,["totalTokenCount"],l);const c=w(n,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(E=>E)),x(e,["promptTokensDetails"],m)}const f=w(n,["cacheTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(E=>E)),x(e,["cacheTokensDetails"],m)}const h=w(n,["candidatesTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(E=>E)),x(e,["responseTokensDetails"],m)}const g=w(n,["toolUsePromptTokensDetails"]);if(g!=null){let m=g;Array.isArray(m)&&(m=m.map(E=>E)),x(e,["toolUsePromptTokensDetails"],m)}const y=w(n,["trafficType"]);return y!=null&&x(e,["trafficType"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KO(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["data"]);t!=null&&x(e,["data"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function JO(n){const e={},t=w(n,["content"]);t!=null&&x(e,["content"],t);const r=w(n,["citationMetadata"]);r!=null&&x(e,["citationMetadata"],YO(r));const i=w(n,["tokenCount"]);i!=null&&x(e,["tokenCount"],i);const s=w(n,["finishReason"]);s!=null&&x(e,["finishReason"],s);const u=w(n,["urlContextMetadata"]);u!=null&&x(e,["urlContextMetadata"],u);const l=w(n,["avgLogprobs"]);l!=null&&x(e,["avgLogprobs"],l);const c=w(n,["groundingMetadata"]);c!=null&&x(e,["groundingMetadata"],c);const f=w(n,["index"]);f!=null&&x(e,["index"],f);const h=w(n,["logprobsResult"]);h!=null&&x(e,["logprobsResult"],h);const g=w(n,["safetyRatings"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(m=>m)),x(e,["safetyRatings"],y)}return e}function YO(n){const e={},t=w(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),x(e,["citations"],r)}return e}function XO(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["contents"]);if(i!=null){let s=ga(i);Array.isArray(s)&&(s=s.map(u=>u)),x(t,["contents"],s)}return t}function ZO(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),x(e,["tokensInfo"],i)}return e}function QO(n){const e={},t=w(n,["values"]);t!=null&&x(e,["values"],t);const r=w(n,["statistics"]);return r!=null&&x(e,["statistics"],e7(r)),e}function e7(n){const e={},t=w(n,["truncated"]);t!=null&&x(e,["truncated"],t);const r=w(n,["token_count"]);return r!=null&&x(e,["tokenCount"],r),e}function Rg(n){const e={},t=w(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>sD(s))),x(e,["parts"],i)}const r=w(n,["role"]);return r!=null&&x(e,["role"],r),e}function t7(n){const e={},t=w(n,["controlType"]);t!=null&&x(e,["controlType"],t);const r=w(n,["enableControlImageComputation"]);return r!=null&&x(e,["computeControl"],r),e}function n7(n){const e={};if(w(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(w(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(w(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function r7(n,e){const t={},r=w(n,["systemInstruction"]);e!==void 0&&r!=null&&x(e,["systemInstruction"],ji(r));const i=w(n,["tools"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(l=>h6(l))),x(e,["tools"],u)}const s=w(n,["generationConfig"]);return e!==void 0&&s!=null&&x(e,["generationConfig"],$7(s)),t}function i7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["contents"]);if(i!=null){let u=ga(i);Array.isArray(u)&&(u=u.map(l=>Rg(l))),x(t,["contents"],u)}const s=w(e,["config"]);return s!=null&&n7(s),t}function s7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["contents"]);if(i!=null){let u=ga(i);Array.isArray(u)&&(u=u.map(l=>l)),x(t,["contents"],u)}const s=w(e,["config"]);return s!=null&&r7(s,t),t}function a7(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["totalTokens"]);r!=null&&x(e,["totalTokens"],r);const i=w(n,["cachedContentTokenCount"]);return i!=null&&x(e,["cachedContentTokenCount"],i),e}function o7(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["totalTokens"]);return r!=null&&x(e,["totalTokens"],r),e}function l7(n,e){const t={},r=w(e,["model"]);return r!=null&&x(t,["_url","name"],kn(n,r)),t}function u7(n,e){const t={},r=w(e,["model"]);return r!=null&&x(t,["_url","name"],kn(n,r)),t}function c7(n){const e={},t=w(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function f7(n){const e={},t=w(n,["sdkHttpResponse"]);return t!=null&&x(e,["sdkHttpResponse"],t),e}function d7(n,e){const t={},r=w(n,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=w(n,["negativePrompt"]);e!==void 0&&i!=null&&x(e,["parameters","negativePrompt"],i);const s=w(n,["numberOfImages"]);e!==void 0&&s!=null&&x(e,["parameters","sampleCount"],s);const u=w(n,["aspectRatio"]);e!==void 0&&u!=null&&x(e,["parameters","aspectRatio"],u);const l=w(n,["guidanceScale"]);e!==void 0&&l!=null&&x(e,["parameters","guidanceScale"],l);const c=w(n,["seed"]);e!==void 0&&c!=null&&x(e,["parameters","seed"],c);const f=w(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&x(e,["parameters","safetySetting"],f);const h=w(n,["personGeneration"]);e!==void 0&&h!=null&&x(e,["parameters","personGeneration"],h);const g=w(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&x(e,["parameters","includeSafetyAttributes"],g);const y=w(n,["includeRaiReason"]);e!==void 0&&y!=null&&x(e,["parameters","includeRaiReason"],y);const m=w(n,["language"]);e!==void 0&&m!=null&&x(e,["parameters","language"],m);const E=w(n,["outputMimeType"]);e!==void 0&&E!=null&&x(e,["parameters","outputOptions","mimeType"],E);const _=w(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&x(e,["parameters","outputOptions","compressionQuality"],_);const R=w(n,["addWatermark"]);e!==void 0&&R!=null&&x(e,["parameters","addWatermark"],R);const b=w(n,["labels"]);e!==void 0&&b!=null&&x(e,["labels"],b);const N=w(n,["editMode"]);e!==void 0&&N!=null&&x(e,["parameters","editMode"],N);const C=w(n,["baseSteps"]);return e!==void 0&&C!=null&&x(e,["parameters","editConfig","baseSteps"],C),t}function h7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=w(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>fD(c))),x(t,["instances[0]","referenceImages"],l)}const u=w(e,["config"]);return u!=null&&d7(u,t),t}function p7(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>kg(s))),x(e,["generatedImages"],i)}return e}function m7(n,e){const t={},r=w(n,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const i=w(n,["title"]);e!==void 0&&i!=null&&x(e,["requests[]","title"],i);const s=w(n,["outputDimensionality"]);if(e!==void 0&&s!=null&&x(e,["requests[]","outputDimensionality"],s),w(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(w(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function g7(n,e){const t={},r=w(n,["taskType"]);e!==void 0&&r!=null&&x(e,["instances[]","task_type"],r);const i=w(n,["title"]);e!==void 0&&i!=null&&x(e,["instances[]","title"],i);const s=w(n,["outputDimensionality"]);e!==void 0&&s!=null&&x(e,["parameters","outputDimensionality"],s);const u=w(n,["mimeType"]);e!==void 0&&u!=null&&x(e,["instances[]","mimeType"],u);const l=w(n,["autoTruncate"]);return e!==void 0&&l!=null&&x(e,["parameters","autoTruncate"],l),t}function y7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["contents"]);if(i!=null){let l=Sb(n,i);Array.isArray(l)&&(l=l.map(c=>c)),x(t,["requests[]","content"],l)}const s=w(e,["config"]);s!=null&&m7(s,t);const u=w(e,["model"]);return u!==void 0&&x(t,["requests[]","model"],kn(n,u)),t}function v7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["contents"]);if(i!=null){let u=Sb(n,i);Array.isArray(u)&&(u=u.map(l=>l)),x(t,["instances[]","content"],u)}const s=w(e,["config"]);return s!=null&&g7(s,t),t}function w7(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>u)),x(e,["embeddings"],s)}const i=w(n,["metadata"]);return i!=null&&x(e,["metadata"],i),e}function b7(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>QO(u))),x(e,["embeddings"],s)}const i=w(n,["metadata"]);return i!=null&&x(e,["metadata"],i),e}function _7(n){const e={},t=w(n,["endpoint"]);t!=null&&x(e,["name"],t);const r=w(n,["deployedModelId"]);return r!=null&&x(e,["deployedModelId"],r),e}function S7(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function x7(n){const e={};if(w(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=w(n,["description"]);t!=null&&x(e,["description"],t);const r=w(n,["name"]);r!=null&&x(e,["name"],r);const i=w(n,["parameters"]);i!=null&&x(e,["parameters"],i);const s=w(n,["parametersJsonSchema"]);s!=null&&x(e,["parametersJsonSchema"],s);const u=w(n,["response"]);u!=null&&x(e,["response"],u);const l=w(n,["responseJsonSchema"]);return l!=null&&x(e,["responseJsonSchema"],l),e}function A7(n,e,t){const r={},i=w(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],Rg(ji(i)));const s=w(e,["temperature"]);s!=null&&x(r,["temperature"],s);const u=w(e,["topP"]);u!=null&&x(r,["topP"],u);const l=w(e,["topK"]);l!=null&&x(r,["topK"],l);const c=w(e,["candidateCount"]);c!=null&&x(r,["candidateCount"],c);const f=w(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const h=w(e,["stopSequences"]);h!=null&&x(r,["stopSequences"],h);const g=w(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const y=w(e,["logprobs"]);y!=null&&x(r,["logprobs"],y);const m=w(e,["presencePenalty"]);m!=null&&x(r,["presencePenalty"],m);const E=w(e,["frequencyPenalty"]);E!=null&&x(r,["frequencyPenalty"],E);const _=w(e,["seed"]);_!=null&&x(r,["seed"],_);const R=w(e,["responseMimeType"]);R!=null&&x(r,["responseMimeType"],R);const b=w(e,["responseSchema"]);b!=null&&x(r,["responseSchema"],xb(b));const N=w(e,["responseJsonSchema"]);if(N!=null&&x(r,["responseJsonSchema"],N),w(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(w(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=w(e,["safetySettings"]);if(t!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(X=>dD(X))),x(t,["safetySettings"],U)}const A=w(e,["tools"]);if(t!==void 0&&A!=null){let U=pd(A);Array.isArray(U)&&(U=U.map(X=>vD(hd(X)))),x(t,["tools"],U)}const F=w(e,["toolConfig"]);if(t!==void 0&&F!=null&&x(t,["toolConfig"],F),w(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=w(e,["cachedContent"]);t!==void 0&&J!=null&&x(t,["cachedContent"],Al(n,J));const V=w(e,["responseModalities"]);V!=null&&x(r,["responseModalities"],V);const te=w(e,["mediaResolution"]);te!=null&&x(r,["mediaResolution"],te);const O=w(e,["speechConfig"]);if(O!=null&&x(r,["speechConfig"],Ab(O)),w(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=w(e,["thinkingConfig"]);le!=null&&x(r,["thinkingConfig"],le);const Q=w(e,["imageConfig"]);return Q!=null&&x(r,["imageConfig"],Q),r}function E7(n,e,t){const r={},i=w(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],ji(i));const s=w(e,["temperature"]);s!=null&&x(r,["temperature"],s);const u=w(e,["topP"]);u!=null&&x(r,["topP"],u);const l=w(e,["topK"]);l!=null&&x(r,["topK"],l);const c=w(e,["candidateCount"]);c!=null&&x(r,["candidateCount"],c);const f=w(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const h=w(e,["stopSequences"]);h!=null&&x(r,["stopSequences"],h);const g=w(e,["responseLogprobs"]);g!=null&&x(r,["responseLogprobs"],g);const y=w(e,["logprobs"]);y!=null&&x(r,["logprobs"],y);const m=w(e,["presencePenalty"]);m!=null&&x(r,["presencePenalty"],m);const E=w(e,["frequencyPenalty"]);E!=null&&x(r,["frequencyPenalty"],E);const _=w(e,["seed"]);_!=null&&x(r,["seed"],_);const R=w(e,["responseMimeType"]);R!=null&&x(r,["responseMimeType"],R);const b=w(e,["responseSchema"]);b!=null&&x(r,["responseSchema"],xb(b));const N=w(e,["responseJsonSchema"]);N!=null&&x(r,["responseJsonSchema"],N);const C=w(e,["routingConfig"]);C!=null&&x(r,["routingConfig"],C);const A=w(e,["modelSelectionConfig"]);A!=null&&x(r,["modelConfig"],A);const F=w(e,["safetySettings"]);if(t!==void 0&&F!=null){let se=F;Array.isArray(se)&&(se=se.map(ie=>ie)),x(t,["safetySettings"],se)}const J=w(e,["tools"]);if(t!==void 0&&J!=null){let se=pd(J);Array.isArray(se)&&(se=se.map(ie=>h6(hd(ie)))),x(t,["tools"],se)}const V=w(e,["toolConfig"]);t!==void 0&&V!=null&&x(t,["toolConfig"],V);const te=w(e,["labels"]);t!==void 0&&te!=null&&x(t,["labels"],te);const O=w(e,["cachedContent"]);t!==void 0&&O!=null&&x(t,["cachedContent"],Al(n,O));const le=w(e,["responseModalities"]);le!=null&&x(r,["responseModalities"],le);const Q=w(e,["mediaResolution"]);Q!=null&&x(r,["mediaResolution"],Q);const U=w(e,["speechConfig"]);U!=null&&x(r,["speechConfig"],d6(Ab(U)));const X=w(e,["audioTimestamp"]);X!=null&&x(r,["audioTimestamp"],X);const M=w(e,["thinkingConfig"]);M!=null&&x(r,["thinkingConfig"],M);const ye=w(e,["imageConfig"]);return ye!=null&&x(r,["imageConfig"],ye),r}function Rx(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["contents"]);if(i!=null){let u=ga(i);Array.isArray(u)&&(u=u.map(l=>Rg(l))),x(t,["contents"],u)}const s=w(e,["config"]);return s!=null&&x(t,["generationConfig"],A7(n,s,t)),t}function kx(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["contents"]);if(i!=null){let u=ga(i);Array.isArray(u)&&(u=u.map(l=>l)),x(t,["contents"],u)}const s=w(e,["config"]);return s!=null&&x(t,["generationConfig"],E7(n,s,t)),t}function Ix(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>JO(f))),x(e,["candidates"],c)}const i=w(n,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const s=w(n,["promptFeedback"]);s!=null&&x(e,["promptFeedback"],s);const u=w(n,["responseId"]);u!=null&&x(e,["responseId"],u);const l=w(n,["usageMetadata"]);return l!=null&&x(e,["usageMetadata"],l),e}function Lx(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>h)),x(e,["candidates"],f)}const i=w(n,["createTime"]);i!=null&&x(e,["createTime"],i);const s=w(n,["modelVersion"]);s!=null&&x(e,["modelVersion"],s);const u=w(n,["promptFeedback"]);u!=null&&x(e,["promptFeedback"],u);const l=w(n,["responseId"]);l!=null&&x(e,["responseId"],l);const c=w(n,["usageMetadata"]);return c!=null&&x(e,["usageMetadata"],c),e}function T7(n,e){const t={};if(w(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(w(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=w(n,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=w(n,["aspectRatio"]);e!==void 0&&i!=null&&x(e,["parameters","aspectRatio"],i);const s=w(n,["guidanceScale"]);if(e!==void 0&&s!=null&&x(e,["parameters","guidanceScale"],s),w(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=w(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&x(e,["parameters","safetySetting"],u);const l=w(n,["personGeneration"]);e!==void 0&&l!=null&&x(e,["parameters","personGeneration"],l);const c=w(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&x(e,["parameters","includeSafetyAttributes"],c);const f=w(n,["includeRaiReason"]);e!==void 0&&f!=null&&x(e,["parameters","includeRaiReason"],f);const h=w(n,["language"]);e!==void 0&&h!=null&&x(e,["parameters","language"],h);const g=w(n,["outputMimeType"]);e!==void 0&&g!=null&&x(e,["parameters","outputOptions","mimeType"],g);const y=w(n,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&x(e,["parameters","outputOptions","compressionQuality"],y),w(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(w(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=w(n,["imageSize"]);if(e!==void 0&&m!=null&&x(e,["parameters","sampleImageSize"],m),w(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function C7(n,e){const t={},r=w(n,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=w(n,["negativePrompt"]);e!==void 0&&i!=null&&x(e,["parameters","negativePrompt"],i);const s=w(n,["numberOfImages"]);e!==void 0&&s!=null&&x(e,["parameters","sampleCount"],s);const u=w(n,["aspectRatio"]);e!==void 0&&u!=null&&x(e,["parameters","aspectRatio"],u);const l=w(n,["guidanceScale"]);e!==void 0&&l!=null&&x(e,["parameters","guidanceScale"],l);const c=w(n,["seed"]);e!==void 0&&c!=null&&x(e,["parameters","seed"],c);const f=w(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&x(e,["parameters","safetySetting"],f);const h=w(n,["personGeneration"]);e!==void 0&&h!=null&&x(e,["parameters","personGeneration"],h);const g=w(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&x(e,["parameters","includeSafetyAttributes"],g);const y=w(n,["includeRaiReason"]);e!==void 0&&y!=null&&x(e,["parameters","includeRaiReason"],y);const m=w(n,["language"]);e!==void 0&&m!=null&&x(e,["parameters","language"],m);const E=w(n,["outputMimeType"]);e!==void 0&&E!=null&&x(e,["parameters","outputOptions","mimeType"],E);const _=w(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&x(e,["parameters","outputOptions","compressionQuality"],_);const R=w(n,["addWatermark"]);e!==void 0&&R!=null&&x(e,["parameters","addWatermark"],R);const b=w(n,["labels"]);e!==void 0&&b!=null&&x(e,["labels"],b);const N=w(n,["imageSize"]);e!==void 0&&N!=null&&x(e,["parameters","sampleImageSize"],N);const C=w(n,["enhancePrompt"]);return e!==void 0&&C!=null&&x(e,["parameters","enhancePrompt"],C),t}function N7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=w(e,["config"]);return s!=null&&T7(s,t),t}function R7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=w(e,["config"]);return s!=null&&C7(s,t),t}function k7(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>z7(u))),x(e,["generatedImages"],s)}const i=w(n,["positivePromptSafetyAttributes"]);return i!=null&&x(e,["positivePromptSafetyAttributes"],c6(i)),e}function I7(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>kg(u))),x(e,["generatedImages"],s)}const i=w(n,["positivePromptSafetyAttributes"]);return i!=null&&x(e,["positivePromptSafetyAttributes"],f6(i)),e}function L7(n,e){const t={},r=w(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r),w(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(w(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=w(n,["durationSeconds"]);if(e!==void 0&&i!=null&&x(e,["parameters","durationSeconds"],i),w(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=w(n,["aspectRatio"]);e!==void 0&&s!=null&&x(e,["parameters","aspectRatio"],s);const u=w(n,["resolution"]);e!==void 0&&u!=null&&x(e,["parameters","resolution"],u);const l=w(n,["personGeneration"]);if(e!==void 0&&l!=null&&x(e,["parameters","personGeneration"],l),w(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=w(n,["negativePrompt"]);e!==void 0&&c!=null&&x(e,["parameters","negativePrompt"],c);const f=w(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&x(e,["parameters","enhancePrompt"],f),w(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=w(n,["lastFrame"]);e!==void 0&&h!=null&&x(e,["instances[0]","lastFrame"],Ig(h));const g=w(n,["referenceImages"]);if(e!==void 0&&g!=null){let y=g;Array.isArray(y)&&(y=y.map(m=>ID(m))),x(e,["instances[0]","referenceImages"],y)}if(w(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(w(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function P7(n,e){const t={},r=w(n,["numberOfVideos"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=w(n,["outputGcsUri"]);e!==void 0&&i!=null&&x(e,["parameters","storageUri"],i);const s=w(n,["fps"]);e!==void 0&&s!=null&&x(e,["parameters","fps"],s);const u=w(n,["durationSeconds"]);e!==void 0&&u!=null&&x(e,["parameters","durationSeconds"],u);const l=w(n,["seed"]);e!==void 0&&l!=null&&x(e,["parameters","seed"],l);const c=w(n,["aspectRatio"]);e!==void 0&&c!=null&&x(e,["parameters","aspectRatio"],c);const f=w(n,["resolution"]);e!==void 0&&f!=null&&x(e,["parameters","resolution"],f);const h=w(n,["personGeneration"]);e!==void 0&&h!=null&&x(e,["parameters","personGeneration"],h);const g=w(n,["pubsubTopic"]);e!==void 0&&g!=null&&x(e,["parameters","pubsubTopic"],g);const y=w(n,["negativePrompt"]);e!==void 0&&y!=null&&x(e,["parameters","negativePrompt"],y);const m=w(n,["enhancePrompt"]);e!==void 0&&m!=null&&x(e,["parameters","enhancePrompt"],m);const E=w(n,["generateAudio"]);e!==void 0&&E!=null&&x(e,["parameters","generateAudio"],E);const _=w(n,["lastFrame"]);e!==void 0&&_!=null&&x(e,["instances[0]","lastFrame"],eo(_));const R=w(n,["referenceImages"]);if(e!==void 0&&R!=null){let C=R;Array.isArray(C)&&(C=C.map(A=>LD(A))),x(e,["instances[0]","referenceImages"],C)}const b=w(n,["mask"]);e!==void 0&&b!=null&&x(e,["instances[0]","mask"],kD(b));const N=w(n,["compressionQuality"]);return e!==void 0&&N!=null&&x(e,["parameters","compressionQuality"],N),t}function M7(n){const e={},t=w(n,["name"]);t!=null&&x(e,["name"],t);const r=w(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=w(n,["done"]);i!=null&&x(e,["done"],i);const s=w(n,["error"]);s!=null&&x(e,["error"],s);const u=w(n,["response","generateVideoResponse"]);return u!=null&&x(e,["response"],F7(u)),e}function O7(n){const e={},t=w(n,["name"]);t!=null&&x(e,["name"],t);const r=w(n,["metadata"]);r!=null&&x(e,["metadata"],r);const i=w(n,["done"]);i!=null&&x(e,["done"],i);const s=w(n,["error"]);s!=null&&x(e,["error"],s);const u=w(n,["response"]);return u!=null&&x(e,["response"],B7(u)),e}function D7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=w(e,["image"]);s!=null&&x(t,["instances[0]","image"],Ig(s));const u=w(e,["video"]);u!=null&&x(t,["instances[0]","video"],p6(u));const l=w(e,["source"]);l!=null&&q7(l,t);const c=w(e,["config"]);return c!=null&&L7(c,t),t}function U7(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const s=w(e,["image"]);s!=null&&x(t,["instances[0]","image"],eo(s));const u=w(e,["video"]);u!=null&&x(t,["instances[0]","video"],m6(u));const l=w(e,["source"]);l!=null&&j7(l,t);const c=w(e,["config"]);return c!=null&&P7(c,t),t}function F7(n){const e={},t=w(n,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(u=>G7(u))),x(e,["generatedVideos"],s)}const r=w(n,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=w(n,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function B7(n){const e={},t=w(n,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(u=>V7(u))),x(e,["generatedVideos"],s)}const r=w(n,["raiMediaFilteredCount"]);r!=null&&x(e,["raiMediaFilteredCount"],r);const i=w(n,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function q7(n,e){const t={},r=w(n,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=w(n,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],Ig(i));const s=w(n,["video"]);return e!==void 0&&s!=null&&x(e,["instances[0]","video"],p6(s)),t}function j7(n,e){const t={},r=w(n,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=w(n,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],eo(i));const s=w(n,["video"]);return e!==void 0&&s!=null&&x(e,["instances[0]","video"],m6(s)),t}function z7(n){const e={},t=w(n,["_self"]);t!=null&&x(e,["image"],X7(t));const r=w(n,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const i=w(n,["_self"]);return i!=null&&x(e,["safetyAttributes"],c6(i)),e}function kg(n){const e={},t=w(n,["_self"]);t!=null&&x(e,["image"],u6(t));const r=w(n,["raiFilteredReason"]);r!=null&&x(e,["raiFilteredReason"],r);const i=w(n,["_self"]);i!=null&&x(e,["safetyAttributes"],f6(i));const s=w(n,["prompt"]);return s!=null&&x(e,["enhancedPrompt"],s),e}function H7(n){const e={},t=w(n,["_self"]);t!=null&&x(e,["mask"],u6(t));const r=w(n,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),x(e,["labels"],i)}return e}function G7(n){const e={},t=w(n,["video"]);return t!=null&&x(e,["video"],ND(t)),e}function V7(n){const e={},t=w(n,["_self"]);return t!=null&&x(e,["video"],RD(t)),e}function $7(n){const e={},t=w(n,["modelSelectionConfig"]);t!=null&&x(e,["modelConfig"],t);const r=w(n,["audioTimestamp"]);r!=null&&x(e,["audioTimestamp"],r);const i=w(n,["candidateCount"]);i!=null&&x(e,["candidateCount"],i);const s=w(n,["enableAffectiveDialog"]);s!=null&&x(e,["enableAffectiveDialog"],s);const u=w(n,["frequencyPenalty"]);u!=null&&x(e,["frequencyPenalty"],u);const l=w(n,["logprobs"]);l!=null&&x(e,["logprobs"],l);const c=w(n,["maxOutputTokens"]);c!=null&&x(e,["maxOutputTokens"],c);const f=w(n,["mediaResolution"]);f!=null&&x(e,["mediaResolution"],f);const h=w(n,["presencePenalty"]);h!=null&&x(e,["presencePenalty"],h);const g=w(n,["responseJsonSchema"]);g!=null&&x(e,["responseJsonSchema"],g);const y=w(n,["responseLogprobs"]);y!=null&&x(e,["responseLogprobs"],y);const m=w(n,["responseMimeType"]);m!=null&&x(e,["responseMimeType"],m);const E=w(n,["responseModalities"]);E!=null&&x(e,["responseModalities"],E);const _=w(n,["responseSchema"]);_!=null&&x(e,["responseSchema"],_);const R=w(n,["routingConfig"]);R!=null&&x(e,["routingConfig"],R);const b=w(n,["seed"]);b!=null&&x(e,["seed"],b);const N=w(n,["speechConfig"]);N!=null&&x(e,["speechConfig"],d6(N));const C=w(n,["stopSequences"]);C!=null&&x(e,["stopSequences"],C);const A=w(n,["temperature"]);A!=null&&x(e,["temperature"],A);const F=w(n,["thinkingConfig"]);F!=null&&x(e,["thinkingConfig"],F);const J=w(n,["topK"]);J!=null&&x(e,["topK"],J);const V=w(n,["topP"]);if(V!=null&&x(e,["topP"],V),w(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function W7(n,e){const t={},r=w(e,["model"]);return r!=null&&x(t,["_url","name"],kn(n,r)),t}function K7(n,e){const t={},r=w(e,["model"]);return r!=null&&x(t,["_url","name"],kn(n,r)),t}function J7(n){const e={};if(w(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=w(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function Y7(n){const e={},t=w(n,["timeRangeFilter"]);if(t!=null&&x(e,["timeRangeFilter"],t),w(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function X7(n){const e={},t=w(n,["bytesBase64Encoded"]);t!=null&&x(e,["imageBytes"],gu(t));const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function u6(n){const e={},t=w(n,["gcsUri"]);t!=null&&x(e,["gcsUri"],t);const r=w(n,["bytesBase64Encoded"]);r!=null&&x(e,["imageBytes"],gu(r));const i=w(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function Ig(n){const e={};if(w(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=w(n,["imageBytes"]);t!=null&&x(e,["bytesBase64Encoded"],gu(t));const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function eo(n){const e={},t=w(n,["gcsUri"]);t!=null&&x(e,["gcsUri"],t);const r=w(n,["imageBytes"]);r!=null&&x(e,["bytesBase64Encoded"],gu(r));const i=w(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function Z7(n,e,t){const r={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const s=w(e,["pageToken"]);t!==void 0&&s!=null&&x(t,["_query","pageToken"],s);const u=w(e,["filter"]);t!==void 0&&u!=null&&x(t,["_query","filter"],u);const l=w(e,["queryBase"]);return t!==void 0&&l!=null&&x(t,["_url","models_url"],t6(n,l)),r}function Q7(n,e,t){const r={},i=w(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const s=w(e,["pageToken"]);t!==void 0&&s!=null&&x(t,["_query","pageToken"],s);const u=w(e,["filter"]);t!==void 0&&u!=null&&x(t,["_query","filter"],u);const l=w(e,["queryBase"]);return t!==void 0&&l!=null&&x(t,["_url","models_url"],t6(n,l)),r}function eD(n,e){const t={},r=w(e,["config"]);return r!=null&&Z7(n,r,t),t}function tD(n,e){const t={},r=w(e,["config"]);return r!=null&&Q7(n,r,t),t}function nD(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=w(n,["_self"]);if(i!=null){let s=n6(i);Array.isArray(s)&&(s=s.map(u=>gw(u))),x(e,["models"],s)}return e}function rD(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["nextPageToken"]);r!=null&&x(e,["nextPageToken"],r);const i=w(n,["_self"]);if(i!=null){let s=n6(i);Array.isArray(s)&&(s=s.map(u=>yw(u))),x(e,["models"],s)}return e}function iD(n){const e={},t=w(n,["maskMode"]);t!=null&&x(e,["maskMode"],t);const r=w(n,["segmentationClasses"]);r!=null&&x(e,["maskClasses"],r);const i=w(n,["maskDilation"]);return i!=null&&x(e,["dilation"],i),e}function gw(n){const e={},t=w(n,["name"]);t!=null&&x(e,["name"],t);const r=w(n,["displayName"]);r!=null&&x(e,["displayName"],r);const i=w(n,["description"]);i!=null&&x(e,["description"],i);const s=w(n,["version"]);s!=null&&x(e,["version"],s);const u=w(n,["_self"]);u!=null&&x(e,["tunedModelInfo"],wD(u));const l=w(n,["inputTokenLimit"]);l!=null&&x(e,["inputTokenLimit"],l);const c=w(n,["outputTokenLimit"]);c!=null&&x(e,["outputTokenLimit"],c);const f=w(n,["supportedGenerationMethods"]);return f!=null&&x(e,["supportedActions"],f),e}function yw(n){const e={},t=w(n,["name"]);t!=null&&x(e,["name"],t);const r=w(n,["displayName"]);r!=null&&x(e,["displayName"],r);const i=w(n,["description"]);i!=null&&x(e,["description"],i);const s=w(n,["versionId"]);s!=null&&x(e,["version"],s);const u=w(n,["deployedModels"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>_7(y))),x(e,["endpoints"],g)}const l=w(n,["labels"]);l!=null&&x(e,["labels"],l);const c=w(n,["_self"]);c!=null&&x(e,["tunedModelInfo"],bD(c));const f=w(n,["defaultCheckpointId"]);f!=null&&x(e,["defaultCheckpointId"],f);const h=w(n,["checkpoints"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>y)),x(e,["checkpoints"],g)}return e}function sD(n){const e={},t=w(n,["videoMetadata"]);t!=null&&x(e,["videoMetadata"],t);const r=w(n,["thought"]);r!=null&&x(e,["thought"],r);const i=w(n,["inlineData"]);i!=null&&x(e,["inlineData"],KO(i));const s=w(n,["fileData"]);s!=null&&x(e,["fileData"],S7(s));const u=w(n,["thoughtSignature"]);u!=null&&x(e,["thoughtSignature"],u);const l=w(n,["functionCall"]);l!=null&&x(e,["functionCall"],l);const c=w(n,["codeExecutionResult"]);c!=null&&x(e,["codeExecutionResult"],c);const f=w(n,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=w(n,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const g=w(n,["text"]);return g!=null&&x(e,["text"],g),e}function aD(n){const e={},t=w(n,["productImage"]);return t!=null&&x(e,["image"],eo(t)),e}function oD(n,e){const t={},r=w(n,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const i=w(n,["baseSteps"]);e!==void 0&&i!=null&&x(e,["parameters","editConfig","baseSteps"],i);const s=w(n,["outputGcsUri"]);e!==void 0&&s!=null&&x(e,["parameters","storageUri"],s);const u=w(n,["seed"]);e!==void 0&&u!=null&&x(e,["parameters","seed"],u);const l=w(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&x(e,["parameters","safetySetting"],l);const c=w(n,["personGeneration"]);e!==void 0&&c!=null&&x(e,["parameters","personGeneration"],c);const f=w(n,["addWatermark"]);e!==void 0&&f!=null&&x(e,["parameters","addWatermark"],f);const h=w(n,["outputMimeType"]);e!==void 0&&h!=null&&x(e,["parameters","outputOptions","mimeType"],h);const g=w(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&x(e,["parameters","outputOptions","compressionQuality"],g);const y=w(n,["enhancePrompt"]);e!==void 0&&y!=null&&x(e,["parameters","enhancePrompt"],y);const m=w(n,["labels"]);return e!==void 0&&m!=null&&x(e,["labels"],m),t}function lD(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["source"]);i!=null&&cD(i,t);const s=w(e,["config"]);return s!=null&&oD(s,t),t}function uD(n){const e={},t=w(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>kg(i))),x(e,["generatedImages"],r)}return e}function cD(n,e){const t={},r=w(n,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=w(n,["personImage"]);e!==void 0&&i!=null&&x(e,["instances[0]","personImage","image"],eo(i));const s=w(n,["productImages"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(l=>aD(l))),x(e,["instances[0]","productImages"],u)}return t}function fD(n){const e={},t=w(n,["referenceImage"]);t!=null&&x(e,["referenceImage"],eo(t));const r=w(n,["referenceId"]);r!=null&&x(e,["referenceId"],r);const i=w(n,["referenceType"]);i!=null&&x(e,["referenceType"],i);const s=w(n,["maskImageConfig"]);s!=null&&x(e,["maskImageConfig"],iD(s));const u=w(n,["controlImageConfig"]);u!=null&&x(e,["controlImageConfig"],t7(u));const l=w(n,["styleImageConfig"]);l!=null&&x(e,["styleImageConfig"],l);const c=w(n,["subjectImageConfig"]);return c!=null&&x(e,["subjectImageConfig"],c),e}function c6(n){const e={},t=w(n,["safetyAttributes","categories"]);t!=null&&x(e,["categories"],t);const r=w(n,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const i=w(n,["contentType"]);return i!=null&&x(e,["contentType"],i),e}function f6(n){const e={},t=w(n,["safetyAttributes","categories"]);t!=null&&x(e,["categories"],t);const r=w(n,["safetyAttributes","scores"]);r!=null&&x(e,["scores"],r);const i=w(n,["contentType"]);return i!=null&&x(e,["contentType"],i),e}function dD(n){const e={};if(w(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=w(n,["category"]);t!=null&&x(e,["category"],t);const r=w(n,["threshold"]);return r!=null&&x(e,["threshold"],r),e}function hD(n){const e={},t=w(n,["image"]);return t!=null&&x(e,["image"],eo(t)),e}function pD(n,e){const t={},r=w(n,["mode"]);e!==void 0&&r!=null&&x(e,["parameters","mode"],r);const i=w(n,["maxPredictions"]);e!==void 0&&i!=null&&x(e,["parameters","maxPredictions"],i);const s=w(n,["confidenceThreshold"]);e!==void 0&&s!=null&&x(e,["parameters","confidenceThreshold"],s);const u=w(n,["maskDilation"]);e!==void 0&&u!=null&&x(e,["parameters","maskDilation"],u);const l=w(n,["binaryColorThreshold"]);e!==void 0&&l!=null&&x(e,["parameters","binaryColorThreshold"],l);const c=w(n,["labels"]);return e!==void 0&&c!=null&&x(e,["labels"],c),t}function mD(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["source"]);i!=null&&yD(i,t);const s=w(e,["config"]);return s!=null&&pD(s,t),t}function gD(n){const e={},t=w(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>H7(i))),x(e,["generatedMasks"],r)}return e}function yD(n,e){const t={},r=w(n,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const i=w(n,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],eo(i));const s=w(n,["scribbleImage"]);return e!==void 0&&s!=null&&x(e,["instances[0]","scribble"],hD(s)),t}function d6(n){const e={},t=w(n,["voiceConfig"]);if(t!=null&&x(e,["voiceConfig"],t),w(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=w(n,["languageCode"]);return r!=null&&x(e,["languageCode"],r),e}function vD(n){const e={},t=w(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),x(e,["functionDeclarations"],f)}if(w(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=w(n,["googleSearch"]);r!=null&&x(e,["googleSearch"],Y7(r));const i=w(n,["googleSearchRetrieval"]);if(i!=null&&x(e,["googleSearchRetrieval"],i),w(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=w(n,["googleMaps"]);s!=null&&x(e,["googleMaps"],J7(s));const u=w(n,["urlContext"]);u!=null&&x(e,["urlContext"],u);const l=w(n,["computerUse"]);l!=null&&x(e,["computerUse"],l);const c=w(n,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}function h6(n){const e={},t=w(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(y=>x7(y))),x(e,["functionDeclarations"],g)}const r=w(n,["retrieval"]);r!=null&&x(e,["retrieval"],r);const i=w(n,["googleSearch"]);i!=null&&x(e,["googleSearch"],i);const s=w(n,["googleSearchRetrieval"]);s!=null&&x(e,["googleSearchRetrieval"],s);const u=w(n,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const l=w(n,["googleMaps"]);l!=null&&x(e,["googleMaps"],l);const c=w(n,["urlContext"]);c!=null&&x(e,["urlContext"],c);const f=w(n,["computerUse"]);f!=null&&x(e,["computerUse"],f);const h=w(n,["codeExecution"]);return h!=null&&x(e,["codeExecution"],h),e}function wD(n){const e={},t=w(n,["baseModel"]);t!=null&&x(e,["baseModel"],t);const r=w(n,["createTime"]);r!=null&&x(e,["createTime"],r);const i=w(n,["updateTime"]);return i!=null&&x(e,["updateTime"],i),e}function bD(n){const e={},t=w(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&x(e,["baseModel"],t);const r=w(n,["createTime"]);r!=null&&x(e,["createTime"],r);const i=w(n,["updateTime"]);return i!=null&&x(e,["updateTime"],i),e}function _D(n,e){const t={},r=w(n,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=w(n,["description"]);e!==void 0&&i!=null&&x(e,["description"],i);const s=w(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&x(e,["defaultCheckpointId"],s),t}function SD(n,e){const t={},r=w(n,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const i=w(n,["description"]);e!==void 0&&i!=null&&x(e,["description"],i);const s=w(n,["defaultCheckpointId"]);return e!==void 0&&s!=null&&x(e,["defaultCheckpointId"],s),t}function xD(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","name"],kn(n,r));const i=w(e,["config"]);return i!=null&&_D(i,t),t}function AD(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["config"]);return i!=null&&SD(i,t),t}function ED(n,e){const t={},r=w(n,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const i=w(n,["includeRaiReason"]);e!==void 0&&i!=null&&x(e,["parameters","includeRaiReason"],i);const s=w(n,["outputMimeType"]);e!==void 0&&s!=null&&x(e,["parameters","outputOptions","mimeType"],s);const u=w(n,["outputCompressionQuality"]);e!==void 0&&u!=null&&x(e,["parameters","outputOptions","compressionQuality"],u);const l=w(n,["enhanceInputImage"]);e!==void 0&&l!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],l);const c=w(n,["imagePreservationFactor"]);e!==void 0&&c!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=w(n,["labels"]);e!==void 0&&f!=null&&x(e,["labels"],f);const h=w(n,["numberOfImages"]);e!==void 0&&h!=null&&x(e,["parameters","sampleCount"],h);const g=w(n,["mode"]);return e!==void 0&&g!=null&&x(e,["parameters","mode"],g),t}function TD(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["_url","model"],kn(n,r));const i=w(e,["image"]);i!=null&&x(t,["instances[0]","image"],eo(i));const s=w(e,["upscaleFactor"]);s!=null&&x(t,["parameters","upscaleConfig","upscaleFactor"],s);const u=w(e,["config"]);return u!=null&&ED(u,t),t}function CD(n){const e={},t=w(n,["sdkHttpResponse"]);t!=null&&x(e,["sdkHttpResponse"],t);const r=w(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>kg(s))),x(e,["generatedImages"],i)}return e}function ND(n){const e={},t=w(n,["uri"]);t!=null&&x(e,["uri"],t);const r=w(n,["encodedVideo"]);r!=null&&x(e,["videoBytes"],gu(r));const i=w(n,["encoding"]);return i!=null&&x(e,["mimeType"],i),e}function RD(n){const e={},t=w(n,["gcsUri"]);t!=null&&x(e,["uri"],t);const r=w(n,["bytesBase64Encoded"]);r!=null&&x(e,["videoBytes"],gu(r));const i=w(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function kD(n){const e={},t=w(n,["image"]);t!=null&&x(e,["_self"],eo(t));const r=w(n,["maskMode"]);return r!=null&&x(e,["maskMode"],r),e}function ID(n){const e={},t=w(n,["image"]);t!=null&&x(e,["image"],Ig(t));const r=w(n,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function LD(n){const e={},t=w(n,["image"]);t!=null&&x(e,["image"],eo(t));const r=w(n,["referenceType"]);return r!=null&&x(e,["referenceType"],r),e}function p6(n){const e={},t=w(n,["uri"]);t!=null&&x(e,["uri"],t);const r=w(n,["videoBytes"]);r!=null&&x(e,["encodedVideo"],gu(r));const i=w(n,["mimeType"]);return i!=null&&x(e,["encoding"],i),e}function m6(n){const e={},t=w(n,["uri"]);t!=null&&x(e,["gcsUri"],t);const r=w(n,["videoBytes"]);r!=null&&x(e,["bytesBase64Encoded"],gu(r));const i=w(n,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PD="Content-Type",MD="X-Server-Timeout",OD="User-Agent",vw="x-goog-api-client",DD="1.27.0",UD=`google-genai-sdk/${DD}`,FD="v1beta1",BD="v1beta",Px=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class qD{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:FD,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:BD,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[u,l]of Object.entries(e.queryParams))i.searchParams.append(u,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(t))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,i){if(t&&t.timeout||i){const s=new AbortController,u=s.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const l=setTimeout(()=>s.abort(),t.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=u}return t&&t.extraBody!==null&&jD(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await Mx(i),new hw(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await Mx(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Hf(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let u="";for(;;){const{done:l,value:c}=yield lr(i.read());if(l){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=s.decode(c,{stream:!0});try{const g=JSON.parse(f);if("error"in g){const y=JSON.parse(JSON.stringify(g.error)),m=y.status,E=y.code,_=`got status: ${m}. ${JSON.stringify(g)}`;if(E>=400&&E<600)throw new Ng({message:_,status:E})}}catch(g){if(g.name==="ApiError")throw g}u+=f;let h=u.match(Px);for(;h;){const g=h[1];try{const y=new Response(g,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield lr(new hw(y)),u=u.slice(h[0].length),h=u.match(Px)}catch(y){throw new Error(`exception parsing stream chunk ${g}. ${y}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=UD+" "+this.clientOptions.userAgentExtra;return e[OD]=t,e[vw]=t,e[PD]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(MD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,u=await s.stat(e);i.sizeBytes=String(u.size);const l=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:u.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,t);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var r;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},u=await this.request({path:At("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(r=u==null?void 0:u.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function Mx(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(r);throw t>=400&&t<600?new Ng({message:i,status:t}):new Error(i)}}function jD(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const s=JSON.parse(n.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))t=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,u){const l=Object.assign({},s);for(const c in u)if(Object.prototype.hasOwnProperty.call(u,c)){const f=u[c],h=l[c];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?l[c]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),l[c]=f)}return l}const i=r(t,e);n.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zD="mcp_used/unknown";let HD=!1;function g6(n){for(const e of n)if(GD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return HD}function y6(n){var e;const t=(e=n[vw])!==null&&e!==void 0?e:"";n[vw]=(t+` ${zD}`).trimStart()}function GD(n){return n!==null&&typeof n=="object"&&n instanceof Tb}function VD(n,e=100){return Hf(this,arguments,function*(){let r,i=0;for(;i<e;){const s=yield lr(n.listTools({cursor:r}));for(const u of s.tools)yield yield lr(u),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class Tb{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Tb(e,t)}async initialize(){var e,t,r,i;if(this.mcpTools.length>0)return;const s={},u=[];for(const h of this.mcpClients)try{for(var l=!0,c=(t=void 0,Nh(VD(h))),f;f=await c.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const g=i;u.push(g);const y=g.name;if(s[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);s[y]=h}}catch(g){t={error:g}}finally{try{!l&&!e&&(r=c.return)&&await r.call(c)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),YP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const u=await i.callTool({name:r.name,arguments:r.args},void 0,s);t.push({functionResponse:{name:r.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $D(n,e,t){const r=new zP;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(r,i),e(r)}class WD{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),u=YD(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${l}`;let f=()=>{};const h=new Promise(C=>{f=C}),g=e.callbacks,y=function(){f({})},m=this.apiClient,E={onopen:y,onmessage:C=>{$D(m,g.onmessage,C)},onerror:(t=g==null?void 0:g.onerror)!==null&&t!==void 0?t:function(C){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(C){}},_=this.webSocketFactory.create(c,JD(u),E);_.connect(),await h;const N={setup:{model:kn(this.apiClient,e.model)}};return _.send(JSON.stringify(N)),new KD(_,this.apiClient)}}class KD{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=BO(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=FO(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Bf.PLAY)}pause(){this.sendPlaybackControl(Bf.PAUSE)}stop(){this.sendPlaybackControl(Bf.STOP)}resetContext(){this.sendPlaybackControl(Bf.RESET_CONTEXT)}close(){this.conn.close()}}function JD(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function YD(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ZD(n,e,t){const r=new jP;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const s=JSON.parse(i);if(n.isVertexAI()){const u=zO(s);Object.assign(r,u)}else Object.assign(r,s);e(r)}class QD{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new WD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,s,u,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&g6(e.config.tools)&&y6(g);const y=rU(g);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,h);else{const O=this.apiClient.getApiKey();let le="BidiGenerateContent",Q="key";O!=null&&O.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",Q="access_token"),h=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${le}?${Q}=${O}`}let m=()=>{};const E=new Promise(O=>{m=O}),_=e.callbacks,R=function(){var O;(O=_==null?void 0:_.onopen)===null||O===void 0||O.call(_),m({})},b=this.apiClient,N={onopen:R,onmessage:O=>{ZD(b,_.onmessage,O)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(O){},onclose:(r=_==null?void 0:_.onclose)!==null&&r!==void 0?r:function(O){}},C=this.webSocketFactory.create(h,nU(y),N);C.connect(),await E;let A=kn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const O=this.apiClient.getProject(),le=this.apiClient.getLocation();A=`projects/${O}/locations/${le}/`+A}let F={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ed.AUDIO]}:e.config.responseModalities=[ed.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(l=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&l!==void 0?l:[],V=[];for(const O of J)if(this.isCallableTool(O)){const le=O;V.push(await le.tool())}else V.push(O);V.length>0&&(e.config.tools=V);const te={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=UO(this.apiClient,te):F=DO(this.apiClient,te),delete F.config,C.send(JSON.stringify(F)),new tU(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const eU={turnComplete:!0};class tU{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=ga(t.turns),e.isVertexAI()||(r=r.map(i=>Rg(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(XD)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},eU),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:jO(e)}:t={realtimeInput:qO(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function nU(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function rU(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ox=10;function Dx(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Gf(u)){i=!0;break}if(!i)return!0;const s=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Gf(n){return"callTool"in n&&typeof n.callTool=="function"}function iU(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>Gf(i)))!==null&&r!==void 0?r:!1}function sU(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>!Gf(i)))!==null&&r!==void 0?r:!1}function Ux(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aU extends _c{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,i,s,u,l;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!iU(t)||Dx(t.config))return await this.generateContentInternal(c);if(sU(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const g=ga(c.contents),y=(s=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:Ox;let m=0;for(;m<y&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,_=[];for(const R of(l=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&l!==void 0?l:[])if(Gf(R)){const N=await R.callTool(f.functionCalls);_.push(...N)}m++,h={role:"user",parts:_},c.contents=ga(c.contents),c.contents.push(E),c.contents.push(h),Ux(c.config)&&(g.push(E),g.push(h))}return Ux(c.config)&&(f.automaticFunctionCallingHistory=g),f},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),Dx(t.config)){const r=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let s;const u=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:u.push(c);let l;return s?l={generatedImages:u,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:u,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async t=>{var r;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((r=u.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new zh(yc.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(u),u)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var r,i,s,u,l,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((i=t.video)===null||i===void 0)&&i.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(s=t.source)===null||s===void 0?void 0:s.video)===null||u===void 0)&&u.uri&&(!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,i;const s=(t=e.config)===null||t===void 0?void 0:t.tools;if(!s)return e;const u=await Promise.all(s.map(async c=>Gf(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(l.config.tools=u,e.config&&e.config.tools&&g6(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),y6(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var t,r,i;const s=new Map;for(const u of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(Gf(u)){const l=u,c=await l.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,l)}}return s}async processAfcStream(e){var t,r,i;const s=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Ox;let u=!1,l=0;const c=await this.initAfcToolsMap(e);return(function(f,h,g){var y,m;return Hf(this,arguments,function*(){for(var E,_,R,b;l<s;){u&&(l++,u=!1);const F=yield lr(f.processParamsMaybeAddMcpUsage(g)),J=yield lr(f.generateContentStreamInternal(F)),V=[],te=[];try{for(var N=!0,C=(_=void 0,Nh(J)),A;A=yield lr(C.next()),E=A.done,!E;N=!0){b=A.value,N=!1;const O=b;if(yield yield lr(O),O.candidates&&(!((y=O.candidates[0])===null||y===void 0)&&y.content)){te.push(O.candidates[0].content);for(const le of(m=O.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(l<s&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(le.functionCall.name)){const Q=yield lr(h.get(le.functionCall.name).callTool([le.functionCall]));V.push(...Q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(O){_={error:O}}finally{try{!N&&!E&&(R=C.return)&&(yield lr(R.call(C)))}finally{if(_)throw _.error}}if(V.length>0){u=!0;const O=new nh;O.candidates=[{content:{role:"user",parts:V}}],yield yield lr(O);const le=[];le.push(...te),le.push({role:"user",parts:V});const Q=ga(g.contents).concat(le);g.contents=Q}else break}})})(this,c,e)}async generateContentInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=kx(this.apiClient,e);return l=At("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=Lx(h),y=new nh;return Object.assign(y,g),y})}else{const f=Rx(this.apiClient,e);return l=At("{model}:generateContent",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=Ix(h),y=new nh;return Object.assign(y,g),y})}}async generateContentStreamInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=kx(this.apiClient,e);return l=At("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),u.then(function(g){return Hf(this,arguments,function*(){var y,m,E,_;try{for(var R=!0,b=Nh(g),N;N=yield lr(b.next()),y=N.done,!y;R=!0){_=N.value,R=!1;const C=_,A=Lx(yield lr(C.json()));A.sdkHttpResponse={headers:C.headers};const F=new nh;Object.assign(F,A),yield yield lr(F)}}catch(C){m={error:C}}finally{try{!R&&!y&&(E=b.return)&&(yield lr(E.call(b)))}finally{if(m)throw m.error}}})})}else{const f=Rx(this.apiClient,e);return l=At("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(g){return Hf(this,arguments,function*(){var y,m,E,_;try{for(var R=!0,b=Nh(g),N;N=yield lr(b.next()),y=N.done,!y;R=!0){_=N.value,R=!1;const C=_,A=Ix(yield lr(C.json()));A.sdkHttpResponse={headers:C.headers};const F=new nh;Object.assign(F,A),yield yield lr(F)}}catch(C){m={error:C}}finally{try{!R&&!y&&(E=b.return)&&(yield lr(E.call(b)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=v7(this.apiClient,e);return l=At("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=b7(h),y=new hx;return Object.assign(y,g),y})}else{const f=y7(this.apiClient,e);return l=At("{model}:batchEmbedContents",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=w7(h),y=new hx;return Object.assign(y,g),y})}}async generateImagesInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=R7(this.apiClient,e);return l=At("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=I7(h),y=new px;return Object.assign(y,g),y})}else{const f=N7(this.apiClient,e);return l=At("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=k7(h),y=new px;return Object.assign(y,g),y})}}async editImageInternal(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI()){const l=h7(this.apiClient,e);return s=At("{model}:predict",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=p7(c),h=new PP;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI()){const l=TD(this.apiClient,e);return s=At("{model}:predict",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=CD(c),h=new MP;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI()){const l=lD(this.apiClient,e);return s=At("{model}:predict",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=uD(c),h=new OP;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI()){const l=mD(this.apiClient,e);return s=At("{model}:predict",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=gD(c),h=new DP;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=K7(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u.then(h=>yw(h))}else{const f=W7(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u.then(h=>gw(h))}}async listInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=tD(this.apiClient,e);return l=At("{models_url}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=rD(h),y=new mx;return Object.assign(y,g),y})}else{const f=eD(this.apiClient,e);return l=At("{models_url}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=nD(h),y=new mx;return Object.assign(y,g),y})}}async update(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=AD(this.apiClient,e);return l=At("{model}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u.then(h=>yw(h))}else{const f=xD(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u.then(h=>gw(h))}}async delete(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=u7(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=f7(h),y=new gx;return Object.assign(y,g),y})}else{const f=l7(this.apiClient,e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=c7(h),y=new gx;return Object.assign(y,g),y})}}async countTokens(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=s7(this.apiClient,e);return l=At("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=o7(h),y=new yx;return Object.assign(y,g),y})}else{const f=i7(this.apiClient,e);return l=At("{model}:countTokens",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=a7(h),y=new yx;return Object.assign(y,g),y})}}async computeTokens(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI()){const l=XO(this.apiClient,e);return s=At("{model}:computeTokens",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=ZO(c),h=new UP;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=U7(this.apiClient,e);return l=At("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u.then(h=>{const g=O7(h),y=new rg;return Object.assign(y,g),y})}else{const f=D7(this.apiClient,e);return l=At("{model}:predictLongRunning",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u.then(h=>{const g=M7(h),y=new rg;return Object.assign(y,g),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oU extends _c{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=kP(e);return l=At("{operationName}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),u}else{const f=RP(e);return l=At("{operationName}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),u}}async fetchPredictVideosOperationInternal(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI()){const l=SP(e);return s=At("{resourceName}:fetchPredictOperation",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lU(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["data"]);t!=null&&x(e,["data"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function uU(n){const e={},t=w(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>yU(s))),x(e,["parts"],i)}const r=w(n,["role"]);return r!=null&&x(e,["role"],r),e}function cU(n,e,t){const r={},i=w(e,["expireTime"]);t!==void 0&&i!=null&&x(t,["expireTime"],i);const s=w(e,["newSessionExpireTime"]);t!==void 0&&s!=null&&x(t,["newSessionExpireTime"],s);const u=w(e,["uses"]);t!==void 0&&u!=null&&x(t,["uses"],u);const l=w(e,["liveConnectConstraints"]);t!==void 0&&l!=null&&x(t,["bidiGenerateContentSetup"],gU(n,l));const c=w(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&x(t,["fieldMask"],c),r}function fU(n,e){const t={},r=w(e,["config"]);return r!=null&&x(t,["config"],cU(n,r,t)),t}function dU(n){const e={};if(w(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=w(n,["fileUri"]);t!=null&&x(e,["fileUri"],t);const r=w(n,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}function hU(n){const e={};if(w(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=w(n,["enableWidget"]);return t!=null&&x(e,["enableWidget"],t),e}function pU(n){const e={},t=w(n,["timeRangeFilter"]);if(t!=null&&x(e,["timeRangeFilter"],t),w(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function mU(n,e){const t={},r=w(n,["generationConfig"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig"],r);const i=w(n,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const s=w(n,["temperature"]);e!==void 0&&s!=null&&x(e,["setup","generationConfig","temperature"],s);const u=w(n,["topP"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topP"],u);const l=w(n,["topK"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","topK"],l);const c=w(n,["maxOutputTokens"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","maxOutputTokens"],c);const f=w(n,["mediaResolution"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","mediaResolution"],f);const h=w(n,["seed"]);e!==void 0&&h!=null&&x(e,["setup","generationConfig","seed"],h);const g=w(n,["speechConfig"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","speechConfig"],Eb(g));const y=w(n,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const m=w(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],m);const E=w(n,["systemInstruction"]);e!==void 0&&E!=null&&x(e,["setup","systemInstruction"],uU(ji(E)));const _=w(n,["tools"]);if(e!==void 0&&_!=null){let J=pd(_);Array.isArray(J)&&(J=J.map(V=>wU(hd(V)))),x(e,["setup","tools"],J)}const R=w(n,["sessionResumption"]);e!==void 0&&R!=null&&x(e,["setup","sessionResumption"],vU(R));const b=w(n,["inputAudioTranscription"]);e!==void 0&&b!=null&&x(e,["setup","inputAudioTranscription"],b);const N=w(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&x(e,["setup","outputAudioTranscription"],N);const C=w(n,["realtimeInputConfig"]);e!==void 0&&C!=null&&x(e,["setup","realtimeInputConfig"],C);const A=w(n,["contextWindowCompression"]);e!==void 0&&A!=null&&x(e,["setup","contextWindowCompression"],A);const F=w(n,["proactivity"]);return e!==void 0&&F!=null&&x(e,["setup","proactivity"],F),t}function gU(n,e){const t={},r=w(e,["model"]);r!=null&&x(t,["setup","model"],kn(n,r));const i=w(e,["config"]);return i!=null&&x(t,["config"],mU(i,t)),t}function yU(n){const e={},t=w(n,["videoMetadata"]);t!=null&&x(e,["videoMetadata"],t);const r=w(n,["thought"]);r!=null&&x(e,["thought"],r);const i=w(n,["inlineData"]);i!=null&&x(e,["inlineData"],lU(i));const s=w(n,["fileData"]);s!=null&&x(e,["fileData"],dU(s));const u=w(n,["thoughtSignature"]);u!=null&&x(e,["thoughtSignature"],u);const l=w(n,["functionCall"]);l!=null&&x(e,["functionCall"],l);const c=w(n,["codeExecutionResult"]);c!=null&&x(e,["codeExecutionResult"],c);const f=w(n,["executableCode"]);f!=null&&x(e,["executableCode"],f);const h=w(n,["functionResponse"]);h!=null&&x(e,["functionResponse"],h);const g=w(n,["text"]);return g!=null&&x(e,["text"],g),e}function vU(n){const e={},t=w(n,["handle"]);if(t!=null&&x(e,["handle"],t),w(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wU(n){const e={},t=w(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(h=>h)),x(e,["functionDeclarations"],f)}if(w(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=w(n,["googleSearch"]);r!=null&&x(e,["googleSearch"],pU(r));const i=w(n,["googleSearchRetrieval"]);if(i!=null&&x(e,["googleSearchRetrieval"],i),w(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=w(n,["googleMaps"]);s!=null&&x(e,["googleMaps"],hU(s));const u=w(n,["urlContext"]);u!=null&&x(e,["urlContext"],u);const l=w(n,["computerUse"]);l!=null&&x(e,["computerUse"],l);const c=w(n,["codeExecution"]);return c!=null&&x(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${t}.${s}`);e.push(...i)}else e.push(t)}return e.join(",")}function _U(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(n.bidiGenerateContentSetup=s,t=s):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const s=bU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?n.fieldMask=s:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(f=>u.includes(f)?`generationConfig.${f}`:f));const c=[];s&&c.push(s),l.length>0&&c.push(...l),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class SU extends _c{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=fU(this.apiClient,e);s=At("auth_tokens",l._url),u=l._query,delete l.config,delete l._url,delete l._query;const c=_U(l,e.config);return i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xU(n,e){const t={},r=w(n,["name"]);return r!=null&&x(t,["_url","name"],r),t}function AU(n,e){const t={},r=w(n,["name"]);return r!=null&&x(t,["_url","name"],r),t}function EU(n,e,t){const r={};if(w(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=w(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&x(e,["displayName"],i),w(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=w(n,["epochCount"]);e!==void 0&&s!=null&&x(e,["tuningTask","hyperparameters","epochCount"],s);const u=w(n,["learningRateMultiplier"]);if(u!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],u),w(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(w(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(w(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=w(n,["batchSize"]);e!==void 0&&l!=null&&x(e,["tuningTask","hyperparameters","batchSize"],l);const c=w(n,["learningRate"]);if(e!==void 0&&c!=null&&x(e,["tuningTask","hyperparameters","learningRate"],c),w(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return r}function TU(n,e,t){const r={},i=w(n,["validationDataset"]);e!==void 0&&i!=null&&x(e,["supervisedTuningSpec"],jU(i));const s=w(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&x(e,["tunedModelDisplayName"],s);const u=w(n,["description"]);e!==void 0&&u!=null&&x(e,["description"],u);const l=w(n,["epochCount"]);e!==void 0&&l!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);const c=w(n,["learningRateMultiplier"]);e!==void 0&&c!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const f=w(n,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const h=w(n,["adapterSize"]);if(e!==void 0&&h!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),w(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(w(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=w(n,["labels"]);return e!==void 0&&g!=null&&x(e,["labels"],g),r}function CU(n,e){const t={},r=w(n,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=w(n,["preTunedModel"]);i!=null&&x(t,["preTunedModel"],i);const s=w(n,["trainingDataset"]);s!=null&&x(t,["tuningTask","trainingData"],FU(s));const u=w(n,["config"]);return u!=null&&EU(u,t),t}function NU(n,e){const t={},r=w(n,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=w(n,["preTunedModel"]);i!=null&&x(t,["preTunedModel"],i);const s=w(n,["trainingDataset"]);s!=null&&BU(s,t);const u=w(n,["config"]);return u!=null&&TU(u,t),t}function RU(n,e){const t={},r=w(n,["name"]);return r!=null&&x(t,["_url","name"],r),t}function kU(n,e){const t={},r=w(n,["name"]);return r!=null&&x(t,["_url","name"],r),t}function IU(n,e,t){const r={},i=w(n,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const s=w(n,["pageToken"]);e!==void 0&&s!=null&&x(e,["_query","pageToken"],s);const u=w(n,["filter"]);return e!==void 0&&u!=null&&x(e,["_query","filter"],u),r}function LU(n,e,t){const r={},i=w(n,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const s=w(n,["pageToken"]);e!==void 0&&s!=null&&x(e,["_query","pageToken"],s);const u=w(n,["filter"]);return e!==void 0&&u!=null&&x(e,["_query","filter"],u),r}function PU(n,e){const t={},r=w(n,["config"]);return r!=null&&IU(r,t),t}function MU(n,e){const t={},r=w(n,["config"]);return r!=null&&LU(r,t),t}function OU(n,e){const t={},r=w(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=w(n,["nextPageToken"]);i!=null&&x(t,["nextPageToken"],i);const s=w(n,["tunedModels"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(l=>v6(l))),x(t,["tuningJobs"],u)}return t}function DU(n,e){const t={},r=w(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=w(n,["nextPageToken"]);i!=null&&x(t,["nextPageToken"],i);const s=w(n,["tuningJobs"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(l=>ww(l))),x(t,["tuningJobs"],u)}return t}function UU(n,e){const t={},r=w(n,["name"]);r!=null&&x(t,["model"],r);const i=w(n,["name"]);return i!=null&&x(t,["endpoint"],i),t}function FU(n,e){const t={};if(w(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(w(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=w(n,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),x(t,["examples","examples"],i)}return t}function BU(n,e,t){const r={},i=w(n,["gcsUri"]);e!==void 0&&i!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=w(n,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],s),w(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function v6(n,e){const t={},r=w(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=w(n,["name"]);i!=null&&x(t,["name"],i);const s=w(n,["state"]);s!=null&&x(t,["state"],QC(s));const u=w(n,["createTime"]);u!=null&&x(t,["createTime"],u);const l=w(n,["tuningTask","startTime"]);l!=null&&x(t,["startTime"],l);const c=w(n,["tuningTask","completeTime"]);c!=null&&x(t,["endTime"],c);const f=w(n,["updateTime"]);f!=null&&x(t,["updateTime"],f);const h=w(n,["description"]);h!=null&&x(t,["description"],h);const g=w(n,["baseModel"]);g!=null&&x(t,["baseModel"],g);const y=w(n,["_self"]);return y!=null&&x(t,["tunedModel"],UU(y)),t}function ww(n,e){const t={},r=w(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=w(n,["name"]);i!=null&&x(t,["name"],i);const s=w(n,["state"]);s!=null&&x(t,["state"],QC(s));const u=w(n,["createTime"]);u!=null&&x(t,["createTime"],u);const l=w(n,["startTime"]);l!=null&&x(t,["startTime"],l);const c=w(n,["endTime"]);c!=null&&x(t,["endTime"],c);const f=w(n,["updateTime"]);f!=null&&x(t,["updateTime"],f);const h=w(n,["error"]);h!=null&&x(t,["error"],h);const g=w(n,["description"]);g!=null&&x(t,["description"],g);const y=w(n,["baseModel"]);y!=null&&x(t,["baseModel"],y);const m=w(n,["tunedModel"]);m!=null&&x(t,["tunedModel"],m);const E=w(n,["preTunedModel"]);E!=null&&x(t,["preTunedModel"],E);const _=w(n,["supervisedTuningSpec"]);_!=null&&x(t,["supervisedTuningSpec"],_);const R=w(n,["tuningDataStats"]);R!=null&&x(t,["tuningDataStats"],R);const b=w(n,["encryptionSpec"]);b!=null&&x(t,["encryptionSpec"],b);const N=w(n,["partnerModelTuningSpec"]);N!=null&&x(t,["partnerModelTuningSpec"],N);const C=w(n,["customBaseModel"]);C!=null&&x(t,["customBaseModel"],C);const A=w(n,["experiment"]);A!=null&&x(t,["experiment"],A);const F=w(n,["labels"]);F!=null&&x(t,["labels"],F);const J=w(n,["outputUri"]);J!=null&&x(t,["outputUri"],J);const V=w(n,["pipelineJob"]);V!=null&&x(t,["pipelineJob"],V);const te=w(n,["serviceAccount"]);te!=null&&x(t,["serviceAccount"],te);const O=w(n,["tunedModelDisplayName"]);O!=null&&x(t,["tunedModelDisplayName"],O);const le=w(n,["veoTuningSpec"]);return le!=null&&x(t,["veoTuningSpec"],le),t}function qU(n,e){const t={},r=w(n,["sdkHttpResponse"]);r!=null&&x(t,["sdkHttpResponse"],r);const i=w(n,["name"]);i!=null&&x(t,["name"],i);const s=w(n,["metadata"]);s!=null&&x(t,["metadata"],s);const u=w(n,["done"]);u!=null&&x(t,["done"],u);const l=w(n,["error"]);return l!=null&&x(t,["error"],l),t}function jU(n,e){const t={},r=w(n,["gcsUri"]);r!=null&&x(t,["validationDatasetUri"],r);const i=w(n,["vertexDatasetResource"]);return i!=null&&x(t,["validationDatasetUri"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zU extends _c{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new zh(yc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},t),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),s=await this.tuneMldevInternal(i);let u="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?u=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(u=s.name.split("/operations/")[0]),{name:u,state:dw.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=kU(e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>ww(h))}else{const f=RU(e);return l=At("{name}",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>v6(h))}}async listInternal(e){var t,r,i,s;let u,l="",c={};if(this.apiClient.isVertexAI()){const f=MU(e);return l=At("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=DU(h),y=new vx;return Object.assign(y,g),y})}else{const f=PU(e);return l=At("tunedModels",f._url),c=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(g=>{const y=g;return y.sdkHttpResponse={headers:h.headers},y})),u.then(h=>{const g=OU(h),y=new vx;return Object.assign(y,g),y})}}async cancel(e){var t,r,i,s;let u="",l={};if(this.apiClient.isVertexAI()){const c=AU(e);u=At("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:u,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=xU(e);u=At("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:u,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI()){const l=NU(e);return s=At("tuningJobs",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>ww(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,s="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=CU(e);return s=At("tunedModels",l._url),u=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>qU(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const GU=1024*1024*8,VU=3,$U=1e3,WU=2,Ey="x-goog-upload-status";async function KU(n,e,t){var r,i,s;let u=0,l=0,c=new hw(new Response),f="upload";for(u=n.size;l<u;){const g=Math.min(GU,u-l),y=n.slice(l,l+g);l+g>=u&&(f+=", finalize");let m=0,E=$U;for(;m<VU&&(c=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(g)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[Ey]));)m++,await YU(E),E=E*WU;if(l+=g,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[Ey])!=="active")break;if(u<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[Ey])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function JU(n){return{size:n.size,type:n.type}}function YU(n){return new Promise(e=>setTimeout(e,n))}class XU{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KU(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZU{create(e,t,r){return new QU(e,t,r)}}class QU{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fx="x-goog-api-key";class eF{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Fx)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Fx,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tF="gl-node/";class nF{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=bP(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new eF(this.apiKey);this.apiClient=new qD({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:tF+"web",uploader:new XU,downloader:new HU}),this.models=new aU(this.apiClient),this.live=new QD(this.apiClient,i,new ZU),this.batches=new BM(this.apiClient),this.chats=new yO(this.models,this.apiClient),this.caches=new pO(this.apiClient),this.files=new CO(this.apiClient),this.operations=new oU(this.apiClient),this.authTokens=new SU(this.apiClient),this.tunings=new zU(this.apiClient)}}const bw=new nF({apiKey:void 0}),rF={type:ur.OBJECT,properties:{categories:{type:ur.ARRAY,description:"List of identified categories with their type (main, sub, secondary) and probability.",items:{type:ur.OBJECT,properties:{name:{type:ur.STRING},type:{type:ur.STRING,enum:["main","sub","secondary"]},probability:{type:ur.NUMBER}},required:["name","type","probability"]}},keywords:{type:ur.ARRAY,description:"List of 3-7 relevant keywords.",items:{type:ur.STRING}}},required:["categories","keywords"]},iF={type:ur.ARRAY,description:"A list of suitable abstract types with their corresponding probability.",items:{type:ur.OBJECT,properties:{type:{type:ur.STRING,enum:["Standard Abstract","MRI in Clinical Practice Abstract","ISMRT Abstract","Registered Abstract"]},probability:{type:ur.NUMBER}},required:["type","probability"]}},w6={type:ur.OBJECT,properties:{impact:{type:ur.STRING,description:"A concise, high-impact statement (approx. 50 words) summarizing the key findings and their importance."},synopsis:{type:ur.STRING,description:"A detailed summary of the work (approx. 200-250 words), covering introduction, methods, results, and conclusion."},keywords:{type:ur.ARRAY,items:{type:ur.STRING},description:"The list of user-confirmed keywords."}},required:["impact","synopsis","keywords"]};async function Lg(n,e){try{const r=(await bw.models.generateContent({model:"gemini-2.5-pro",contents:n,config:{responseMimeType:"application/json",responseSchema:e}})).text.trim();return JSON.parse(r)}catch(t){throw console.error("Error calling Gemini API:",t),new Error("Failed to get a valid response from the AI model.")}}const sF=async n=>{const e=BC(n);return await Lg(e,rF)},aF=async(n,e,t)=>{const r=qC(n,e,t);return(await Lg(r,iF)).sort((s,u)=>u.probability-s.probability)},oF=async(n,e,t,r)=>{const i=jC(n,e,t,r);return await Lg(i,w6)},lF=async n=>{const e=zC(n);return await Lg(e,w6)},uF=async(n,e)=>{var t,r,i,s;try{let u;if(n.base64&&n.file)u=await bw.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{inlineData:{data:n.base64,mimeType:n.file.type}},{text:`Optimize and edit this scientific/medical image based on the following specifications: ${n.specs}. Ensure the output is professional and clear for an academic publication.`}]},config:{responseModalities:[ed.IMAGE]}});else{const c=`Generate a scientific or medical imaging figure based on this context: ${e}. Specifications: ${n.specs}. The image should be publication-quality.`;u=await bw.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:c}]},config:{responseModalities:[ed.IMAGE]}})}const l=(s=(i=(r=(t=u.candidates)==null?void 0:t[0])==null?void 0:r.content)==null?void 0:i.parts)==null?void 0:s[0];if(l&&l.inlineData)return l.inlineData.data;throw new Error("No image data received from API.")}catch(u){throw console.error("Error generating image:",u),new Error("Failed to generate image. The model may be unavailable or the request failed.")}},cF=Object.freeze(Object.defineProperty({__proto__:null,analyzeContent:sF,generateCreativeAbstract:lF,generateFinalAbstract:oF,generateImage:uF,suggestAbstractType:aF},Symbol.toStringTag,{value:"Module"})),_w={maxAttempts:3,baseDelay:1e3,maxDelay:1e4,backoffFactor:2};class Bx extends Error{constructor(e,t,r=!0){super(e),this.originalError=t,this.retryable=r,this.name="RetryableError"}}async function qx(n,e={},t){const r={..._w,...e};let i;for(let s=1;s<=r.maxAttempts;s++)try{return await n()}catch(u){if(i=u,u instanceof Bx&&!u.retryable)throw u;if(s===r.maxAttempts)break;const c=Math.min(r.baseDelay*Math.pow(r.backoffFactor,s-1),r.maxDelay)+Math.random()*1e3;console.warn(`Retry attempt ${s}/${r.maxAttempts} for ${t||"operation"} in ${Math.round(c)}ms`,{error:u instanceof Error?u.message:String(u),attempt:s,delay:Math.round(c)}),await new Promise(f=>setTimeout(f,c))}throw new Bx(`Operation failed after ${r.maxAttempts} attempts: ${i.message}`,i)}function b6(n){var r,i;if(!n)return!1;const e=((r=n.message)==null?void 0:r.toLowerCase())||"",t=((i=n.code)==null?void 0:i.toLowerCase())||"";return e.includes("network")||e.includes("fetch")||e.includes("timeout")||e.includes("connection")||t==="network_error"||t==="enotfound"||t==="econnreset"||t==="etimedout"}function _6(n){var r;if(!n)return!1;const e=((r=n.message)==null?void 0:r.toLowerCase())||"";return(n.status||n.statusCode)===429||e.includes("rate limit")||e.includes("quota exceeded")||e.includes("too many requests")}function Sw(n){return b6(n)||_6(n)}function fF(n,e){var i,s,u;let t="UNKNOWN_ERROR",r="medium";return b6(n)?(t="NETWORK_ERROR",r="high"):_6(n)?(t="API_ERROR",r="medium"):(i=n.message)!=null&&i.includes("file")||(s=n.message)!=null&&s.includes("parse")?(t="FILE_PROCESSING_ERROR",r="medium"):(u=n.message)!=null&&u.includes("validation")&&(t="VALIDATION_ERROR",r="low"),{code:t,message:n.message||"An unexpected error occurred",details:n.stack||n,recoverable:Sw(n),timestamp:new Date,severity:r,context:e}}class dF{constructor(){this.offlineMode=!1,this.primaryProvider=this.getStoredProvider(),this.fallbackProvider=this.primaryProvider==="google"?"openai":"google"}getStoredProvider(){try{const e=localStorage.getItem("app-settings");if(e)return JSON.parse(e).provider||"google"}catch(e){console.warn("Failed to load provider settings:",e)}return"google"}getService(e){return e==="openai"?dP:cF}async executeWithFallback(e,t){if(this.offlineMode)throw new Error("Service unavailable in offline mode");let r=null;try{const i=this.getService(this.primaryProvider);return await qx(()=>e(i),_w,`${t} (${this.primaryProvider})`)}catch(i){r=i,console.warn(`Primary provider (${this.primaryProvider}) failed for ${t}:`,i)}try{console.log(`Attempting fallback to ${this.fallbackProvider} for ${t}`);const i=this.getService(this.fallbackProvider);return await qx(()=>e(i),{..._w,maxAttempts:2},`${t} (${this.fallbackProvider} fallback)`)}catch(i){throw console.error(`Both providers failed for ${t}:`,{primary:r==null?void 0:r.message,fallback:i==null?void 0:i.message}),Sw(r)&&Sw(i)&&(this.offlineMode=!0,console.warn("Entering offline mode due to repeated network failures")),fF(r||i,t)}}async analyzeContent(e){return this.executeWithFallback(t=>t.analyzeContent(e),"Content Analysis")}async suggestAbstractType(e,t,r){return this.executeWithFallback(i=>i.suggestAbstractType(e,t,r),"Abstract Type Suggestion")}async generateFinalAbstract(e,t,r,i){return this.executeWithFallback(s=>s.generateFinalAbstract(e,t,r,i),"Final Abstract Generation")}async generateCreativeAbstract(e){return this.executeWithFallback(t=>t.generateCreativeAbstract(e),"Creative Abstract Generation")}async generateImage(e,t){return this.executeWithFallback(r=>r.generateImage(e,t),"Image Generation")}isOffline(){return this.offlineMode}exitOfflineMode(){this.offlineMode=!1,console.log("Exited offline mode")}switchProvider(e){this.primaryProvider=e,this.fallbackProvider=e==="google"?"openai":"google",this.offlineMode=!1,console.log(`Switched to ${e} provider with ${this.fallbackProvider} fallback`)}getCurrentProvider(){return this.primaryProvider}async analyzeContentForConference(e,t){return this.executeWithFallback(async r=>{const i=await this.loadConferenceData(t),s=await r.analyzeContent(e);return this.adaptResultsForConference(s,t,i)},`Content Analysis for ${t}`)}async generateAbstractForConference(e,t,r,i,s){return this.executeWithFallback(async u=>(await this.loadConferenceGuidelines(s,t),u.generateFinalAbstract(e,t,r,i)),`Abstract Generation for ${s}`)}async generateCreativeAbstractForConference(e,t){return this.executeWithFallback(async r=>(await this.loadConferenceGuidelines(t,"RSNA Scientific Abstract"),r.generateCreativeAbstract(e)),`Creative Abstract Generation for ${t}`)}async loadConferenceData(e){try{switch(e){case"RSNA":return await(await fetch("/rsna-categories-keywords.md")).text();case"JACC":return await(await fetch("/jacc-categories-keywords.md")).text();default:return await(await fetch("/ismrm abstract categories & keywords.md")).text()}}catch(t){return console.warn(`Failed to load conference data for ${e}:`,t),""}}async loadConferenceGuidelines(e,t){try{switch(e){case"RSNA":if(t==="RSNA Scientific Abstract")return await(await fetch("/rsna-scientific-abstract-specs.md")).text();break;case"JACC":if(t==="JACC Scientific Abstract")return await(await fetch("/jacc-scientific-abstract-specs.md")).text();break;default:return await(await fetch("/standard abstract guidance.md")).text()}}catch(r){console.warn(`Failed to load guidelines for ${e} ${t}:`,r)}return""}adaptResultsForConference(e,t,r){if(t==="RSNA"){const i=this.extractRSNACategories(e.categories,r),s=this.extractRSNAKeywords(e.keywords,r);return{categories:i,keywords:s}}if(t==="JACC"){const i=this.extractJACCCategories(e.categories,r),s=this.extractJACCKeywords(e.keywords,r);return{categories:i,keywords:s}}return e}extractRSNACategories(e,t){const r={Neuro:"Neuroradiology",Body:"Abdominal Imaging",Cardiovascular:"Cardiac Imaging",Musculoskeletal:"Musculoskeletal Imaging",Pediatrics:"Pediatric Imaging","Physics & Engineering":"Physics",Interventional:"Interventional Radiology"};return e.map(i=>({...i,name:r[i.name]||i.name}))}extractRSNAKeywords(e,t){const r=["Diagnostic Accuracy","Clinical Outcomes","Image Quality","Workflow Optimization","Patient Safety","Cost-effectiveness"],i=[...e];return r.forEach(s=>{i.some(u=>u.toLowerCase().includes(s.toLowerCase()))||i.push(s)}),i.slice(0,10)}extractJACCCategories(e,t){const r={Cardiovascular:"Coronary Artery Disease",Body:"Cardiac Imaging",Neuro:"Cardiac Surgery",Interventional:"Interventional Cardiology","Physics & Engineering":"Cardiac Imaging",Pediatrics:"Congenital Heart Disease"};return e.map(i=>({...i,name:r[i.name]||"Cardiovascular Medicine"}))}extractJACCKeywords(e,t){const r=["Cardiovascular Outcomes","MACE","Myocardial Infarction","Heart Failure","Coronary Artery Disease","Cardiac Imaging","Interventional Cardiology","Clinical Trials","Biomarkers","Cardiovascular Risk"],i=[...e];return r.forEach(s=>{i.some(u=>u.toLowerCase().includes(s.toLowerCase()))||i.push(s)}),i.slice(0,10)}getOfflineFallbacks(){return{analyzeContent:e=>{const t=e.toLowerCase().split(/\s+/),r=[],i=[],s=new Map;t.forEach(l=>{l.length>3&&s.set(l,(s.get(l)||0)+1)});const u=Array.from(s.entries()).sort(([,l],[,c])=>c-l).slice(0,10).map(([l])=>l);return i.push(...u),{categories:r,keywords:i}},generateBasicAbstract:e=>{const t=e.split(/[.!?]+/).filter(s=>s.trim().length>0),r=t.slice(0,2).join(". ").trim()+".",i=t.slice(2,5).join(". ").trim()+".";return{impact:r||"Impact statement unavailable in offline mode.",synopsis:i||"Synopsis unavailable in offline mode.",keywords:["offline","basic-processing"]}}}}}const yu=new dF,hF=n=>yu.analyzeContent(n),pF=(n,e,t)=>yu.suggestAbstractType(n,e,t),mF=(n,e,t,r)=>yu.generateFinalAbstract(n,e,t,r),gF=n=>yu.generateCreativeAbstract(n),Cb=(n,e)=>yu.generateImage(n,e),S6=(n,e)=>yu.analyzeContentForConference(n,e),x6=(n,e,t,r,i)=>yu.generateAbstractForConference(n,e,t,r,i),A6=(n,e)=>yu.generateCreativeAbstractForConference(n,e);function qn(n){"@babel/helpers - typeof";return qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(n)}var Qa=Uint8Array,$s=Uint16Array,Nb=Int32Array,Rb=new Qa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kb=new Qa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jx=new Qa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E6=function(n,e){for(var t=new $s(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Nb(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},T6=E6(Rb,2),yF=T6.b,xw=T6.r;yF[28]=258,xw[258]=28;var vF=E6(kb,0),zx=vF.r,Aw=new $s(32768);for(var cr=0;cr<32768;++cr){var uu=(cr&43690)>>1|(cr&21845)<<1;uu=(uu&52428)>>2|(uu&13107)<<2,uu=(uu&61680)>>4|(uu&3855)<<4,Aw[cr]=((uu&65280)>>8|(uu&255)<<8)>>1}var Rh=(function(n,e,t){for(var r=n.length,i=0,s=new $s(e);i<r;++i)n[i]&&++s[n[i]-1];var u=new $s(e);for(i=1;i<e;++i)u[i]=u[i-1]+s[i-1]<<1;var l;if(t){l=new $s(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],h=e-n[i],g=u[n[i]-1]++<<h,y=g|(1<<h)-1;g<=y;++g)l[Aw[g]>>c]=f}else for(l=new $s(r),i=0;i<r;++i)n[i]&&(l[i]=Aw[u[n[i]-1]++]>>15-n[i]);return l}),vc=new Qa(288);for(var cr=0;cr<144;++cr)vc[cr]=8;for(var cr=144;cr<256;++cr)vc[cr]=9;for(var cr=256;cr<280;++cr)vc[cr]=7;for(var cr=280;cr<288;++cr)vc[cr]=8;var sg=new Qa(32);for(var cr=0;cr<32;++cr)sg[cr]=5;var wF=Rh(vc,9,0),bF=Rh(sg,5,0),C6=function(n){return(n+7)/8|0},_F=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Qa(n.subarray(e,t))},gl=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},rh=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Ty=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:R6,l:0};if(i==1){var u=new Qa(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(F,J){return F.f-J.f}),t.push({s:-1,f:25001});var l=t[0],c=t[1],f=0,h=1,g=2;for(t[0]={s:-1,f:l.f+c.f,l,r:c};h!=i-1;)l=t[t[f].f<t[g].f?f++:g++],c=t[f!=h&&t[f].f<t[g].f?f++:g++],t[h++]={s:-1,f:l.f+c.f,l,r:c};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var m=new $s(y+1),E=Ew(t[h-1],m,0);if(E>e){var r=0,_=0,R=E-e,b=1<<R;for(s.sort(function(J,V){return m[V.s]-m[J.s]||J.f-V.f});r<i;++r){var N=s[r].s;if(m[N]>e)_+=b-(1<<E-m[N]),m[N]=e;else break}for(_>>=R;_>0;){var C=s[r].s;m[C]<e?_-=1<<e-m[C]++-1:++r}for(;r>=0&&_;--r){var A=s[r].s;m[A]==e&&(--m[A],++_)}E=e}return{t:new Qa(m),l:E}},Ew=function(n,e,t){return n.s==-1?Math.max(Ew(n.l,e,t+1),Ew(n.r,e,t+1)):e[n.s]=t},Hx=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new $s(++e),r=0,i=n[0],s=1,u=function(c){t[r++]=c},l=1;l<=e;++l)if(n[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)u(32754);s>2&&(u(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(u(i),--s;s>6;s-=6)u(8304);s>2&&(u(s-3<<5|8208),s=0)}for(;s--;)u(i);s=1,i=n[l]}return{c:t.subarray(0,r),n:e}},ih=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},N6=function(n,e,t){var r=t.length,i=C6(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},Gx=function(n,e,t,r,i,s,u,l,c,f,h){gl(e,h++,t),++i[256];for(var g=Ty(i,15),y=g.t,m=g.l,E=Ty(s,15),_=E.t,R=E.l,b=Hx(y),N=b.c,C=b.n,A=Hx(_),F=A.c,J=A.n,V=new $s(19),te=0;te<N.length;++te)++V[N[te]&31];for(var te=0;te<F.length;++te)++V[F[te]&31];for(var O=Ty(V,7),le=O.t,Q=O.l,U=19;U>4&&!le[jx[U-1]];--U);var X=f+5<<3,M=ih(i,vc)+ih(s,sg)+u,ye=ih(i,y)+ih(s,_)+u+14+3*U+ih(V,le)+2*V[16]+3*V[17]+7*V[18];if(c>=0&&X<=M&&X<=ye)return N6(e,h,n.subarray(c,c+f));var se,ie,Se,me;if(gl(e,h,1+(ye<M)),h+=2,ye<M){se=Rh(y,m,0),ie=y,Se=Rh(_,R,0),me=_;var Ne=Rh(le,Q,0);gl(e,h,C-257),gl(e,h+5,J-1),gl(e,h+10,U-4),h+=14;for(var te=0;te<U;++te)gl(e,h+3*te,le[jx[te]]);h+=3*U;for(var K=[N,F],L=0;L<2;++L)for(var $=K[L],te=0;te<$.length;++te){var ee=$[te]&31;gl(e,h,Ne[ee]),h+=le[ee],ee>15&&(gl(e,h,$[te]>>5&127),h+=$[te]>>12)}}else se=wF,ie=vc,Se=bF,me=sg;for(var te=0;te<l;++te){var pe=r[te];if(pe>255){var ee=pe>>18&31;rh(e,h,se[ee+257]),h+=ie[ee+257],ee>7&&(gl(e,h,pe>>23&31),h+=Rb[ee]);var ae=pe&31;rh(e,h,Se[ae]),h+=me[ae],ae>3&&(rh(e,h,pe>>5&8191),h+=kb[ae])}else rh(e,h,se[pe]),h+=ie[pe]}return rh(e,h,se[256]),h+ie[256]},SF=new Nb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),R6=new Qa(0),xF=function(n,e,t,r,i,s){var u=s.z||n.length,l=new Qa(r+u+5*(1+Math.ceil(u/7e3))+i),c=l.subarray(r,l.length-i),f=s.l,h=(s.r||0)&7;if(e){h&&(c[0]=s.r>>3);for(var g=SF[e-1],y=g>>13,m=g&8191,E=(1<<t)-1,_=s.p||new $s(32768),R=s.h||new $s(E+1),b=Math.ceil(t/3),N=2*b,C=function(q){return(n[q]^n[q+1]<<b^n[q+2]<<N)&E},A=new Nb(25e3),F=new $s(288),J=new $s(32),V=0,te=0,O=s.i||0,le=0,Q=s.w||0,U=0;O+2<u;++O){var X=C(O),M=O&32767,ye=R[X];if(_[M]=ye,R[X]=M,Q<=O){var se=u-O;if((V>7e3||le>24576)&&(se>423||!f)){h=Gx(n,c,0,A,F,J,te,le,U,O-U,h),le=V=te=0,U=O;for(var ie=0;ie<286;++ie)F[ie]=0;for(var ie=0;ie<30;++ie)J[ie]=0}var Se=2,me=0,Ne=m,K=M-ye&32767;if(se>2&&X==C(O-K))for(var L=Math.min(y,se)-1,$=Math.min(32767,O),ee=Math.min(258,se);K<=$&&--Ne&&M!=ye;){if(n[O+Se]==n[O+Se-K]){for(var pe=0;pe<ee&&n[O+pe]==n[O+pe-K];++pe);if(pe>Se){if(Se=pe,me=K,pe>L)break;for(var ae=Math.min(K,pe-2),B=0,ie=0;ie<ae;++ie){var j=O-K+ie&32767,de=_[j],fe=j-de&32767;fe>B&&(B=fe,ye=j)}}}M=ye,ye=_[M],K+=M-ye&32767}if(me){A[le++]=268435456|xw[Se]<<18|zx[me];var re=xw[Se]&31,he=zx[me]&31;te+=Rb[re]+kb[he],++F[257+re],++J[he],Q=O+Se,++V}else A[le++]=n[O],++F[n[O]]}}for(O=Math.max(O,Q);O<u;++O)A[le++]=n[O],++F[n[O]];h=Gx(n,c,f,A,F,J,te,le,U,O-U,h),f||(s.r=h&7|c[h/8|0]<<3,h-=7,s.h=R,s.p=_,s.i=O,s.w=Q)}else{for(var O=s.w||0;O<u+f;O+=65535){var ke=O+65535;ke>=u&&(c[h/8|0]=f,ke=u),h=N6(c,h+1,n.subarray(O,ke))}s.i=u}return _F(l,0,r+C6(h)+i)},k6=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,u=0;u!=s;){for(var l=Math.min(u+2655,s);u<l;++u)i+=r+=t[u];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},AF=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),u=new Qa(s.length+n.length);u.set(s),u.set(n,s.length),n=u,i.w=s.length}return xF(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},I6=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},EF=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=k6();i.p(e.dictionary),I6(n,2,i.d())}};function Tw(n,e){e||(e={});var t=k6();t.p(n);var r=AF(n,e,e.dictionary?6:2,4);return EF(r,e),I6(r,r.length-4,t.d()),r}var TF=typeof TextDecoder<"u"&&new TextDecoder,CF=0;try{TF.decode(R6,{stream:!0}),CF=1}catch{}function NF(n){if(Array.isArray(n))return n}function RF(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,u,l=[],c=!0,f=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(c=(r=s.call(t)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(h){f=!0,i=h}finally{try{if(!c&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(f)throw i}}return l}}function Vx(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function kF(n,e){if(n){if(typeof n=="string")return Vx(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Vx(n,e):void 0}}function IF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $x(n,e){return NF(n)||RF(n,e)||kF(n,e)||IF()}function Wx(n,e="utf8"){return new TextDecoder(e).decode(n)}const LF=new TextEncoder;function PF(n){return LF.encode(n)}const MF=1024*8,OF=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Cy={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Ib{constructor(e=MF,t={}){Bn(this,"buffer");Bn(this,"byteLength");Bn(this,"byteOffset");Bn(this,"length");Bn(this,"offset");Bn(this,"lastWrittenByte");Bn(this,"littleEndian");Bn(this,"_data");Bn(this,"_mark");Bn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,s=e.byteLength-i;let u=i;(ArrayBuffer.isView(e)||e instanceof Ib)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=Cy[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===OF&&t!=="uint8"&&t!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+r));l.reverse();const c=new Cy[t](l.buffer);return this.offset+=r,c.reverse(),c}const u=new Cy[t](s);return this.offset+=r,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return Wx(this.readBytes(e))}decodeText(e=1,t="utf8"){return Wx(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(PF(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function gd(n){let e=n.length;for(;--e>=0;)n[e]=0}const DF=3,UF=258,L6=29,FF=256,BF=FF+1+L6,P6=30,qF=512,jF=new Array((BF+2)*2);gd(jF);const zF=new Array(P6*2);gd(zF);const HF=new Array(qF);gd(HF);const GF=new Array(UF-DF+1);gd(GF);const VF=new Array(L6);gd(VF);const $F=new Array(P6);gd($F);const WF=(n,e,t,r)=>{let i=n&65535|0,s=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do i=i+e[r++]|0,s=s+i|0;while(--u);i%=65521,s%=65521}return i|s<<16|0};var Cw=WF;const KF=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},JF=new Uint32Array(KF()),YF=(n,e,t,r)=>{const i=JF,s=r+t;n^=-1;for(let u=r;u<s;u++)n=n>>>8^i[(n^e[u])&255];return n^-1};var To=YF,Nw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},M6={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const XF=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var ZF=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)XF(t,r)&&(n[r]=t[r])}}return n},QF=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,s=n.length;r<s;r++){let u=n[r];t.set(u,i),i+=u.length}return t},O6={assign:ZF,flattenChunks:QF};let D6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{D6=!1}const Dh=new Uint8Array(256);for(let n=0;n<256;n++)Dh[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Dh[254]=Dh[254]=1;var eB=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,s,u=n.length,l=0;for(i=0;i<u;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<u&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(l),s=0,i=0;s<l;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<u&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const tB=(n,e)=>{if(e<65534&&n.subarray&&D6)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var nB=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const s=new Array(t*2);for(i=0,r=0;r<t;){let u=n[r++];if(u<128){s[i++]=u;continue}let l=Dh[u];if(l>4){s[i++]=65533,r+=l-1;continue}for(u&=l===2?31:l===3?15:7;l>1&&r<t;)u=u<<6|n[r++]&63,l--;if(l>1){s[i++]=65533;continue}u<65536?s[i++]=u:(u-=65536,s[i++]=55296|u>>10&1023,s[i++]=56320|u&1023)}return tB(s,i)},rB=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Dh[n[t]]>e?t:e},Rw={string2buf:eB,buf2string:nB,utf8border:rB};function iB(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var sB=iB;const im=16209,aB=16191;var oB=function(e,t){let r,i,s,u,l,c,f,h,g,y,m,E,_,R,b,N,C,A,F,J,V,te,O,le;const Q=e.state;r=e.next_in,O=e.input,i=r+(e.avail_in-5),s=e.next_out,le=e.output,u=s-(t-e.avail_out),l=s+(e.avail_out-257),c=Q.dmax,f=Q.wsize,h=Q.whave,g=Q.wnext,y=Q.window,m=Q.hold,E=Q.bits,_=Q.lencode,R=Q.distcode,b=(1<<Q.lenbits)-1,N=(1<<Q.distbits)-1;e:do{E<15&&(m+=O[r++]<<E,E+=8,m+=O[r++]<<E,E+=8),C=_[m&b];t:for(;;){if(A=C>>>24,m>>>=A,E-=A,A=C>>>16&255,A===0)le[s++]=C&65535;else if(A&16){F=C&65535,A&=15,A&&(E<A&&(m+=O[r++]<<E,E+=8),F+=m&(1<<A)-1,m>>>=A,E-=A),E<15&&(m+=O[r++]<<E,E+=8,m+=O[r++]<<E,E+=8),C=R[m&N];n:for(;;){if(A=C>>>24,m>>>=A,E-=A,A=C>>>16&255,A&16){if(J=C&65535,A&=15,E<A&&(m+=O[r++]<<E,E+=8,E<A&&(m+=O[r++]<<E,E+=8)),J+=m&(1<<A)-1,J>c){e.msg="invalid distance too far back",Q.mode=im;break e}if(m>>>=A,E-=A,A=s-u,J>A){if(A=J-A,A>h&&Q.sane){e.msg="invalid distance too far back",Q.mode=im;break e}if(V=0,te=y,g===0){if(V+=f-A,A<F){F-=A;do le[s++]=y[V++];while(--A);V=s-J,te=le}}else if(g<A){if(V+=f+g-A,A-=g,A<F){F-=A;do le[s++]=y[V++];while(--A);if(V=0,g<F){A=g,F-=A;do le[s++]=y[V++];while(--A);V=s-J,te=le}}}else if(V+=g-A,A<F){F-=A;do le[s++]=y[V++];while(--A);V=s-J,te=le}for(;F>2;)le[s++]=te[V++],le[s++]=te[V++],le[s++]=te[V++],F-=3;F&&(le[s++]=te[V++],F>1&&(le[s++]=te[V++]))}else{V=s-J;do le[s++]=le[V++],le[s++]=le[V++],le[s++]=le[V++],F-=3;while(F>2);F&&(le[s++]=le[V++],F>1&&(le[s++]=le[V++]))}}else if((A&64)===0){C=R[(C&65535)+(m&(1<<A)-1)];continue n}else{e.msg="invalid distance code",Q.mode=im;break e}break}}else if((A&64)===0){C=_[(C&65535)+(m&(1<<A)-1)];continue t}else if(A&32){Q.mode=aB;break e}else{e.msg="invalid literal/length code",Q.mode=im;break e}break}}while(r<i&&s<l);F=E>>3,r-=F,E-=F<<3,m&=(1<<E)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<l?257+(l-s):257-(s-l),Q.hold=m,Q.bits=E};const Ef=15,Kx=852,Jx=592,Yx=0,Ny=1,Xx=2,lB=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),uB=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),cB=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fB=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),dB=(n,e,t,r,i,s,u,l)=>{const c=l.bits;let f=0,h=0,g=0,y=0,m=0,E=0,_=0,R=0,b=0,N=0,C,A,F,J,V,te=null,O;const le=new Uint16Array(Ef+1),Q=new Uint16Array(Ef+1);let U=null,X,M,ye;for(f=0;f<=Ef;f++)le[f]=0;for(h=0;h<r;h++)le[e[t+h]]++;for(m=c,y=Ef;y>=1&&le[y]===0;y--);if(m>y&&(m=y),y===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(g=1;g<y&&le[g]===0;g++);for(m<g&&(m=g),R=1,f=1;f<=Ef;f++)if(R<<=1,R-=le[f],R<0)return-1;if(R>0&&(n===Yx||y!==1))return-1;for(Q[1]=0,f=1;f<Ef;f++)Q[f+1]=Q[f]+le[f];for(h=0;h<r;h++)e[t+h]!==0&&(u[Q[e[t+h]]++]=h);if(n===Yx?(te=U=u,O=20):n===Ny?(te=lB,U=uB,O=257):(te=cB,U=fB,O=0),N=0,h=0,f=g,V=s,E=m,_=0,F=-1,b=1<<m,J=b-1,n===Ny&&b>Kx||n===Xx&&b>Jx)return 1;for(;;){X=f-_,u[h]+1<O?(M=0,ye=u[h]):u[h]>=O?(M=U[u[h]-O],ye=te[u[h]-O]):(M=96,ye=0),C=1<<f-_,A=1<<E,g=A;do A-=C,i[V+(N>>_)+A]=X<<24|M<<16|ye|0;while(A!==0);for(C=1<<f-1;N&C;)C>>=1;if(C!==0?(N&=C-1,N+=C):N=0,h++,--le[f]===0){if(f===y)break;f=e[t+u[h]]}if(f>m&&(N&J)!==F){for(_===0&&(_=m),V+=g,E=f-_,R=1<<E;E+_<y&&(R-=le[E+_],!(R<=0));)E++,R<<=1;if(b+=1<<E,n===Ny&&b>Kx||n===Xx&&b>Jx)return 1;F=N&J,i[F]=m<<24|E<<16|V-s|0}}return N!==0&&(i[V+N]=f-_<<24|64<<16|0),l.bits=m,0};var kh=dB;const hB=0,U6=1,F6=2,{Z_FINISH:Zx,Z_BLOCK:pB,Z_TREES:sm,Z_OK:wc,Z_STREAM_END:mB,Z_NEED_DICT:gB,Z_STREAM_ERROR:ya,Z_DATA_ERROR:B6,Z_MEM_ERROR:q6,Z_BUF_ERROR:yB,Z_DEFLATED:Qx}=M6,Pg=16180,eA=16181,tA=16182,nA=16183,rA=16184,iA=16185,sA=16186,aA=16187,oA=16188,lA=16189,ag=16190,yl=16191,Ry=16192,uA=16193,ky=16194,cA=16195,fA=16196,dA=16197,hA=16198,am=16199,om=16200,pA=16201,mA=16202,gA=16203,yA=16204,vA=16205,Iy=16206,wA=16207,bA=16208,gr=16209,j6=16210,z6=16211,vB=852,wB=592,bB=15,_B=bB,_A=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function SB(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Sc=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Pg||e.mode>z6?1:0},H6=n=>{if(Sc(n))return ya;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Pg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(vB),e.distcode=e.distdyn=new Int32Array(wB),e.sane=1,e.back=-1,wc},G6=n=>{if(Sc(n))return ya;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,H6(n)},V6=(n,e)=>{let t;if(Sc(n))return ya;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ya:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,G6(n))},$6=(n,e)=>{if(!n)return ya;const t=new SB;n.state=t,t.strm=n,t.window=null,t.mode=Pg;const r=V6(n,e);return r!==wc&&(n.state=null),r},xB=n=>$6(n,_B);let SA=!0,Ly,Py;const AB=n=>{if(SA){Ly=new Int32Array(512),Py=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(kh(U6,n.lens,0,288,Ly,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;kh(F6,n.lens,0,32,Py,0,n.work,{bits:5}),SA=!1}n.lencode=Ly,n.lenbits=9,n.distcode=Py,n.distbits=5},W6=(n,e,t,r)=>{let i;const s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(t-r,t-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(t-r,t),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},EB=(n,e)=>{let t,r,i,s,u,l,c,f,h,g,y,m,E,_,R=0,b,N,C,A,F,J,V,te;const O=new Uint8Array(4);let le,Q;const U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Sc(n)||!n.output||!n.input&&n.avail_in!==0)return ya;t=n.state,t.mode===yl&&(t.mode=Ry),u=n.next_out,i=n.output,c=n.avail_out,s=n.next_in,r=n.input,l=n.avail_in,f=t.hold,h=t.bits,g=l,y=c,te=wc;e:for(;;)switch(t.mode){case Pg:if(t.wrap===0){t.mode=Ry;break}for(;h<16;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,O[0]=f&255,O[1]=f>>>8&255,t.check=To(t.check,O,2,0),f=0,h=0,t.mode=eA;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=gr;break}if((f&15)!==Qx){n.msg="unknown compression method",t.mode=gr;break}if(f>>>=4,h-=4,V=(f&15)+8,t.wbits===0&&(t.wbits=V),V>15||V>t.wbits){n.msg="invalid window size",t.mode=gr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?lA:yl,f=0,h=0;break;case eA:for(;h<16;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if(t.flags=f,(t.flags&255)!==Qx){n.msg="unknown compression method",t.mode=gr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=gr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(O[0]=f&255,O[1]=f>>>8&255,t.check=To(t.check,O,2,0)),f=0,h=0,t.mode=tA;case tA:for(;h<32;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(O[0]=f&255,O[1]=f>>>8&255,O[2]=f>>>16&255,O[3]=f>>>24&255,t.check=To(t.check,O,4,0)),f=0,h=0,t.mode=nA;case nA:for(;h<16;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(O[0]=f&255,O[1]=f>>>8&255,t.check=To(t.check,O,2,0)),f=0,h=0,t.mode=rA;case rA:if(t.flags&1024){for(;h<16;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(O[0]=f&255,O[1]=f>>>8&255,t.check=To(t.check,O,2,0)),f=0,h=0}else t.head&&(t.head.extra=null);t.mode=iA;case iA:if(t.flags&1024&&(m=t.length,m>l&&(m=l),m&&(t.head&&(V=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(s,s+m),V)),t.flags&512&&t.wrap&4&&(t.check=To(t.check,r,m,s)),l-=m,s+=m,t.length-=m),t.length))break e;t.length=0,t.mode=sA;case sA:if(t.flags&2048){if(l===0)break e;m=0;do V=r[s+m++],t.head&&V&&t.length<65536&&(t.head.name+=String.fromCharCode(V));while(V&&m<l);if(t.flags&512&&t.wrap&4&&(t.check=To(t.check,r,m,s)),l-=m,s+=m,V)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=aA;case aA:if(t.flags&4096){if(l===0)break e;m=0;do V=r[s+m++],t.head&&V&&t.length<65536&&(t.head.comment+=String.fromCharCode(V));while(V&&m<l);if(t.flags&512&&t.wrap&4&&(t.check=To(t.check,r,m,s)),l-=m,s+=m,V)break e}else t.head&&(t.head.comment=null);t.mode=oA;case oA:if(t.flags&512){for(;h<16;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=gr;break}f=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=yl;break;case lA:for(;h<32;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}n.adler=t.check=_A(f),f=0,h=0,t.mode=ag;case ag:if(t.havedict===0)return n.next_out=u,n.avail_out=c,n.next_in=s,n.avail_in=l,t.hold=f,t.bits=h,gB;n.adler=t.check=1,t.mode=yl;case yl:if(e===pB||e===sm)break e;case Ry:if(t.last){f>>>=h&7,h-=h&7,t.mode=Iy;break}for(;h<3;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}switch(t.last=f&1,f>>>=1,h-=1,f&3){case 0:t.mode=uA;break;case 1:if(AB(t),t.mode=am,e===sm){f>>>=2,h-=2;break e}break;case 2:t.mode=fA;break;case 3:n.msg="invalid block type",t.mode=gr}f>>>=2,h-=2;break;case uA:for(f>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=gr;break}if(t.length=f&65535,f=0,h=0,t.mode=ky,e===sm)break e;case ky:t.mode=cA;case cA:if(m=t.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;i.set(r.subarray(s,s+m),u),l-=m,s+=m,c-=m,u+=m,t.length-=m;break}t.mode=yl;break;case fA:for(;h<14;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if(t.nlen=(f&31)+257,f>>>=5,h-=5,t.ndist=(f&31)+1,f>>>=5,h-=5,t.ncode=(f&15)+4,f>>>=4,h-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=gr;break}t.have=0,t.mode=dA;case dA:for(;t.have<t.ncode;){for(;h<3;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}t.lens[U[t.have++]]=f&7,f>>>=3,h-=3}for(;t.have<19;)t.lens[U[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,le={bits:t.lenbits},te=kh(hB,t.lens,0,19,t.lencode,0,t.work,le),t.lenbits=le.bits,te){n.msg="invalid code lengths set",t.mode=gr;break}t.have=0,t.mode=hA;case hA:for(;t.have<t.nlen+t.ndist;){for(;R=t.lencode[f&(1<<t.lenbits)-1],b=R>>>24,N=R>>>16&255,C=R&65535,!(b<=h);){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if(C<16)f>>>=b,h-=b,t.lens[t.have++]=C;else{if(C===16){for(Q=b+2;h<Q;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if(f>>>=b,h-=b,t.have===0){n.msg="invalid bit length repeat",t.mode=gr;break}V=t.lens[t.have-1],m=3+(f&3),f>>>=2,h-=2}else if(C===17){for(Q=b+3;h<Q;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}f>>>=b,h-=b,V=0,m=3+(f&7),f>>>=3,h-=3}else{for(Q=b+7;h<Q;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}f>>>=b,h-=b,V=0,m=11+(f&127),f>>>=7,h-=7}if(t.have+m>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=gr;break}for(;m--;)t.lens[t.have++]=V}}if(t.mode===gr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=gr;break}if(t.lenbits=9,le={bits:t.lenbits},te=kh(U6,t.lens,0,t.nlen,t.lencode,0,t.work,le),t.lenbits=le.bits,te){n.msg="invalid literal/lengths set",t.mode=gr;break}if(t.distbits=6,t.distcode=t.distdyn,le={bits:t.distbits},te=kh(F6,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,le),t.distbits=le.bits,te){n.msg="invalid distances set",t.mode=gr;break}if(t.mode=am,e===sm)break e;case am:t.mode=om;case om:if(l>=6&&c>=258){n.next_out=u,n.avail_out=c,n.next_in=s,n.avail_in=l,t.hold=f,t.bits=h,oB(n,y),u=n.next_out,i=n.output,c=n.avail_out,s=n.next_in,r=n.input,l=n.avail_in,f=t.hold,h=t.bits,t.mode===yl&&(t.back=-1);break}for(t.back=0;R=t.lencode[f&(1<<t.lenbits)-1],b=R>>>24,N=R>>>16&255,C=R&65535,!(b<=h);){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if(N&&(N&240)===0){for(A=b,F=N,J=C;R=t.lencode[J+((f&(1<<A+F)-1)>>A)],b=R>>>24,N=R>>>16&255,C=R&65535,!(A+b<=h);){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}f>>>=A,h-=A,t.back+=A}if(f>>>=b,h-=b,t.back+=b,t.length=C,N===0){t.mode=vA;break}if(N&32){t.back=-1,t.mode=yl;break}if(N&64){n.msg="invalid literal/length code",t.mode=gr;break}t.extra=N&15,t.mode=pA;case pA:if(t.extra){for(Q=t.extra;h<Q;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=mA;case mA:for(;R=t.distcode[f&(1<<t.distbits)-1],b=R>>>24,N=R>>>16&255,C=R&65535,!(b<=h);){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if((N&240)===0){for(A=b,F=N,J=C;R=t.distcode[J+((f&(1<<A+F)-1)>>A)],b=R>>>24,N=R>>>16&255,C=R&65535,!(A+b<=h);){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}f>>>=A,h-=A,t.back+=A}if(f>>>=b,h-=b,t.back+=b,N&64){n.msg="invalid distance code",t.mode=gr;break}t.offset=C,t.extra=N&15,t.mode=gA;case gA:if(t.extra){for(Q=t.extra;h<Q;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=gr;break}t.mode=yA;case yA:if(c===0)break e;if(m=y-c,t.offset>m){if(m=t.offset-m,m>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=gr;break}m>t.wnext?(m-=t.wnext,E=t.wsize-m):E=t.wnext-m,m>t.length&&(m=t.length),_=t.window}else _=i,E=u-t.offset,m=t.length;m>c&&(m=c),c-=m,t.length-=m;do i[u++]=_[E++];while(--m);t.length===0&&(t.mode=om);break;case vA:if(c===0)break e;i[u++]=t.length,c--,t.mode=om;break;case Iy:if(t.wrap){for(;h<32;){if(l===0)break e;l--,f|=r[s++]<<h,h+=8}if(y-=c,n.total_out+=y,t.total+=y,t.wrap&4&&y&&(n.adler=t.check=t.flags?To(t.check,i,y,u-y):Cw(t.check,i,y,u-y)),y=c,t.wrap&4&&(t.flags?f:_A(f))!==t.check){n.msg="incorrect data check",t.mode=gr;break}f=0,h=0}t.mode=wA;case wA:if(t.wrap&&t.flags){for(;h<32;){if(l===0)break e;l--,f+=r[s++]<<h,h+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=gr;break}f=0,h=0}t.mode=bA;case bA:te=mB;break e;case gr:te=B6;break e;case j6:return q6;case z6:default:return ya}return n.next_out=u,n.avail_out=c,n.next_in=s,n.avail_in=l,t.hold=f,t.bits=h,(t.wsize||y!==n.avail_out&&t.mode<gr&&(t.mode<Iy||e!==Zx))&&W6(n,n.output,n.next_out,y-n.avail_out),g-=n.avail_in,y-=n.avail_out,n.total_in+=g,n.total_out+=y,t.total+=y,t.wrap&4&&y&&(n.adler=t.check=t.flags?To(t.check,i,y,n.next_out-y):Cw(t.check,i,y,n.next_out-y)),n.data_type=t.bits+(t.last?64:0)+(t.mode===yl?128:0)+(t.mode===am||t.mode===ky?256:0),(g===0&&y===0||e===Zx)&&te===wc&&(te=yB),te},TB=n=>{if(Sc(n))return ya;let e=n.state;return e.window&&(e.window=null),n.state=null,wc},CB=(n,e)=>{if(Sc(n))return ya;const t=n.state;return(t.wrap&2)===0?ya:(t.head=e,e.done=!1,wc)},NB=(n,e)=>{const t=e.length;let r,i,s;return Sc(n)||(r=n.state,r.wrap!==0&&r.mode!==ag)?ya:r.mode===ag&&(i=1,i=Cw(i,e,t,0),i!==r.check)?B6:(s=W6(n,e,t,t),s?(r.mode=j6,q6):(r.havedict=1,wc))};var RB=G6,kB=V6,IB=H6,LB=xB,PB=$6,MB=EB,OB=TB,DB=CB,UB=NB,FB="pako inflate (from Nodeca project)",Sl={inflateReset:RB,inflateReset2:kB,inflateResetKeep:IB,inflateInit:LB,inflateInit2:PB,inflate:MB,inflateEnd:OB,inflateGetHeader:DB,inflateSetDictionary:UB,inflateInfo:FB};function BB(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var qB=BB;const K6=Object.prototype.toString,{Z_NO_FLUSH:jB,Z_FINISH:zB,Z_OK:Uh,Z_STREAM_END:My,Z_NEED_DICT:Oy,Z_STREAM_ERROR:HB,Z_DATA_ERROR:xA,Z_MEM_ERROR:GB}=M6;function Hh(n){this.options=O6.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sB,this.strm.avail_out=0;let t=Sl.inflateInit2(this.strm,e.windowBits);if(t!==Uh)throw new Error(Nw[t]);if(this.header=new qB,Sl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Rw.string2buf(e.dictionary):K6.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Sl.inflateSetDictionary(this.strm,e.dictionary),t!==Uh)))throw new Error(Nw[t])}Hh.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,u,l;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?zB:jB,K6.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),s=Sl.inflate(t,u),s===Oy&&i&&(s=Sl.inflateSetDictionary(t,i),s===Uh?s=Sl.inflate(t,u):s===xA&&(s=Oy));t.avail_in>0&&s===My&&t.state.wrap>0&&n[t.next_in]!==0;)Sl.inflateReset(t),s=Sl.inflate(t,u);switch(s){case HB:case xA:case Oy:case GB:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||s===My))if(this.options.to==="string"){let c=Rw.utf8border(t.output,t.next_out),f=t.next_out-c,h=Rw.buf2string(t.output,c);t.next_out=f,t.avail_out=r-f,f&&t.output.set(t.output.subarray(c,c+f),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Uh&&l===0)){if(s===My)return s=Sl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Hh.prototype.onData=function(n){this.chunks.push(n)};Hh.prototype.onEnd=function(n){n===Uh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=O6.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function VB(n,e){const t=new Hh(e);if(t.push(n),t.err)throw t.msg||Nw[t.err];return t.result}var $B=Hh,WB=VB,KB={Inflate:$B,inflate:WB};const{Inflate:JB,inflate:YB}=KB;var AA=JB,XB=YB;const J6=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;J6[n]=e}const EA=4294967295;function ZB(n,e,t){let r=n;for(let i=0;i<t;i++)r=J6[(r^e[i])&255]^r>>>8;return r}function QB(n,e){return(ZB(EA,n,e)^EA)>>>0}function TA(n,e,t){const r=n.readUint32(),i=QB(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function Y6(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function X6(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function Z6(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function Q6(n,e,t,r,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=n[s];for(;s<r;s++)e[s]=n[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=n[s]+(t[s]>>1)&255;for(;s<r;s++)e[s]=n[s]+(e[s-i]+t[s]>>1)&255}}function eN(n,e,t,r,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=n[s];for(;s<r;s++)e[s]=n[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=n[s]+t[s]&255;for(;s<r;s++)e[s]=n[s]+e9(e[s-i],t[s],t[s-i])&255}}function e9(n,e,t){const r=n+e-t,i=Math.abs(r-n),s=Math.abs(r-e),u=Math.abs(r-t);return i<=s&&i<=u?n:s<=u?e:t}function t9(n,e,t,r,i,s){switch(n){case 0:Y6(e,t,i);break;case 1:X6(e,t,i,s);break;case 2:Z6(e,t,r,i);break;case 3:Q6(e,t,r,i,s);break;case 4:eN(e,t,r,i,s);break;default:throw new Error(`Unsupported filter: ${n}`)}}const n9=new Uint16Array([255]),r9=new Uint8Array(n9.buffer),i9=r9[0]===255;function s9(n){const{data:e,width:t,height:r,channels:i,depth:s}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*i,c=new Uint8Array(r*t*l);let f=0;for(let h=0;h<7;h++){const g=u[h],y=Math.ceil((t-g.x)/g.xStep),m=Math.ceil((r-g.y)/g.yStep);if(y<=0||m<=0)continue;const E=y*l,_=new Uint8Array(E);for(let R=0;R<m;R++){const b=e[f++],N=e.subarray(f,f+E);f+=E;const C=new Uint8Array(E);t9(b,N,C,_,E,l),_.set(C);for(let A=0;A<y;A++){const F=g.x+A*g.xStep,J=g.y+R*g.yStep;if(!(F>=t||J>=r))for(let V=0;V<l;V++)c[(J*t+F)*l+V]=C[A*l+V]}}}if(s===16){const h=new Uint16Array(c.buffer);if(i9)for(let g=0;g<h.length;g++)h[g]=a9(h[g]);return h}else return c}function a9(n){return(n&255)<<8|n>>8&255}const o9=new Uint16Array([255]),l9=new Uint8Array(o9.buffer),u9=l9[0]===255,c9=new Uint8Array(0);function CA(n){const{data:e,width:t,height:r,channels:i,depth:s}=n,u=Math.ceil(s/8)*i,l=Math.ceil(s/8*i*t),c=new Uint8Array(r*l);let f=c9,h=0,g,y;for(let m=0;m<r;m++){switch(g=e.subarray(h+1,h+1+l),y=c.subarray(m*l,(m+1)*l),e[h]){case 0:Y6(g,y,l);break;case 1:X6(g,y,l,u);break;case 2:Z6(g,y,f,l);break;case 3:Q6(g,y,f,l,u);break;case 4:eN(g,y,f,l,u);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}f=y,h+=l+1}if(s===16){const m=new Uint16Array(c.buffer);if(u9)for(let E=0;E<m.length;E++)m[E]=f9(m[E]);return m}else return c}function f9(n){return(n&255)<<8|n>>8&255}const Dm=Uint8Array.of(137,80,78,71,13,10,26,10);function NA(n){if(!d9(n.readBytes(Dm.length)))throw new Error("wrong PNG signature")}function d9(n){if(n.length<Dm.length)return!1;for(let e=0;e<Dm.length;e++)if(n[e]!==Dm[e])return!1;return!0}const h9="tEXt",p9=0,tN=new TextDecoder("latin1");function m9(n){if(y9(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const g9=/^[\u0000-\u00FF]*$/;function y9(n){if(!g9.test(n))throw new Error("invalid latin1 text")}function v9(n,e,t){const r=nN(e);n[r]=w9(e,t-r.length-1)}function nN(n){for(n.mark();n.readByte()!==p9;);const e=n.offset;n.reset();const t=tN.decode(n.readBytes(e-n.offset-1));return n.skip(1),m9(t),t}function w9(n,e){return tN.decode(n.readBytes(e))}const Bs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Dy={UNKNOWN:-1,DEFLATE:0},RA={UNKNOWN:-1,ADAPTIVE:0},Uy={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},lm={NONE:0,BACKGROUND:1,PREVIOUS:2},Fy={SOURCE:0,OVER:1};class b9 extends Ib{constructor(t,r={}){super(t);Bn(this,"_checkCrc");Bn(this,"_inflator");Bn(this,"_png");Bn(this,"_apng");Bn(this,"_end");Bn(this,"_hasPalette");Bn(this,"_palette");Bn(this,"_hasTransparency");Bn(this,"_transparency");Bn(this,"_compressionMethod");Bn(this,"_filterMethod");Bn(this,"_interlaceMethod");Bn(this,"_colorType");Bn(this,"_isAnimated");Bn(this,"_numberOfFrames");Bn(this,"_numberOfPlays");Bn(this,"_frames");Bn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new AA,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Dy.UNKNOWN,this._filterMethod=RA.UNKNOWN,this._interlaceMethod=Uy.UNKNOWN,this._colorType=Bs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(NA(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(NA(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case h9:v9(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?TA(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?TA(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=_9(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Bs.GREYSCALE:i=1;break;case Bs.TRUECOLOUR:i=3;break;case Bs.INDEXED_COLOUR:i=1;break;case Bs.GREYSCALE_ALPHA:i=2;break;case Bs.TRUECOLOUR_ALPHA:i=4;break;case Bs.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Dy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Bs.GREYSCALE:case Bs.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case Bs.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Bs.UNKNOWN:case Bs.GREYSCALE_ALPHA:case Bs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=nN(this),i=this.readUint8();if(i!==Dy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:XB(s)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=CA({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,i){switch(t.disposeOp){case lm.NONE:break;case lm.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let u=0;u<this._png.width;u++){const l=(s*t.width+u)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case lm.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const i=1<<this._png.depth,s=(u,l)=>{const c=((u+r.yOffset)*this._png.width+r.xOffset+l)*this._png.channels,f=(u*r.width+l)*this._png.channels;return{index:c,frameIndex:f}};switch(r.blendOp){case Fy.SOURCE:for(let u=0;u<r.height;u++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:f}=s(u,l);for(let h=0;h<this._png.channels;h++)t.data[c+h]=r.data[f+h]}break;case Fy.OVER:for(let u=0;u<r.height;u++)for(let l=0;l<r.width;l++){const{index:c,frameIndex:f}=s(u,l);for(let h=0;h<this._png.channels;h++){const g=r.data[f+this._png.channels-1]/i,y=h%(this._png.channels-1)===0?1:r.data[f+h],m=Math.floor(g*y+(1-g)*t.data[c+h]);t.data[c+h]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==RA.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Uy.NO_INTERLACE)this._png.data=CA({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Uy.ADAM7)this._png.data=s9({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:lm.NONE,blendOp:Fy.SOURCE,data:t}),this._inflator=new AA,this._writingDataChunks=!1}}function _9(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var kA;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(kA||(kA={}));function S9(n,e){return new b9(n,e).decode()}var Jt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function By(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var Qn={log:By,warn:function(n){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):By.call(null,arguments))},error:function(n){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):By(n))}};function qy(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){ic(r.response,e,t)},r.onerror=function(){Qn.error("could not download file")},r.send()}function IA(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function um(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var ic=Jt.saveAs||((typeof window>"u"?"undefined":qn(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Jt.URL||Jt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?IA(i.href)?qy(n,e,t):um(i,i.target="_blank"):um(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){um(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(IA(n))qy(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){um(r)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:qn(s)!=="object"&&(Qn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return qy(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Jt.HTMLElement)||Jt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&s)&&(typeof FileReader>"u"?"undefined":qn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=u?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},l.readAsDataURL(n)}else{var c=Jt.URL||Jt.webkitURL,f=c.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function rN(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,u=i.exec(n);u&&(e=s(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+l+c+f}}var Um=Jt.atob.bind(Jt),LA=Jt.btoa.bind(Jt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function jy(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Ui(t,r,i,s,e[0],7,-680876936),s=Ui(s,t,r,i,e[1],12,-389564586),i=Ui(i,s,t,r,e[2],17,606105819),r=Ui(r,i,s,t,e[3],22,-1044525330),t=Ui(t,r,i,s,e[4],7,-176418897),s=Ui(s,t,r,i,e[5],12,1200080426),i=Ui(i,s,t,r,e[6],17,-1473231341),r=Ui(r,i,s,t,e[7],22,-45705983),t=Ui(t,r,i,s,e[8],7,1770035416),s=Ui(s,t,r,i,e[9],12,-1958414417),i=Ui(i,s,t,r,e[10],17,-42063),r=Ui(r,i,s,t,e[11],22,-1990404162),t=Ui(t,r,i,s,e[12],7,1804603682),s=Ui(s,t,r,i,e[13],12,-40341101),i=Ui(i,s,t,r,e[14],17,-1502002290),t=Fi(t,r=Ui(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Fi(s,t,r,i,e[6],9,-1069501632),i=Fi(i,s,t,r,e[11],14,643717713),r=Fi(r,i,s,t,e[0],20,-373897302),t=Fi(t,r,i,s,e[5],5,-701558691),s=Fi(s,t,r,i,e[10],9,38016083),i=Fi(i,s,t,r,e[15],14,-660478335),r=Fi(r,i,s,t,e[4],20,-405537848),t=Fi(t,r,i,s,e[9],5,568446438),s=Fi(s,t,r,i,e[14],9,-1019803690),i=Fi(i,s,t,r,e[3],14,-187363961),r=Fi(r,i,s,t,e[8],20,1163531501),t=Fi(t,r,i,s,e[13],5,-1444681467),s=Fi(s,t,r,i,e[2],9,-51403784),i=Fi(i,s,t,r,e[7],14,1735328473),t=Bi(t,r=Fi(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Bi(s,t,r,i,e[8],11,-2022574463),i=Bi(i,s,t,r,e[11],16,1839030562),r=Bi(r,i,s,t,e[14],23,-35309556),t=Bi(t,r,i,s,e[1],4,-1530992060),s=Bi(s,t,r,i,e[4],11,1272893353),i=Bi(i,s,t,r,e[7],16,-155497632),r=Bi(r,i,s,t,e[10],23,-1094730640),t=Bi(t,r,i,s,e[13],4,681279174),s=Bi(s,t,r,i,e[0],11,-358537222),i=Bi(i,s,t,r,e[3],16,-722521979),r=Bi(r,i,s,t,e[6],23,76029189),t=Bi(t,r,i,s,e[9],4,-640364487),s=Bi(s,t,r,i,e[12],11,-421815835),i=Bi(i,s,t,r,e[15],16,530742520),t=qi(t,r=Bi(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=qi(s,t,r,i,e[7],10,1126891415),i=qi(i,s,t,r,e[14],15,-1416354905),r=qi(r,i,s,t,e[5],21,-57434055),t=qi(t,r,i,s,e[12],6,1700485571),s=qi(s,t,r,i,e[3],10,-1894986606),i=qi(i,s,t,r,e[10],15,-1051523),r=qi(r,i,s,t,e[1],21,-2054922799),t=qi(t,r,i,s,e[8],6,1873313359),s=qi(s,t,r,i,e[15],10,-30611744),i=qi(i,s,t,r,e[6],15,-1560198380),r=qi(r,i,s,t,e[13],21,1309151649),t=qi(t,r,i,s,e[4],6,-145523070),s=qi(s,t,r,i,e[11],10,-1120210379),i=qi(i,s,t,r,e[2],15,718787259),r=qi(r,i,s,t,e[9],21,-343485551),n[0]=hu(t,n[0]),n[1]=hu(r,n[1]),n[2]=hu(i,n[2]),n[3]=hu(s,n[3])}function Mg(n,e,t,r,i,s){return e=hu(hu(e,n),hu(r,s)),hu(e<<i|e>>>32-i,t)}function Ui(n,e,t,r,i,s,u){return Mg(e&t|~e&r,n,e,i,s,u)}function Fi(n,e,t,r,i,s,u){return Mg(e&r|t&~r,n,e,i,s,u)}function Bi(n,e,t,r,i,s,u){return Mg(e^t^r,n,e,i,s,u)}function qi(n,e,t,r,i,s,u){return Mg(t^(e|~r),n,e,i,s,u)}function iN(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)jy(r,x9(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(jy(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,jy(r,i),r}function x9(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var PA="0123456789abcdef".split("");function A9(n){for(var e="",t=0;t<4;t++)e+=PA[n>>8*t+4&15]+PA[n>>8*t&15];return e}function E9(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function kw(n){return iN(n).map(E9).join("")}var T9=(function(n){for(var e=0;e<n.length;e++)n[e]=A9(n[e]);return n.join("")})(iN("hello"))!="5d41402abc4b2a76b9719d911017c592";function hu(n,e){if(T9){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Iw(n,e){var t,r,i,s;if(n!==t){for(var u=(i=n,s=1+(256/n.length|0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var f=0;for(c=0;c<256;c++){var h=l[c];f=(f+h+u.charCodeAt(c))%256,l[c]=l[f],l[f]=h}t=n,r=l}else l=r;var g=e.length,y=0,m=0,E="";for(c=0;c<g;c++)m=(m+(h=l[y=(y+1)%256]))%256,l[y]=l[m],l[m]=h,u=l[(l[y]+l[m])%256],E+=String.fromCharCode(e.charCodeAt(c)^u);return E}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var MA={print:4,modify:8,copy:16,"annot-forms":32};function Of(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(l){if(MA.perm!==void 0)throw new Error("Invalid permission: "+l);i+=MA[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,u),this.P=-(1+(255^i)),this.encryptionKey=kw(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Iw(this.encryptionKey,this.padding)}function Df(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function OA(n){if(qn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var u=e[t][s];try{u[0].apply(n,r)}catch(l){Jt.console&&Qn.error("jsPDF PubSub Error",l.message,l)}u[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function og(n){if(!(this instanceof og))return new og(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function sN(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function lc(n,e,t,r,i){if(!(this instanceof lc))return new lc(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,sN.call(this,r,i)}function qf(n,e,t,r,i){if(!(this instanceof qf))return new qf(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,sN.call(this,r,i)}function It(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],u=[],l=1,c=16,f="S",h=null;qn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),f=n.defaultPathOperation||"S"),u=n.filters||(s===!0?["FlateEncode"]:u),r=r||"mm",t=(""+(t||"P")).toLowerCase();var g=n.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=OA;var E="1.3",_=m.__private__.getPdfVersion=function(){return E};m.__private__.setPdfVersion=function(D){E=D};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return R};var b=m.__private__.getPageFormat=function(D){return R[D]};i=i||"a4";var N="compat",C="advanced",A=N;function F(){this.saveGraphicsState(),oe(new Mt(Nt,0,0,-Nt,0,Na()*Nt).toString()+" cm"),this.setFontSize(this.getFontSize()/Nt),f="n",A=C}function J(){this.restoreGraphicsState(),f="S",A=N}var V=m.__private__.combineFontStyleAndFontWeight=function(D,ue){if(D=="bold"&&ue=="normal"||D=="bold"&&ue==400||D=="normal"&&ue=="italic"||D=="bold"&&ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ue&&(D=ue==400||ue==="normal"?D==="italic"?"italic":"normal":ue!=700&&ue!=="bold"||D!=="normal"?(ue==700?"bold":ue)+""+D:"bold"),D};m.advancedAPI=function(D){var ue=A===N;return ue&&F.call(this),typeof D!="function"||(D(this),ue&&J.call(this)),this},m.compatAPI=function(D){var ue=A===C;return ue&&J.call(this),typeof D!="function"||(D(this),ue&&F.call(this)),this},m.isAdvancedAPI=function(){return A===C};var te,O=function(D){if(A!==C)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},le=m.roundToPrecision=m.__private__.roundToPrecision=function(D,ue){var Ce=e||ue;if(isNaN(D)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(Ce).replace(/0+$/,"")};te=m.hpf=m.__private__.hpf=typeof c=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return le(D,c)}:c==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return le(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return le(D,16)};var Q=m.f2=m.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return le(D,2)},U=m.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return le(D,3)},X=m.scale=m.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return A===N?D*Nt:A===C?D:void 0},M=function(D){return X((function(ue){return A===N?Na()-ue:A===C?ue:void 0})(D))};m.__private__.setPrecision=m.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(e=parseInt(D,10))};var ye,se="00000000000000000000000000000000",ie=m.__private__.getFileId=function(){return se},Se=m.__private__.setFileId=function(D){return se=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(vr=new Of(h.userPermissions,h.userPassword,h.ownerPassword,se)),se};m.setFileId=function(D){return Se(D),this},m.getFileId=function(){return ie()};var me=m.__private__.convertDateToPDFDate=function(D){var ue=D.getTimezoneOffset(),Ce=ue<0?"+":"-",Le=Math.floor(Math.abs(ue/60)),Fe=Math.abs(ue%60),Ze=[Ce,ee(Le),"'",ee(Fe),"'"].join("");return["D:",D.getFullYear(),ee(D.getMonth()+1),ee(D.getDate()),ee(D.getHours()),ee(D.getMinutes()),ee(D.getSeconds()),Ze].join("")},Ne=m.__private__.convertPDFDateToDate=function(D){var ue=parseInt(D.substr(2,4),10),Ce=parseInt(D.substr(6,2),10)-1,Le=parseInt(D.substr(8,2),10),Fe=parseInt(D.substr(10,2),10),Ze=parseInt(D.substr(12,2),10),st=parseInt(D.substr(14,2),10);return new Date(ue,Ce,Le,Fe,Ze,st,0)},K=m.__private__.setCreationDate=function(D){var ue;if(D===void 0&&(D=new Date),D instanceof Date)ue=me(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ue=D}return ye=ue},L=m.__private__.getCreationDate=function(D){var ue=ye;return D==="jsDate"&&(ue=Ne(ye)),ue};m.setCreationDate=function(D){return K(D),this},m.getCreationDate=function(D){return L(D)};var $,ee=m.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},pe=m.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},ae=0,B=[],j=[],de=0,fe=[],re=[],he=!1,ke=j;m.__private__.setCustomOutputDestination=function(D){he=!0,ke=D};var q=function(D){he||(ke=D)};m.__private__.resetCustomOutputDestination=function(){he=!1,ke=j};var oe=m.__private__.out=function(D){return D=D.toString(),de+=D.length+1,ke.push(D),ke},Y=m.__private__.write=function(D){return oe(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},I=m.__private__.getArrayBuffer=function(D){for(var ue=D.length,Ce=new ArrayBuffer(ue),Le=new Uint8Array(Ce);ue--;)Le[ue]=D.charCodeAt(ue);return Ce},P=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return P};var H=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(D){return H=A===C?D/Nt:D,this};var be,ne=m.__private__.getFontSize=m.getFontSize=function(){return A===N?H:H*Nt},we=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(D){return we=D,this},m.__private__.getR2L=m.getR2L=function(){return we};var Re,De=m.__private__.setZoomMode=function(D){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))be=D;else if(isNaN(D)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');be=D}else be=parseInt(D,10)};m.__private__.getZoomMode=function(){return be};var Ue,Ke=m.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');Re=D};m.__private__.getPageMode=function(){return Re};var at=m.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');Ue=D};m.__private__.getLayoutMode=function(){return Ue},m.__private__.setDisplayMode=m.setDisplayMode=function(D,ue,Ce){return De(D),at(ue),Ke(Ce),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(D){if(Object.keys(ot).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[D]},m.__private__.getDocumentProperties=function(){return ot},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(D){for(var ue in ot)ot.hasOwnProperty(ue)&&D[ue]&&(ot[ue]=D[ue]);return this},m.__private__.setDocumentProperty=function(D,ue){if(Object.keys(ot).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[D]=ue};var pt,Nt,yt,bn,Rt,ht={},Pt={},Ht=[],Dt={},ln={},Wt={},jn={},Jn=null,cn=0,kt=[],yn=new OA(m),xs=n.hotfixes||[],ci={},Ws={},ts=[],Mt=function D(ue,Ce,Le,Fe,Ze,st){if(!(this instanceof D))return new D(ue,Ce,Le,Fe,Ze,st);isNaN(ue)&&(ue=1),isNaN(Ce)&&(Ce=0),isNaN(Le)&&(Le=0),isNaN(Fe)&&(Fe=1),isNaN(Ze)&&(Ze=0),isNaN(st)&&(st=0),this._matrix=[ue,Ce,Le,Fe,Ze,st]};Object.defineProperty(Mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(Mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(Mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(Mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(Mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(Mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(Mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(Mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(Mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(Mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(Mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(Mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(Mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Mt.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(te).join(D)},Mt.prototype.multiply=function(D){var ue=D.sx*this.sx+D.shy*this.shx,Ce=D.sx*this.shy+D.shy*this.sy,Le=D.shx*this.sx+D.sy*this.shx,Fe=D.shx*this.shy+D.sy*this.sy,Ze=D.tx*this.sx+D.ty*this.shx+this.tx,st=D.tx*this.shy+D.ty*this.sy+this.ty;return new Mt(ue,Ce,Le,Fe,Ze,st)},Mt.prototype.decompose=function(){var D=this.sx,ue=this.shy,Ce=this.shx,Le=this.sy,Fe=this.tx,Ze=this.ty,st=Math.sqrt(D*D+ue*ue),wt=(D/=st)*Ce+(ue/=st)*Le;Ce-=D*wt,Le-=ue*wt;var Et=Math.sqrt(Ce*Ce+Le*Le);return wt/=Et,D*(Le/=Et)<ue*(Ce/=Et)&&(D=-D,ue=-ue,wt=-wt,st=-st),{scale:new Mt(st,0,0,Et,0,0),translate:new Mt(1,0,0,1,Fe,Ze),rotate:new Mt(D,ue,-ue,D,0,0),skew:new Mt(1,0,wt,1,0,0)}},Mt.prototype.toString=function(D){return this.join(" ")},Mt.prototype.inversed=function(){var D=this.sx,ue=this.shy,Ce=this.shx,Le=this.sy,Fe=this.tx,Ze=this.ty,st=1/(D*Le-ue*Ce),wt=Le*st,Et=-ue*st,Vt=-Ce*st,Xt=D*st;return new Mt(wt,Et,Vt,Xt,-wt*Fe-Vt*Ze,-Et*Fe-Xt*Ze)},Mt.prototype.applyToPoint=function(D){var ue=D.x*this.sx+D.y*this.shx+this.tx,Ce=D.x*this.shy+D.y*this.sy+this.ty;return new Zs(ue,Ce)},Mt.prototype.applyToRectangle=function(D){var ue=this.applyToPoint(D),Ce=this.applyToPoint(new Zs(D.x+D.w,D.y+D.h));return new Ea(ue.x,ue.y,Ce.x-ue.x,Ce.y-ue.y)},Mt.prototype.clone=function(){var D=this.sx,ue=this.shy,Ce=this.shx,Le=this.sy,Fe=this.tx,Ze=this.ty;return new Mt(D,ue,Ce,Le,Fe,Ze)},m.Matrix=Mt;var va=m.matrixMult=function(D,ue){return ue.multiply(D)},Ks=new Mt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Ks;var zi=function(D,ue){if(!ln[D]){var Ce=(ue instanceof lc?"Sh":"P")+(Object.keys(Dt).length+1).toString(10);ue.id=Ce,ln[D]=Ce,Dt[Ce]=ue,yn.publish("addPattern",ue)}};m.ShadingPattern=lc,m.TilingPattern=qf,m.addShadingPattern=function(D,ue){return O("addShadingPattern()"),zi(D,ue),this},m.beginTilingPattern=function(D){O("beginTilingPattern()"),$o(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},m.endTilingPattern=function(D,ue){O("endTilingPattern()"),ue.stream=re[$].join(`
`),zi(D,ue),yn.publish("endTilingPattern",ue),ts.pop().restore()};var Hi,er=m.__private__.newObject=function(){var D=Er();return Gr(D,!0),D},Er=m.__private__.newObjectDeferred=function(){return ae++,B[ae]=function(){return de},ae},Gr=function(D,ue){return ue=typeof ue=="boolean"&&ue,B[D]=de,ue&&oe(D+" 0 obj"),D},ro=m.__private__.newAdditionalObject=function(){var D={objId:Er(),content:""};return fe.push(D),D},_i=Er(),On=Er(),nr=m.__private__.decodeColorString=function(D){var ue=D.split(" ");if(ue.length!==2||ue[1]!=="g"&&ue[1]!=="G")ue.length!==5||ue[4]!=="k"&&ue[4]!=="K"||(ue=[(1-ue[0])*(1-ue[3]),(1-ue[1])*(1-ue[3]),(1-ue[2])*(1-ue[3]),"r"]);else{var Ce=parseFloat(ue[0]);ue=[Ce,Ce,Ce,"r"]}for(var Le="#",Fe=0;Fe<3;Fe++)Le+=("0"+Math.floor(255*parseFloat(ue[Fe])).toString(16)).slice(-2);return Le},fi=m.__private__.encodeColorString=function(D){var ue;typeof D=="string"&&(D={ch1:D});var Ce=D.ch1,Le=D.ch2,Fe=D.ch3,Ze=D.ch4,st=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var wt=new rN(Ce);if(wt.ok)Ce=wt.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var Et=parseInt(Ce.substr(1),16);Ce=Et>>16&255,Le=Et>>8&255,Fe=255&Et}if(Le===void 0||Ze===void 0&&Ce===Le&&Le===Fe)ue=typeof Ce=="string"?Ce+" "+st[0]:D.precision===2?Q(Ce/255)+" "+st[0]:U(Ce/255)+" "+st[0];else if(Ze===void 0||qn(Ze)==="object"){if(Ze&&!isNaN(Ze.a)&&Ze.a===0)return["1.","1.","1.",st[1]].join(" ");ue=typeof Ce=="string"?[Ce,Le,Fe,st[1]].join(" "):D.precision===2?[Q(Ce/255),Q(Le/255),Q(Fe/255),st[1]].join(" "):[U(Ce/255),U(Le/255),U(Fe/255),st[1]].join(" ")}else ue=typeof Ce=="string"?[Ce,Le,Fe,Ze,st[2]].join(" "):D.precision===2?[Q(Ce),Q(Le),Q(Fe),Q(Ze),st[2]].join(" "):[U(Ce),U(Le),U(Fe),U(Ze),st[2]].join(" ");return ue},Gi=m.__private__.getFilters=function(){return u},ns=m.__private__.putStream=function(D){var ue=(D=D||{}).data||"",Ce=D.filters||Gi(),Le=D.alreadyAppliedFilters||[],Fe=D.addLength1||!1,Ze=ue.length,st=D.objectId,wt=function(Dr){return Dr};if(h!==null&&st===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(wt=vr.encryptor(st,0));var Et={};Ce===!0&&(Ce=["FlateEncode"]);var Vt=D.additionalKeyValues||[],Xt=(Et=It.API.processDataByFilters!==void 0?It.API.processDataByFilters(ue,Ce):{data:ue,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(Et.data.length!==0&&(Vt.push({key:"Length",value:Et.data.length}),Fe===!0&&Vt.push({key:"Length1",value:Ze})),Xt.length!=0)if(Xt.split("/").length-1==1)Vt.push({key:"Filter",value:Xt});else{Vt.push({key:"Filter",value:"["+Xt+"]"});for(var En=0;En<Vt.length;En+=1)if(Vt[En].key==="DecodeParms"){for(var rr=[],wr=0;wr<Et.reverseChain.split("/").length-1;wr+=1)rr.push("null");rr.push(Vt[En].value),Vt[En].value="["+rr.join(" ")+"]"}}oe("<<");for(var zn=0;zn<Vt.length;zn++)oe("/"+Vt[zn].key+" "+Vt[zn].value);oe(">>"),Et.data.length!==0&&(oe("stream"),oe(wt(Et.data)),oe("endstream"))},Bo=m.__private__.putPage=function(D){var ue=D.number,Ce=D.data,Le=D.objId,Fe=D.contentsObjId;Gr(Le,!0),oe("<</Type /Page"),oe("/Parent "+D.rootDictionaryObjId+" 0 R"),oe("/Resources "+D.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(te(D.mediaBox.bottomLeftX))+" "+parseFloat(te(D.mediaBox.bottomLeftY))+" "+te(D.mediaBox.topRightX)+" "+te(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&oe("/CropBox ["+te(D.cropBox.bottomLeftX)+" "+te(D.cropBox.bottomLeftY)+" "+te(D.cropBox.topRightX)+" "+te(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&oe("/BleedBox ["+te(D.bleedBox.bottomLeftX)+" "+te(D.bleedBox.bottomLeftY)+" "+te(D.bleedBox.topRightX)+" "+te(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&oe("/TrimBox ["+te(D.trimBox.bottomLeftX)+" "+te(D.trimBox.bottomLeftY)+" "+te(D.trimBox.topRightX)+" "+te(D.trimBox.topRightY)+"]"),D.artBox!==null&&oe("/ArtBox ["+te(D.artBox.bottomLeftX)+" "+te(D.artBox.bottomLeftY)+" "+te(D.artBox.topRightX)+" "+te(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&oe("/UserUnit "+D.userUnit),yn.publish("putPage",{objId:Le,pageContext:kt[ue],pageNumber:ue,page:Ce}),oe("/Contents "+Fe+" 0 R"),oe(">>"),oe("endobj");var Ze=Ce.join(`
`);return A===C&&(Ze+=`
Q`),Gr(Fe,!0),ns({data:Ze,filters:Gi(),objectId:Fe}),oe("endobj"),Le},As=m.__private__.putPages=function(){var D,ue,Ce=[];for(D=1;D<=cn;D++)kt[D].objId=Er(),kt[D].contentsObjId=Er();for(D=1;D<=cn;D++)Ce.push(Bo({number:D,data:re[D],objId:kt[D].objId,contentsObjId:kt[D].contentsObjId,mediaBox:kt[D].mediaBox,cropBox:kt[D].cropBox,bleedBox:kt[D].bleedBox,trimBox:kt[D].trimBox,artBox:kt[D].artBox,userUnit:kt[D].userUnit,rootDictionaryObjId:_i,resourceDictionaryObjId:On}));Gr(_i,!0),oe("<</Type /Pages");var Le="/Kids [";for(ue=0;ue<cn;ue++)Le+=Ce[ue]+" 0 R ";oe(Le+"]"),oe("/Count "+cn),oe(">>"),oe("endobj"),yn.publish("postPutPages")},Es=function(D){yn.publish("putFont",{font:D,out:oe,newObject:er,putStream:ns}),D.isAlreadyPutted!==!0&&(D.objectNumber=er(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+Df(D.postScriptName)),oe("/Subtype /Type1"),typeof D.encoding=="string"&&oe("/Encoding /"+D.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},io=function(D){D.objectNumber=er();var ue=[];ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Form"}),ue.push({key:"BBox",value:"["+[te(D.x),te(D.y),te(D.x+D.width),te(D.y+D.height)].join(" ")+"]"}),ue.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var Ce=D.pages[1].join(`
`);ns({data:Ce,additionalKeyValues:ue,objectId:D.objectNumber}),oe("endobj")},Ts=function(D,ue){ue||(ue=21);var Ce=er(),Le=(function(st,wt){var Et,Vt=[],Xt=1/(wt-1);for(Et=0;Et<1;Et+=Xt)Vt.push(Et);if(Vt.push(1),st[0].offset!=0){var En={offset:0,color:st[0].color};st.unshift(En)}if(st[st.length-1].offset!=1){var rr={offset:1,color:st[st.length-1].color};st.push(rr)}for(var wr="",zn=0,Dr=0;Dr<Vt.length;Dr++){for(Et=Vt[Dr];Et>st[zn+1].offset;)zn++;var Tr=st[zn].offset,Zr=(Et-Tr)/(st[zn+1].offset-Tr),is=st[zn].color,Li=st[zn+1].color;wr+=pe(Math.round((1-Zr)*is[0]+Zr*Li[0]).toString(16))+pe(Math.round((1-Zr)*is[1]+Zr*Li[1]).toString(16))+pe(Math.round((1-Zr)*is[2]+Zr*Li[2]).toString(16))}return wr.trim()})(D.colors,ue),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+ue+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ns({data:Le,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),oe("endobj"),D.objectNumber=er(),oe("<< /ShadingType "+D.type),oe("/ColorSpace /DeviceRGB");var Ze="/Coords ["+te(parseFloat(D.coords[0]))+" "+te(parseFloat(D.coords[1]))+" ";D.type===2?Ze+=te(parseFloat(D.coords[2]))+" "+te(parseFloat(D.coords[3])):Ze+=te(parseFloat(D.coords[2]))+" "+te(parseFloat(D.coords[3]))+" "+te(parseFloat(D.coords[4]))+" "+te(parseFloat(D.coords[5])),oe(Ze+="]"),D.matrix&&oe("/Matrix ["+D.matrix.toString()+"]"),oe("/Function "+Ce+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},Cs=function(D,ue){var Ce=Er(),Le=er();ue.push({resourcesOid:Ce,objectOid:Le}),D.objectNumber=Le;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+D.boundingBox.map(te).join(" ")+"]"}),Fe.push({key:"XStep",value:te(D.xStep)}),Fe.push({key:"YStep",value:te(D.yStep)}),Fe.push({key:"Resources",value:Ce+" 0 R"}),D.matrix&&Fe.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),ns({data:D.stream,additionalKeyValues:Fe,objectId:D.objectNumber}),oe("endobj")},qo=function(D){for(var ue in D.objectNumber=er(),oe("<<"),D)switch(ue){case"opacity":oe("/ca "+Q(D[ue]));break;case"stroke-opacity":oe("/CA "+Q(D[ue]))}oe(">>"),oe("endobj")},Js=function(D){Gr(D.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ue in oe("/Font <<"),ht)ht.hasOwnProperty(ue)&&(g===!1||g===!0&&y.hasOwnProperty(ue))&&oe("/"+ue+" "+ht[ue].objectNumber+" 0 R");oe(">>")})(),(function(){if(Object.keys(Dt).length>0){for(var ue in oe("/Shading <<"),Dt)Dt.hasOwnProperty(ue)&&Dt[ue]instanceof lc&&Dt[ue].objectNumber>=0&&oe("/"+ue+" "+Dt[ue].objectNumber+" 0 R");yn.publish("putShadingPatternDict"),oe(">>")}})(),(function(ue){if(Object.keys(Dt).length>0){for(var Ce in oe("/Pattern <<"),Dt)Dt.hasOwnProperty(Ce)&&Dt[Ce]instanceof m.TilingPattern&&Dt[Ce].objectNumber>=0&&Dt[Ce].objectNumber<ue&&oe("/"+Ce+" "+Dt[Ce].objectNumber+" 0 R");yn.publish("putTilingPatternDict"),oe(">>")}})(D.objectOid),(function(){if(Object.keys(Wt).length>0){var ue;for(ue in oe("/ExtGState <<"),Wt)Wt.hasOwnProperty(ue)&&Wt[ue].objectNumber>=0&&oe("/"+ue+" "+Wt[ue].objectNumber+" 0 R");yn.publish("putGStateDict"),oe(">>")}})(),(function(){for(var ue in oe("/XObject <<"),ci)ci.hasOwnProperty(ue)&&ci[ue].objectNumber>=0&&oe("/"+ue+" "+ci[ue].objectNumber+" 0 R");yn.publish("putXobjectDict"),oe(">>")})(),oe(">>"),oe("endobj")},yr=function(D){Pt[D.fontName]=Pt[D.fontName]||{},Pt[D.fontName][D.fontStyle]=D.id},bu=function(D,ue,Ce,Le,Fe){var Ze={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:D,fontName:ue,fontStyle:Ce,encoding:Le,isStandardFont:Fe||!1,metadata:{}};return yn.publish("addFont",{font:Ze,instance:this}),ht[Ze.id]=Ze,yr(Ze),Ze.id},Vi=m.__private__.pdfEscape=m.pdfEscape=function(D,ue){return(function(Ce,Le){var Fe,Ze,st,wt,Et,Vt,Xt,En,rr;if(st=(Le=Le||{}).sourceEncoding||"Unicode",Et=Le.outputEncoding,(Le.autoencode||Et)&&ht[pt].metadata&&ht[pt].metadata[st]&&ht[pt].metadata[st].encoding&&(wt=ht[pt].metadata[st].encoding,!Et&&ht[pt].encoding&&(Et=ht[pt].encoding),!Et&&wt.codePages&&(Et=wt.codePages[0]),typeof Et=="string"&&(Et=wt[Et]),Et)){for(Xt=!1,Vt=[],Fe=0,Ze=Ce.length;Fe<Ze;Fe++)(En=Et[Ce.charCodeAt(Fe)])?Vt.push(String.fromCharCode(En)):Vt.push(Ce[Fe]),Vt[Fe].charCodeAt(0)>>8&&(Xt=!0);Ce=Vt.join("")}for(Fe=Ce.length;Xt===void 0&&Fe!==0;)Ce.charCodeAt(Fe-1)>>8&&(Xt=!0),Fe--;if(!Xt)return Ce;for(Vt=Le.noBOM?[]:[254,255],Fe=0,Ze=Ce.length;Fe<Ze;Fe++){if((rr=(En=Ce.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+Ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(rr),Vt.push(En-(rr<<8))}return String.fromCharCode.apply(void 0,Vt)})(D,ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ns=m.__private__.beginPage=function(D){re[++cn]=[],kt[cn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},Su(cn),q(re[$])},wa=function(D,ue){var Ce,Le,Fe;switch(t=ue||t,typeof D=="string"&&(Ce=b(D.toLowerCase()),Array.isArray(Ce)&&(Le=Ce[0],Fe=Ce[1])),Array.isArray(D)&&(Le=D[0]*Nt,Fe=D[1]*Nt),isNaN(Le)&&(Le=i[0],Fe=i[1]),(Le>14400||Fe>14400)&&(Qn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Fe=Math.min(14400,Fe)),i=[Le,Fe],t.substr(0,1)){case"l":Fe>Le&&(i=[Fe,Le]);break;case"p":Le>Fe&&(i=[Fe,Le])}Ns(i),so(zo),oe(Ki),Nl!==0&&oe(Nl+" J"),Vr!==0&&oe(Vr+" j"),yn.publish("addPage",{pageNumber:cn})},_u=function(D){D>0&&D<=cn&&(re.splice(D,1),kt.splice(D,1),cn--,$>cn&&($=cn),this.setPage($))},Su=function(D){D>0&&D<=cn&&($=D)},xu=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return re.length-1},Tc=function(D,ue,Ce){var Le,Fe=void 0;return Ce=Ce||{},D=D!==void 0?D:ht[pt].fontName,ue=ue!==void 0?ue:ht[pt].fontStyle,Le=D.toLowerCase(),Pt[Le]!==void 0&&Pt[Le][ue]!==void 0?Fe=Pt[Le][ue]:Pt[D]!==void 0&&Pt[D][ue]!==void 0?Fe=Pt[D][ue]:Ce.disableWarning===!1&&Qn.warn("Unable to look up font label for font '"+D+"', '"+ue+"'. Refer to getFontList() for available fonts."),Fe||Ce.noFallback||(Fe=Pt.times[ue])==null&&(Fe=Pt.times.normal),Fe},ba=m.__private__.putInfo=function(){var D=er(),ue=function(Le){return Le};for(var Ce in h!==null&&(ue=vr.encryptor(D,0)),oe("<<"),oe("/Producer ("+Vi(ue("jsPDF "+It.version))+")"),ot)ot.hasOwnProperty(Ce)&&ot[Ce]&&oe("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+Vi(ue(ot[Ce]))+")");oe("/CreationDate ("+Vi(ue(ye))+")"),oe(">>"),oe("endobj")},Tl=m.__private__.putCatalog=function(D){var ue=(D=D||{}).rootDictionaryObjId||_i;switch(er(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+ue+" 0 R"),be||(be="fullwidth"),be){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+be;Ce.substr(Ce.length-1)==="%"&&(be=parseInt(be)/100),typeof be=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+Q(be)+"]")}switch(Ue||(Ue="continuous"),Ue){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}Re&&oe("/PageMode /"+Re),yn.publish("putCatalog"),oe(">>"),oe("endobj")},Mn=m.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(ae+1)),oe("/Root "+ae+" 0 R"),oe("/Info "+(ae-1)+" 0 R"),h!==null&&oe("/Encrypt "+vr.oid+" 0 R"),oe("/ID [ <"+se+"> <"+se+"> ]"),oe(">>")},Si=m.__private__.putHeader=function(){oe("%PDF-"+E),oe("%ºß¬à")},Au=m.__private__.putXRef=function(){var D="0000000000";oe("xref"),oe("0 "+(ae+1)),oe("0000000000 65535 f ");for(var ue=1;ue<=ae;ue++)typeof B[ue]=="function"?oe((D+B[ue]()).slice(-10)+" 00000 n "):B[ue]!==void 0?oe((D+B[ue]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},_a=m.__private__.buildDocument=function(){var D;ae=0,de=0,j=[],B=[],fe=[],_i=Er(),On=Er(),q(j),yn.publish("buildDocument"),Si(),As(),(function(){yn.publish("putAdditionalObjects");for(var Ce=0;Ce<fe.length;Ce++){var Le=fe[Ce];Gr(Le.objId,!0),oe(Le.content),oe("endobj")}yn.publish("postPutAdditionalObjects")})(),D=[],(function(){for(var Ce in ht)ht.hasOwnProperty(Ce)&&(g===!1||g===!0&&y.hasOwnProperty(Ce))&&Es(ht[Ce])})(),(function(){var Ce;for(Ce in Wt)Wt.hasOwnProperty(Ce)&&qo(Wt[Ce])})(),(function(){for(var Ce in ci)ci.hasOwnProperty(Ce)&&io(ci[Ce])})(),(function(Ce){var Le;for(Le in Dt)Dt.hasOwnProperty(Le)&&(Dt[Le]instanceof lc?Ts(Dt[Le]):Dt[Le]instanceof qf&&Cs(Dt[Le],Ce))})(D),yn.publish("putResources"),D.forEach(Js),Js({resourcesOid:On,objectOid:Number.MAX_SAFE_INTEGER}),yn.publish("postPutResources"),h!==null&&(vr.oid=er(),oe("<<"),oe("/Filter /Standard"),oe("/V "+vr.v),oe("/R "+vr.r),oe("/U <"+vr.toHexString(vr.U)+">"),oe("/O <"+vr.toHexString(vr.O)+">"),oe("/P "+vr.P),oe(">>"),oe("endobj")),ba(),Tl();var ue=de;return Au(),Mn(),oe("startxref"),oe(""+ue),oe("%%EOF"),q(re[$]),j.join(`
`)},Sa=m.__private__.getBlob=function(D){return new Blob([I(D)],{type:"application/pdf"})},rs=m.output=m.__private__.output=(Hi=function(D,ue){switch(typeof(ue=ue||{})=="string"?ue={filename:ue}:ue.filename=ue.filename||"generated.pdf",D){case void 0:return _a();case"save":m.save(ue.filename);break;case"arraybuffer":return I(_a());case"blob":return Sa(_a());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(Sa(_a()))||void 0;Qn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",Le=_a();try{Ce=LA(Le)}catch{Ce=LA(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+ue.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ue.pdfObjectUrl&&(Fe=ue.pdfObjectUrl,Ze="");var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+Ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ue)+");<\/script></body></html>",wt=Jt.open();return wt!==null&&wt.document.write(st),wt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ue.filename+'" width="500px" height="400px" /></body></html>',Vt=Jt.open();if(Vt!==null){Vt.document.write(Et);var Xt=this;Vt.document.documentElement.querySelector("#pdfViewer").onload=function(){Vt.document.title=ue.filename,Vt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Xt.output("bloburl"))}}return Vt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ue)+'"></iframe></body></html>',rr=Jt.open();if(rr!==null&&(rr.document.write(En),rr.document.title=ue.filename),rr||typeof safari>"u")return rr;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",ue);default:return null}},Hi.foo=function(){try{return Hi.apply(this,arguments)}catch(Ce){var D=Ce.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var ue="Error in function "+D.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!Jt.console)throw new Error(ue);Jt.console.error(ue,Ce),Jt.alert&&alert(ue)}},Hi.foo.bar=Hi,Hi.foo),Ys=function(D){return Array.isArray(xs)===!0&&xs.indexOf(D)>-1};switch(r){case"pt":Nt=1;break;case"mm":Nt=72/25.4;break;case"cm":Nt=72/2.54;break;case"in":Nt=72;break;case"px":Nt=Ys("px_scaling")==1?.75:96/72;break;case"pc":case"em":Nt=12;break;case"ex":Nt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Nt=r}var vr=null;K(),Se();var di=m.__private__.getPageInfo=m.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[D].objId,pageNumber:D,pageContext:kt[D]}},Eu=m.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ue in kt)if(kt[ue].objId===D)break;return di(ue)},Cc=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:kt[$].objId,pageNumber:$,pageContext:kt[$]}};m.addPage=function(){return wa.apply(this,arguments),this},m.setPage=function(){return Su.apply(this,arguments),q.call(this,re[$]),this},m.insertPage=function(D){return this.addPage(),this.movePage($,D),this},m.movePage=function(D,ue){var Ce,Le;if(D>ue){Ce=re[D],Le=kt[D];for(var Fe=D;Fe>ue;Fe--)re[Fe]=re[Fe-1],kt[Fe]=kt[Fe-1];re[ue]=Ce,kt[ue]=Le,this.setPage(ue)}else if(D<ue){Ce=re[D],Le=kt[D];for(var Ze=D;Ze<ue;Ze++)re[Ze]=re[Ze+1],kt[Ze]=kt[Ze+1];re[ue]=Ce,kt[ue]=Le,this.setPage(ue)}return this},m.deletePage=function(){return _u.apply(this,arguments),this},m.__private__.text=m.text=function(D,ue,Ce,Le,Fe){var Ze,st,wt,Et,Vt,Xt,En,rr,wr,zn=(Le=Le||{}).scope||this;if(typeof D=="number"&&typeof ue=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var Dr=Ce;Ce=ue,ue=D,D=Dr}if(arguments[3]instanceof Mt==0?(wt=arguments[4],Et=arguments[5],qn(En=arguments[3])==="object"&&En!==null||(typeof wt=="string"&&(Et=wt,wt=null),typeof En=="string"&&(Et=En,En=null),typeof En=="number"&&(wt=En,En=null),Le={flags:En,angle:wt,align:Et})):(O("The transform parameter of text() with a Matrix value"),wr=Fe),isNaN(ue)||isNaN(Ce)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return zn;var Tr,Zr="",is=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:xa,Li=zn.internal.scaleFactor;function Oc(Tn){return Tn=Tn.split("	").join(Array(Le.TabLen||9).join(" ")),Vi(Tn,En)}function kl(Tn){for(var vn,Hn=Tn.concat(),_r=[],oa=Hn.length;oa--;)typeof(vn=Hn.shift())=="string"?_r.push(vn):Array.isArray(Tn)&&(vn.length===1||vn[1]===void 0&&vn[2]===void 0)?_r.push(vn[0]):_r.push([vn[0],vn[1],vn[2]]);return _r}function Ko(Tn,vn){var Hn;if(typeof Tn=="string")Hn=vn(Tn)[0];else if(Array.isArray(Tn)){for(var _r,oa,Ms=Tn.concat(),Xo=[],Du=Ms.length;Du--;)typeof(_r=Ms.shift())=="string"?Xo.push(vn(_r)[0]):Array.isArray(_r)&&typeof _r[0]=="string"&&(oa=vn(_r[0],_r[1],_r[2]),Xo.push([oa[0],oa[1],oa[2]]));Hn=Xo}return Hn}var ea=!1,Is=!0;if(typeof D=="string")ea=!0;else if(Array.isArray(D)){var Jo=D.concat();st=[];for(var oo,Qr=Jo.length;Qr--;)(typeof(oo=Jo.shift())!="string"||Array.isArray(oo)&&typeof oo[0]!="string")&&(Is=!1);ea=Is}if(ea===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var lo=H/zn.internal.scaleFactor,uo=lo*(is-1);switch(Le.baseline){case"bottom":Ce-=uo;break;case"top":Ce+=lo-uo;break;case"hanging":Ce+=lo-2*uo;break;case"middle":Ce+=lo/2-uo}if((Xt=Le.maxWidth||0)>0&&(typeof D=="string"?D=zn.splitTextToSize(D,Xt):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(Tn,vn){return Tn.concat(zn.splitTextToSize(vn,Xt))},[]))),Ze={text:D,x:ue,y:Ce,options:Le,mutex:{pdfEscape:Vi,activeFontKey:pt,fonts:ht,activeFontSize:H}},yn.publish("preProcessText",Ze),D=Ze.text,wt=(Le=Ze.options).angle,wr instanceof Mt==0&&wt&&typeof wt=="number"){wt*=Math.PI/180,Le.rotationDirection===0&&(wt=-wt),A===C&&(wt=-wt);var Il=Math.cos(wt),ta=Math.sin(wt);wr=new Mt(Il,ta,-ta,Il,0,0)}else wt&&wt instanceof Mt&&(wr=wt);A!==C||wr||(wr=Ks),(Vt=Le.charSpace||Aa)!==void 0&&(Zr+=te(X(Vt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(rr=Le.horizontalScale)!==void 0&&(Zr+=te(100*rr)+` Tz
`),Le.lang;var fr=-1,Ra=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Ll=zn.internal.getCurrentPageInfo().pageContext;switch(Ra){case 0:case!1:case"fill":fr=0;break;case 1:case!0:case"stroke":fr=1;break;case 2:case"fillThenStroke":fr=2;break;case 3:case"invisible":fr=3;break;case 4:case"fillAndAddForClipping":fr=4;break;case 5:case"strokeAndAddPathForClipping":fr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fr=6;break;case 7:case"addToPathForClipping":fr=7}var Mu=Ll.usedRenderingMode!==void 0?Ll.usedRenderingMode:-1;fr!==-1?Zr+=fr+` Tr
`:Mu!==-1&&(Zr+=`0 Tr
`),fr!==-1&&(Ll.usedRenderingMode=fr),Et=Le.align||"left";var Yi,Ls=H*is,ka=zn.internal.pageSize.getWidth(),Ou=ht[pt];Vt=Le.charSpace||Aa,Xt=Le.maxWidth||0,En=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Ps=[],co=function(Tn){return zn.getStringUnitWidth(Tn,{font:Ou,charSpace:Vt,fontSize:H,doKerning:!1})*H/Li};if(Object.prototype.toString.call(D)==="[object Array]"){var Pi;st=kl(D),Et!=="left"&&(Yi=st.map(co));var Ai,na=0;if(Et==="right"){ue-=Yi[0],D=[],Qr=st.length;for(var ra=0;ra<Qr;ra++)ra===0?(Ai=Wi(ue),Pi=Xr(Ce)):(Ai=X(na-Yi[ra]),Pi=-Ls),D.push([st[ra],Ai,Pi]),na=Yi[ra]}else if(Et==="center"){ue-=Yi[0]/2,D=[],Qr=st.length;for(var Ia=0;Ia<Qr;Ia++)Ia===0?(Ai=Wi(ue),Pi=Xr(Ce)):(Ai=X((na-Yi[Ia])/2),Pi=-Ls),D.push([st[Ia],Ai,Pi]),na=Yi[Ia]}else if(Et==="left"){D=[],Qr=st.length;for(var Pl=0;Pl<Qr;Pl++)D.push(st[Pl])}else if(Et==="justify"&&Ou.encoding==="Identity-H"){D=[],Qr=st.length,Xt=Xt!==0?Xt:ka;for(var Ml=0,br=0;br<Qr;br++)if(Pi=br===0?Xr(Ce):-Ls,Ai=br===0?Wi(ue):Ml,br<Qr-1){var Dc=X((Xt-Yi[br])/(st[br].split(" ").length-1)),ia=st[br].split(" ");D.push([ia[0]+" ",Ai,Pi]),Ml=0;for(var sa=1;sa<ia.length;sa++){var ei=(co(ia[sa-1]+" "+ia[sa])-co(ia[sa]))*Li+Dc;sa==ia.length-1?D.push([ia[sa],ei,0]):D.push([ia[sa]+" ",ei,0]),Ml-=ei}}else D.push([st[br],Ai,Pi]);D.push(["",Ml,0])}else{if(Et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],Qr=st.length,Xt=Xt!==0?Xt:ka,br=0;br<Qr;br++){Pi=br===0?Xr(Ce):-Ls,Ai=br===0?Wi(ue):0;var La=st[br].split(" ").length-1,Ol=La>0?(Xt-Yi[br])/La:0;br<Qr-1?Ps.push(te(X(Ol))):Ps.push(0),D.push([st[br],Ai,Pi])}}}(typeof Le.R2L=="boolean"?Le.R2L:we)===!0&&(D=Ko(D,function(Tn,vn,Hn){return[Tn.split("").reverse().join(""),vn,Hn]})),Ze={text:D,x:ue,y:Ce,options:Le,mutex:{pdfEscape:Vi,activeFontKey:pt,fonts:ht,activeFontSize:H}},yn.publish("postProcessText",Ze),D=Ze.text,Tr=Ze.mutex.isHex||!1;var Dl=ht[pt].encoding;Dl!=="WinAnsiEncoding"&&Dl!=="StandardEncoding"||(D=Ko(D,function(Tn,vn,Hn){return[Oc(Tn),vn,Hn]})),st=kl(D),D=[];for(var Pa,Ma,aa,Yo=Array.isArray(st[0])?1:0,Xi="",Oa=function(Tn,vn,Hn){var _r="";return Hn instanceof Mt?(Hn=typeof Le.angle=="number"?va(Hn,new Mt(1,0,0,1,Tn,vn)):va(new Mt(1,0,0,1,Tn,vn),Hn),A===C&&(Hn=va(new Mt(1,0,0,-1,0,0),Hn)),_r=Hn.join(" ")+` Tm
`):_r=te(Tn)+" "+te(vn)+` Td
`,_r},hi=0;hi<st.length;hi++){switch(Xi="",Yo){case 1:aa=(Tr?"<":"(")+st[hi][0]+(Tr?">":")"),Pa=parseFloat(st[hi][1]),Ma=parseFloat(st[hi][2]);break;case 0:aa=(Tr?"<":"(")+st[hi]+(Tr?">":")"),Pa=Wi(ue),Ma=Xr(Ce)}Ps!==void 0&&Ps[hi]!==void 0&&(Xi=Ps[hi]+` Tw
`),hi===0?D.push(Xi+Oa(Pa,Ma,wr)+aa):Yo===0?D.push(Xi+aa):Yo===1&&D.push(Xi+Oa(Pa,Ma,wr)+aa)}D=Yo===0?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var ss=`BT
/`;return ss+=pt+" "+H+` Tf
`,ss+=te(H*is)+` TL
`,ss+=Xs+`
`,ss+=Zr,ss+=D,oe(ss+="ET"),y[pt]=!0,zn};var Tu=m.__private__.clip=m.clip=function(D){return oe(D==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Tu("evenodd")},m.__private__.discardPath=m.discardPath=function(){return oe("n"),this};var xi=m.__private__.isValidStyle=function(D){var ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(ue=!0),ue};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(D){return xi(D)&&(f=D),this};var Cu=m.__private__.getStyle=m.getStyle=function(D){var ue=f;switch(D){case"D":case"S":ue="S";break;case"F":ue="f";break;case"FD":case"DF":ue="B";break;case"f":case"f*":case"B":case"B*":ue=D}return ue},Nu=m.close=function(){return oe("h"),this};m.stroke=function(){return oe("S"),this},m.fill=function(D){return $i("f",D),this},m.fillEvenOdd=function(D){return $i("f*",D),this},m.fillStroke=function(D){return $i("B",D),this},m.fillStrokeEvenOdd=function(D){return $i("B*",D),this};var $i=function(D,ue){qn(ue)==="object"?Rc(ue,D):oe(D)},Ru=function(D){D===null||A===C&&D===void 0||(D=Cu(D),oe(D))};function Nc(D,ue,Ce,Le,Fe){var Ze=new qf(ue||this.boundingBox,Ce||this.xStep,Le||this.yStep,this.gState,Fe||this.matrix);Ze.stream=this.stream;var st=D+"$$"+this.cloneIndex+++"$$";return zi(st,Ze),Ze}var Rc=function(D,ue){var Ce=ln[D.key],Le=Dt[Ce];if(Le instanceof lc)oe("q"),oe(ku(ue)),Le.gState&&m.setGState(Le.gState),oe(D.matrix.toString()+" cm"),oe("/"+Ce+" sh"),oe("Q");else if(Le instanceof qf){var Fe=new Mt(1,0,0,-1,0,Na());D.matrix&&(Fe=Fe.multiply(D.matrix||Ks),Ce=Nc.call(Le,D.key,D.boundingBox,D.xStep,D.yStep,Fe).id),oe("q"),oe("/Pattern cs"),oe("/"+Ce+" scn"),Le.gState&&m.setGState(Le.gState),oe(ue),oe("Q")}},ku=function(D){switch(D){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Iu=m.moveTo=function(D,ue){return oe(te(X(D))+" "+te(M(ue))+" m"),this},jo=m.lineTo=function(D,ue){return oe(te(X(D))+" "+te(M(ue))+" l"),this},Rs=m.curveTo=function(D,ue,Ce,Le,Fe,Ze){return oe([te(X(D)),te(M(ue)),te(X(Ce)),te(M(Le)),te(X(Fe)),te(M(Ze)),"c"].join(" ")),this};m.__private__.line=m.line=function(D,ue,Ce,Le,Fe){if(isNaN(D)||isNaN(ue)||isNaN(Ce)||isNaN(Le)||!xi(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return A===N?this.lines([[Ce-D,Le-ue]],D,ue,[1,1],Fe||"S"):this.lines([[Ce-D,Le-ue]],D,ue,[1,1]).stroke()},m.__private__.lines=m.lines=function(D,ue,Ce,Le,Fe,Ze){var st,wt,Et,Vt,Xt,En,rr,wr,zn,Dr,Tr,Zr;if(typeof D=="number"&&(Zr=Ce,Ce=ue,ue=D,D=Zr),Le=Le||[1,1],Ze=Ze||!1,isNaN(ue)||isNaN(Ce)||!Array.isArray(D)||!Array.isArray(Le)||!xi(Fe)||typeof Ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Iu(ue,Ce),st=Le[0],wt=Le[1],Vt=D.length,Dr=ue,Tr=Ce,Et=0;Et<Vt;Et++)(Xt=D[Et]).length===2?(Dr=Xt[0]*st+Dr,Tr=Xt[1]*wt+Tr,jo(Dr,Tr)):(En=Xt[0]*st+Dr,rr=Xt[1]*wt+Tr,wr=Xt[2]*st+Dr,zn=Xt[3]*wt+Tr,Dr=Xt[4]*st+Dr,Tr=Xt[5]*wt+Tr,Rs(En,rr,wr,zn,Dr,Tr));return Ze&&Nu(),Ru(Fe),this},m.path=function(D){for(var ue=0;ue<D.length;ue++){var Ce=D[ue],Le=Ce.c;switch(Ce.op){case"m":Iu(Le[0],Le[1]);break;case"l":jo(Le[0],Le[1]);break;case"c":Rs.apply(this,Le);break;case"h":Nu()}}return this},m.__private__.rect=m.rect=function(D,ue,Ce,Le,Fe){if(isNaN(D)||isNaN(ue)||isNaN(Ce)||isNaN(Le)||!xi(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return A===N&&(Le=-Le),oe([te(X(D)),te(M(ue)),te(X(Ce)),te(X(Le)),"re"].join(" ")),Ru(Fe),this},m.__private__.triangle=m.triangle=function(D,ue,Ce,Le,Fe,Ze,st){if(isNaN(D)||isNaN(ue)||isNaN(Ce)||isNaN(Le)||isNaN(Fe)||isNaN(Ze)||!xi(st))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-D,Le-ue],[Fe-Ce,Ze-Le],[D-Fe,ue-Ze]],D,ue,[1,1],st,!0),this},m.__private__.roundedRect=m.roundedRect=function(D,ue,Ce,Le,Fe,Ze,st){if(isNaN(D)||isNaN(ue)||isNaN(Ce)||isNaN(Le)||isNaN(Fe)||isNaN(Ze)||!xi(st))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wt=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*Ce),Ze=Math.min(Ze,.5*Le),this.lines([[Ce-2*Fe,0],[Fe*wt,0,Fe,Ze-Ze*wt,Fe,Ze],[0,Le-2*Ze],[0,Ze*wt,-Fe*wt,Ze,-Fe,Ze],[2*Fe-Ce,0],[-Fe*wt,0,-Fe,-Ze*wt,-Fe,-Ze],[0,2*Ze-Le],[0,-Ze*wt,Fe*wt,-Ze,Fe,-Ze]],D+Fe,ue,[1,1],st,!0),this},m.__private__.ellipse=m.ellipse=function(D,ue,Ce,Le,Fe){if(isNaN(D)||isNaN(ue)||isNaN(Ce)||isNaN(Le)||!xi(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ze=4/3*(Math.SQRT2-1)*Ce,st=4/3*(Math.SQRT2-1)*Le;return Iu(D+Ce,ue),Rs(D+Ce,ue-st,D+Ze,ue-Le,D,ue-Le),Rs(D-Ze,ue-Le,D-Ce,ue-st,D-Ce,ue),Rs(D-Ce,ue+st,D-Ze,ue+Le,D,ue+Le),Rs(D+Ze,ue+Le,D+Ce,ue+st,D+Ce,ue),Ru(Fe),this},m.__private__.circle=m.circle=function(D,ue,Ce,Le){if(isNaN(D)||isNaN(ue)||isNaN(Ce)||!xi(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,ue,Ce,Ce,Le)},m.setFont=function(D,ue,Ce){return Ce&&(ue=V(ue,Ce)),pt=Tc(D,ue,{disableWarning:!1}),this};var ks=m.__private__.getFont=m.getFont=function(){return ht[Tc.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var D,ue,Ce={};for(D in Pt)if(Pt.hasOwnProperty(D))for(ue in Ce[D]=[],Pt[D])Pt[D].hasOwnProperty(ue)&&Ce[D].push(ue);return Ce},m.addFont=function(D,ue,Ce,Le,Fe){var Ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ze.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&Ze.indexOf(arguments[3])==-1&&(Ce=V(Ce,Le)),bu.call(this,D,ue,Ce,Fe=Fe||"Identity-H")};var xa,zo=n.lineWidth||.200025,qt=m.__private__.getLineWidth=m.getLineWidth=function(){return zo},so=m.__private__.setLineWidth=m.setLineWidth=function(D){return zo=D,oe(te(X(D))+" w"),this};m.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(D,ue){if(D=D||[],ue=ue||0,isNaN(ue)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(Ce){return te(X(Ce))}).join(" "),ue=te(X(ue)),oe("["+D+"] "+ue+" d"),this};var kc=m.__private__.getLineHeight=m.getLineHeight=function(){return H*xa};m.__private__.getLineHeight=m.getLineHeight=function(){return H*xa};var Lu=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&(xa=D),this},Ic=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return xa};Lu(n.lineHeight);var Wi=m.__private__.getHorizontalCoordinate=function(D){return X(D)},Xr=m.__private__.getVerticalCoordinate=function(D){return A===C?D:kt[$].mediaBox.topRightY-kt[$].mediaBox.bottomLeftY-X(D)},Pu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(D){return te(Wi(D))},Ho=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(D){return te(Xr(D))},Ki=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return nr(Ki)},m.__private__.setStrokeColor=m.setDrawColor=function(D,ue,Ce,Le){return Ki=fi({ch1:D,ch2:ue,ch3:Ce,ch4:Le,pdfColorType:"draw",precision:2}),oe(Ki),this};var Go=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return nr(Go)},m.__private__.setFillColor=m.setFillColor=function(D,ue,Ce,Le){return Go=fi({ch1:D,ch2:ue,ch3:Ce,ch4:Le,pdfColorType:"fill",precision:2}),oe(Go),this};var Xs=n.textColor||"0 g",Vo=m.__private__.getTextColor=m.getTextColor=function(){return nr(Xs)};m.__private__.setTextColor=m.setTextColor=function(D,ue,Ce,Le){return Xs=fi({ch1:D,ch2:ue,ch3:Ce,ch4:Le,pdfColorType:"text",precision:3}),this};var Aa=n.charSpace,Cl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Aa||0)};m.__private__.setCharSpace=m.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Aa=D,this};var Nl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(D){var ue=m.CapJoinStyles[D];if(ue===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=ue,oe(ue+" J"),this};var Vr=0;m.__private__.setLineJoin=m.setLineJoin=function(D){var ue=m.CapJoinStyles[D];if(ue===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vr=ue,oe(ue+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(te(X(D))+" M"),this},m.GState=og,m.setGState=function(D){(D=typeof D=="string"?Wt[jn[D]]:Ji(null,D)).equals(Jn)||(oe("/"+D.id+" gs"),Jn=D)};var Ji=function(D,ue){if(!D||!jn[D]){var Ce=!1;for(var Le in Wt)if(Wt.hasOwnProperty(Le)&&Wt[Le].equals(ue)){Ce=!0;break}if(Ce)ue=Wt[Le];else{var Fe="GS"+(Object.keys(Wt).length+1).toString(10);Wt[Fe]=ue,ue.id=Fe}return D&&(jn[D]=ue.id),yn.publish("addGState",ue),ue}};m.addGState=function(D,ue){return Ji(D,ue),this},m.saveGraphicsState=function(){return oe("q"),Ht.push({key:pt,size:H,color:Xs}),this},m.restoreGraphicsState=function(){oe("Q");var D=Ht.pop();return pt=D.key,H=D.size,Xs=D.color,Jn=null,this},m.setCurrentTransformationMatrix=function(D){return oe(D.toString()+" cm"),this},m.comment=function(D){return oe("#"+D),this};var Zs=function(D,ue){var Ce=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(Ze){isNaN(Ze)||(Ce=parseFloat(Ze))}});var Le=ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(Ze){isNaN(Ze)||(Le=parseFloat(Ze))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(Ze){Fe=Ze.toString()}}),this},Ea=function(D,ue,Ce,Le){Zs.call(this,D,ue),this.type="rect";var Fe=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(st){isNaN(st)||(Fe=parseFloat(st))}});var Ze=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ze},set:function(st){isNaN(st)||(Ze=parseFloat(st))}}),this},Rl=function(){this.page=cn,this.currentPage=$,this.pages=re.slice(0),this.pagesContext=kt.slice(0),this.x=yt,this.y=bn,this.matrix=Rt,this.width=ao($),this.height=Qs($),this.outputDestination=ke,this.id="",this.objectNumber=-1};Rl.prototype.restore=function(){cn=this.page,$=this.currentPage,kt=this.pagesContext,re=this.pages,yt=this.x,bn=this.y,Rt=this.matrix,Wo($,this.width),Ca($,this.height),ke=this.outputDestination};var $o=function(D,ue,Ce,Le,Fe){ts.push(new Rl),cn=$=0,re=[],yt=D,bn=ue,Rt=Fe,Ns([Ce,Le])};for(var Ta in m.beginFormObject=function(D,ue,Ce,Le,Fe){return $o(D,ue,Ce,Le,Fe),this},m.endFormObject=function(D){return(function(ue){if(Ws[ue])ts.pop().restore();else{var Ce=new Rl,Le="Xo"+(Object.keys(ci).length+1).toString(10);Ce.id=Le,Ws[ue]=Le,ci[Le]=Ce,yn.publish("addFormObject",Ce),ts.pop().restore()}})(D),this},m.doFormObject=function(D,ue){var Ce=ci[Ws[D]];return oe("q"),oe(ue.toString()+" cm"),oe("/"+Ce.id+" Do"),oe("Q"),this},m.getFormObject=function(D){var ue=ci[Ws[D]];return{x:ue.x,y:ue.y,width:ue.width,height:ue.height,matrix:ue.matrix}},m.save=function(D,ue){return D=D||"generated.pdf",(ue=ue||{}).returnPromise=ue.returnPromise||!1,ue.returnPromise===!1?(ic(Sa(_a()),D),typeof ic.unload=="function"&&Jt.setTimeout&&setTimeout(ic.unload,911),this):new Promise(function(Ce,Le){try{var Fe=ic(Sa(_a()),D);typeof ic.unload=="function"&&Jt.setTimeout&&setTimeout(ic.unload,911),Ce(Fe)}catch(Ze){Le(Ze.message)}})},It.API)It.API.hasOwnProperty(Ta)&&(Ta==="events"&&It.API.events.length?(function(D,ue){var Ce,Le,Fe;for(Fe=ue.length-1;Fe!==-1;Fe--)Ce=ue[Fe][0],Le=ue[Fe][1],D.subscribe.apply(D,[Ce].concat(typeof Le=="function"?[Le]:Le))})(yn,It.API.events):m[Ta]=It.API[Ta]);function ao(D){return kt[D].mediaBox.topRightX-kt[D].mediaBox.bottomLeftX}function Wo(D,ue){kt[D].mediaBox.topRightX=ue+kt[D].mediaBox.bottomLeftX}function Qs(D){return kt[D].mediaBox.topRightY-kt[D].mediaBox.bottomLeftY}function Ca(D,ue){kt[D].mediaBox.topRightY=ue+kt[D].mediaBox.bottomLeftY}var Lc=m.getPageWidth=function(D){return ao(D=D||$)/Nt},Pc=m.setPageWidth=function(D,ue){Wo(D,ue*Nt)},Na=m.getPageHeight=function(D){return Qs(D=D||$)/Nt},Mc=m.setPageHeight=function(D,ue){Ca(D,ue*Nt)};return m.internal={pdfEscape:Vi,getStyle:Cu,getFont:ks,getFontSize:ne,getCharSpace:Cl,getTextColor:Vo,getLineHeight:kc,getLineHeightFactor:Ic,getLineWidth:qt,write:Y,getHorizontalCoordinate:Wi,getVerticalCoordinate:Xr,getCoordinateString:Pu,getVerticalCoordinateString:Ho,collections:{},newObject:er,newAdditionalObject:ro,newObjectDeferred:Er,newObjectDeferredBegin:Gr,getFilters:Gi,putStream:ns,events:yn,scaleFactor:Nt,pageSize:{getWidth:function(){return Lc($)},setWidth:function(D){Pc($,D)},getHeight:function(){return Na($)},setHeight:function(D){Mc($,D)}},encryptionOptions:h,encryption:vr,getEncryptor:function(D){return h!==null?vr.encryptor(D,0):function(ue){return ue}},output:rs,getNumberOfPages:xu,pages:re,out:oe,f2:Q,f3:U,getPageInfo:di,getPageInfoByObjId:Eu,getCurrentPageInfo:Cc,getPDFVersion:_,Point:Zs,Rectangle:Ea,Matrix:Mt,hasHotfix:Ys},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Lc($)},set:function(D){Pc($,D)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Na($)},set:function(D){Mc($,D)},enumerable:!0,configurable:!0}),(function(D){for(var ue=0,Ce=P.length;ue<Ce;ue++){var Le=bu.call(this,D[ue][0],D[ue][1],D[ue][2],P[ue][3],!0);g===!1&&(y[Le]=!0);var Fe=D[ue][0].split("-");yr({id:Le,fontName:Fe[0],fontStyle:Fe[1]||""})}yn.publish("addFonts",{fonts:ht,dictionary:Pt})}).call(m,P),pt="F1",wa(i,t),yn.publish("initialized"),m}Of.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Of.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Of.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Of.prototype.processOwnerPassword=function(n,e){return Iw(kw(e).substr(0,5),n)},Of.prototype.encryptor=function(n,e){var t=kw(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Iw(t,r)}},og.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||qn(n)!==qn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},It.API={events:[]},It.version="3.0.3";var Mr=It.API,Lb=1,xc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Tf=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},en=function(n){return n.toFixed(2)},cu=function(n){return n.toFixed(5)};Mr.__acroform__={};var Ss=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},DA=function(n){return n*Lb},No=function(n){var e=new oN,t=xt.internal.getHeight(n)||0,r=xt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(en(r)),Number(en(t))],e},C9=Mr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},N9=Mr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},R9=Mr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Br=Mr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return R9(n,e-1)},qr=Mr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return C9(n,e-1)},jr=Mr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return N9(n,e-1)},k9=Mr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],u=n[2],l=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(s+l)||0,c.upperRight_X=t(i+u)||0,c.upperRight_Y=r(s)||0,[Number(en(c.lowerLeft_X)),Number(en(c.lowerLeft_Y)),Number(en(c.upperRight_X)),Number(en(c.upperRight_Y))]},I9=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Lw(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+en(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=No(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Lw=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(Q){return Q.split(`
`)}):i.map(function(Q){return[Q]});var s=t,u=xt.internal.getHeight(n)||0;u=u<0?-u:u;var l=xt.internal.getWidth(n)||0;l=l<0?-l:l;var c=function(Q,U,X){if(Q+1<i.length){var M=U+" "+i[Q+1][0];return cm(M,n,X).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var f,h,g=cm("3",n,s).height,y=n.multiline?u-s:(u-g)/2,m=y+=2,E=0,_=0,R=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+cm(e,n,s=12).width+", FieldWidth:"+l+`
`;break}for(var b="",N=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var A=!1;if(i[C].length!==1&&R!==i[C].length-1){if((g+2)*(N+2)+2>u)continue e;b+=i[C][R],A=!0,_=C,C--}else{b=(b+=i[C][R]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var F=parseInt(C),J=c(F,b,s),V=C>=i.length-1;if(J&&!V){b+=" ",R=0;continue}if(J||V){if(V)_=F;else if(n.multiline&&(g+2)*(N+2)+2>u)continue e}else{if(!n.multiline||(g+2)*(N+2)+2>u)continue e;_=F}}for(var te="",O=E;O<=_;O++){var le=i[O];if(n.multiline){if(O===_){te+=le[R]+" ",R=(R+1)%le.length;continue}if(O===E){te+=le[le.length-1]+" ";continue}}te+=le[0]+" "}switch(te=te.substr(te.length-1)==" "?te.substr(0,te.length-1):te,h=cm(te,n,s).width,n.textAlign){case"right":f=l-h-2;break;case"center":f=(l-h)/2;break;default:f=2}e+=en(f)+" "+en(m)+` Td
`,e+="("+xc(te)+`) Tj
`,e+=-en(f)+` 0 Td
`,m=-(s+2),h=0,E=A?_:_+1,N++,b=""}break}return r.text=e,r.fontSize=s,r},cm=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},L9={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},P9=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},M9=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(to.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(L9)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Lb=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new lN,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&P9(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var u in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var l=r[u],c=[],f=l.Rect;if(l.Rect&&(l.Rect=k9(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=xt.createDefaultAppearanceStream(l),qn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=I9(l);c.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var g="";for(var y in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(y)){var m=l.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var u in m)if(m.hasOwnProperty(u)){var E=m[u];typeof E=="function"&&(E=E.call(i,l)),g+="/"+u+" "+E+" ",i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E)}}else typeof(E=m)=="function"&&(E=E.call(i,l)),g+="/"+u+" "+E,i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E);g+=">>"}c.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&(function(_,R){for(var b in _)if(_.hasOwnProperty(b)){var N=b,C=_[b];R.internal.newObjectDeferredBegin(C.objId,!0),qn(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete _[N]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},aN=Mr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(u){return u};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),qn(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+xc(r(n[s].toString()))+")"):i+=n[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},zy=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+xc(r(n))+")"},Mo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Mo.prototype.toString=function(){return this.objId+" 0 R"},Mo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Mo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:aN(i,this.objId,this.scope)}):i instanceof Mo?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var oN=function(){Mo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ss(oN,Mo);var lN=function(){Mo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+xc(t(n))+")"}},set:function(t){n=t}})};Ss(lN,Mo);var to=function n(){Mo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Br(e,3)},set:function(b){b?this.F=qr(e,3):this.F=jr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');t=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof lg)return;s="FieldObject"+n.FieldNum++}var b=function(N){return N};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+xc(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Lb:f},set:function(b){f=b}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(b){h=b}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof lg||this instanceof pc))return zy(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=b}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof bi==0?zy(y,this.objId,this.scope):y},set:function(b){b=b.toString(),y=this instanceof bi==0?b.substr(0,1)==="("?Tf(b.substr(1,b.length-2)):Tf(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof bi==1?Tf(y.substr(1,y.length-1)):y},set:function(b){b=b.toString(),y=this instanceof bi==1?"/"+b:b}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof bi==0?zy(m,this.objId,this.scope):m},set:function(b){b=b.toString(),m=this instanceof bi==0?b.substr(0,1)==="("?Tf(b.substr(1,b.length-2)):Tf(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof bi==1?Tf(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof bi==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(b){b=!!b,_=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(b){E=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,1)},set:function(b){b?this.Ff=qr(this.Ff,1):this.Ff=jr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,2)},set:function(b){b?this.Ff=qr(this.Ff,2):this.Ff=jr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,3)},set:function(b){b?this.Ff=qr(this.Ff,3):this.Ff=jr(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');R=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(R){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:R=2;break;case"center":case 1:R=1;break;default:R=0}}})};Ss(to,Mo);var Vf=function(){to.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return aN(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(s,u,l){l||(l=1);for(var c,f=[];c=u.exec(s);)f.push(c[l]);return f})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,18)},set:function(t){t?this.Ff=qr(this.Ff,18):this.Ff=jr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=qr(this.Ff,19):this.Ff=jr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,20)},set:function(t){t?(this.Ff=qr(this.Ff,20),e.sort()):this.Ff=jr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,22)},set:function(t){t?this.Ff=qr(this.Ff,22):this.Ff=jr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,23)},set:function(t){t?this.Ff=qr(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,27)},set:function(t){t?this.Ff=qr(this.Ff,27):this.Ff=jr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ss(Vf,to);var $f=function(){Vf.call(this),this.fontName="helvetica",this.combo=!1};Ss($f,Vf);var Wf=function(){$f.call(this),this.combo=!0};Ss(Wf,$f);var Fm=function(){Wf.call(this),this.edit=!0};Ss(Fm,Wf);var bi=function(){to.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,15)},set:function(t){t?this.Ff=qr(this.Ff,15):this.Ff=jr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,16)},set:function(t){t?this.Ff=qr(this.Ff,16):this.Ff=jr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,17)},set:function(t){t?this.Ff=qr(this.Ff,17):this.Ff=jr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,26)},set:function(t){t?this.Ff=qr(this.Ff,26):this.Ff=jr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+xc(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){qn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ss(bi,to);var Bm=function(){bi.call(this),this.pushButton=!0};Ss(Bm,bi);var Kf=function(){bi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Ss(Kf,bi);var lg=function(){var n,e;to.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,u=[];for(s in u.push("<<"),r)u.push("/"+s+" ("+xc(i(r[s]))+")");return u.push(">>"),u.join(`
`)},set:function(i){qn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ss(lg,to),Kf.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Kf.prototype.createOption=function(n){var e=new lg;return e.Parent=this,e.optionName=n,this.Kids.push(e),O9.call(this.scope,e),e};var qm=function(){bi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};Ss(qm,bi);var pc=function(){to.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,13)},set:function(e){e?this.Ff=qr(this.Ff,13):this.Ff=jr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,21)},set:function(e){e?this.Ff=qr(this.Ff,21):this.Ff=jr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,23)},set:function(e){e?this.Ff=qr(this.Ff,23):this.Ff=jr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,24)},set:function(e){e?this.Ff=qr(this.Ff,24):this.Ff=jr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,25)},set:function(e){e?this.Ff=qr(this.Ff,25):this.Ff=jr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,26)},set:function(e){e?this.Ff=qr(this.Ff,26):this.Ff=jr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ss(pc,to);var jm=function(){pc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,14)},set:function(n){n?this.Ff=qr(this.Ff,14):this.Ff=jr(this.Ff,14)}}),this.password=!0};Ss(jm,pc);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=No(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=Lw(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+en(xt.internal.getWidth(n))+" "+en(xt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+en(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=No(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=xt.internal.getHeight(n),u=xt.internal.getWidth(n),l=Lw(n,n.caption);return i.push("1 g"),i.push("0 0 "+en(u)+" "+en(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+en(u-1)+" "+en(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+en(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=No(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(xt.internal.getWidth(n))+" "+en(xt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=xt.RadioButton.Circle.YesNormal,e.D[n]=xt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=No(n);e.scope=n.scope;var t=[],r=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=xt.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+cu(xt.internal.getWidth(n)/2)+" "+cu(xt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=No(n);e.scope=n.scope;var t=[],r=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*xt.internal.Bezier_C).toFixed(5)),u=Number((r*xt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+cu(xt.internal.getWidth(n)/2)+" "+cu(xt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+cu(xt.internal.getWidth(n)/2)+" "+cu(xt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),t.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),t.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),t.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=No(n);e.scope=n.scope;var t=[],r=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*xt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+cu(xt.internal.getWidth(n)/2)+" "+cu(xt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=xt.RadioButton.Cross.YesNormal,e.D[n]=xt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=No(n);e.scope=n.scope;var t=[],r=xt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+en(xt.internal.getWidth(n)-2)+" "+en(xt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(en(r.x1.x)+" "+en(r.x1.y)+" m"),t.push(en(r.x2.x)+" "+en(r.x2.y)+" l"),t.push(en(r.x4.x)+" "+en(r.x4.y)+" m"),t.push(en(r.x3.x)+" "+en(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=No(n);e.scope=n.scope;var t=xt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+en(xt.internal.getWidth(n))+" "+en(xt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+en(xt.internal.getWidth(n)-2)+" "+en(xt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(en(t.x1.x)+" "+en(t.x1.y)+" m"),r.push(en(t.x2.x)+" "+en(t.x2.y)+" l"),r.push(en(t.x4.x)+" "+en(t.x4.y)+" m"),r.push(en(t.x3.x)+" "+en(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=No(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+en(xt.internal.getWidth(n))+" "+en(xt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};xt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=xt.internal.getWidth(n),t=xt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},xt.internal.getWidth=function(n){var e=0;return qn(n)==="object"&&(e=DA(n.Rect[2])),e},xt.internal.getHeight=function(n){var e=0;return qn(n)==="object"&&(e=DA(n.Rect[3])),e};var O9=Mr.addField=function(n){if(M9(this,n),!(n instanceof to))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Mr.AcroFormChoiceField=Vf,Mr.AcroFormListBox=$f,Mr.AcroFormComboBox=Wf,Mr.AcroFormEditBox=Fm,Mr.AcroFormButton=bi,Mr.AcroFormPushButton=Bm,Mr.AcroFormRadioButton=Kf,Mr.AcroFormCheckBox=qm,Mr.AcroFormTextField=pc,Mr.AcroFormPasswordField=jm,Mr.AcroFormAppearance=xt,Mr.AcroForm={ChoiceField:Vf,ListBox:$f,ComboBox:Wf,EditBox:Fm,Button:bi,PushButton:Bm,RadioButton:Kf,CheckBox:qm,TextField:pc,PasswordField:jm,Appearance:xt},It.AcroForm={ChoiceField:Vf,ListBox:$f,ComboBox:Wf,EditBox:Fm,Button:bi,PushButton:Bm,RadioButton:Kf,CheckBox:qm,TextField:pc,PasswordField:jm,Appearance:xt};It.AcroForm;function uN(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(Q,U){var X,M,ye,se,ie,Se=t;if((U=U||t)==="RGBA"||Q.data!==void 0&&Q.data instanceof Uint8ClampedArray&&"height"in Q&&"width"in Q)return"RGBA";if(J(Q))for(ie in r)for(ye=r[ie],X=0;X<ye.length;X+=1){for(se=!0,M=0;M<ye[X].length;M+=1)if(ye[X][M]!==void 0&&ye[X][M]!==Q[M]){se=!1;break}if(se===!0){Se=ie;break}}else for(ie in r)for(ye=r[ie],X=0;X<ye.length;X+=1){for(se=!0,M=0;M<ye[X].length;M+=1)if(ye[X][M]!==void 0&&ye[X][M]!==Q.charCodeAt(M)){se=!1;break}if(se===!0){Se=ie;break}}return Se===t&&U!==t&&(Se=U),Se},s=function Q(U){for(var X=this.internal.write,M=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);U.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:U.width}),se.push({key:"Height",value:U.height}),U.colorSpace===b.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(U.palette.length/3-1)+" "+("sMask"in U&&U.sMask!==void 0?U.objectId+2:U.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+U.colorSpace}),U.colorSpace===b.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:U.bitsPerComponent}),"decodeParameters"in U&&U.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+U.decodeParameters+">>"}),"transparency"in U&&Array.isArray(U.transparency)&&U.transparency.length>0){for(var ie="",Se=0,me=U.transparency.length;Se<me;Se++)ie+=U.transparency[Se]+" "+U.transparency[Se]+" ";se.push({key:"Mask",value:"["+ie+"]"})}U.sMask!==void 0&&se.push({key:"SMask",value:U.objectId+1+" 0 R"});var Ne=U.filter!==void 0?["/"+U.filter]:void 0;if(M({data:U.data,additionalKeyValues:se,alreadyAppliedFilters:Ne,objectId:U.objectId}),X("endobj"),"sMask"in U&&U.sMask!==void 0){var K,L=(K=U.sMaskBitsPerComponent)!==null&&K!==void 0?K:U.bitsPerComponent,$={width:U.width,height:U.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:U.sMask};"filter"in U&&($.decodeParameters="/Predictor ".concat(U.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(U.width),$.filter=U.filter),Q.call(this,$)}if(U.colorSpace===b.INDEXED){var ee=this.internal.newObject();M({data:te(new Uint8Array(U.palette)),objectId:ee}),X("endobj")}},u=function(){var Q=this.internal.collections[e+"images"];for(var U in Q)s.call(this,Q[U])},l=function(){var Q,U=this.internal.collections[e+"images"],X=this.internal.write;for(var M in U)X("/I"+(Q=U[M]).index,Q.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",l))},f=function(){var Q=this.internal.collections[e+"images"];return c.call(this),Q},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(Q){return typeof n["process"+Q.toUpperCase()]=="function"},y=function(Q){return qn(Q)==="object"&&Q.nodeType===1},m=function(Q,U){if(Q.nodeName==="IMG"&&Q.hasAttribute("src")){var X=""+Q.getAttribute("src");if(X.indexOf("data:image/")===0)return Um(unescape(X).split("base64,").pop());var M=n.loadFile(X,!0);if(M!==void 0)return M}if(Q.nodeName==="CANVAS"){if(Q.width===0||Q.height===0)throw new Error("Given canvas must have data. Canvas width: "+Q.width+", height: "+Q.height);var ye;switch(U){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;default:ye="image/jpeg"}return Um(Q.toDataURL(ye,1).split("base64,").pop())}},E=function(Q){var U=this.internal.collections[e+"images"];if(U){for(var X in U)if(Q===U[X].alias)return U[X]}},_=function(Q,U,X){return Q||U||(Q=-96,U=-96),Q<0&&(Q=-1*X.width*72/Q/this.internal.scaleFactor),U<0&&(U=-1*X.height*72/U/this.internal.scaleFactor),Q===0&&(Q=U*X.width/X.height),U===0&&(U=Q*X.height/X.width),[Q,U]},R=function(Q,U,X,M,ye,se){var ie=_.call(this,X,M,ye),Se=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,Ne=f.call(this);if(X=ie[0],M=ie[1],Ne[ye.index]=ye,se){se*=Math.PI/180;var K=Math.cos(se),L=Math.sin(se),$=function(pe){return pe.toFixed(4)},ee=[$(K),$(L),$(-1*L),$(K),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,Se(Q),me(U+M),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([Se(X),"0","0",Se(M),"0","0","cm"].join(" "))):this.internal.write([Se(X),"0","0",Se(M),Se(Q),me(U+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},b=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=n.__addimage__.sHashCode=function(Q){var U,X,M=0;if(typeof Q=="string")for(X=Q.length,U=0;U<X;U++)M=(M<<5)-M+Q.charCodeAt(U),M|=0;else if(J(Q))for(X=Q.byteLength/2,U=0;U<X;U++)M=(M<<5)-M+Q[U],M|=0;return M},A=n.__addimage__.validateStringAsBase64=function(Q){(Q=Q||"").toString().trim();var U=!0;return Q.length===0&&(U=!1),Q.length%4!=0&&(U=!1),/^[A-Za-z0-9+/]+$/.test(Q.substr(0,Q.length-2))===!1&&(U=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Q.substr(-2))===!1&&(U=!1),U},F=n.__addimage__.extractImageFromDataUrl=function(Q){if(Q==null||!(Q=Q.trim()).startsWith("data:"))return null;var U=Q.indexOf(",");return U<0?null:Q.substring(0,U).trim().endsWith("base64")?Q.substring(U+1):null};n.__addimage__.isArrayBuffer=function(Q){return Q instanceof ArrayBuffer};var J=n.__addimage__.isArrayBufferView=function(Q){return Q instanceof Int8Array||Q instanceof Uint8Array||Q instanceof Uint8ClampedArray||Q instanceof Int16Array||Q instanceof Uint16Array||Q instanceof Int32Array||Q instanceof Uint32Array||Q instanceof Float32Array||Q instanceof Float64Array},V=n.__addimage__.binaryStringToUint8Array=function(Q){for(var U=Q.length,X=new Uint8Array(U),M=0;M<U;M++)X[M]=Q.charCodeAt(M);return X},te=n.__addimage__.arrayBufferToBinaryString=function(Q){for(var U="",X=J(Q)?Q:new Uint8Array(Q),M=0;M<X.length;M+=8192)U+=String.fromCharCode.apply(null,X.subarray(M,M+8192));return U};n.addImage=function(){var Q,U,X,M,ye,se,ie,Se,me;if(typeof arguments[1]=="number"?(U=t,X=arguments[1],M=arguments[2],ye=arguments[3],se=arguments[4],ie=arguments[5],Se=arguments[6],me=arguments[7]):(U=arguments[1],X=arguments[2],M=arguments[3],ye=arguments[4],se=arguments[5],ie=arguments[6],Se=arguments[7],me=arguments[8]),qn(Q=arguments[0])==="object"&&!y(Q)&&"imageData"in Q){var Ne=Q;Q=Ne.imageData,U=Ne.format||U||t,X=Ne.x||X||0,M=Ne.y||M||0,ye=Ne.w||Ne.width||ye,se=Ne.h||Ne.height||se,ie=Ne.alias||ie,Se=Ne.compression||Se,me=Ne.rotation||Ne.angle||me}var K=this.internal.getFilters();if(Se===void 0&&K.indexOf("FlateEncode")!==-1&&(Se="SLOW"),isNaN(X)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var L=O.call(this,Q,U,ie,Se);return R.call(this,X,M,ye,se,L,me),this};var O=function(Q,U,X,M){var ye,se,ie;if(typeof Q=="string"&&i(Q)===t){Q=unescape(Q);var Se=le(Q,!1);(Se!==""||(Se=n.loadFile(Q,!0))!==void 0)&&(Q=Se)}if(y(Q)&&(Q=m(Q,U)),U=i(Q,U),!g(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(((ie=X)==null||ie.length===0)&&(X=(function(me){return typeof me=="string"||J(me)?C(me):J(me.data)?C(me.data):null})(Q)),(ye=E.call(this,X))||(Q instanceof Uint8Array||U==="RGBA"||(se=Q,Q=V(Q)),ye=this["process"+U.toUpperCase()](Q,h.call(this),X,(function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in n.image_compression?me:N.NONE})(M),se)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},le=n.__addimage__.convertBase64ToBinaryString=function(Q,U){U=typeof U!="boolean"||U;var X,M="";if(typeof Q=="string"){var ye;X=(ye=F(Q))!==null&&ye!==void 0?ye:Q;try{M=Um(X)}catch(se){if(U)throw A(X)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};n.getImageProperties=function(Q){var U,X,M="";if(y(Q)&&(Q=m(Q)),typeof Q=="string"&&i(Q)===t&&((M=le(Q,!1))===""&&(M=n.loadFile(Q)||""),Q=M),X=i(Q),!g(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(Q instanceof Uint8Array||(Q=V(Q)),!(U=this["process"+X.toUpperCase()](Q)))throw new Error("An unknown error occurred whilst processing the image");return U.fileType=X,U}})(It.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};It.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,u=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,h=!1,g=0;g<f.length&&!h;g++)switch((r=f[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var y=0;y<f.length;y++){r=f[y];var m=this.internal.pdfEscape,E=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(_.objId),N=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+u(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+m(b(r.contents))+")",s+=" /Popup "+R.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(b(N))+") >>",_.content=s;var C=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+u(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+C,r.open&&(s+=" /Open true"),s+=" >>",R.content=s,this.internal.write(_.objId,"0 R",R.objId,"0 R");break;case"freetext":i="/Rect ["+u(r.bounds.x)+" "+l(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var A=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(E(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var F=this.annotations._nameMap[r.options.name];r.options.pageNumber=F.page,r.options.top=F.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(E(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var J=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+J+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,u){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(t),y:f(r),w:c(t+i),h:f(r+s)},options:u,type:"link"})},n.textWithLink=function(t,r,i,s){var u,l,c=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var h=this.splitTextToSize(t,l).length;u=Math.ceil(f*h)}else l=c,u=f;return this.text(t,r,i,s),i+=.2*f,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-f,l,u,s),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(It.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},l=n.__arabicParser__.isArabicEndLetter=function(_){return u(_)&&s(_)&&e[_.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(_){return u(_)&&i.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return u(_)&&s(_)&&e[_.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return u(_)&&s(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return u(_)&&s(_)&&e[_.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return u(_)&&s(_)&&e[_.charCodeAt(0)].length==4},g=n.__arabicParser__.resolveLigatures=function(_){var R=0,b=t,N="",C=0;for(R=0;R<_.length;R+=1)b[_.charCodeAt(R)]!==void 0?(C++,typeof(b=b[_.charCodeAt(R)])=="number"&&(N+=String.fromCharCode(b),b=t,C=0),R===_.length-1&&(b=t,N+=_.charAt(R-(C-1)),R-=C-1,C=0)):(b=t,N+=_.charAt(R-C),R-=C,C=0);return N};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(_,R,b){return u(_)?s(_)===!1?-1:!f(_)||!u(R)&&!u(b)||!u(b)&&l(R)||l(_)&&!u(R)||l(_)&&c(R)||l(_)&&l(R)?0:h(_)&&u(R)&&!l(R)&&u(b)&&f(b)?3:l(_)||!u(b)?1:2:-1},m=function(_){var R=0,b=0,N=0,C="",A="",F="",J=(_=_||"").split("\\s+"),V=[];for(R=0;R<J.length;R+=1){for(V.push(""),b=0;b<J[R].length;b+=1)C=J[R][b],A=J[R][b-1],F=J[R][b+1],u(C)?(N=y(C,A,F),V[R]+=N!==-1?String.fromCharCode(e[C.charCodeAt(0)][N]):C):V[R]+=C;V[R]=g(V[R])}return V.join(" ")},E=n.__arabicParser__.processArabic=n.processArabic=function(){var _,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(R)){var N=0;for(b=[],N=0;N<R.length;N+=1)Array.isArray(R[N])?b.push([m(R[N][0]),R[N][1],R[N][2]]):b.push([m(R[N])]);_=b}else _=m(R);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",E])})(It.API),It.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(l){u=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(It.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(_){h=_}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(_){y=_}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(_){E=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,f){r.call(this);var h=(f=f||{}).fontSize||this.getFontSize(),g=f.font||this.getFont(),y=f.scaleFactor||this.internal.scaleFactor,m=0,E=0,_=0,R=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=f.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(C,A){return C.concat(R.splitTextToSize(A,b))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(_=this.getStringUnitWidth(c[N],{font:g})*h)&&(m=_);return m!==0&&(E=c.length),{w:m/=y,h:Math.max((E*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,m&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};n.table=function(c,f,h,g,y){if(r.call(this),!h)throw new Error("No data for PDF table.");var m,E,_,R,b=[],N=[],C=[],A={},F={},J=[],V=[],te=(y=y||{}).autoSize||!1,O=y.printHeaders!==!1,le=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,Q=y.margins||Object.assign({width:this.getPageWidth()},e),U=typeof y.padding=="number"?y.padding:3,X=y.headerBackgroundColor||"#c8c8c8",M=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=Q,this.internal.__cell__.table_font_size=le,this.internal.__cell__.padding=U,this.internal.__cell__.headerBackgroundColor=X,this.internal.__cell__.headerTextColor=M,this.setFontSize(le),g==null)N=b=Object.keys(h[0]),C=b.map(function(){return"left"});else if(Array.isArray(g)&&qn(g[0])==="object")for(b=g.map(function(Ne){return Ne.name}),N=g.map(function(Ne){return Ne.prompt||Ne.name||""}),C=g.map(function(Ne){return Ne.align||"left"}),m=0;m<g.length;m+=1)F[g[m].name]=.7499990551181103*g[m].width;else Array.isArray(g)&&typeof g[0]=="string"&&(N=b=g,C=b.map(function(){return"left"}));if(te||Array.isArray(g)&&typeof g[0]=="string")for(m=0;m<b.length;m+=1){for(A[R=b[m]]=h.map(function(Ne){return Ne[R]}),this.setFont(void 0,"bold"),J.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=A[R],this.setFont(void 0,"normal"),_=0;_<E.length;_+=1)J.push(this.getTextDimensions(E[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[R]=Math.max.apply(null,J)+U+U,J=[]}if(O){var ye={};for(m=0;m<b.length;m+=1)ye[b[m]]={},ye[b[m]].text=N[m],ye[b[m]].align=C[m];var se=l.call(this,ye,F);V=b.map(function(Ne){return new s(c,f,F[Ne],se,ye[Ne].text,void 0,ye[Ne].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var ie=g.reduce(function(Ne,K){return Ne[K.name]=K.align,Ne},{});for(m=0;m<h.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:h[m]},this);var Se=l.call(this,h[m],F);for(_=0;_<b.length;_+=1){var me=h[m][b[_]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:_,data:me},this),u.call(this,new s(c,f,F[b[_]],Se,me,m+2,ie[b[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var l=function(c,f){var h=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(m){var E=c[m];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,f[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*g/y+h+h},this).reduce(function(m,E){return Math.max(m,E)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(h.y=this.internal.__cell__.margins.top||0,y.push(h)),h.lineNumber=c;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,h),this.setTextColor(E)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}})(It.API);var cN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},fN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Pw=uN(fN),dN=[100,200,300,400,500,600,700,800,900],D9=uN(dN);function Hy(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(s){return cN[s=s||"normal"]?s:"normal"})(n.style),r=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(n.weight),i=(function(s){return typeof Pw[s=s||"normal"]=="number"?s:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function UA(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var U9={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},FA={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function BA(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function qA(n){return n.trimLeft()}function F9(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function B9(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var fm,jA,zA,Cf,dm,HA,GA,VA,Gy=["times"];function $A(n,e,t,r,i){var s=4,u=KA;switch(i){case It.API.image_compression.FAST:s=1,u=WA;break;case It.API.image_compression.MEDIUM:s=6,u=JA;break;case It.API.image_compression.SLOW:s=9,u=YA}n=(function(c,f,h,g){for(var y,m=c.length/f,E=new Uint8Array(c.length+m),_=[q9,WA,KA,JA,YA],R=0;R<m;R+=1){var b=R*f,N=c.subarray(b,b+f);if(g)E.set(g(N,h,y),b+R);else{for(var C=_.length,A=[],F=0;F<C;F+=1)A[F]=_[F](N,h,y);var J=z9(A.concat());E.set(A[J],b+R)}y=N}return E})(n,e,Math.ceil(t*r/8),u);var l=Tw(n,{level:s});return It.API.__addimage__.arrayBufferToBinaryString(l)}function q9(n){var e=Array.apply([],n);return e.unshift(0),e}function WA(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var s=n[i-e]||0;r[i+1]=n[i]-s+256&255}return r}function KA(n,e,t){var r=n.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var u=t&&t[s]||0;i[s+1]=n[s]-u+256&255}return i}function JA(n,e,t){var r=n.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var u=n[s-e]||0,l=t&&t[s]||0;i[s+1]=n[s]+256-(u+l>>>1)&255}return i}function YA(n,e,t){var r=n.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var u=j9(n[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);i[s+1]=n[s]-u+256&255}return i}function j9(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),s=Math.abs(n+e-t-t);return r<=i&&r<=s?n:i<=s?e:t}function z9(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Vy(n,e,t){var r=e*t,i=Math.floor(r/8),s=16-(r-8*i+t),u=(1<<t)-1;return hN(n,i)>>s&u}function XA(n,e,t,r){var i=t*r,s=Math.floor(i/8),u=16-(i-8*s+r),l=(1<<r)-1,c=(e&l)<<u;(function(f,h,g){if(h+1<f.byteLength)f.setUint16(h,g,!1);else{var y=g>>8&255;f.setUint8(h,y)}})(n,s,hN(n,s)&~(l<<u)&65535|c)}function hN(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function H9(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,u=1<<1+(7&i);n[e++],n[e++];var l=null,c=null;s&&(l=e,c=u,e+=3*u);var f=!0,h=[],g=0,y=null,m=0,E=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,E=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((Q=n[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];g=n[e++]|n[e++]<<8,y=n[e++],1&_||(y=null),m=_>>2&7,e++;break;case 254:for(;;){if(!((Q=n[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var R=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,N=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,A=n[e++],F=A>>6&1,J=1<<1+(7&A),V=l,te=c,O=!1;A>>7&&(O=!0,V=e,te=J,e+=3*J);var le=e;for(e++;;){var Q;if(!((Q=n[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}h.push({x:R,y:b,width:N,height:C,has_local_palette:O,palette_offset:V,palette_size:te,data_offset:le,data_length:e-le,transparent_index:y,interlaced:!!F,delay:g,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return E},this.frameInfo=function(U){if(U<0||U>=h.length)throw new Error("Frame index out of range.");return h[U]},this.decodeAndBlitFrameBGRA=function(U,X){var M=this.frameInfo(U),ye=M.width*M.height,se=new Uint8Array(ye);ZA(n,M.data_offset,se,ye);var ie=M.palette_offset,Se=M.transparent_index;Se===null&&(Se=256);var me=M.width,Ne=t-me,K=me,L=4*(M.y*t+M.x),$=4*((M.y+M.height)*t+M.x),ee=L,pe=4*Ne;M.interlaced===!0&&(pe+=4*t*7);for(var ae=8,B=0,j=se.length;B<j;++B){var de=se[B];if(K===0&&(K=me,(ee+=pe)>=$&&(pe=4*Ne+4*t*(ae-1),ee=L+(me+Ne)*(ae<<1),ae>>=1)),de===Se)ee+=4;else{var fe=n[ie+3*de],re=n[ie+3*de+1],he=n[ie+3*de+2];X[ee++]=he,X[ee++]=re,X[ee++]=fe,X[ee++]=255}--K}},this.decodeAndBlitFrameRGBA=function(U,X){var M=this.frameInfo(U),ye=M.width*M.height,se=new Uint8Array(ye);ZA(n,M.data_offset,se,ye);var ie=M.palette_offset,Se=M.transparent_index;Se===null&&(Se=256);var me=M.width,Ne=t-me,K=me,L=4*(M.y*t+M.x),$=4*((M.y+M.height)*t+M.x),ee=L,pe=4*Ne;M.interlaced===!0&&(pe+=4*t*7);for(var ae=8,B=0,j=se.length;B<j;++B){var de=se[B];if(K===0&&(K=me,(ee+=pe)>=$&&(pe=4*Ne+4*t*(ae-1),ee=L+(me+Ne)*(ae<<1),ae>>=1)),de===Se)ee+=4;else{var fe=n[ie+3*de],re=n[ie+3*de+1],he=n[ie+3*de+2];X[ee++]=fe,X[ee++]=re,X[ee++]=he,X[ee++]=255}--K}}}function ZA(n,e,t,r){for(var i=n[e++],s=1<<i,u=s+1,l=u+1,c=i+1,f=(1<<c)-1,h=0,g=0,y=0,m=n[e++],E=new Int32Array(4096),_=null;;){for(;h<16&&m!==0;)g|=n[e++]<<h,h+=8,m===1?m=n[e++]:--m;if(h<c)break;var R=g&f;if(g>>=c,h-=c,R!==s){if(R===u)break;for(var b=R<l?R:_,N=0,C=b;C>s;)C=E[C]>>8,++N;var A=C;if(y+N+(b!==R?1:0)>r)return void Qn.log("Warning, gif stream longer than expected.");t[y++]=A;var F=y+=N;for(b!==R&&(t[y++]=A),C=b;N--;)C=E[C],t[--F]=255&C,C>>=8;_!==null&&l<4096&&(E[l++]=_<<8|A,l>=f+1&&c<12&&(++c,f=f<<1|1)),_=R}else l=u+1,f=(1<<(c=i+1))-1,_=null}return y!==r&&Qn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function $y(n){var e,t,r,i,s,u=Math.floor,l=new Array(64),c=new Array(64),f=new Array(64),h=new Array(64),g=new Array(65535),y=new Array(65535),m=new Array(64),E=new Array(64),_=[],R=0,b=7,N=new Array(64),C=new Array(64),A=new Array(64),F=new Array(256),J=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],te=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(L,$){for(var ee=0,pe=0,ae=new Array,B=1;B<=16;B++){for(var j=1;j<=L[B];j++)ae[$[pe]]=[],ae[$[pe]][0]=ee,ae[$[pe]][1]=B,pe++,ee++;ee*=2}return ae}function ie(L){for(var $=L[0],ee=L[1]-1;ee>=0;)$&1<<ee&&(R|=1<<b),ee--,--b<0&&(R==255?(Se(255),Se(0)):Se(R),b=7,R=0)}function Se(L){_.push(L)}function me(L){Se(L>>8&255),Se(255&L)}function Ne(L,$,ee,pe,ae){for(var B,j=ae[0],de=ae[240],fe=(function(H,be){var ne,we,Re,De,Ue,Ke,at,ot,pt,Nt,yt=0;for(pt=0;pt<8;++pt){ne=H[yt],we=H[yt+1],Re=H[yt+2],De=H[yt+3],Ue=H[yt+4],Ke=H[yt+5],at=H[yt+6];var bn=ne+(ot=H[yt+7]),Rt=ne-ot,ht=we+at,Pt=we-at,Ht=Re+Ke,Dt=Re-Ke,ln=De+Ue,Wt=De-Ue,jn=bn+ln,Jn=bn-ln,cn=ht+Ht,kt=ht-Ht;H[yt]=jn+cn,H[yt+4]=jn-cn;var yn=.707106781*(kt+Jn);H[yt+2]=Jn+yn,H[yt+6]=Jn-yn;var xs=.382683433*((jn=Wt+Dt)-(kt=Pt+Rt)),ci=.5411961*jn+xs,Ws=1.306562965*kt+xs,ts=.707106781*(cn=Dt+Pt),Mt=Rt+ts,va=Rt-ts;H[yt+5]=va+ci,H[yt+3]=va-ci,H[yt+1]=Mt+Ws,H[yt+7]=Mt-Ws,yt+=8}for(yt=0,pt=0;pt<8;++pt){ne=H[yt],we=H[yt+8],Re=H[yt+16],De=H[yt+24],Ue=H[yt+32],Ke=H[yt+40],at=H[yt+48];var Ks=ne+(ot=H[yt+56]),zi=ne-ot,Hi=we+at,er=we-at,Er=Re+Ke,Gr=Re-Ke,ro=De+Ue,_i=De-Ue,On=Ks+ro,nr=Ks-ro,fi=Hi+Er,Gi=Hi-Er;H[yt]=On+fi,H[yt+32]=On-fi;var ns=.707106781*(Gi+nr);H[yt+16]=nr+ns,H[yt+48]=nr-ns;var Bo=.382683433*((On=_i+Gr)-(Gi=er+zi)),As=.5411961*On+Bo,Es=1.306562965*Gi+Bo,io=.707106781*(fi=Gr+er),Ts=zi+io,Cs=zi-io;H[yt+40]=Cs+As,H[yt+24]=Cs-As,H[yt+8]=Ts+Es,H[yt+56]=Ts-Es,yt++}for(pt=0;pt<64;++pt)Nt=H[pt]*be[pt],m[pt]=Nt>0?Nt+.5|0:Nt-.5|0;return m})(L,$),re=0;re<64;++re)E[V[re]]=fe[re];var he=E[0]-ee;ee=E[0],he==0?ie(pe[0]):(ie(pe[y[B=32767+he]]),ie(g[B]));for(var ke=63;ke>0&&E[ke]==0;)ke--;if(ke==0)return ie(j),ee;for(var q,oe=1;oe<=ke;){for(var Y=oe;E[oe]==0&&oe<=ke;)++oe;var I=oe-Y;if(I>=16){q=I>>4;for(var P=1;P<=q;++P)ie(de);I&=15}B=32767+E[oe],ie(ae[(I<<4)+y[B]]),ie(g[B]),oe++}return ke!=63&&ie(j),ee}function K(L){L=Math.min(Math.max(L,1),100),s!=L&&((function($){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pe=0;pe<64;pe++){var ae=u((ee[pe]*$+50)/100);ae=Math.min(Math.max(ae,1),255),l[V[pe]]=ae}for(var B=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],j=0;j<64;j++){var de=u((B[j]*$+50)/100);de=Math.min(Math.max(de,1),255),c[V[j]]=de}for(var fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],re=0,he=0;he<8;he++)for(var ke=0;ke<8;ke++)f[re]=1/(l[V[re]]*fe[he]*fe[ke]*8),h[re]=1/(c[V[re]]*fe[he]*fe[ke]*8),re++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),s=L)}this.encode=function(L,$){$&&K($),_=new Array,R=0,b=7,me(65496),me(65504),me(16),Se(74),Se(70),Se(73),Se(70),Se(0),Se(1),Se(1),Se(0),me(1),me(1),Se(0),Se(0),(function(){me(65499),me(132),Se(0);for(var we=0;we<64;we++)Se(l[we]);Se(1);for(var Re=0;Re<64;Re++)Se(c[Re])})(),(function(we,Re){me(65472),me(17),Se(8),me(Re),me(we),Se(3),Se(1),Se(17),Se(0),Se(2),Se(17),Se(1),Se(3),Se(17),Se(1)})(L.width,L.height),(function(){me(65476),me(418),Se(0);for(var we=0;we<16;we++)Se(te[we+1]);for(var Re=0;Re<=11;Re++)Se(O[Re]);Se(16);for(var De=0;De<16;De++)Se(le[De+1]);for(var Ue=0;Ue<=161;Ue++)Se(Q[Ue]);Se(1);for(var Ke=0;Ke<16;Ke++)Se(U[Ke+1]);for(var at=0;at<=11;at++)Se(X[at]);Se(17);for(var ot=0;ot<16;ot++)Se(M[ot+1]);for(var pt=0;pt<=161;pt++)Se(ye[pt])})(),me(65498),me(12),Se(3),Se(1),Se(0),Se(2),Se(17),Se(3),Se(17),Se(0),Se(63),Se(0);var ee=0,pe=0,ae=0;R=0,b=7,this.encode.displayName="_encode_";for(var B,j,de,fe,re,he,ke,q,oe,Y=L.data,I=L.width,P=L.height,H=4*I,be=0;be<P;){for(B=0;B<H;){for(re=H*be+B,ke=-1,q=0,oe=0;oe<64;oe++)he=re+(q=oe>>3)*H+(ke=4*(7&oe)),be+q>=P&&(he-=H*(be+1+q-P)),B+ke>=H&&(he-=B+ke-H+4),j=Y[he++],de=Y[he++],fe=Y[he++],N[oe]=(J[j]+J[de+256|0]+J[fe+512|0]>>16)-128,C[oe]=(J[j+768|0]+J[de+1024|0]+J[fe+1280|0]>>16)-128,A[oe]=(J[j+1280|0]+J[de+1536|0]+J[fe+1792|0]>>16)-128;ee=Ne(N,f,ee,e,r),pe=Ne(C,h,pe,t,i),ae=Ne(A,h,ae,t,i),B+=32}be+=8}if(b>=0){var ne=[];ne[1]=b+1,ne[0]=(1<<b+1)-1,ie(ne)}return me(65497),new Uint8Array(_)},n=n||50,(function(){for(var L=String.fromCharCode,$=0;$<256;$++)F[$]=L($)})(),e=se(te,O),t=se(U,X),r=se(le,Q),i=se(M,ye),(function(){for(var L=1,$=2,ee=1;ee<=15;ee++){for(var pe=L;pe<$;pe++)y[32767+pe]=ee,g[32767+pe]=[],g[32767+pe][1]=ee,g[32767+pe][0]=pe;for(var ae=-($-1);ae<=-L;ae++)y[32767+ae]=ee,g[32767+ae]=[],g[32767+ae][1]=ee,g[32767+ae][0]=$-1+ae;L<<=1,$<<=1}})(),(function(){for(var L=0;L<256;L++)J[L]=19595*L,J[L+256|0]=38470*L,J[L+512|0]=7471*L+32768,J[L+768|0]=-11059*L,J[L+1024|0]=-21709*L,J[L+1280|0]=32768*L+8421375,J[L+1536|0]=-27439*L,J[L+1792|0]=-5329*L})(),K(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ga(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function QA(n){function e(O){if(!O)throw Error("assert :P")}function t(O,le,Q){for(var U=0;4>U;U++)if(O[le+U]!=Q.charCodeAt(U))return!0;return!1}function r(O,le,Q,U,X){for(var M=0;M<X;M++)O[le+M]=Q[U+M]}function i(O,le,Q,U){for(var X=0;X<U;X++)O[le+X]=Q}function s(O){return new Int32Array(O)}function u(O,le){for(var Q=[],U=0;U<O;U++)Q.push(new le);return Q}function l(O,le){var Q=[];return(function U(X,M,ye){for(var se=ye[M],ie=0;ie<se&&(X.push(ye.length>M+1?[]:new le),!(ye.length<M+1));ie++)U(X[ie],M+1,ye)})(Q,0,O),Q}var c=function(){var O=this;function le(v,T){for(var z=1<<T-1>>>0;v&z;)z>>>=1;return z?(v&z-1)+z:v}function Q(v,T,z,W,ce){e(!(W%z));do v[T+(W-=z)]=ce;while(0<W)}function U(v,T,z,W,ce){if(e(2328>=ce),512>=ce)var ge=s(512);else if((ge=s(ce))==null)return 0;return(function(ve,xe,Ae,Te,Pe,ze){var Ee,Oe,qe=xe,Ye=1<<Ae,je=s(16),Je=s(16);for(e(Pe!=0),e(Te!=null),e(ve!=null),e(0<Ae),Oe=0;Oe<Pe;++Oe){if(15<Te[Oe])return 0;++je[Te[Oe]]}if(je[0]==Pe)return 0;for(Je[1]=0,Ee=1;15>Ee;++Ee){if(je[Ee]>1<<Ee)return 0;Je[Ee+1]=Je[Ee]+je[Ee]}for(Oe=0;Oe<Pe;++Oe)Ee=Te[Oe],0<Te[Oe]&&(ze[Je[Ee]++]=Oe);if(Je[15]==1)return(Te=new X).g=0,Te.value=ze[0],Q(ve,qe,1,Ye,Te),Ye;var Qe,ct=-1,rt=Ye-1,St=0,mt=1,Kt=1,vt=1<<Ae;for(Oe=0,Ee=1,Pe=2;Ee<=Ae;++Ee,Pe<<=1){if(mt+=Kt<<=1,0>(Kt-=je[Ee]))return 0;for(;0<je[Ee];--je[Ee])(Te=new X).g=Ee,Te.value=ze[Oe++],Q(ve,qe+St,Pe,vt,Te),St=le(St,Ee)}for(Ee=Ae+1,Pe=2;15>=Ee;++Ee,Pe<<=1){if(mt+=Kt<<=1,0>(Kt-=je[Ee]))return 0;for(;0<je[Ee];--je[Ee]){if(Te=new X,(St&rt)!=ct){for(qe+=vt,Qe=1<<(ct=Ee)-Ae;15>ct&&!(0>=(Qe-=je[ct]));)++ct,Qe<<=1;Ye+=vt=1<<(Qe=ct-Ae),ve[xe+(ct=St&rt)].g=Qe+Ae,ve[xe+ct].value=qe-xe-ct}Te.g=Ee-Ae,Te.value=ze[Oe++],Q(ve,qe+(St>>Ae),Pe,vt,Te),St=le(St,Ee)}}return mt!=2*Je[15]-1?0:Ye})(v,T,z,W,ce,ge)}function X(){this.value=this.g=0}function M(){this.value=this.g=0}function ye(){this.G=u(5,X),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(co,M)}function se(v,T,z,W){e(v!=null),e(T!=null),e(2147483648>W),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=T,v.pa=z,v.Jd=T,v.Yc=z+W,v.Zc=4<=W?z+W-4+1:z,j(v)}function ie(v,T){for(var z=0;0<T--;)z|=fe(v,128)<<T;return z}function Se(v,T){var z=ie(v,T);return de(v)?-z:z}function me(v,T,z,W){var ce,ge=0;for(e(v!=null),e(T!=null),e(4294967288>W),v.Sb=W,v.Ra=0,v.u=0,v.h=0,4<W&&(W=4),ce=0;ce<W;++ce)ge+=T[z+ce]<<8*ce;v.Ra=ge,v.bb=W,v.oa=T,v.pa=z}function Ne(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<na-8>>>0,++v.bb,v.u-=8;pe(v)&&(v.h=1,v.u=0)}function K(v,T){if(e(0<=T),!v.h&&T<=Ai){var z=ee(v)&Pi[T];return v.u+=T,Ne(v),z}return v.h=1,v.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(v){return v.Ra>>>(v.u&na-1)>>>0}function pe(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>na}function ae(v,T){v.u=T,v.h=pe(v)}function B(v){v.u>=ra&&(e(v.u>=ra),Ne(v))}function j(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function de(v){return ie(v,1)}function fe(v,T){var z=v.Ca;0>v.b&&j(v);var W=v.b,ce=z*T>>>8,ge=(v.I>>>W>ce)+0;for(ge?(z-=ce,v.I-=ce+1<<W>>>0):z=ce+1,W=z,ce=0;256<=W;)ce+=8,W>>=8;return W=7^ce+Ia[W],v.b-=W,v.Ca=(z<<W)-1,ge}function re(v,T,z){v[T+0]=z>>24&255,v[T+1]=z>>16&255,v[T+2]=z>>8&255,v[T+3]=255&z}function he(v,T){return v[T+0]|v[T+1]<<8}function ke(v,T){return he(v,T)|v[T+2]<<16}function q(v,T){return he(v,T)|he(v,T+2)<<16}function oe(v,T){var z=1<<T;return e(v!=null),e(0<T),v.X=s(z),v.X==null?0:(v.Mb=32-T,v.Xa=T,1)}function Y(v,T){e(v!=null),e(T!=null),e(v.Xa==T.Xa),r(T.X,0,v.X,0,1<<T.Xa)}function I(){this.X=[],this.Xa=this.Mb=0}function P(v,T,z,W){e(z!=null),e(W!=null);var ce=z[0],ge=W[0];return ce==0&&(ce=(v*ge+T/2)/T),ge==0&&(ge=(T*ce+v/2)/v),0>=ce||0>=ge?0:(z[0]=ce,W[0]=ge,1)}function H(v,T){return v+(1<<T)-1>>>T}function be(v,T){return((4278255360&v)+(4278255360&T)>>>0&4278255360)+((16711935&v)+(16711935&T)>>>0&16711935)>>>0}function ne(v,T){O[T]=function(z,W,ce,ge,ve,xe,Ae){var Te;for(Te=0;Te<ve;++Te){var Pe=O[v](xe[Ae+Te-1],ce,ge+Te);xe[Ae+Te]=be(z[W+Te],Pe)}}}function we(){this.ud=this.hd=this.jd=0}function Re(v,T){return((4278124286&(v^T))>>>1)+(v&T)>>>0}function De(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function Ue(v,T){return De(v+(v-T+.5>>1))}function Ke(v,T,z){return Math.abs(T-z)-Math.abs(v-z)}function at(v,T,z,W,ce,ge,ve){for(W=ge[ve-1],z=0;z<ce;++z)ge[ve+z]=W=be(v[T+z],W)}function ot(v,T,z,W,ce){var ge;for(ge=0;ge<z;++ge){var ve=v[T+ge],xe=ve>>8&255,Ae=16711935&(Ae=(Ae=16711935&ve)+((xe<<16)+xe));W[ce+ge]=(4278255360&ve)+Ae>>>0}}function pt(v,T){T.jd=255&v,T.hd=v>>8&255,T.ud=v>>16&255}function Nt(v,T,z,W,ce,ge){var ve;for(ve=0;ve<W;++ve){var xe=T[z+ve],Ae=xe>>>8,Te=xe,Pe=255&(Pe=(Pe=xe>>>16)+((v.jd<<24>>24)*(Ae<<24>>24)>>>5));Te=255&(Te=(Te+=(v.hd<<24>>24)*(Ae<<24>>24)>>>5)+((v.ud<<24>>24)*(Pe<<24>>24)>>>5)),ce[ge+ve]=(4278255360&xe)+(Pe<<16)+Te}}function yt(v,T,z,W,ce){O[T]=function(ge,ve,xe,Ae,Te,Pe,ze,Ee,Oe){for(Ae=ze;Ae<Ee;++Ae)for(ze=0;ze<Oe;++ze)Te[Pe++]=ce(xe[W(ge[ve++])])},O[v]=function(ge,ve,xe,Ae,Te,Pe,ze){var Ee=8>>ge.b,Oe=ge.Ea,qe=ge.K[0],Ye=ge.w;if(8>Ee)for(ge=(1<<ge.b)-1,Ye=(1<<Ee)-1;ve<xe;++ve){var je,Je=0;for(je=0;je<Oe;++je)je&ge||(Je=W(Ae[Te++])),Pe[ze++]=ce(qe[Je&Ye]),Je>>=Ee}else O["VP8LMapColor"+z](Ae,Te,qe,Ye,Pe,ze,ve,xe,Oe)}}function bn(v,T,z,W,ce){for(z=T+z;T<z;){var ge=v[T++];W[ce++]=ge>>16&255,W[ce++]=ge>>8&255,W[ce++]=255&ge}}function Rt(v,T,z,W,ce){for(z=T+z;T<z;){var ge=v[T++];W[ce++]=ge>>16&255,W[ce++]=ge>>8&255,W[ce++]=255&ge,W[ce++]=ge>>24&255}}function ht(v,T,z,W,ce){for(z=T+z;T<z;){var ge=(ve=v[T++])>>16&240|ve>>12&15,ve=240&ve|ve>>28&15;W[ce++]=ge,W[ce++]=ve}}function Pt(v,T,z,W,ce){for(z=T+z;T<z;){var ge=(ve=v[T++])>>16&248|ve>>13&7,ve=ve>>5&224|ve>>3&31;W[ce++]=ge,W[ce++]=ve}}function Ht(v,T,z,W,ce){for(z=T+z;T<z;){var ge=v[T++];W[ce++]=255&ge,W[ce++]=ge>>8&255,W[ce++]=ge>>16&255}}function Dt(v,T,z,W,ce,ge){if(ge==0)for(z=T+z;T<z;)re(W,((ge=v[T++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),ce+=32;else r(W,ce,v,T,z)}function ln(v,T){O[T][0]=O[v+"0"],O[T][1]=O[v+"1"],O[T][2]=O[v+"2"],O[T][3]=O[v+"3"],O[T][4]=O[v+"4"],O[T][5]=O[v+"5"],O[T][6]=O[v+"6"],O[T][7]=O[v+"7"],O[T][8]=O[v+"8"],O[T][9]=O[v+"9"],O[T][10]=O[v+"10"],O[T][11]=O[v+"11"],O[T][12]=O[v+"12"],O[T][13]=O[v+"13"],O[T][14]=O[v+"0"],O[T][15]=O[v+"0"]}function Wt(v){return v==zu||v==jc||v==Fl||v==zc}function jn(){this.eb=[],this.size=this.A=this.fb=0}function Jn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function cn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new jn,this.f.kb=new Jn,this.sd=null}function kt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function xs(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function ci(v,T){var z=v.T,W=T.ba.f.RGBA,ce=W.eb,ge=W.fb+v.ka*W.A,ve=ri[T.ba.S],xe=v.y,Ae=v.O,Te=v.f,Pe=v.N,ze=v.ea,Ee=v.W,Oe=T.cc,qe=T.dc,Ye=T.Mc,je=T.Nc,Je=v.ka,Qe=v.ka+v.T,ct=v.U,rt=ct+1>>1;for(Je==0?ve(xe,Ae,null,null,Te,Pe,ze,Ee,Te,Pe,ze,Ee,ce,ge,null,null,ct):(ve(T.ec,T.fc,xe,Ae,Oe,qe,Ye,je,Te,Pe,ze,Ee,ce,ge-W.A,ce,ge,ct),++z);Je+2<Qe;Je+=2)Oe=Te,qe=Pe,Ye=ze,je=Ee,Pe+=v.Rc,Ee+=v.Rc,ge+=2*W.A,ve(xe,(Ae+=2*v.fa)-v.fa,xe,Ae,Oe,qe,Ye,je,Te,Pe,ze,Ee,ce,ge-W.A,ce,ge,ct);return Ae+=v.fa,v.j+Qe<v.o?(r(T.ec,T.fc,xe,Ae,ct),r(T.cc,T.dc,Te,Pe,rt),r(T.Mc,T.Nc,ze,Ee,rt),z--):1&Qe||ve(xe,Ae,null,null,Te,Pe,ze,Ee,Te,Pe,ze,Ee,ce,ge+W.A,null,null,ct),z}function Ws(v,T,z){var W=v.F,ce=[v.J];if(W!=null){var ge=v.U,ve=T.ba.S,xe=ve==ju||ve==Fl;T=T.ba.f.RGBA;var Ae=[0],Te=v.ka;Ae[0]=v.T,v.Kb&&(Te==0?--Ae[0]:(--Te,ce[0]-=v.width),v.j+v.ka+v.T==v.o&&(Ae[0]=v.o-v.j-Te));var Pe=T.eb;Te=T.fb+Te*T.A,v=Uu(W,ce[0],v.width,ge,Ae,Pe,Te+(xe?0:3),T.A),e(z==Ae),v&&Wt(ve)&&Zo(Pe,Te,xe,ge,Ae,T.A)}return 0}function ts(v){var T=v.ma,z=T.ba.S,W=11>z,ce=z==mi||z==os||z==ju||z==Ul||z==12||Wt(z);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!ka(T.Oa,v,ce?11:12))return 0;if(ce&&Wt(z)&&Oc(),v.da)alert("todo:use_scaling");else{if(W){if(T.Ib=xs,v.Kb){if(z=v.U+1>>1,T.memory=s(v.U+2*z),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+v.U,T.Mc=T.cc,T.Nc=T.dc+z,T.Ib=ci,Oc()}}else alert("todo:EmitYUV");ce&&(T.Jb=Ws,W&&is())}if(W&&!vo){for(v=0;256>v;++v)ii[v]=89858*(v-128)+jl>>hs,Gg[v]=-22014*(v-128)+jl,ep[v]=-45773*(v-128),Wc[v]=113618*(v-128)+jl>>hs;for(v=nl;v<yo;++v)T=76283*(v-16)+jl>>hs,Vg[v-nl]=fr(T,255),$g[v-nl]=fr(T+8>>4,15);vo=1}return 1}function Mt(v){var T=v.ma,z=v.U,W=v.T;return e(!(1&v.ka)),0>=z||0>=W?0:(z=T.Ib(v,T),T.Jb!=null&&T.Jb(v,T,z),T.Dc+=z,1)}function va(v){v.ma.memory=null}function Ks(v,T,z,W){return K(v,8)!=47?0:(T[0]=K(v,14)+1,z[0]=K(v,14)+1,W[0]=K(v,1),K(v,3)!=0?0:!v.h)}function zi(v,T){if(4>v)return v+1;var z=v-2>>1;return(2+(1&v)<<z)+K(T,z)+1}function Hi(v,T){return 120<T?T-120:1<=(z=((z=us[T-1])>>4)*v+(8-(15&z)))?z:1;var z}function er(v,T,z){var W=ee(z),ce=v[T+=255&W].g-8;return 0<ce&&(ae(z,z.u+8),W=ee(z),T+=v[T].value,T+=W&(1<<ce)-1),ae(z,z.u+v[T].g),v[T].value}function Er(v,T,z){return z.g+=v.g,z.value+=v.value<<T>>>0,e(8>=z.g),v.g}function Gr(v,T,z){var W=v.xc;return e((T=W==0?0:v.vc[v.md*(z>>W)+(T>>W)])<v.Wb),v.Ya[T]}function ro(v,T,z,W){var ce=v.ab,ge=v.c*T,ve=v.C;T=ve+T;var xe=z,Ae=W;for(W=v.Ta,z=v.Ua;0<ce--;){var Te=v.gc[ce],Pe=ve,ze=T,Ee=xe,Oe=Ae,qe=(Ae=W,xe=z,Te.Ea);switch(e(Pe<ze),e(ze<=Te.nc),Te.hc){case 2:br(Ee,Oe,(ze-Pe)*qe,Ae,xe);break;case 0:var Ye=Pe,je=ze,Je=Ae,Qe=xe,ct=(vt=Te).Ea;Ye==0&&(Pl(Ee,Oe,null,null,1,Je,Qe),at(Ee,Oe+1,0,0,ct-1,Je,Qe+1),Oe+=ct,Qe+=ct,++Ye);for(var rt=1<<vt.b,St=rt-1,mt=H(ct,vt.b),Kt=vt.K,vt=vt.w+(Ye>>vt.b)*mt;Ye<je;){var fn=Kt,Xn=vt,Zt=1;for(Ml(Ee,Oe,Je,Qe-ct,1,Je,Qe);Zt<ct;){var gt=(Zt&~St)+rt;gt>ct&&(gt=ct),(0,La[fn[Xn++]>>8&15])(Ee,Oe+ +Zt,Je,Qe+Zt-ct,gt-Zt,Je,Qe+Zt),Zt=gt}Oe+=ct,Qe+=ct,++Ye&St||(vt+=mt)}ze!=Te.nc&&r(Ae,xe-qe,Ae,xe+(ze-Pe-1)*qe,qe);break;case 1:for(qe=Ee,je=Oe,ct=(Ee=Te.Ea)-(Qe=Ee&~(Je=(Oe=1<<Te.b)-1)),Ye=H(Ee,Te.b),rt=Te.K,Te=Te.w+(Pe>>Te.b)*Ye;Pe<ze;){for(St=rt,mt=Te,Kt=new we,vt=je+Qe,fn=je+Ee;je<vt;)pt(St[mt++],Kt),Ol(Kt,qe,je,Oe,Ae,xe),je+=Oe,xe+=Oe;je<fn&&(pt(St[mt++],Kt),Ol(Kt,qe,je,ct,Ae,xe),je+=ct,xe+=ct),++Pe&Je||(Te+=Ye)}break;case 3:if(Ee==Ae&&Oe==xe&&0<Te.b){for(je=Ae,Ee=qe=xe+(ze-Pe)*qe-(Qe=(ze-Pe)*H(Te.Ea,Te.b)),Oe=Ae,Je=xe,Ye=[],Qe=(ct=Qe)-1;0<=Qe;--Qe)Ye[Qe]=Oe[Je+Qe];for(Qe=ct-1;0<=Qe;--Qe)je[Ee+Qe]=Ye[Qe];Dc(Te,Pe,ze,Ae,qe,Ae,xe)}else Dc(Te,Pe,ze,Ee,Oe,Ae,xe)}xe=W,Ae=z}Ae!=z&&r(W,z,xe,Ae,ge)}function _i(v,T){var z=v.V,W=v.Ba+v.c*v.C,ce=T-v.C;if(e(T<=v.l.o),e(16>=ce),0<ce){var ge=v.l,ve=v.Ta,xe=v.Ua,Ae=ge.width;if(ro(v,ce,z,W),ce=xe=[xe],e((z=v.C)<(W=T)),e(ge.v<ge.va),W>ge.o&&(W=ge.o),z<ge.j){var Te=ge.j-z;z=ge.j,ce[0]+=Te*Ae}if(z>=W?z=0:(ce[0]+=4*ge.v,ge.ka=z-ge.j,ge.U=ge.va-ge.v,ge.T=W-z,z=1),z){if(xe=xe[0],11>(z=v.ca).S){var Pe=z.f.RGBA,ze=(W=z.S,ce=ge.U,ge=ge.T,Te=Pe.eb,Pe.A),Ee=ge;for(Pe=Pe.fb+v.Ma*Pe.A;0<Ee--;){var Oe=ve,qe=xe,Ye=ce,je=Te,Je=Pe;switch(W){case Bc:Dl(Oe,qe,Ye,je,Je);break;case mi:Pa(Oe,qe,Ye,je,Je);break;case zu:Pa(Oe,qe,Ye,je,Je),Zo(je,Je,0,Ye,1,0);break;case qc:Yo(Oe,qe,Ye,je,Je);break;case os:Dt(Oe,qe,Ye,je,Je,1);break;case jc:Dt(Oe,qe,Ye,je,Je,1),Zo(je,Je,0,Ye,1,0);break;case ju:Dt(Oe,qe,Ye,je,Je,0);break;case Fl:Dt(Oe,qe,Ye,je,Je,0),Zo(je,Je,1,Ye,1,0);break;case Ul:Ma(Oe,qe,Ye,je,Je);break;case zc:Ma(Oe,qe,Ye,je,Je),as(je,Je,Ye,1,0);break;case fo:aa(Oe,qe,Ye,je,Je);break;default:e(0)}xe+=Ae,Pe+=ze}v.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=z.height)}}v.C=T,e(v.C<=v.i)}function On(v){var T;if(0<v.ua)return 0;for(T=0;T<v.Wb;++T){var z=v.Ya[T].G,W=v.Ya[T].H;if(0<z[1][W[1]+0].g||0<z[2][W[2]+0].g||0<z[3][W[3]+0].g)return 0}return 1}function nr(v,T,z,W,ce,ge){if(v.Z!=0){var ve=v.qd,xe=v.rd;for(e(Ua[v.Z]!=null);T<z;++T)Ua[v.Z](ve,xe,W,ce,W,ce,ge),ve=W,xe=ce,ce+=ge;v.qd=ve,v.rd=xe}}function fi(v,T){var z=v.l.ma,W=z.Z==0||z.Z==1?v.l.j:v.C;if(W=v.C<W?W:v.C,e(T<=v.l.o),T>W){var ce=v.l.width,ge=z.ca,ve=z.tb+ce*W,xe=v.V,Ae=v.Ba+v.c*W,Te=v.gc;e(v.ab==1),e(Te[0].hc==3),sa(Te[0],W,T,xe,Ae,ge,ve),nr(z,W,T,ge,ve,ce)}v.C=v.Ma=T}function Gi(v,T,z,W,ce,ge,ve){var xe=v.$/W,Ae=v.$%W,Te=v.m,Pe=v.s,ze=z+v.$,Ee=ze;ce=z+W*ce;var Oe=z+W*ge,qe=280+Pe.ua,Ye=v.Pb?xe:16777216,je=0<Pe.ua?Pe.Wa:null,Je=Pe.wc,Qe=ze<Oe?Gr(Pe,Ae,xe):null;e(v.C<ge),e(Oe<=ce);var ct=!1;e:for(;;){for(;ct||ze<Oe;){var rt=0;if(xe>=Ye){var St=ze-z;e((Ye=v).Pb),Ye.wd=Ye.m,Ye.xd=St,0<Ye.s.ua&&Y(Ye.s.Wa,Ye.s.vb),Ye=xe+ho}if(Ae&Je||(Qe=Gr(Pe,Ae,xe)),e(Qe!=null),Qe.Qb&&(T[ze]=Qe.qb,ct=!0),!ct)if(B(Te),Qe.jc){rt=Te,St=T;var mt=ze,Kt=Qe.pd[ee(rt)&co-1];e(Qe.jc),256>Kt.g?(ae(rt,rt.u+Kt.g),St[mt]=Kt.value,rt=0):(ae(rt,rt.u+Kt.g-256),e(256<=Kt.value),rt=Kt.value),rt==0&&(ct=!0)}else rt=er(Qe.G[0],Qe.H[0],Te);if(Te.h)break;if(ct||256>rt){if(!ct)if(Qe.nd)T[ze]=(Qe.qb|rt<<8)>>>0;else{if(B(Te),ct=er(Qe.G[1],Qe.H[1],Te),B(Te),St=er(Qe.G[2],Qe.H[2],Te),mt=er(Qe.G[3],Qe.H[3],Te),Te.h)break;T[ze]=(mt<<24|ct<<16|rt<<8|St)>>>0}if(ct=!1,++ze,++Ae>=W&&(Ae=0,++xe,ve!=null&&xe<=ge&&!(xe%16)&&ve(v,xe),je!=null))for(;Ee<ze;)rt=T[Ee++],je.X[(506832829*rt&4294967295)>>>je.Mb]=rt}else if(280>rt){if(rt=zi(rt-256,Te),St=er(Qe.G[4],Qe.H[4],Te),B(Te),St=Hi(W,St=zi(St,Te)),Te.h)break;if(ze-z<St||ce-ze<rt)break e;for(mt=0;mt<rt;++mt)T[ze+mt]=T[ze+mt-St];for(ze+=rt,Ae+=rt;Ae>=W;)Ae-=W,++xe,ve!=null&&xe<=ge&&!(xe%16)&&ve(v,xe);if(e(ze<=ce),Ae&Je&&(Qe=Gr(Pe,Ae,xe)),je!=null)for(;Ee<ze;)rt=T[Ee++],je.X[(506832829*rt&4294967295)>>>je.Mb]=rt}else{if(!(rt<qe))break e;for(ct=rt-280,e(je!=null);Ee<ze;)rt=T[Ee++],je.X[(506832829*rt&4294967295)>>>je.Mb]=rt;rt=ze,e(!(ct>>>(St=je).Xa)),T[rt]=St.X[ct],ct=!0}ct||e(Te.h==pe(Te))}if(v.Pb&&Te.h&&ze<ce)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&Y(v.s.vb,v.s.Wa);else{if(Te.h)break e;ve!=null&&ve(v,xe>ge?ge:xe),v.a=0,v.$=ze-z}return 1}return v.a=3,0}function ns(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var T=v.Wa;T!=null&&(T.X=null),v.vb=null,e(v!=null)}function Bo(){var v=new Et;return v==null?null:(v.a=0,v.xb=Sd,ln("Predictor","VP8LPredictors"),ln("Predictor","VP8LPredictors_C"),ln("PredictorAdd","VP8LPredictorsAdd"),ln("PredictorAdd","VP8LPredictorsAdd_C"),br=ot,Ol=Nt,Dl=bn,Pa=Rt,Ma=ht,aa=Pt,Yo=Ht,O.VP8LMapColor32b=ia,O.VP8LMapColor8b=ei,v)}function As(v,T,z,W,ce){var ge=1,ve=[v],xe=[T],Ae=W.m,Te=W.s,Pe=null,ze=0;e:for(;;){if(z)for(;ge&&K(Ae,1);){var Ee=ve,Oe=xe,qe=W,Ye=1,je=qe.m,Je=qe.gc[qe.ab],Qe=K(je,2);if(qe.Oc&1<<Qe)ge=0;else{switch(qe.Oc|=1<<Qe,Je.hc=Qe,Je.Ea=Ee[0],Je.nc=Oe[0],Je.K=[null],++qe.ab,e(4>=qe.ab),Qe){case 0:case 1:Je.b=K(je,3)+2,Ye=As(H(Je.Ea,Je.b),H(Je.nc,Je.b),0,qe,Je.K),Je.K=Je.K[0];break;case 3:var ct,rt=K(je,8)+1,St=16<rt?0:4<rt?1:2<rt?2:3;if(Ee[0]=H(Je.Ea,St),Je.b=St,ct=Ye=As(rt,1,0,qe,Je.K)){var mt,Kt=rt,vt=Je,fn=1<<(8>>vt.b),Xn=s(fn);if(Xn==null)ct=0;else{var Zt=vt.K[0],gt=vt.w;for(Xn[0]=vt.K[0][0],mt=1;mt<1*Kt;++mt)Xn[mt]=be(Zt[gt+mt],Xn[mt-1]);for(;mt<4*fn;++mt)Xn[mt]=0;vt.K[0]=null,vt.K[0]=Xn,ct=1}}Ye=ct;break;case 2:break;default:e(0)}ge=Ye}}if(ve=ve[0],xe=xe[0],ge&&K(Ae,1)&&!(ge=1<=(ze=K(Ae,4))&&11>=ze)){W.a=3;break e}var dt;if(dt=ge)t:{var ir,jt,nn,In=W,Ur=ve,si=xe,Gn=ze,Cr=z,gi=In.m,Nr=In.s,on=[null],_n=1,sr=0,Cn=cs[Gn];n:for(;;){if(Cr&&K(gi,1)){var Fr=K(gi,3)+2,ar=H(Ur,Fr),Sn=H(si,Fr),xr=ar*Sn;if(!As(ar,Sn,0,In,on))break n;for(on=on[0],Nr.xc=Fr,ir=0;ir<xr;++ir){var Ln=on[ir]>>8&65535;on[ir]=Ln,Ln>=_n&&(_n=Ln+1)}}if(gi.h)break n;for(jt=0;5>jt;++jt){var Rr=el[jt];!jt&&0<Gn&&(Rr+=1<<Gn),sr<Rr&&(sr=Rr)}var kr=u(_n*Cn,X),Dn=_n,wn=u(Dn,ye);if(wn==null)var yi=null;else e(65536>=Dn),yi=wn;var hr=s(sr);if(yi==null||hr==null||kr==null){In.a=1;break n}var Ot=kr;for(ir=nn=0;ir<_n;++ir){var Ut=yi[ir],xn=Ut.G,Mi=Ut.H,ps=0,Ti=1,Ir=0;for(jt=0;5>jt;++jt){Rr=el[jt],xn[jt]=Ot,Mi[jt]=nn,!jt&&0<Gn&&(Rr+=1<<Gn);i:{var wo,bo=Rr,Jc=In,Vn=hr,Ad=Ot,Ed=nn,Yc=0,Fa=Jc.m,Wg=K(Fa,1);if(i(Vn,0,0,bo),Wg){var Td=K(Fa,1)+1,Cd=K(Fa,1),Xc=K(Fa,Cd==0?1:8);Vn[Xc]=1,Td==2&&(Vn[Xc=K(Fa,8)]=1);var $r=1}else{var pr=s(19),$u=K(Fa,4)+4;if(19<$u){Jc.a=3;var _o=0;break i}for(wo=0;wo<$u;++wo)pr[Hu[wo]]=K(Fa,3);var Hl=void 0,rl=void 0,ua=Jc,Zc=pr,Gl=bo,Qc=Vn,ef=0,Ba=ua.m,Nd=8,Rd=u(128,X);r:for(;U(Rd,0,7,Zc,19);){if(K(Ba,1)){var tp=2+2*K(Ba,3);if((Hl=2+K(Ba,tp))>Gl)break r}else Hl=Gl;for(rl=0;rl<Gl&&Hl--;){B(Ba);var kd=Rd[0+(127&ee(Ba))];ae(Ba,Ba.u+kd.g);var So=kd.value;if(16>So)Qc[rl++]=So,So!=0&&(Nd=So);else{var np=So==16,rp=So-16,ip=Bl[rp],Id=K(Ba,ls[rp])+ip;if(rl+Id>Gl)break r;for(var sp=np?Nd:0;0<Id--;)Qc[rl++]=sp}}ef=1;break r}ef||(ua.a=3),$r=ef}($r=$r&&!Fa.h)&&(Yc=U(Ad,Ed,8,Vn,bo)),$r&&Yc!=0?_o=Yc:(Jc.a=3,_o=0)}if(_o==0)break n;if(Ti&&Hc[jt]==1&&(Ti=Ot[nn].g==0),ps+=Ot[nn].g,nn+=_o,3>=jt){var il,tf=hr[0];for(il=1;il<Rr;++il)hr[il]>tf&&(tf=hr[il]);Ir+=tf}}if(Ut.nd=Ti,Ut.Qb=0,Ti&&(Ut.qb=(xn[3][Mi[3]+0].value<<24|xn[1][Mi[1]+0].value<<16|xn[2][Mi[2]+0].value)>>>0,ps==0&&256>xn[0][Mi[0]+0].value&&(Ut.Qb=1,Ut.qb+=xn[0][Mi[0]+0].value<<8)),Ut.jc=!Ut.Qb&&6>Ir,Ut.jc){var Wu,ca=Ut;for(Wu=0;Wu<co;++Wu){var qa=Wu,ja=ca.pd[qa],nf=ca.G[0][ca.H[0]+qa];256<=nf.value?(ja.g=nf.g+256,ja.value=nf.value):(ja.g=0,ja.value=0,qa>>=Er(nf,8,ja),qa>>=Er(ca.G[1][ca.H[1]+qa],16,ja),qa>>=Er(ca.G[2][ca.H[2]+qa],0,ja),Er(ca.G[3][ca.H[3]+qa],24,ja))}}}Nr.vc=on,Nr.Wb=_n,Nr.Ya=yi,Nr.yc=kr,dt=1;break t}dt=0}if(!(ge=dt)){W.a=3;break e}if(0<ze){if(Te.ua=1<<ze,!oe(Te.Wa,ze)){W.a=1,ge=0;break e}}else Te.ua=0;var rf=W,sl=ve,ap=xe,Vl=rf.s,$l=Vl.xc;if(rf.c=sl,rf.i=ap,Vl.md=H(sl,$l),Vl.wc=$l==0?-1:(1<<$l)-1,z){W.xb=po;break e}if((Pe=s(ve*xe))==null){W.a=1,ge=0;break e}ge=(ge=Gi(W,Pe,0,ve,xe,xe,null))&&!Ae.h;break e}return ge?(ce!=null?ce[0]=Pe:(e(Pe==null),e(z)),W.$=0,z||ns(Te)):ns(Te),ge}function Es(v,T){var z=v.c*v.i,W=z+T+16*T;return e(v.c<=T),v.V=s(W),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+z+T,1)}function io(v,T){var z=v.C,W=T-z,ce=v.V,ge=v.Ba+v.c*z;for(e(T<=v.l.o);0<W;){var ve=16<W?16:W,xe=v.l.ma,Ae=v.l.width,Te=Ae*ve,Pe=xe.ca,ze=xe.tb+Ae*z,Ee=v.Ta,Oe=v.Ua;ro(v,ve,ce,ge),Zi(Ee,Oe,Pe,ze,Te),nr(xe,z,z+ve,Pe,ze,Ae),W-=ve,ce+=ve*v.c,z+=ve}e(z==T),v.C=v.Ma=T}function Ts(){this.ub=this.yd=this.td=this.Rb=0}function Cs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Js(){this.Yb=(function(){var v=[];return(function T(z,W,ce){for(var ge=ce[W],ve=0;ve<ge&&(z.push(ce.length>W+1?[]:0),!(ce.length<W+1));ve++)T(z[ve],W+1,ce)})(v,0,[3,11]),v})()}function yr(){this.jb=s(3),this.Wc=l([4,8],Js),this.Xc=l([4,17],Js)}function bu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Vi(){this.ld=this.La=this.dd=this.tc=0}function Ns(){this.Na=this.la=0}function wa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _u(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Su(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vi),this.Y=0,this.ya=Array(new _u),this.aa=0,this.l=new ba}function xu(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Tc(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Ts,this.Kc=new Cs,this.ed=new bu,this.Qa=new qo,this.Ic=this.$c=this.Aa=0,this.D=new Su,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,L),this.ia=0,this.pb=u(4,wa),this.Pa=new yr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xu),this.Hd=0,this.rb=Array(new Ns),this.sb=0,this.wa=Array(new Vi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _u),this.L=this.aa=0,this.gd=l([4,2],Vi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ba(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Tl(){var v=new Tc;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,Qi||(Qi=_a)),v}function Mn(v,T,z){return v.a==0&&(v.a=T,v.sc=z,v.cb=0),0}function Si(v,T,z){return 3<=z&&v[T+0]==157&&v[T+1]==1&&v[T+2]==42}function Au(v,T){if(v==null)return 0;if(v.a=0,v.sc="OK",T==null)return Mn(v,2,"null VP8Io passed to VP8GetHeaders()");var z=T.data,W=T.w,ce=T.ha;if(4>ce)return Mn(v,7,"Truncated header.");var ge=z[W+0]|z[W+1]<<8|z[W+2]<<16,ve=v.Od;if(ve.Rb=!(1&ge),ve.td=ge>>1&7,ve.yd=ge>>4&1,ve.ub=ge>>5,3<ve.td)return Mn(v,3,"Incorrect keyframe parameters.");if(!ve.yd)return Mn(v,4,"Frame not displayable.");W+=3,ce-=3;var xe=v.Kc;if(ve.Rb){if(7>ce)return Mn(v,7,"cannot parse picture header");if(!Si(z,W,ce))return Mn(v,3,"Bad code word");xe.c=16383&(z[W+4]<<8|z[W+3]),xe.Td=z[W+4]>>6,xe.i=16383&(z[W+6]<<8|z[W+5]),xe.Ud=z[W+6]>>6,W+=7,ce-=7,v.za=xe.c+15>>4,v.Ub=xe.i+15>>4,T.width=xe.c,T.height=xe.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((ge=v.Pa).jb,0,255,ge.jb.length),e((ge=v.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,i(ge.Zb,0,0,ge.Zb.length),i(ge.Lb,0,0,ge.Lb)}if(ve.ub>ce)return Mn(v,7,"bad partition length");se(ge=v.m,z,W,ve.ub),W+=ve.ub,ce-=ve.ub,ve.Rb&&(xe.Ld=de(ge),xe.Kd=de(ge)),xe=v.Qa;var Ae,Te=v.Pa;if(e(ge!=null),e(xe!=null),xe.Cb=de(ge),xe.Cb){if(xe.Bb=de(ge),de(ge)){for(xe.Fb=de(ge),Ae=0;4>Ae;++Ae)xe.Zb[Ae]=de(ge)?Se(ge,7):0;for(Ae=0;4>Ae;++Ae)xe.Lb[Ae]=de(ge)?Se(ge,6):0}if(xe.Bb)for(Ae=0;3>Ae;++Ae)Te.jb[Ae]=de(ge)?ie(ge,8):255}else xe.Bb=0;if(ge.Ka)return Mn(v,3,"cannot parse segment header");if((xe=v.ed).zd=de(ge),xe.Tb=ie(ge,6),xe.wb=ie(ge,3),xe.Pc=de(ge),xe.Pc&&de(ge)){for(Te=0;4>Te;++Te)de(ge)&&(xe.vd[Te]=Se(ge,6));for(Te=0;4>Te;++Te)de(ge)&&(xe.od[Te]=Se(ge,6))}if(v.L=xe.Tb==0?0:xe.zd?1:2,ge.Ka)return Mn(v,3,"cannot parse filter header");var Pe=ce;if(ce=Ae=W,W=Ae+Pe,xe=Pe,v.Xb=(1<<ie(v.m,2))-1,Pe<3*(Te=v.Xb))z=7;else{for(Ae+=3*Te,xe-=3*Te,Pe=0;Pe<Te;++Pe){var ze=z[ce+0]|z[ce+1]<<8|z[ce+2]<<16;ze>xe&&(ze=xe),se(v.Jc[+Pe],z,Ae,ze),Ae+=ze,xe-=ze,ce+=3}se(v.Jc[+Te],z,Ae,xe),z=Ae<W?0:5}if(z!=0)return Mn(v,z,"cannot parse partitions");for(z=ie(Ae=v.m,7),ce=de(Ae)?Se(Ae,4):0,W=de(Ae)?Se(Ae,4):0,xe=de(Ae)?Se(Ae,4):0,Te=de(Ae)?Se(Ae,4):0,Ae=de(Ae)?Se(Ae,4):0,Pe=v.Qa,ze=0;4>ze;++ze){if(Pe.Cb){var Ee=Pe.Zb[ze];Pe.Fb||(Ee+=z)}else{if(0<ze){v.pb[ze]=v.pb[0];continue}Ee=z}var Oe=v.pb[ze];Oe.Sc[0]=fs[fr(Ee+ce,127)],Oe.Sc[1]=ds[fr(Ee+0,127)],Oe.Eb[0]=2*fs[fr(Ee+W,127)],Oe.Eb[1]=101581*ds[fr(Ee+xe,127)]>>16,8>Oe.Eb[1]&&(Oe.Eb[1]=8),Oe.Qc[0]=fs[fr(Ee+Te,117)],Oe.Qc[1]=ds[fr(Ee+Ae,127)],Oe.lc=Ee+Ae}if(!ve.Rb)return Mn(v,4,"Not a key frame.");for(de(ge),ve=v.Pa,z=0;4>z;++z){for(ce=0;8>ce;++ce)for(W=0;3>W;++W)for(xe=0;11>xe;++xe)Te=fe(ge,Yn[z][ce][W][xe])?ie(ge,8):Qh[z][ce][W][xe],ve.Wc[z][ce].Yb[W][xe]=Te;for(ce=0;17>ce;++ce)ve.Xc[z][ce]=ve.Wc[z][dn[ce]]}return v.kc=de(ge),v.kc&&(v.Bd=ie(ge,8)),v.cb=1}function _a(v,T,z,W,ce,ge,ve){var xe=T[ce].Yb[z];for(z=0;16>ce;++ce){if(!fe(v,xe[z+0]))return ce;for(;!fe(v,xe[z+1]);)if(xe=T[++ce].Yb[0],z=0,ce==16)return 16;var Ae=T[ce+1].Yb;if(fe(v,xe[z+2])){var Te=v,Pe=0;if(fe(Te,(Ee=xe)[(ze=z)+3]))if(fe(Te,Ee[ze+6])){for(xe=0,ze=2*(Pe=fe(Te,Ee[ze+8]))+(Ee=fe(Te,Ee[ze+9+Pe])),Pe=0,Ee=Zh[ze];Ee[xe];++xe)Pe+=Pe+fe(Te,Ee[xe]);Pe+=3+(8<<ze)}else fe(Te,Ee[ze+7])?(Pe=7+2*fe(Te,165),Pe+=fe(Te,145)):Pe=5+fe(Te,159);else Pe=fe(Te,Ee[ze+4])?3+fe(Te,Ee[ze+5]):2;xe=Ae[2]}else Pe=1,xe=Ae[1];Ae=ve+_d[ce],0>(Te=v).b&&j(Te);var ze,Ee=Te.b,Oe=(ze=Te.Ca>>1)-(Te.I>>Ee)>>31;--Te.b,Te.Ca+=Oe,Te.Ca|=1,Te.I-=(ze+1&Oe)<<Ee,ge[Ae]=((Pe^Oe)-Oe)*W[(0<ce)+0]}return 16}function Sa(v){var T=v.rb[v.sb-1];T.la=0,T.Na=0,i(v.zc,0,0,v.zc.length),v.ja=0}function rs(v,T,z,W,ce){ce=v[T+z+32*W]+(ce>>3),v[T+z+32*W]=-256&ce?0>ce?0:255:ce}function Ys(v,T,z,W,ce,ge){rs(v,T,0,z,W+ce),rs(v,T,1,z,W+ge),rs(v,T,2,z,W-ge),rs(v,T,3,z,W-ce)}function vr(v){return(20091*v>>16)+v}function di(v,T,z,W){var ce,ge=0,ve=s(16);for(ce=0;4>ce;++ce){var xe=v[T+0]+v[T+8],Ae=v[T+0]-v[T+8],Te=(35468*v[T+4]>>16)-vr(v[T+12]),Pe=vr(v[T+4])+(35468*v[T+12]>>16);ve[ge+0]=xe+Pe,ve[ge+1]=Ae+Te,ve[ge+2]=Ae-Te,ve[ge+3]=xe-Pe,ge+=4,T++}for(ce=ge=0;4>ce;++ce)xe=(v=ve[ge+0]+4)+ve[ge+8],Ae=v-ve[ge+8],Te=(35468*ve[ge+4]>>16)-vr(ve[ge+12]),rs(z,W,0,0,xe+(Pe=vr(ve[ge+4])+(35468*ve[ge+12]>>16))),rs(z,W,1,0,Ae+Te),rs(z,W,2,0,Ae-Te),rs(z,W,3,0,xe-Pe),ge++,W+=32}function Eu(v,T,z,W){var ce=v[T+0]+4,ge=35468*v[T+4]>>16,ve=vr(v[T+4]),xe=35468*v[T+1]>>16;Ys(z,W,0,ce+ve,v=vr(v[T+1]),xe),Ys(z,W,1,ce+ge,v,xe),Ys(z,W,2,ce-ge,v,xe),Ys(z,W,3,ce-ve,v,xe)}function Cc(v,T,z,W,ce){di(v,T,z,W),ce&&di(v,T+16,z,W+4)}function Tu(v,T,z,W){Oa(v,T+0,z,W,1),Oa(v,T+32,z,W+128,1)}function xi(v,T,z,W){var ce;for(v=v[T+0]+4,ce=0;4>ce;++ce)for(T=0;4>T;++T)rs(z,W,T,ce,v)}function Cu(v,T,z,W){v[T+0]&&Tn(v,T+0,z,W),v[T+16]&&Tn(v,T+16,z,W+4),v[T+32]&&Tn(v,T+32,z,W+128),v[T+48]&&Tn(v,T+48,z,W+128+4)}function Nu(v,T,z,W){var ce,ge=s(16);for(ce=0;4>ce;++ce){var ve=v[T+0+ce]+v[T+12+ce],xe=v[T+4+ce]+v[T+8+ce],Ae=v[T+4+ce]-v[T+8+ce],Te=v[T+0+ce]-v[T+12+ce];ge[0+ce]=ve+xe,ge[8+ce]=ve-xe,ge[4+ce]=Te+Ae,ge[12+ce]=Te-Ae}for(ce=0;4>ce;++ce)ve=(v=ge[0+4*ce]+3)+ge[3+4*ce],xe=ge[1+4*ce]+ge[2+4*ce],Ae=ge[1+4*ce]-ge[2+4*ce],Te=v-ge[3+4*ce],z[W+0]=ve+xe>>3,z[W+16]=Te+Ae>>3,z[W+32]=ve-xe>>3,z[W+48]=Te-Ae>>3,W+=64}function $i(v,T,z){var W,ce=T-32,ge=pi,ve=255-v[ce-1];for(W=0;W<z;++W){var xe,Ae=ge,Te=ve+v[T-1];for(xe=0;xe<z;++xe)v[T+xe]=Ae[Te+v[ce+xe]];T+=32}}function Ru(v,T){$i(v,T,4)}function Nc(v,T){$i(v,T,8)}function Rc(v,T){$i(v,T,16)}function ku(v,T){var z;for(z=0;16>z;++z)r(v,T+32*z,v,T-32,16)}function Iu(v,T){var z;for(z=16;0<z;--z)i(v,T,v[T-1],16),T+=32}function jo(v,T,z){var W;for(W=0;16>W;++W)i(T,z+32*W,v,16)}function Rs(v,T){var z,W=16;for(z=0;16>z;++z)W+=v[T-1+32*z]+v[T+z-32];jo(W>>5,v,T)}function ks(v,T){var z,W=8;for(z=0;16>z;++z)W+=v[T-1+32*z];jo(W>>4,v,T)}function xa(v,T){var z,W=8;for(z=0;16>z;++z)W+=v[T+z-32];jo(W>>4,v,T)}function zo(v,T){jo(128,v,T)}function qt(v,T,z){return v+2*T+z+2>>2}function so(v,T){var z,W=T-32;for(W=new Uint8Array([qt(v[W-1],v[W+0],v[W+1]),qt(v[W+0],v[W+1],v[W+2]),qt(v[W+1],v[W+2],v[W+3]),qt(v[W+2],v[W+3],v[W+4])]),z=0;4>z;++z)r(v,T+32*z,W,0,W.length)}function kc(v,T){var z=v[T-1],W=v[T-1+32],ce=v[T-1+64],ge=v[T-1+96];re(v,T+0,16843009*qt(v[T-1-32],z,W)),re(v,T+32,16843009*qt(z,W,ce)),re(v,T+64,16843009*qt(W,ce,ge)),re(v,T+96,16843009*qt(ce,ge,ge))}function Lu(v,T){var z,W=4;for(z=0;4>z;++z)W+=v[T+z-32]+v[T-1+32*z];for(W>>=3,z=0;4>z;++z)i(v,T+32*z,W,4)}function Ic(v,T){var z=v[T-1+0],W=v[T-1+32],ce=v[T-1+64],ge=v[T-1-32],ve=v[T+0-32],xe=v[T+1-32],Ae=v[T+2-32],Te=v[T+3-32];v[T+0+96]=qt(W,ce,v[T-1+96]),v[T+1+96]=v[T+0+64]=qt(z,W,ce),v[T+2+96]=v[T+1+64]=v[T+0+32]=qt(ge,z,W),v[T+3+96]=v[T+2+64]=v[T+1+32]=v[T+0+0]=qt(ve,ge,z),v[T+3+64]=v[T+2+32]=v[T+1+0]=qt(xe,ve,ge),v[T+3+32]=v[T+2+0]=qt(Ae,xe,ve),v[T+3+0]=qt(Te,Ae,xe)}function Wi(v,T){var z=v[T+1-32],W=v[T+2-32],ce=v[T+3-32],ge=v[T+4-32],ve=v[T+5-32],xe=v[T+6-32],Ae=v[T+7-32];v[T+0+0]=qt(v[T+0-32],z,W),v[T+1+0]=v[T+0+32]=qt(z,W,ce),v[T+2+0]=v[T+1+32]=v[T+0+64]=qt(W,ce,ge),v[T+3+0]=v[T+2+32]=v[T+1+64]=v[T+0+96]=qt(ce,ge,ve),v[T+3+32]=v[T+2+64]=v[T+1+96]=qt(ge,ve,xe),v[T+3+64]=v[T+2+96]=qt(ve,xe,Ae),v[T+3+96]=qt(xe,Ae,Ae)}function Xr(v,T){var z=v[T-1+0],W=v[T-1+32],ce=v[T-1+64],ge=v[T-1-32],ve=v[T+0-32],xe=v[T+1-32],Ae=v[T+2-32],Te=v[T+3-32];v[T+0+0]=v[T+1+64]=ge+ve+1>>1,v[T+1+0]=v[T+2+64]=ve+xe+1>>1,v[T+2+0]=v[T+3+64]=xe+Ae+1>>1,v[T+3+0]=Ae+Te+1>>1,v[T+0+96]=qt(ce,W,z),v[T+0+64]=qt(W,z,ge),v[T+0+32]=v[T+1+96]=qt(z,ge,ve),v[T+1+32]=v[T+2+96]=qt(ge,ve,xe),v[T+2+32]=v[T+3+96]=qt(ve,xe,Ae),v[T+3+32]=qt(xe,Ae,Te)}function Pu(v,T){var z=v[T+0-32],W=v[T+1-32],ce=v[T+2-32],ge=v[T+3-32],ve=v[T+4-32],xe=v[T+5-32],Ae=v[T+6-32],Te=v[T+7-32];v[T+0+0]=z+W+1>>1,v[T+1+0]=v[T+0+64]=W+ce+1>>1,v[T+2+0]=v[T+1+64]=ce+ge+1>>1,v[T+3+0]=v[T+2+64]=ge+ve+1>>1,v[T+0+32]=qt(z,W,ce),v[T+1+32]=v[T+0+96]=qt(W,ce,ge),v[T+2+32]=v[T+1+96]=qt(ce,ge,ve),v[T+3+32]=v[T+2+96]=qt(ge,ve,xe),v[T+3+64]=qt(ve,xe,Ae),v[T+3+96]=qt(xe,Ae,Te)}function Ho(v,T){var z=v[T-1+0],W=v[T-1+32],ce=v[T-1+64],ge=v[T-1+96];v[T+0+0]=z+W+1>>1,v[T+2+0]=v[T+0+32]=W+ce+1>>1,v[T+2+32]=v[T+0+64]=ce+ge+1>>1,v[T+1+0]=qt(z,W,ce),v[T+3+0]=v[T+1+32]=qt(W,ce,ge),v[T+3+32]=v[T+1+64]=qt(ce,ge,ge),v[T+3+64]=v[T+2+64]=v[T+0+96]=v[T+1+96]=v[T+2+96]=v[T+3+96]=ge}function Ki(v,T){var z=v[T-1+0],W=v[T-1+32],ce=v[T-1+64],ge=v[T-1+96],ve=v[T-1-32],xe=v[T+0-32],Ae=v[T+1-32],Te=v[T+2-32];v[T+0+0]=v[T+2+32]=z+ve+1>>1,v[T+0+32]=v[T+2+64]=W+z+1>>1,v[T+0+64]=v[T+2+96]=ce+W+1>>1,v[T+0+96]=ge+ce+1>>1,v[T+3+0]=qt(xe,Ae,Te),v[T+2+0]=qt(ve,xe,Ae),v[T+1+0]=v[T+3+32]=qt(z,ve,xe),v[T+1+32]=v[T+3+64]=qt(W,z,ve),v[T+1+64]=v[T+3+96]=qt(ce,W,z),v[T+1+96]=qt(ge,ce,W)}function Go(v,T){var z;for(z=0;8>z;++z)r(v,T+32*z,v,T-32,8)}function Xs(v,T){var z;for(z=0;8>z;++z)i(v,T,v[T-1],8),T+=32}function Vo(v,T,z){var W;for(W=0;8>W;++W)i(T,z+32*W,v,8)}function Aa(v,T){var z,W=8;for(z=0;8>z;++z)W+=v[T+z-32]+v[T-1+32*z];Vo(W>>4,v,T)}function Cl(v,T){var z,W=4;for(z=0;8>z;++z)W+=v[T+z-32];Vo(W>>3,v,T)}function Nl(v,T){var z,W=4;for(z=0;8>z;++z)W+=v[T-1+32*z];Vo(W>>3,v,T)}function Vr(v,T){Vo(128,v,T)}function Ji(v,T,z){var W=v[T-z],ce=v[T+0],ge=3*(ce-W)+Da[1020+v[T-2*z]-v[T+z]],ve=qu[112+(ge+4>>3)];v[T-z]=pi[255+W+qu[112+(ge+3>>3)]],v[T+0]=pi[255+ce-ve]}function Zs(v,T,z,W){var ce=v[T+0],ge=v[T+z];return ti[255+v[T-2*z]-v[T-z]]>W||ti[255+ge-ce]>W}function Ea(v,T,z,W){return 4*ti[255+v[T-z]-v[T+0]]+ti[255+v[T-2*z]-v[T+z]]<=W}function Rl(v,T,z,W,ce){var ge=v[T-3*z],ve=v[T-2*z],xe=v[T-z],Ae=v[T+0],Te=v[T+z],Pe=v[T+2*z],ze=v[T+3*z];return 4*ti[255+xe-Ae]+ti[255+ve-Te]>W?0:ti[255+v[T-4*z]-ge]<=ce&&ti[255+ge-ve]<=ce&&ti[255+ve-xe]<=ce&&ti[255+ze-Pe]<=ce&&ti[255+Pe-Te]<=ce&&ti[255+Te-Ae]<=ce}function $o(v,T,z,W){var ce=2*W+1;for(W=0;16>W;++W)Ea(v,T+W,z,ce)&&Ji(v,T+W,z)}function Ta(v,T,z,W){var ce=2*W+1;for(W=0;16>W;++W)Ea(v,T+W*z,1,ce)&&Ji(v,T+W*z,1)}function ao(v,T,z,W){var ce;for(ce=3;0<ce;--ce)$o(v,T+=4*z,z,W)}function Wo(v,T,z,W){var ce;for(ce=3;0<ce;--ce)Ta(v,T+=4,z,W)}function Qs(v,T,z,W,ce,ge,ve,xe){for(ge=2*ge+1;0<ce--;){if(Rl(v,T,z,ge,ve))if(Zs(v,T,z,xe))Ji(v,T,z);else{var Ae=v,Te=T,Pe=z,ze=Ae[Te-2*Pe],Ee=Ae[Te-Pe],Oe=Ae[Te+0],qe=Ae[Te+Pe],Ye=Ae[Te+2*Pe],je=27*(Qe=Da[1020+3*(Oe-Ee)+Da[1020+ze-qe]])+63>>7,Je=18*Qe+63>>7,Qe=9*Qe+63>>7;Ae[Te-3*Pe]=pi[255+Ae[Te-3*Pe]+Qe],Ae[Te-2*Pe]=pi[255+ze+Je],Ae[Te-Pe]=pi[255+Ee+je],Ae[Te+0]=pi[255+Oe-je],Ae[Te+Pe]=pi[255+qe-Je],Ae[Te+2*Pe]=pi[255+Ye-Qe]}T+=W}}function Ca(v,T,z,W,ce,ge,ve,xe){for(ge=2*ge+1;0<ce--;){if(Rl(v,T,z,ge,ve))if(Zs(v,T,z,xe))Ji(v,T,z);else{var Ae=v,Te=T,Pe=z,ze=Ae[Te-Pe],Ee=Ae[Te+0],Oe=Ae[Te+Pe],qe=qu[112+(4+(Ye=3*(Ee-ze))>>3)],Ye=qu[112+(Ye+3>>3)],je=qe+1>>1;Ae[Te-2*Pe]=pi[255+Ae[Te-2*Pe]+je],Ae[Te-Pe]=pi[255+ze+Ye],Ae[Te+0]=pi[255+Ee-qe],Ae[Te+Pe]=pi[255+Oe-je]}T+=W}}function Lc(v,T,z,W,ce,ge){Qs(v,T,z,1,16,W,ce,ge)}function Pc(v,T,z,W,ce,ge){Qs(v,T,1,z,16,W,ce,ge)}function Na(v,T,z,W,ce,ge){var ve;for(ve=3;0<ve;--ve)Ca(v,T+=4*z,z,1,16,W,ce,ge)}function Mc(v,T,z,W,ce,ge){var ve;for(ve=3;0<ve;--ve)Ca(v,T+=4,1,z,16,W,ce,ge)}function D(v,T,z,W,ce,ge,ve,xe){Qs(v,T,ce,1,8,ge,ve,xe),Qs(z,W,ce,1,8,ge,ve,xe)}function ue(v,T,z,W,ce,ge,ve,xe){Qs(v,T,1,ce,8,ge,ve,xe),Qs(z,W,1,ce,8,ge,ve,xe)}function Ce(v,T,z,W,ce,ge,ve,xe){Ca(v,T+4*ce,ce,1,8,ge,ve,xe),Ca(z,W+4*ce,ce,1,8,ge,ve,xe)}function Le(v,T,z,W,ce,ge,ve,xe){Ca(v,T+4,1,ce,8,ge,ve,xe),Ca(z,W+4,1,ce,8,ge,ve,xe)}function Fe(){this.ba=new cn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ze(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function st(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function wt(){this.ua=0,this.Wa=new I,this.vb=new I,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ye,this.yc=new X}function Et(){this.xb=this.a=0,this.l=new ba,this.ca=new cn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new wt,this.ab=0,this.gc=u(4,st),this.Oc=0}function Vt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ba,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xt(v,T,z,W,ce,ge,ve){for(v=v==null?0:v[T+0],T=0;T<ve;++T)ce[ge+T]=v+z[W+T]&255,v=ce[ge+T]}function En(v,T,z,W,ce,ge,ve){var xe;if(v==null)Xt(null,null,z,W,ce,ge,ve);else for(xe=0;xe<ve;++xe)ce[ge+xe]=v[T+xe]+z[W+xe]&255}function rr(v,T,z,W,ce,ge,ve){if(v==null)Xt(null,null,z,W,ce,ge,ve);else{var xe,Ae=v[T+0],Te=Ae,Pe=Ae;for(xe=0;xe<ve;++xe)Te=Pe+(Ae=v[T+xe])-Te,Pe=z[W+xe]+(-256&Te?0>Te?0:255:Te)&255,Te=Ae,ce[ge+xe]=Pe}}function wr(v,T,z,W){var ce=T.width,ge=T.o;if(e(v!=null&&T!=null),0>z||0>=W||z+W>ge)return null;if(!v.Cc){if(v.ga==null){var ve;if(v.ga=new Vt,(ve=v.ga==null)||(ve=T.width*T.o,e(v.Gb.length==0),v.Gb=s(ve),v.Uc=0,v.Gb==null?ve=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,ve=1),ve=!ve),!ve){ve=v.ga;var xe=v.Fa,Ae=v.P,Te=v.qc,Pe=v.mb,ze=v.nb,Ee=Ae+1,Oe=Te-1,qe=ve.l;if(e(xe!=null&&Pe!=null&&T!=null),Ua[0]=null,Ua[1]=Xt,Ua[2]=En,Ua[3]=rr,ve.ca=Pe,ve.tb=ze,ve.c=T.width,ve.i=T.height,e(0<ve.c&&0<ve.i),1>=Te)T=0;else if(ve.$a=3&xe[Ae+0],ve.Z=xe[Ae+0]>>2&3,ve.Lc=xe[Ae+0]>>4&3,Ae=xe[Ae+0]>>6&3,0>ve.$a||1<ve.$a||4<=ve.Z||1<ve.Lc||Ae)T=0;else if(qe.put=Mt,qe.ac=ts,qe.bc=va,qe.ma=ve,qe.width=T.width,qe.height=T.height,qe.Da=T.Da,qe.v=T.v,qe.va=T.va,qe.j=T.j,qe.o=T.o,ve.$a)e:{e(ve.$a==1),T=Bo();t:for(;;){if(T==null){T=0;break e}if(e(ve!=null),ve.mc=T,T.c=ve.c,T.i=ve.i,T.l=ve.l,T.l.ma=ve,T.l.width=ve.c,T.l.height=ve.i,T.a=0,me(T.m,xe,Ee,Oe),!As(ve.c,ve.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&On(T.s)?(ve.ic=1,xe=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(xe),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(ve.ic=0,T=Es(T,ve.c)),!T))break t;T=1;break e}ve.mc=null,T=0}else T=Oe>=ve.c*ve.i;ve=!T}if(ve)return null;v.ga.Lc!=1?v.Ga=0:W=ge-z}e(v.ga!=null),e(z+W<=ge);e:{if(T=(xe=v.ga).c,ge=xe.l.o,xe.$a==0){if(Ee=v.rc,Oe=v.Vc,qe=v.Fa,Ae=v.P+1+z*T,Te=v.mb,Pe=v.nb+z*T,e(Ae<=v.P+v.qc),xe.Z!=0)for(e(Ua[xe.Z]!=null),ve=0;ve<W;++ve)Ua[xe.Z](Ee,Oe,qe,Ae,Te,Pe,T),Ee=Te,Oe=Pe,Pe+=T,Ae+=T;else for(ve=0;ve<W;++ve)r(Te,Pe,qe,Ae,T),Ee=Te,Oe=Pe,Pe+=T,Ae+=T;v.rc=Ee,v.Vc=Oe}else{if(e(xe.mc!=null),T=z+W,e((ve=xe.mc)!=null),e(T<=ve.i),ve.C>=T)T=1;else if(xe.ic||is(),xe.ic){xe=ve.V,Ee=ve.Ba,Oe=ve.c;var Ye=ve.i,je=(qe=1,Ae=ve.$/Oe,Te=ve.$%Oe,Pe=ve.m,ze=ve.s,ve.$),Je=Oe*Ye,Qe=Oe*T,ct=ze.wc,rt=je<Qe?Gr(ze,Te,Ae):null;e(je<=Je),e(T<=Ye),e(On(ze));t:for(;;){for(;!Pe.h&&je<Qe;){if(Te&ct||(rt=Gr(ze,Te,Ae)),e(rt!=null),B(Pe),256>(Ye=er(rt.G[0],rt.H[0],Pe)))xe[Ee+je]=Ye,++je,++Te>=Oe&&(Te=0,++Ae<=T&&!(Ae%16)&&fi(ve,Ae));else{if(!(280>Ye)){qe=0;break t}Ye=zi(Ye-256,Pe);var St,mt=er(rt.G[4],rt.H[4],Pe);if(B(Pe),!(je>=(mt=Hi(Oe,mt=zi(mt,Pe)))&&Je-je>=Ye)){qe=0;break t}for(St=0;St<Ye;++St)xe[Ee+je+St]=xe[Ee+je+St-mt];for(je+=Ye,Te+=Ye;Te>=Oe;)Te-=Oe,++Ae<=T&&!(Ae%16)&&fi(ve,Ae);je<Qe&&Te&ct&&(rt=Gr(ze,Te,Ae))}e(Pe.h==pe(Pe))}fi(ve,Ae>T?T:Ae);break t}!qe||Pe.h&&je<Je?(qe=0,ve.a=Pe.h?5:3):ve.$=je,T=qe}else T=Gi(ve,ve.V,ve.Ba,ve.c,ve.i,T,io);if(!T){W=0;break e}}z+W>=ge&&(v.Cc=1),W=1}if(!W)return null;if(v.Cc&&((W=v.ga)!=null&&(W.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+z*ce}function zn(v,T,z,W,ce,ge){for(;0<ce--;){var ve,xe=v,Ae=T+(z?1:0),Te=v,Pe=T+(z?0:3);for(ve=0;ve<W;++ve){var ze=Te[Pe+4*ve];ze!=255&&(ze*=32897,xe[Ae+4*ve+0]=xe[Ae+4*ve+0]*ze>>23,xe[Ae+4*ve+1]=xe[Ae+4*ve+1]*ze>>23,xe[Ae+4*ve+2]=xe[Ae+4*ve+2]*ze>>23)}T+=ge}}function Dr(v,T,z,W,ce){for(;0<W--;){var ge;for(ge=0;ge<z;++ge){var ve=v[T+2*ge+0],xe=15&(Te=v[T+2*ge+1]),Ae=4369*xe,Te=(240&Te|Te>>4)*Ae>>16;v[T+2*ge+0]=(240&ve|ve>>4)*Ae>>16&240|(15&ve|ve<<4)*Ae>>16>>4&15,v[T+2*ge+1]=240&Te|xe}T+=ce}}function Tr(v,T,z,W,ce,ge,ve,xe){var Ae,Te,Pe=255;for(Te=0;Te<ce;++Te){for(Ae=0;Ae<W;++Ae){var ze=v[T+Ae];ge[ve+4*Ae]=ze,Pe&=ze}T+=z,ve+=xe}return Pe!=255}function Zr(v,T,z,W,ce){var ge;for(ge=0;ge<ce;++ge)z[W+ge]=v[T+ge]>>8}function is(){Zo=zn,as=Dr,Uu=Tr,Zi=Zr}function Li(v,T,z){O[v]=function(W,ce,ge,ve,xe,Ae,Te,Pe,ze,Ee,Oe,qe,Ye,je,Je,Qe,ct){var rt,St=ct-1>>1,mt=xe[Ae+0]|Te[Pe+0]<<16,Kt=ze[Ee+0]|Oe[qe+0]<<16;e(W!=null);var vt=3*mt+Kt+131074>>2;for(T(W[ce+0],255&vt,vt>>16,Ye,je),ge!=null&&(vt=3*Kt+mt+131074>>2,T(ge[ve+0],255&vt,vt>>16,Je,Qe)),rt=1;rt<=St;++rt){var fn=xe[Ae+rt]|Te[Pe+rt]<<16,Xn=ze[Ee+rt]|Oe[qe+rt]<<16,Zt=mt+fn+Kt+Xn+524296,gt=Zt+2*(fn+Kt)>>3;vt=gt+mt>>1,mt=(Zt=Zt+2*(mt+Xn)>>3)+fn>>1,T(W[ce+2*rt-1],255&vt,vt>>16,Ye,je+(2*rt-1)*z),T(W[ce+2*rt-0],255&mt,mt>>16,Ye,je+(2*rt-0)*z),ge!=null&&(vt=Zt+Kt>>1,mt=gt+Xn>>1,T(ge[ve+2*rt-1],255&vt,vt>>16,Je,Qe+(2*rt-1)*z),T(ge[ve+2*rt+0],255&mt,mt>>16,Je,Qe+(2*rt+0)*z)),mt=fn,Kt=Xn}1&ct||(vt=3*mt+Kt+131074>>2,T(W[ce+ct-1],255&vt,vt>>16,Ye,je+(ct-1)*z),ge!=null&&(vt=3*Kt+mt+131074>>2,T(ge[ve+ct-1],255&vt,vt>>16,Je,Qe+(ct-1)*z)))}}function Oc(){ri[Bc]=tl,ri[mi]=ql,ri[qc]=xd,ri[os]=Vc,ri[ju]=mo,ri[Ul]=la,ri[fo]=go,ri[zu]=ql,ri[jc]=Vc,ri[Fl]=mo,ri[zc]=la}function kl(v){return v&-16384?0>v?0:255:v>>$c}function Ko(v,T){return kl((19077*v>>8)+(26149*T>>8)-14234)}function ea(v,T,z){return kl((19077*v>>8)-(6419*T>>8)-(13320*z>>8)+8708)}function Is(v,T){return kl((19077*v>>8)+(33050*T>>8)-17685)}function Jo(v,T,z,W,ce){W[ce+0]=Ko(v,z),W[ce+1]=ea(v,T,z),W[ce+2]=Is(v,T)}function oo(v,T,z,W,ce){W[ce+0]=Is(v,T),W[ce+1]=ea(v,T,z),W[ce+2]=Ko(v,z)}function Qr(v,T,z,W,ce){var ge=ea(v,T,z);T=ge<<3&224|Is(v,T)>>3,W[ce+0]=248&Ko(v,z)|ge>>5,W[ce+1]=T}function lo(v,T,z,W,ce){var ge=240&Is(v,T)|15;W[ce+0]=240&Ko(v,z)|ea(v,T,z)>>4,W[ce+1]=ge}function uo(v,T,z,W,ce){W[ce+0]=255,Jo(v,T,z,W,ce+1)}function Il(v,T,z,W,ce){oo(v,T,z,W,ce),W[ce+3]=255}function ta(v,T,z,W,ce){Jo(v,T,z,W,ce),W[ce+3]=255}function fr(v,T){return 0>v?0:v>T?T:v}function Ra(v,T,z){O[v]=function(W,ce,ge,ve,xe,Ae,Te,Pe,ze){for(var Ee=Pe+(-2&ze)*z;Pe!=Ee;)T(W[ce+0],ge[ve+0],xe[Ae+0],Te,Pe),T(W[ce+1],ge[ve+0],xe[Ae+0],Te,Pe+z),ce+=2,++ve,++Ae,Pe+=2*z;1&ze&&T(W[ce+0],ge[ve+0],xe[Ae+0],Te,Pe)}}function Ll(v,T,z){return z==0?v==0?T==0?6:5:T==0?4:0:z}function Mu(v,T,z,W,ce){switch(v>>>30){case 3:Oa(T,z,W,ce,0);break;case 2:hi(T,z,W,ce);break;case 1:Tn(T,z,W,ce)}}function Yi(v,T){var z,W,ce=T.M,ge=T.Nb,ve=v.oc,xe=v.pc+40,Ae=v.oc,Te=v.pc+584,Pe=v.oc,ze=v.pc+600;for(z=0;16>z;++z)ve[xe+32*z-1]=129;for(z=0;8>z;++z)Ae[Te+32*z-1]=129,Pe[ze+32*z-1]=129;for(0<ce?ve[xe-1-32]=Ae[Te-1-32]=Pe[ze-1-32]=129:(i(ve,xe-32-1,127,21),i(Ae,Te-32-1,127,9),i(Pe,ze-32-1,127,9)),W=0;W<v.za;++W){var Ee=T.ya[T.aa+W];if(0<W){for(z=-1;16>z;++z)r(ve,xe+32*z-4,ve,xe+32*z+12,4);for(z=-1;8>z;++z)r(Ae,Te+32*z-4,Ae,Te+32*z+4,4),r(Pe,ze+32*z-4,Pe,ze+32*z+4,4)}var Oe=v.Gd,qe=v.Hd+W,Ye=Ee.ad,je=Ee.Hc;if(0<ce&&(r(ve,xe-32,Oe[qe].y,0,16),r(Ae,Te-32,Oe[qe].f,0,8),r(Pe,ze-32,Oe[qe].ea,0,8)),Ee.Za){var Je=ve,Qe=xe-32+16;for(0<ce&&(W>=v.za-1?i(Je,Qe,Oe[qe].y[15],4):r(Je,Qe,Oe[qe+1].y,0,4)),z=0;4>z;z++)Je[Qe+128+z]=Je[Qe+256+z]=Je[Qe+384+z]=Je[Qe+0+z];for(z=0;16>z;++z,je<<=2)Je=ve,Qe=xe+Sr[z],dr[Ee.Ob[z]](Je,Qe),Mu(je,Ye,16*+z,Je,Qe)}else if(Je=Ll(W,ce,Ee.Ob[0]),Ei[Je](ve,xe),je!=0)for(z=0;16>z;++z,je<<=2)Mu(je,Ye,16*+z,ve,xe+Sr[z]);for(z=Ee.Gc,Je=Ll(W,ce,Ee.Dd),Os[Je](Ae,Te),Os[Je](Pe,ze),je=Ye,Je=Ae,Qe=Te,255&(Ee=0|z)&&(170&Ee?ss(je,256,Je,Qe):vn(je,256,Je,Qe)),Ee=Pe,je=ze,255&(z>>=8)&&(170&z?ss(Ye,320,Ee,je):vn(Ye,320,Ee,je)),ce<v.Ub-1&&(r(Oe[qe].y,0,ve,xe+480,16),r(Oe[qe].f,0,Ae,Te+224,8),r(Oe[qe].ea,0,Pe,ze+224,8)),z=8*ge*v.B,Oe=v.sa,qe=v.ta+16*W+16*ge*v.R,Ye=v.qa,Ee=v.ra+8*W+z,je=v.Ha,Je=v.Ia+8*W+z,z=0;16>z;++z)r(Oe,qe+z*v.R,ve,xe+32*z,16);for(z=0;8>z;++z)r(Ye,Ee+z*v.B,Ae,Te+32*z,8),r(je,Je+z*v.B,Pe,ze+32*z,8)}}function Ls(v,T,z,W,ce,ge,ve,xe,Ae){var Te=[0],Pe=[0],ze=0,Ee=Ae!=null?Ae.kd:0,Oe=Ae??new Ze;if(v==null||12>z)return 7;Oe.data=v,Oe.w=T,Oe.ha=z,T=[T],z=[z],Oe.gb=[Oe.gb];e:{var qe=T,Ye=z,je=Oe.gb;if(e(v!=null),e(Ye!=null),e(je!=null),je[0]=0,12<=Ye[0]&&!t(v,qe[0],"RIFF")){if(t(v,qe[0]+8,"WEBP")){je=3;break e}var Je=q(v,qe[0]+4);if(12>Je||4294967286<Je){je=3;break e}if(Ee&&Je>Ye[0]-8){je=7;break e}je[0]=Je,qe[0]+=12,Ye[0]-=12}je=0}if(je!=0)return je;for(Je=0<Oe.gb[0],z=z[0];;){e:{var Qe=v;Ye=T,je=z;var ct=Te,rt=Pe,St=qe=[0];if((vt=ze=[ze])[0]=0,8>je[0])je=7;else{if(!t(Qe,Ye[0],"VP8X")){if(q(Qe,Ye[0]+4)!=10){je=3;break e}if(18>je[0]){je=7;break e}var mt=q(Qe,Ye[0]+8),Kt=1+ke(Qe,Ye[0]+12);if(2147483648<=Kt*(Qe=1+ke(Qe,Ye[0]+15))){je=3;break e}St!=null&&(St[0]=mt),ct!=null&&(ct[0]=Kt),rt!=null&&(rt[0]=Qe),Ye[0]+=18,je[0]-=18,vt[0]=1}je=0}}if(ze=ze[0],qe=qe[0],je!=0)return je;if(Ye=!!(2&qe),!Je&&ze)return 3;if(ge!=null&&(ge[0]=!!(16&qe)),ve!=null&&(ve[0]=Ye),xe!=null&&(xe[0]=0),ve=Te[0],qe=Pe[0],ze&&Ye&&Ae==null){je=0;break}if(4>z){je=7;break}if(Je&&ze||!Je&&!ze&&!t(v,T[0],"ALPH")){z=[z],Oe.na=[Oe.na],Oe.P=[Oe.P],Oe.Sa=[Oe.Sa];e:{mt=v,je=T,Je=z;var vt=Oe.gb;ct=Oe.na,rt=Oe.P,St=Oe.Sa,Kt=22,e(mt!=null),e(Je!=null),Qe=je[0];var fn=Je[0];for(e(ct!=null),e(St!=null),ct[0]=null,rt[0]=null,St[0]=0;;){if(je[0]=Qe,Je[0]=fn,8>fn){je=7;break e}var Xn=q(mt,Qe+4);if(4294967286<Xn){je=3;break e}var Zt=8+Xn+1&-2;if(Kt+=Zt,0<vt&&Kt>vt){je=3;break e}if(!t(mt,Qe,"VP8 ")||!t(mt,Qe,"VP8L")){je=0;break e}if(fn[0]<Zt){je=7;break e}t(mt,Qe,"ALPH")||(ct[0]=mt,rt[0]=Qe+8,St[0]=Xn),Qe+=Zt,fn-=Zt}}if(z=z[0],Oe.na=Oe.na[0],Oe.P=Oe.P[0],Oe.Sa=Oe.Sa[0],je!=0)break}z=[z],Oe.Ja=[Oe.Ja],Oe.xa=[Oe.xa];e:if(vt=v,je=T,Je=z,ct=Oe.gb[0],rt=Oe.Ja,St=Oe.xa,mt=je[0],Qe=!t(vt,mt,"VP8 "),Kt=!t(vt,mt,"VP8L"),e(vt!=null),e(Je!=null),e(rt!=null),e(St!=null),8>Je[0])je=7;else{if(Qe||Kt){if(vt=q(vt,mt+4),12<=ct&&vt>ct-12){je=3;break e}if(Ee&&vt>Je[0]-8){je=7;break e}rt[0]=vt,je[0]+=8,Je[0]-=8,St[0]=Kt}else St[0]=5<=Je[0]&&vt[mt+0]==47&&!(vt[mt+4]>>5),rt[0]=Je[0];je=0}if(z=z[0],Oe.Ja=Oe.Ja[0],Oe.xa=Oe.xa[0],T=T[0],je!=0)break;if(4294967286<Oe.Ja)return 3;if(xe==null||Ye||(xe[0]=Oe.xa?2:1),ve=[ve],qe=[qe],Oe.xa){if(5>z){je=7;break}xe=ve,Ee=qe,Ye=ge,v==null||5>z?v=0:5<=z&&v[T+0]==47&&!(v[T+4]>>5)?(Je=[0],vt=[0],ct=[0],me(rt=new $,v,T,z),Ks(rt,Je,vt,ct)?(xe!=null&&(xe[0]=Je[0]),Ee!=null&&(Ee[0]=vt[0]),Ye!=null&&(Ye[0]=ct[0]),v=1):v=0):v=0}else{if(10>z){je=7;break}xe=qe,v==null||10>z||!Si(v,T+3,z-3)?v=0:(Ee=v[T+0]|v[T+1]<<8|v[T+2]<<16,Ye=16383&(v[T+7]<<8|v[T+6]),v=16383&(v[T+9]<<8|v[T+8]),1&Ee||3<(Ee>>1&7)||!(Ee>>4&1)||Ee>>5>=Oe.Ja||!Ye||!v?v=0:(ve&&(ve[0]=Ye),xe&&(xe[0]=v),v=1))}if(!v||(ve=ve[0],qe=qe[0],ze&&(Te[0]!=ve||Pe[0]!=qe)))return 3;Ae!=null&&(Ae[0]=Oe,Ae.offset=T-Ae.w,e(4294967286>T-Ae.w),e(Ae.offset==Ae.ha-z));break}return je==0||je==7&&ze&&Ae==null?(ge!=null&&(ge[0]|=Oe.na!=null&&0<Oe.na.length),W!=null&&(W[0]=ve),ce!=null&&(ce[0]=qe),0):je}function ka(v,T,z){var W=T.width,ce=T.height,ge=0,ve=0,xe=W,Ae=ce;if(T.Da=v!=null&&0<v.Da,T.Da&&(xe=v.cd,Ae=v.bd,ge=v.v,ve=v.j,11>z||(ge&=-2,ve&=-2),0>ge||0>ve||0>=xe||0>=Ae||ge+xe>W||ve+Ae>ce))return 0;if(T.v=ge,T.j=ve,T.va=ge+xe,T.o=ve+Ae,T.U=xe,T.T=Ae,T.da=v!=null&&0<v.da,T.da){if(!P(xe,Ae,z=[v.ib],ge=[v.hb]))return 0;T.ib=z[0],T.hb=ge[0]}return T.ob=v!=null&&v.ob,T.Kb=v==null||!v.Sd,T.da&&(T.ob=T.ib<3*W/4&&T.hb<3*ce/4,T.Kb=0),1}function Ou(v){if(v==null)return 2;if(11>v.S){var T=v.f.RGBA;T.fb+=(v.height-1)*T.A,T.A=-T.A}else T=v.f.kb,v=v.height,T.O+=(v-1)*T.fa,T.fa=-T.fa,T.N+=(v-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(v-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(v-1)*T.lb,T.lb=-T.lb);return 0}function Ps(v,T,z,W){if(W==null||0>=v||0>=T)return 2;if(z!=null){if(z.Da){var ce=z.cd,ge=z.bd,ve=-2&z.v,xe=-2&z.j;if(0>ve||0>xe||0>=ce||0>=ge||ve+ce>v||xe+ge>T)return 2;v=ce,T=ge}if(z.da){if(!P(v,T,ce=[z.ib],ge=[z.hb]))return 2;v=ce[0],T=ge[0]}}W.width=v,W.height=T;e:{var Ae=W.width,Te=W.height;if(v=W.S,0>=Ae||0>=Te||!(v>=Bc&&13>v))v=2;else{if(0>=W.Rd&&W.sd==null){ve=ge=ce=T=0;var Pe=(xe=Ae*Kc[v])*Te;if(11>v||(ge=(Te+1)/2*(T=(Ae+1)/2),v==12&&(ve=(ce=Ae)*Te)),(Te=s(Pe+2*ge+ve))==null){v=1;break e}W.sd=Te,11>v?((Ae=W.f.RGBA).eb=Te,Ae.fb=0,Ae.A=xe,Ae.size=Pe):((Ae=W.f.kb).y=Te,Ae.O=0,Ae.fa=xe,Ae.Fd=Pe,Ae.f=Te,Ae.N=0+Pe,Ae.Ab=T,Ae.Cd=ge,Ae.ea=Te,Ae.W=0+Pe+ge,Ae.Db=T,Ae.Ed=ge,v==12&&(Ae.F=Te,Ae.J=0+Pe+2*ge),Ae.Tc=ve,Ae.lb=ce)}if(T=1,ce=W.S,ge=W.width,ve=W.height,ce>=Bc&&13>ce)if(11>ce)v=W.f.RGBA,T&=(xe=Math.abs(v.A))*(ve-1)+ge<=v.size,T&=xe>=ge*Kc[ce],T&=v.eb!=null;else{v=W.f.kb,xe=(ge+1)/2,Pe=(ve+1)/2,Ae=Math.abs(v.fa),Te=Math.abs(v.Ab);var ze=Math.abs(v.Db),Ee=Math.abs(v.lb),Oe=Ee*(ve-1)+ge;T&=Ae*(ve-1)+ge<=v.Fd,T&=Te*(Pe-1)+xe<=v.Cd,T=(T&=ze*(Pe-1)+xe<=v.Ed)&Ae>=ge&Te>=xe&ze>=xe,T&=v.y!=null,T&=v.f!=null,T&=v.ea!=null,ce==12&&(T&=Ee>=ge,T&=Oe<=v.Tc,T&=v.F!=null)}else T=0;v=T?0:2}}return v!=0||z!=null&&z.fd&&(v=Ou(W)),v}var co=64,Pi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ai=24,na=32,ra=8,Ia=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ne("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(v){return v},O.Predictor2=function(v,T,z){return T[z+0]},O.Predictor3=function(v,T,z){return T[z+1]},O.Predictor4=function(v,T,z){return T[z-1]},O.Predictor5=function(v,T,z){return Re(Re(v,T[z+1]),T[z+0])},O.Predictor6=function(v,T,z){return Re(v,T[z-1])},O.Predictor7=function(v,T,z){return Re(v,T[z+0])},O.Predictor8=function(v,T,z){return Re(T[z-1],T[z+0])},O.Predictor9=function(v,T,z){return Re(T[z+0],T[z+1])},O.Predictor10=function(v,T,z){return Re(Re(v,T[z-1]),Re(T[z+0],T[z+1]))},O.Predictor11=function(v,T,z){var W=T[z+0];return 0>=Ke(W>>24&255,v>>24&255,(T=T[z-1])>>24&255)+Ke(W>>16&255,v>>16&255,T>>16&255)+Ke(W>>8&255,v>>8&255,T>>8&255)+Ke(255&W,255&v,255&T)?W:v},O.Predictor12=function(v,T,z){var W=T[z+0];return(De((v>>24&255)+(W>>24&255)-((T=T[z-1])>>24&255))<<24|De((v>>16&255)+(W>>16&255)-(T>>16&255))<<16|De((v>>8&255)+(W>>8&255)-(T>>8&255))<<8|De((255&v)+(255&W)-(255&T)))>>>0},O.Predictor13=function(v,T,z){var W=T[z-1];return(Ue((v=Re(v,T[z+0]))>>24&255,W>>24&255)<<24|Ue(v>>16&255,W>>16&255)<<16|Ue(v>>8&255,W>>8&255)<<8|Ue(255&v,255&W))>>>0};var Pl=O.PredictorAdd0;O.PredictorAdd1=at,ne("Predictor2","PredictorAdd2"),ne("Predictor3","PredictorAdd3"),ne("Predictor4","PredictorAdd4"),ne("Predictor5","PredictorAdd5"),ne("Predictor6","PredictorAdd6"),ne("Predictor7","PredictorAdd7"),ne("Predictor8","PredictorAdd8"),ne("Predictor9","PredictorAdd9"),ne("Predictor10","PredictorAdd10"),ne("Predictor11","PredictorAdd11"),ne("Predictor12","PredictorAdd12"),ne("Predictor13","PredictorAdd13");var Ml=O.PredictorAdd2;yt("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var br,Dc=O.ColorIndexInverseTransform,ia=O.MapARGB,sa=O.VP8LColorIndexInverseTransformAlpha,ei=O.MapAlpha,La=O.VP8LPredictorsAdd=[];La.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Ol,Dl,Pa,Ma,aa,Yo,Xi,Oa,hi,ss,Tn,vn,Hn,_r,oa,Ms,Xo,Du,vd,Jh,Yh,Xh,wd,bd,Zo,as,Uu,Zi,Qo=s(511),Uc=s(2041),Fu=s(225),Bu=s(767),Fc=0,Da=Uc,qu=Fu,pi=Bu,ti=Qo,Bc=0,mi=1,qc=2,os=3,ju=4,Ul=5,fo=6,zu=7,jc=8,Fl=9,zc=10,ls=[2,3,7],Bl=[3,3,11],el=[280,256,256,256,40],Hc=[0,1,1,1,0],Hu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],us=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cs=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ho=8,fs=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ds=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qi=null,Zh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_d=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Gc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Qh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ni=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Yn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],dn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ei=[],dr=[],Os=[],po=1,Sd=2,Ua=[],ri=[];Li("UpsampleRgbLinePair",Jo,3),Li("UpsampleBgrLinePair",oo,3),Li("UpsampleRgbaLinePair",ta,4),Li("UpsampleBgraLinePair",Il,4),Li("UpsampleArgbLinePair",uo,4),Li("UpsampleRgba4444LinePair",lo,2),Li("UpsampleRgb565LinePair",Qr,2);var tl=O.UpsampleRgbLinePair,xd=O.UpsampleBgrLinePair,ql=O.UpsampleRgbaLinePair,Vc=O.UpsampleBgraLinePair,mo=O.UpsampleArgbLinePair,la=O.UpsampleRgba4444LinePair,go=O.UpsampleRgb565LinePair,hs=16,jl=1<<hs-1,nl=-227,yo=482,$c=6,vo=0,ii=s(256),Wc=s(256),ep=s(256),Gg=s(256),Vg=s(yo-nl),$g=s(yo-nl);Ra("YuvToRgbRow",Jo,3),Ra("YuvToBgrRow",oo,3),Ra("YuvToRgbaRow",ta,4),Ra("YuvToBgraRow",Il,4),Ra("YuvToArgbRow",uo,4),Ra("YuvToRgba4444Row",lo,2),Ra("YuvToRgb565Row",Qr,2);var Sr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zl=[0,2,8],Gu=[8,7,6,4,4,2,2,2,1,1,1,1],Vu=1;this.WebPDecodeRGBA=function(v,T,z,W,ce){var ge=mi,ve=new Fe,xe=new cn;ve.ba=xe,xe.S=ge,xe.width=[xe.width],xe.height=[xe.height];var Ae=xe.width,Te=xe.height,Pe=new kt;if(Pe==null||v==null)var ze=2;else e(Pe!=null),ze=Ls(v,T,z,Pe.width,Pe.height,Pe.Pd,Pe.Qd,Pe.format,null);if(ze!=0?Ae=0:(Ae!=null&&(Ae[0]=Pe.width[0]),Te!=null&&(Te[0]=Pe.height[0]),Ae=1),Ae){xe.width=xe.width[0],xe.height=xe.height[0],W!=null&&(W[0]=xe.width),ce!=null&&(ce[0]=xe.height);e:{if(W=new ba,(ce=new Ze).data=v,ce.w=T,ce.ha=z,ce.kd=1,T=[0],e(ce!=null),((v=Ls(ce.data,ce.w,ce.ha,null,null,null,T,null,ce))==0||v==7)&&T[0]&&(v=4),(T=v)==0){if(e(ve!=null),W.data=ce.data,W.w=ce.w+ce.offset,W.ha=ce.ha-ce.offset,W.put=Mt,W.ac=ts,W.bc=va,W.ma=ve,ce.xa){if((v=Bo())==null){ve=1;break e}if((function(Ee,Oe){var qe=[0],Ye=[0],je=[0];t:for(;;){if(Ee==null)return 0;if(Oe==null)return Ee.a=2,0;if(Ee.l=Oe,Ee.a=0,me(Ee.m,Oe.data,Oe.w,Oe.ha),!Ks(Ee.m,qe,Ye,je)){Ee.a=3;break t}if(Ee.xb=Sd,Oe.width=qe[0],Oe.height=Ye[0],!As(qe[0],Ye[0],1,Ee,null))break t;return 1}return e(Ee.a!=0),0})(v,W)){if(W=(T=Ps(W.width,W.height,ve.Oa,ve.ba))==0){t:{W=v;n:for(;;){if(W==null){W=0;break t}if(e(W.s.yc!=null),e(W.s.Ya!=null),e(0<W.s.Wb),e((z=W.l)!=null),e((ce=z.ma)!=null),W.xb!=0){if(W.ca=ce.ba,W.tb=ce.tb,e(W.ca!=null),!ka(ce.Oa,z,os)){W.a=2;break n}if(!Es(W,z.width)||z.da)break n;if((z.da||Wt(W.ca.S))&&is(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&is()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!oe(W.s.vb,W.s.Wa.Xa)){W.a=1;break n}W.xb=0}if(!Gi(W,W.V,W.Ba,W.c,W.i,z.o,_i))break n;ce.Dc=W.Ma,W=1;break t}e(W.a!=0),W=0}W=!W}W&&(T=v.a)}else T=v.a}else{if((v=new Tl)==null){ve=1;break e}if(v.Fa=ce.na,v.P=ce.P,v.qc=ce.Sa,Au(v,W)){if((T=Ps(W.width,W.height,ve.Oa,ve.ba))==0){if(v.Aa=0,z=ve.Oa,e((ce=v)!=null),z!=null){if(0<(Ae=0>(Ae=z.Md)?0:100<Ae?255:255*Ae/100)){for(Te=Pe=0;4>Te;++Te)12>(ze=ce.pb[Te]).lc&&(ze.ia=Ae*Gu[0>ze.lc?0:ze.lc]>>3),Pe|=ze.ia;Pe&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=z.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}(function(Ee,Oe){if(Ee==null)return 0;if(Oe==null)return Mn(Ee,2,"NULL VP8Io parameter in VP8Decode().");if(!Ee.cb&&!Au(Ee,Oe))return 0;if(e(Ee.cb),Oe.ac==null||Oe.ac(Oe)){Oe.ob&&(Ee.L=0);var qe=zl[Ee.L];if(Ee.L==2?(Ee.yb=0,Ee.zb=0):(Ee.yb=Oe.v-qe>>4,Ee.zb=Oe.j-qe>>4,0>Ee.yb&&(Ee.yb=0),0>Ee.zb&&(Ee.zb=0)),Ee.Va=Oe.o+15+qe>>4,Ee.Hb=Oe.va+15+qe>>4,Ee.Hb>Ee.za&&(Ee.Hb=Ee.za),Ee.Va>Ee.Ub&&(Ee.Va=Ee.Ub),0<Ee.L){var Ye=Ee.ed;for(qe=0;4>qe;++qe){var je;if(Ee.Qa.Cb){var Je=Ee.Qa.Lb[qe];Ee.Qa.Fb||(Je+=Ye.Tb)}else Je=Ye.Tb;for(je=0;1>=je;++je){var Qe=Ee.gd[qe][je],ct=Je;if(Ye.Pc&&(ct+=Ye.vd[0],je&&(ct+=Ye.od[0])),0<(ct=0>ct?0:63<ct?63:ct)){var rt=ct;0<Ye.wb&&(rt=4<Ye.wb?rt>>2:rt>>1)>9-Ye.wb&&(rt=9-Ye.wb),1>rt&&(rt=1),Qe.dd=rt,Qe.tc=2*ct+rt,Qe.ld=40<=ct?2:15<=ct?1:0}else Qe.tc=0;Qe.La=je}}}qe=0}else Mn(Ee,6,"Frame setup failed"),qe=Ee.a;if(qe=qe==0){if(qe){Ee.$c=0,0<Ee.Aa||(Ee.Ic=Vu);t:{qe=Ee.Ic,Ye=4*(rt=Ee.za);var St=32*rt,mt=rt+1,Kt=0<Ee.L?rt*(0<Ee.Aa?2:1):0,vt=(Ee.Aa==2?2:1)*rt;if((Qe=Ye+832+(je=3*(16*qe+zl[Ee.L])/2*St)+(Je=Ee.Fa!=null&&0<Ee.Fa.length?Ee.Kc.c*Ee.Kc.i:0))!=Qe)qe=0;else{if(Qe>Ee.Vb){if(Ee.Vb=0,Ee.Ec=s(Qe),Ee.Fc=0,Ee.Ec==null){qe=Mn(Ee,1,"no memory during frame initialization.");break t}Ee.Vb=Qe}Qe=Ee.Ec,ct=Ee.Fc,Ee.Ac=Qe,Ee.Bc=ct,ct+=Ye,Ee.Gd=u(St,xu),Ee.Hd=0,Ee.rb=u(mt+1,Ns),Ee.sb=1,Ee.wa=Kt?u(Kt,Vi):null,Ee.Y=0,Ee.D.Nb=0,Ee.D.wa=Ee.wa,Ee.D.Y=Ee.Y,0<Ee.Aa&&(Ee.D.Y+=rt),e(!0),Ee.oc=Qe,Ee.pc=ct,ct+=832,Ee.ya=u(vt,_u),Ee.aa=0,Ee.D.ya=Ee.ya,Ee.D.aa=Ee.aa,Ee.Aa==2&&(Ee.D.aa+=rt),Ee.R=16*rt,Ee.B=8*rt,rt=(St=zl[Ee.L])*Ee.R,St=St/2*Ee.B,Ee.sa=Qe,Ee.ta=ct+rt,Ee.qa=Ee.sa,Ee.ra=Ee.ta+16*qe*Ee.R+St,Ee.Ha=Ee.qa,Ee.Ia=Ee.ra+8*qe*Ee.B+St,Ee.$c=0,ct+=je,Ee.mb=Je?Qe:null,Ee.nb=Je?ct:null,e(ct+Je<=Ee.Fc+Ee.Vb),Sa(Ee),i(Ee.Ac,Ee.Bc,0,Ye),qe=1}}if(qe){if(Oe.ka=0,Oe.y=Ee.sa,Oe.O=Ee.ta,Oe.f=Ee.qa,Oe.N=Ee.ra,Oe.ea=Ee.Ha,Oe.Vd=Ee.Ia,Oe.fa=Ee.R,Oe.Rc=Ee.B,Oe.F=null,Oe.J=0,!Fc){for(qe=-255;255>=qe;++qe)Qo[255+qe]=0>qe?-qe:qe;for(qe=-1020;1020>=qe;++qe)Uc[1020+qe]=-128>qe?-128:127<qe?127:qe;for(qe=-112;112>=qe;++qe)Fu[112+qe]=-16>qe?-16:15<qe?15:qe;for(qe=-255;510>=qe;++qe)Bu[255+qe]=0>qe?0:255<qe?255:qe;Fc=1}Xi=Nu,Oa=Cc,ss=Tu,Tn=xi,vn=Cu,hi=Eu,Hn=Lc,_r=Pc,oa=D,Ms=ue,Xo=Na,Du=Mc,vd=Ce,Jh=Le,Yh=$o,Xh=Ta,wd=ao,bd=Wo,dr[0]=Lu,dr[1]=Ru,dr[2]=so,dr[3]=kc,dr[4]=Ic,dr[5]=Xr,dr[6]=Wi,dr[7]=Pu,dr[8]=Ki,dr[9]=Ho,Ei[0]=Rs,Ei[1]=Rc,Ei[2]=ku,Ei[3]=Iu,Ei[4]=ks,Ei[5]=xa,Ei[6]=zo,Os[0]=Aa,Os[1]=Nc,Os[2]=Go,Os[3]=Xs,Os[4]=Nl,Os[5]=Cl,Os[6]=Vr,qe=1}else qe=0}qe&&(qe=(function(fn,Xn){for(fn.M=0;fn.M<fn.Va;++fn.M){var Zt,gt=fn.Jc[fn.M&fn.Xb],dt=fn.m,ir=fn;for(Zt=0;Zt<ir.za;++Zt){var jt=dt,nn=ir,In=nn.Ac,Ur=nn.Bc+4*Zt,si=nn.zc,Gn=nn.ya[nn.aa+Zt];if(nn.Qa.Bb?Gn.$b=fe(jt,nn.Pa.jb[0])?2+fe(jt,nn.Pa.jb[2]):fe(jt,nn.Pa.jb[1]):Gn.$b=0,nn.kc&&(Gn.Ad=fe(jt,nn.Bd)),Gn.Za=!fe(jt,145)+0,Gn.Za){var Cr=Gn.Ob,gi=0;for(nn=0;4>nn;++nn){var Nr,on=si[0+nn];for(Nr=0;4>Nr;++Nr){on=ni[In[Ur+Nr]][on];for(var _n=Gc[fe(jt,on[0])];0<_n;)_n=Gc[2*_n+fe(jt,on[_n])];on=-_n,In[Ur+Nr]=on}r(Cr,gi,In,Ur,4),gi+=4,si[0+nn]=on}}else on=fe(jt,156)?fe(jt,128)?1:3:fe(jt,163)?2:0,Gn.Ob[0]=on,i(In,Ur,on,4),i(si,0,on,4);Gn.Dd=fe(jt,142)?fe(jt,114)?fe(jt,183)?1:3:2:0}if(ir.m.Ka)return Mn(fn,7,"Premature end-of-partition0 encountered.");for(;fn.ja<fn.za;++fn.ja){if(ir=gt,jt=(dt=fn).rb[dt.sb-1],In=dt.rb[dt.sb+dt.ja],Zt=dt.ya[dt.aa+dt.ja],Ur=dt.kc?Zt.Ad:0)jt.la=In.la=0,Zt.Za||(jt.Na=In.Na=0),Zt.Hc=0,Zt.Gc=0,Zt.ia=0;else{var sr,Cn;if(jt=In,In=ir,Ur=dt.Pa.Xc,si=dt.ya[dt.aa+dt.ja],Gn=dt.pb[si.$b],nn=si.ad,Cr=0,gi=dt.rb[dt.sb-1],on=Nr=0,i(nn,Cr,0,384),si.Za)var Fr=0,ar=Ur[3];else{_n=s(16);var Sn=jt.Na+gi.Na;if(Sn=Qi(In,Ur[1],Sn,Gn.Eb,0,_n,0),jt.Na=gi.Na=(0<Sn)+0,1<Sn)Xi(_n,0,nn,Cr);else{var xr=_n[0]+3>>3;for(_n=0;256>_n;_n+=16)nn[Cr+_n]=xr}Fr=1,ar=Ur[0]}var Ln=15&jt.la,Rr=15&gi.la;for(_n=0;4>_n;++_n){var kr=1&Rr;for(xr=Cn=0;4>xr;++xr)Ln=Ln>>1|(kr=(Sn=Qi(In,ar,Sn=kr+(1&Ln),Gn.Sc,Fr,nn,Cr))>Fr)<<7,Cn=Cn<<2|(3<Sn?3:1<Sn?2:nn[Cr+0]!=0),Cr+=16;Ln>>=4,Rr=Rr>>1|kr<<7,Nr=(Nr<<8|Cn)>>>0}for(ar=Ln,Fr=Rr>>4,sr=0;4>sr;sr+=2){for(Cn=0,Ln=jt.la>>4+sr,Rr=gi.la>>4+sr,_n=0;2>_n;++_n){for(kr=1&Rr,xr=0;2>xr;++xr)Sn=kr+(1&Ln),Ln=Ln>>1|(kr=0<(Sn=Qi(In,Ur[2],Sn,Gn.Qc,0,nn,Cr)))<<3,Cn=Cn<<2|(3<Sn?3:1<Sn?2:nn[Cr+0]!=0),Cr+=16;Ln>>=2,Rr=Rr>>1|kr<<5}on|=Cn<<4*sr,ar|=Ln<<4<<sr,Fr|=(240&Rr)<<sr}jt.la=ar,gi.la=Fr,si.Hc=Nr,si.Gc=on,si.ia=43690&on?0:Gn.ia,Ur=!(Nr|on)}if(0<dt.L&&(dt.wa[dt.Y+dt.ja]=dt.gd[Zt.$b][Zt.Za],dt.wa[dt.Y+dt.ja].La|=!Ur),ir.Ka)return Mn(fn,7,"Premature end-of-file encountered.")}if(Sa(fn),dt=Xn,ir=1,Zt=(gt=fn).D,jt=0<gt.L&&gt.M>=gt.zb&&gt.M<=gt.Va,gt.Aa==0)t:{if(Zt.M=gt.M,Zt.uc=jt,Yi(gt,Zt),ir=1,Zt=(Cn=gt.D).Nb,jt=(on=zl[gt.L])*gt.R,In=on/2*gt.B,_n=16*Zt*gt.R,xr=8*Zt*gt.B,Ur=gt.sa,si=gt.ta-jt+_n,Gn=gt.qa,nn=gt.ra-In+xr,Cr=gt.Ha,gi=gt.Ia-In+xr,Rr=(Ln=Cn.M)==0,Nr=Ln>=gt.Va-1,gt.Aa==2&&Yi(gt,Cn),Cn.uc)for(kr=(Sn=gt).D.M,e(Sn.D.uc),Cn=Sn.yb;Cn<Sn.Hb;++Cn){Fr=Cn,ar=kr;var Dn=(wn=(Ir=Sn).D).Nb;sr=Ir.R;var wn=wn.wa[wn.Y+Fr],yi=Ir.sa,hr=Ir.ta+16*Dn*sr+16*Fr,Ot=wn.dd,Ut=wn.tc;if(Ut!=0)if(e(3<=Ut),Ir.L==1)0<Fr&&Xh(yi,hr,sr,Ut+4),wn.La&&bd(yi,hr,sr,Ut),0<ar&&Yh(yi,hr,sr,Ut+4),wn.La&&wd(yi,hr,sr,Ut);else{var xn=Ir.B,Mi=Ir.qa,ps=Ir.ra+8*Dn*xn+8*Fr,Ti=Ir.Ha,Ir=Ir.Ia+8*Dn*xn+8*Fr;Dn=wn.ld,0<Fr&&(_r(yi,hr,sr,Ut+4,Ot,Dn),Ms(Mi,ps,Ti,Ir,xn,Ut+4,Ot,Dn)),wn.La&&(Du(yi,hr,sr,Ut,Ot,Dn),Jh(Mi,ps,Ti,Ir,xn,Ut,Ot,Dn)),0<ar&&(Hn(yi,hr,sr,Ut+4,Ot,Dn),oa(Mi,ps,Ti,Ir,xn,Ut+4,Ot,Dn)),wn.La&&(Xo(yi,hr,sr,Ut,Ot,Dn),vd(Mi,ps,Ti,Ir,xn,Ut,Ot,Dn))}}if(gt.ia&&alert("todo:DitherRow"),dt.put!=null){if(Cn=16*Ln,Ln=16*(Ln+1),Rr?(dt.y=gt.sa,dt.O=gt.ta+_n,dt.f=gt.qa,dt.N=gt.ra+xr,dt.ea=gt.Ha,dt.W=gt.Ia+xr):(Cn-=on,dt.y=Ur,dt.O=si,dt.f=Gn,dt.N=nn,dt.ea=Cr,dt.W=gi),Nr||(Ln-=on),Ln>dt.o&&(Ln=dt.o),dt.F=null,dt.J=null,gt.Fa!=null&&0<gt.Fa.length&&Cn<Ln&&(dt.J=wr(gt,dt,Cn,Ln-Cn),dt.F=gt.mb,dt.F==null&&dt.F.length==0)){ir=Mn(gt,3,"Could not decode alpha data.");break t}Cn<dt.j&&(on=dt.j-Cn,Cn=dt.j,e(!(1&on)),dt.O+=gt.R*on,dt.N+=gt.B*(on>>1),dt.W+=gt.B*(on>>1),dt.F!=null&&(dt.J+=dt.width*on)),Cn<Ln&&(dt.O+=dt.v,dt.N+=dt.v>>1,dt.W+=dt.v>>1,dt.F!=null&&(dt.J+=dt.v),dt.ka=Cn-dt.j,dt.U=dt.va-dt.v,dt.T=Ln-Cn,ir=dt.put(dt))}Zt+1!=gt.Ic||Nr||(r(gt.sa,gt.ta-jt,Ur,si+16*gt.R,jt),r(gt.qa,gt.ra-In,Gn,nn+8*gt.B,In),r(gt.Ha,gt.Ia-In,Cr,gi+8*gt.B,In))}if(!ir)return Mn(fn,6,"Output aborted.")}return 1})(Ee,Oe)),Oe.bc!=null&&Oe.bc(Oe),qe&=1}return qe?(Ee.cb=0,qe):0})(v,W)||(T=v.a)}}else T=v.a}T==0&&ve.Oa!=null&&ve.Oa.fd&&(T=Ou(ve.ba))}ve=T}ge=ve!=0?null:11>ge?xe.f.RGBA.eb:xe.f.kb.y}else ge=null;return ge};var Kc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(O,le){for(var Q="",U=0;U<4;U++)Q+=String.fromCharCode(O[le++]);return Q}function h(O,le){return O[le+0]|O[le+1]<<8}function g(O,le){return(O[le+0]|O[le+1]<<8|O[le+2]<<16)>>>0}function y(O,le){return(O[le+0]|O[le+1]<<8|O[le+2]<<16|O[le+3]<<24)>>>0}new c;var m=[0],E=[0],_=[],R=new c,b=n,N=(function(O,le){var Q={},U=0,X=!1,M=0,ye=0;if(Q.frames=[],!(function(L,$){for(var ee=0;ee<4;ee++)if(L[$+ee]!="RIFF".charCodeAt(ee))return!0;return!1})(O,le)){for(y(O,le+=4),le+=8;le<O.length;){var se=f(O,le),ie=y(O,le+=4);le+=4;var Se=ie+(1&ie);switch(se){case"VP8 ":case"VP8L":Q.frames[U]===void 0&&(Q.frames[U]={}),(K=Q.frames[U]).src_off=X?ye:le-8,K.src_size=M+ie+8,U++,X&&(X=!1,M=0,ye=0);break;case"VP8X":(K=Q.header={}).feature_flags=O[le];var me=le+4;K.canvas_width=1+g(O,me),me+=3,K.canvas_height=1+g(O,me),me+=3;break;case"ALPH":X=!0,M=Se+8,ye=le-8;break;case"ANIM":(K=Q.header).bgcolor=y(O,le),me=le+4,K.loop_count=h(O,me),me+=2;break;case"ANMF":var Ne,K;(K=Q.frames[U]={}).offset_x=2*g(O,le),le+=3,K.offset_y=2*g(O,le),le+=3,K.width=1+g(O,le),le+=3,K.height=1+g(O,le),le+=3,K.duration=g(O,le),le+=3,Ne=O[le++],K.dispose=1&Ne,K.blend=Ne>>1&1}se!="ANMF"&&(le+=Se)}return Q}})(b,0);N.response=b,N.rgbaoutput=!0,N.dataurl=!1;var C=N.header?N.header:null,A=N.frames?N.frames:null;if(C){C.loop_counter=C.loop_count,m=[C.canvas_height],E=[C.canvas_width];for(var F=0;F<A.length&&A[F].blend!=0;F++);}var J=A[0],V=R.WebPDecodeRGBA(b,J.src_off,J.src_size,E,m);J.rgba=V,J.imgwidth=E[0],J.imgheight=m[0];for(var te=0;te<E[0]*m[0]*4;te++)_[te]=V[te];return this.width=E,this.height=m,this.data=_,this}(function(n){var e,t,r,i,s,u,l,c,f,h=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new u,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new u,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,u=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,f=new h}]);var g=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=L;Object.defineProperty(this,"pdf",{get:function(){return $}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(q){ee=!!q}});var pe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pe},set:function(q){pe=!!q}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(q){isNaN(q)||(ae=q)}});var B=0;Object.defineProperty(this,"posY",{get:function(){return B},set:function(q){isNaN(q)||(B=q)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(q){var oe;typeof q=="number"?oe=[q,q,q,q]:((oe=new Array(4))[0]=q[0],oe[1]=q.length>=2?q[1]:oe[0],oe[2]=q.length>=3?q[2]:oe[0],oe[3]=q.length>=4?q[3]:oe[1]),f.margin=oe}});var j=!1;Object.defineProperty(this,"autoPaging",{get:function(){return j},set:function(q){j=q}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(q){de=q}});var fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return fe},set:function(q){fe=q}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(q){q instanceof h&&(f=q)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(q){f.path=q}});var re=[];Object.defineProperty(this,"ctxStack",{get:function(){return re},set:function(q){re=q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(q){var oe;oe=y(q),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(q){var oe=y(q);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(q){["butt","round","square"].indexOf(q)!==-1&&(this.ctx.lineCap=q,this.pdf.setLineCap(q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(q){isNaN(q)||(this.ctx.lineWidth=q,this.pdf.setLineWidth(q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(q){["bevel","round","miter"].indexOf(q)!==-1&&(this.ctx.lineJoin=q,this.pdf.setLineJoin(q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(q){isNaN(q)||(this.ctx.miterLimit=q,this.pdf.setMiterLimit(q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(q){this.ctx.textBaseline=q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(q){["right","end","center","left","start"].indexOf(q)!==-1&&(this.ctx.textAlign=q)}});var he=null,ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return ke},set:function(q){he=null,ke=q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(q){var oe;if(this.ctx.font=q,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(q))!==null){var Y=oe[1];oe[2];var I=oe[3],P=oe[4];oe[5];var H=oe[6],be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(P)[2];P=Math.floor(be==="px"?parseFloat(P)*this.pdf.internal.scaleFactor:be==="em"?parseFloat(P)*this.pdf.getFontSize():parseFloat(P)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(P);var ne=(function(Nt){var yt,bn,Rt=[],ht=Nt.trim();if(ht==="")return Gy;if(ht in FA)return[FA[ht]];for(;ht!=="";){switch(bn=null,yt=(ht=qA(ht)).charAt(0)){case'"':case"'":bn=F9(ht.substring(1),yt);break;default:bn=B9(ht)}if(bn===null||(Rt.push(bn[0]),(ht=qA(bn[1]))!==""&&ht.charAt(0)!==","))return Gy;ht=ht.replace(/^,/,"")}return Rt})(H);if(this.fontFaces){var we=(function(Nt,yt){if(he===null){var bn=(function(Rt){var ht=[];return Object.keys(Rt).forEach(function(Pt){Rt[Pt].forEach(function(Ht){var Dt=null;switch(Ht){case"bold":Dt={family:Pt,weight:"bold"};break;case"italic":Dt={family:Pt,style:"italic"};break;case"bolditalic":Dt={family:Pt,weight:"bold",style:"italic"};break;case"":case"normal":Dt={family:Pt}}Dt!==null&&(Dt.ref={name:Pt,style:Ht},ht.push(Dt))})}),ht})(Nt.getFontList());he=(function(Rt){for(var ht={},Pt=0;Pt<Rt.length;++Pt){var Ht=Hy(Rt[Pt]),Dt=Ht.family,ln=Ht.stretch,Wt=Ht.style,jn=Ht.weight;ht[Dt]=ht[Dt]||{},ht[Dt][ln]=ht[Dt][ln]||{},ht[Dt][ln][Wt]=ht[Dt][ln][Wt]||{},ht[Dt][ln][Wt][jn]=Ht}return ht})(bn.concat(yt))}return he})(this.pdf,this.fontFaces),Re=ne.map(function(Nt){return{family:Nt,stretch:"normal",weight:I,style:Y}}),De=(function(Nt,yt,bn){for(var Rt=(bn=bn||{}).defaultFontFamily||"times",ht=Object.assign({},U9,bn.genericFontFamilies||{}),Pt=null,Ht=null,Dt=0;Dt<yt.length;++Dt)if(ht[(Pt=Hy(yt[Dt])).family]&&(Pt.family=ht[Pt.family]),Nt.hasOwnProperty(Pt.family)){Ht=Nt[Pt.family];break}if(!(Ht=Ht||Nt[Rt]))throw new Error("Could not find a font-family for the rule '"+BA(Pt)+"' and default family '"+Rt+"'.");if(Ht=(function(ln,Wt){if(Wt[ln])return Wt[ln];var jn=Pw[ln],Jn=jn<=Pw.normal?-1:1,cn=UA(Wt,fN,jn,Jn);if(!cn)throw new Error("Could not find a matching font-stretch value for "+ln);return cn})(Pt.stretch,Ht),Ht=(function(ln,Wt){if(Wt[ln])return Wt[ln];for(var jn=cN[ln],Jn=0;Jn<jn.length;++Jn)if(Wt[jn[Jn]])return Wt[jn[Jn]];throw new Error("Could not find a matching font-style for "+ln)})(Pt.style,Ht),!(Ht=(function(ln,Wt){if(Wt[ln])return Wt[ln];if(ln===400&&Wt[500])return Wt[500];if(ln===500&&Wt[400])return Wt[400];var jn=D9[ln],Jn=UA(Wt,dN,jn,ln<400?-1:1);if(!Jn)throw new Error("Could not find a matching font-weight for value "+ln);return Jn})(Pt.weight,Ht)))throw new Error("Failed to resolve a font for the rule '"+BA(Pt)+"'.");return Ht})(we,Re);this.pdf.setFont(De.ref.name,De.ref.style)}else{var Ue="";(I==="bold"||parseInt(I,10)>=700||Y==="bold")&&(Ue="bold"),Y==="italic"&&(Ue+="italic"),Ue.length===0&&(Ue="normal");for(var Ke="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<ne.length;ot++){if(this.pdf.internal.getFont(ne[ot],Ue,{noFallback:!0,disableWarning:!0})!==void 0){Ke=ne[ot];break}if(Ue==="bolditalic"&&this.pdf.internal.getFont(ne[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ke=ne[ot],Ue="bold";else if(this.pdf.internal.getFont(ne[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ke=ne[ot],Ue="normal";break}}if(Ke===""){for(var pt=0;pt<ne.length;pt++)if(at[ne[pt]]){Ke=at[ne[pt]];break}}Ke=Ke===""?"Times":Ke,this.pdf.setFont(Ke,Ue)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(q){this.ctx.globalCompositeOperation=q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(q){this.ctx.globalAlpha=q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(q){this.ctx.lineDashOffset=q,K.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(q){this.ctx.lineDash=q,K.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(q){this.ctx.ignoreClearRect=!!q}})};g.prototype.setLineDash=function(L){this.lineDash=L},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){A.call(this,"fill",!1)},g.prototype.stroke=function(){A.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(L,$){if(isNaN(L)||isNaN($))throw Qn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new u(L,$));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new u(L,$)},g.prototype.closePath=function(){var L=new u(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&qn(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){L=new u(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(L.x,L.y)},g.prototype.lineTo=function(L,$){if(isNaN(L)||isNaN($))throw Qn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new u(L,$));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new u(ee.x,ee.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},g.prototype.quadraticCurveTo=function(L,$,ee,pe){if(isNaN(ee)||isNaN(pe)||isNaN(L)||isNaN($))throw Qn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new u(ee,pe)),B=this.ctx.transform.applyToPoint(new u(L,$));this.path.push({type:"qct",x1:B.x,y1:B.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new u(ae.x,ae.y)},g.prototype.bezierCurveTo=function(L,$,ee,pe,ae,B){if(isNaN(ae)||isNaN(B)||isNaN(L)||isNaN($)||isNaN(ee)||isNaN(pe))throw Qn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var j=this.ctx.transform.applyToPoint(new u(ae,B)),de=this.ctx.transform.applyToPoint(new u(L,$)),fe=this.ctx.transform.applyToPoint(new u(ee,pe));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:fe.x,y2:fe.y,x:j.x,y:j.y}),this.ctx.lastPoint=new u(j.x,j.y)},g.prototype.arc=function(L,$,ee,pe,ae,B){if(isNaN(L)||isNaN($)||isNaN(ee)||isNaN(pe)||isNaN(ae))throw Qn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(B=!!B,!this.ctx.transform.isIdentity){var j=this.ctx.transform.applyToPoint(new u(L,$));L=j.x,$=j.y;var de=this.ctx.transform.applyToPoint(new u(0,ee)),fe=this.ctx.transform.applyToPoint(new u(0,0));ee=Math.sqrt(Math.pow(de.x-fe.x,2)+Math.pow(de.y-fe.y,2))}Math.abs(ae-pe)>=2*Math.PI&&(pe=0,ae=2*Math.PI),this.path.push({type:"arc",x:L,y:$,radius:ee,startAngle:pe,endAngle:ae,counterclockwise:B})},g.prototype.arcTo=function(L,$,ee,pe,ae){throw new Error("arcTo not implemented.")},g.prototype.rect=function(L,$,ee,pe){if(isNaN(L)||isNaN($)||isNaN(ee)||isNaN(pe))throw Qn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,$),this.lineTo(L+ee,$),this.lineTo(L+ee,$+pe),this.lineTo(L,$+pe),this.lineTo(L,$),this.lineTo(L+ee,$),this.lineTo(L,$)},g.prototype.fillRect=function(L,$,ee,pe){if(isNaN(L)||isNaN($)||isNaN(ee)||isNaN(pe))throw Qn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,$,ee,pe),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},g.prototype.strokeRect=function(L,$,ee,pe){if(isNaN(L)||isNaN($)||isNaN(ee)||isNaN(pe))throw Qn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(L,$,ee,pe),this.stroke())},g.prototype.clearRect=function(L,$,ee,pe){if(isNaN(L)||isNaN($)||isNaN(ee)||isNaN(pe))throw Qn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,$,ee,pe))},g.prototype.save=function(L){L=typeof L!="boolean"||L;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage($),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var pe=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pe}},g.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage($),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(L){var $,ee,pe,ae;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))$=0,ee=0,pe=0,ae=0;else{var B=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(B!==null)$=parseInt(B[1]),ee=parseInt(B[2]),pe=parseInt(B[3]),ae=1;else if((B=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)$=parseInt(B[1]),ee=parseInt(B[2]),pe=parseInt(B[3]),ae=parseFloat(B[4]);else{if(ae=1,typeof L=="string"&&L.charAt(0)!=="#"){var j=new rN(L);L=j.ok?j.toHex():"#000000"}L.length===4?($=L.substring(1,2),$+=$,ee=L.substring(2,3),ee+=ee,pe=L.substring(3,4),pe+=pe):($=L.substring(1,3),ee=L.substring(3,5),pe=L.substring(5,7)),$=parseInt($,16),ee=parseInt(ee,16),pe=parseInt(pe,16)}}return{r:$,g:ee,b:pe,a:ae,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(L,$,ee,pe){if(isNaN($)||isNaN(ee)||typeof L!="string")throw Qn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pe=isNaN(pe)?void 0:pe,!m.call(this)){var ae=Se(this.ctx.transform.rotation),B=this.ctx.transform.scaleX;U.call(this,{text:L,x:$,y:ee,scale:B,angle:ae,align:this.textAlign,maxWidth:pe})}},g.prototype.strokeText=function(L,$,ee,pe){if(isNaN($)||isNaN(ee)||typeof L!="string")throw Qn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){pe=isNaN(pe)?void 0:pe;var ae=Se(this.ctx.transform.rotation),B=this.ctx.transform.scaleX;U.call(this,{text:L,x:$,y:ee,scale:B,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:pe})}},g.prototype.measureText=function(L){if(typeof L!="string")throw Qn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,ee=this.pdf.internal.scaleFactor,pe=$.internal.getFontSize(),ae=$.getStringUnitWidth(L)*pe/$.internal.scaleFactor;return new function(B){var j=(B=B||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return j}}),this}({width:ae*=Math.round(96*ee/72*1e4)/1e4})},g.prototype.scale=function(L,$){if(isNaN(L)||isNaN($))throw Qn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new c(L,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},g.prototype.rotate=function(L){if(isNaN(L))throw Qn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply($)},g.prototype.translate=function(L,$){if(isNaN(L)||isNaN($))throw Qn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new c(1,0,0,1,L,$);this.ctx.transform=this.ctx.transform.multiply(ee)},g.prototype.transform=function(L,$,ee,pe,ae,B){if(isNaN(L)||isNaN($)||isNaN(ee)||isNaN(pe)||isNaN(ae)||isNaN(B))throw Qn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var j=new c(L,$,ee,pe,ae,B);this.ctx.transform=this.ctx.transform.multiply(j)},g.prototype.setTransform=function(L,$,ee,pe,ae,B){L=isNaN(L)?1:L,$=isNaN($)?0:$,ee=isNaN(ee)?0:ee,pe=isNaN(pe)?1:pe,ae=isNaN(ae)?0:ae,B=isNaN(B)?0:B,this.ctx.transform=new c(L,$,ee,pe,ae,B)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(L,$,ee,pe,ae,B,j,de,fe){var re=this.pdf.getImageProperties(L),he=1,ke=1,q=1,oe=1;pe!==void 0&&de!==void 0&&(q=de/pe,oe=fe/ae,he=re.width/pe*de/pe,ke=re.height/ae*fe/ae),B===void 0&&(B=$,j=ee,$=0,ee=0),pe!==void 0&&de===void 0&&(de=pe,fe=ae),pe===void 0&&de===void 0&&(de=re.width,fe=re.height);for(var Y,I=this.ctx.transform.decompose(),P=Se(I.rotate.shx),H=new c,be=(H=(H=(H=H.multiply(I.translate)).multiply(I.skew)).multiply(I.scale)).applyToRectangle(new l(B-$*q,j-ee*oe,pe*he,ae*ke)),ne=R.call(this,be),we=[],Re=0;Re<ne.length;Re+=1)we.indexOf(ne[Re])===-1&&we.push(ne[Re]);if(C(we),this.autoPaging)for(var De=we[0],Ue=we[we.length-1],Ke=De;Ke<Ue+1;Ke++){this.pdf.setPage(Ke);var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=Ke===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=Ke===1?0:pt+(Ke-2)*Nt;if(this.ctx.clip_path.length!==0){var bn=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Y,this.posX+this.margin[3],-yt+ot+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=bn}var Rt=JSON.parse(JSON.stringify(be));Rt=N([Rt],this.posX+this.margin[3],-yt+ot+this.ctx.prevPageLastElemOffset)[0];var ht=(Ke>De||Ke<Ue)&&_.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Nt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Rt.x,Rt.y,Rt.w,Rt.h,null,null,P),ht&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",be.x,be.y,be.w,be.h,null,null,P)};var R=function(L,$,ee){var pe=[];$=$||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":pe.push(Math.floor((L.y+ae)/ee)+1);break;case"arc":pe.push(Math.floor((L.y+ae-L.radius)/ee)+1),pe.push(Math.floor((L.y+ae+L.radius)/ee)+1);break;case"qct":var B=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);pe.push(Math.floor((B.y+ae)/ee)+1),pe.push(Math.floor((B.y+B.h+ae)/ee)+1);break;case"bct":var j=Ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);pe.push(Math.floor((j.y+ae)/ee)+1),pe.push(Math.floor((j.y+j.h+ae)/ee)+1);break;case"rect":pe.push(Math.floor((L.y+ae)/ee)+1),pe.push(Math.floor((L.y+L.h+ae)/ee)+1)}for(var de=0;de<pe.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<pe[de];)b.call(this);return pe},b=function(){var L=this.fillStyle,$=this.strokeStyle,ee=this.font,pe=this.lineCap,ae=this.lineWidth,B=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=$,this.font=ee,this.lineCap=pe,this.lineWidth=ae,this.lineJoin=B},N=function(L,$,ee){for(var pe=0;pe<L.length;pe++)switch(L[pe].type){case"bct":L[pe].x2+=$,L[pe].y2+=ee;case"qct":L[pe].x1+=$,L[pe].y1+=ee;default:L[pe].x+=$,L[pe].y+=ee}return L},C=function(L){return L.sort(function($,ee){return $-ee})},A=function(L,$){for(var ee,pe,ae=this.fillStyle,B=this.strokeStyle,j=this.lineCap,de=this.lineWidth,fe=Math.abs(de*this.ctx.transform.scaleX),re=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),q=[],oe=0;oe<ke.length;oe++)if(ke[oe].x!==void 0)for(var Y=R.call(this,ke[oe]),I=0;I<Y.length;I+=1)q.indexOf(Y[I])===-1&&q.push(Y[I]);for(var P=0;P<q.length;P++)for(;this.pdf.internal.getNumberOfPages()<q[P];)b.call(this);if(C(q),this.autoPaging)for(var H=q[0],be=q[q.length-1],ne=H;ne<be+1;ne++){this.pdf.setPage(ne),this.fillStyle=ae,this.strokeStyle=B,this.lineCap=j,this.lineWidth=fe,this.lineJoin=re;var we=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=ne===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=ne===1?0:De+(ne-2)*Ue;if(this.ctx.clip_path.length!==0){var at=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ee,this.posX+this.margin[3],-Ke+Re+this.ctx.prevPageLastElemOffset),F.call(this,L,!0),this.path=at}if(pe=JSON.parse(JSON.stringify(he)),this.path=N(pe,this.posX+this.margin[3],-Ke+Re+this.ctx.prevPageLastElemOffset),$===!1||ne===0){var ot=(ne>H||ne<be)&&_.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],we,Ue,null).clip().discardPath()),F.call(this,L,$),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=fe,F.call(this,L,$),this.lineWidth=de;this.path=he},F=function(L,$){if((L!=="stroke"||$||!E.call(this))&&(L==="stroke"||$||!m.call(this))){for(var ee,pe,ae=[],B=this.path,j=0;j<B.length;j++){var de=B[j];switch(de.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:de,deltas:[],abs:[]});break;case"lt":var fe=ae.length;if(B[j-1]&&!isNaN(B[j-1].x)&&(ee=[de.x-B[j-1].x,de.y-B[j-1].y],fe>0)){for(;fe>=0;fe--)if(ae[fe-1].close!==!0&&ae[fe-1].begin!==!0){ae[fe-1].deltas.push(ee),ae[fe-1].abs.push(de);break}}break;case"bct":ee=[de.x1-B[j-1].x,de.y1-B[j-1].y,de.x2-B[j-1].x,de.y2-B[j-1].y,de.x-B[j-1].x,de.y-B[j-1].y],ae[ae.length-1].deltas.push(ee);break;case"qct":var re=B[j-1].x+2/3*(de.x1-B[j-1].x),he=B[j-1].y+2/3*(de.y1-B[j-1].y),ke=de.x+2/3*(de.x1-de.x),q=de.y+2/3*(de.y1-de.y),oe=de.x,Y=de.y;ee=[re-B[j-1].x,he-B[j-1].y,ke-B[j-1].x,q-B[j-1].y,oe-B[j-1].x,Y-B[j-1].y],ae[ae.length-1].deltas.push(ee);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(de)}}pe=$?null:L==="stroke"?"stroke":"fill";for(var I=!1,P=0;P<ae.length;P++)if(ae[P].arc)for(var H=ae[P].abs,be=0;be<H.length;be++){var ne=H[be];ne.type==="arc"?te.call(this,ne.x,ne.y,ne.radius,ne.startAngle,ne.endAngle,ne.counterclockwise,void 0,$,!I):X.call(this,ne.x,ne.y),I=!0}else if(ae[P].close===!0)this.pdf.internal.out("h"),I=!1;else if(ae[P].begin!==!0){var we=ae[P].start.x,Re=ae[P].start.y;M.call(this,ae[P].deltas,we,Re),I=!0}pe&&O.call(this,pe),$&&le.call(this)}},J=function(L){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-ee;case"top":return L+$-ee;case"hanging":return L+$-2*ee;case"middle":return L+$/2-ee;default:return L}},V=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function($,ee){this.colorStops.push([$,ee])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var te=function(L,$,ee,pe,ae,B,j,de,fe){for(var re=se.call(this,ee,pe,ae,B),he=0;he<re.length;he++){var ke=re[he];he===0&&(fe?Q.call(this,ke.x1+L,ke.y1+$):X.call(this,ke.x1+L,ke.y1+$)),ye.call(this,L,$,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}de?le.call(this):O.call(this,j)},O=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},le=function(){this.pdf.clip(),this.pdf.discardPath()},Q=function(L,$){this.pdf.internal.out(t(L)+" "+r($)+" m")},U=function(L){var $;switch(L.align){case"right":case"end":$="right";break;case"center":$="center";break;default:$="left"}var ee=this.pdf.getTextDimensions(L.text),pe=J.call(this,L.y),ae=V.call(this,pe)-ee.h,B=this.ctx.transform.applyToPoint(new u(L.x,pe)),j=this.ctx.transform.decompose(),de=new c;de=(de=(de=de.multiply(j.translate)).multiply(j.skew)).multiply(j.scale);for(var fe,re,he,ke=this.ctx.transform.applyToRectangle(new l(L.x,pe,ee.w,ee.h)),q=de.applyToRectangle(new l(L.x,ae,ee.w,ee.h)),oe=R.call(this,q),Y=[],I=0;I<oe.length;I+=1)Y.indexOf(oe[I])===-1&&Y.push(oe[I]);if(C(Y),this.autoPaging)for(var P=Y[0],H=Y[Y.length-1],be=P;be<H+1;be++){this.pdf.setPage(be);var ne=be===1?this.posY+this.margin[0]:this.margin[0],we=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[2],De=Re-this.margin[0],Ue=this.pdf.internal.pageSize.width-this.margin[1],Ke=Ue-this.margin[3],at=be===1?0:we+(be-2)*De;if(this.ctx.clip_path.length!==0){var ot=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(fe,this.posX+this.margin[3],-1*at+ne),F.call(this,"fill",!0),this.path=ot}var pt=N([JSON.parse(JSON.stringify(q))],this.posX+this.margin[3],-at+ne+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*L.scale),he=this.lineWidth,this.lineWidth=he*L.scale);var Nt=this.autoPaging!=="text";if(Nt||pt.y+pt.h<=Re){if(Nt||pt.y>=ne&&pt.x<=Ue){var yt=Nt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ue-pt.x)[0],bn=N([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-at+ne+this.ctx.prevPageLastElemOffset)[0],Rt=Nt&&(be>P||be<H)&&_.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,De,null).clip().discardPath()),this.pdf.text(yt,bn.x,bn.y,{angle:L.angle,align:$,renderingMode:L.renderingMode}),Rt&&this.pdf.restoreGraphicsState()}}else pt.y<Re&&(this.ctx.prevPageLastElemOffset+=Re-pt.y);L.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=he)}else L.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*L.scale),he=this.lineWidth,this.lineWidth=he*L.scale),this.pdf.text(L.text,B.x+this.posX,B.y+this.posY,{angle:L.angle,align:$,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=he)},X=function(L,$,ee,pe){ee=ee||0,pe=pe||0,this.pdf.internal.out(t(L+ee)+" "+r($+pe)+" l")},M=function(L,$,ee){return this.pdf.lines(L,$,ee,null,null)},ye=function(L,$,ee,pe,ae,B,j,de){this.pdf.internal.out([e(i(ee+L)),e(s(pe+$)),e(i(ae+L)),e(s(B+$)),e(i(j+L)),e(s(de+$)),"c"].join(" "))},se=function(L,$,ee,pe){for(var ae=2*Math.PI,B=Math.PI/2;$>ee;)$-=ae;var j=Math.abs(ee-$);j<ae&&pe&&(j=ae-j);for(var de=[],fe=pe?-1:1,re=$;j>1e-5;){var he=re+fe*Math.min(j,B);de.push(ie.call(this,L,re,he)),j-=Math.abs(he-re),re=he}return de},ie=function(L,$,ee){var pe=(ee-$)/2,ae=L*Math.cos(pe),B=L*Math.sin(pe),j=ae,de=-B,fe=j*j+de*de,re=fe+j*ae+de*B,he=4/3*(Math.sqrt(2*fe*re)-re)/(j*B-de*ae),ke=j-he*de,q=de+he*j,oe=ke,Y=-q,I=pe+$,P=Math.cos(I),H=Math.sin(I);return{x1:L*Math.cos($),y1:L*Math.sin($),x2:ke*P-q*H,y2:ke*H+q*P,x3:oe*P-Y*H,y3:oe*H+Y*P,x4:L*Math.cos(ee),y4:L*Math.sin(ee)}},Se=function(L){return 180*L/Math.PI},me=function(L,$,ee,pe,ae,B){var j=L+.5*(ee-L),de=$+.5*(pe-$),fe=ae+.5*(ee-ae),re=B+.5*(pe-B),he=Math.min(L,ae,j,fe),ke=Math.max(L,ae,j,fe),q=Math.min($,B,de,re),oe=Math.max($,B,de,re);return new l(he,q,ke-he,oe-q)},Ne=function(L,$,ee,pe,ae,B,j,de){var fe,re,he,ke,q,oe,Y,I,P,H,be,ne,we,Re,De=ee-L,Ue=pe-$,Ke=ae-ee,at=B-pe,ot=j-ae,pt=de-B;for(re=0;re<41;re++)P=(Y=(he=L+(fe=re/40)*De)+fe*((q=ee+fe*Ke)-he))+fe*(q+fe*(ae+fe*ot-q)-Y),H=(I=(ke=$+fe*Ue)+fe*((oe=pe+fe*at)-ke))+fe*(oe+fe*(B+fe*pt-oe)-I),re==0?(be=P,ne=H,we=P,Re=H):(be=Math.min(be,P),ne=Math.min(ne,H),we=Math.max(we,P),Re=Math.max(Re,H));return new l(Math.round(be),Math.round(ne),Math.round(we-be),Math.round(Re-ne))},K=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,$,ee=(L=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:$}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(It.API),(function(n){var e=function(u){var l,c,f,h,g,y,m,E,_,R;for(c=[],f=0,h=(u+=l="\0\0\0\0".slice(u.length%4||4)).length;h>f;f+=4)(g=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(y=(g=((g=((g=((g=(g-(R=g%85))/85)-(_=g%85))/85)-(E=g%85))/85)-(m=g%85))/85)%85,c.push(y+33,m+33,E+33,_+33,R+33)):c.push(122);return(function(b,N){for(var C=N;C>0;C--)b.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},t=function(u){var l,c,f,h,g,y=String,m="length",E=255,_="charCodeAt",R="slice",b="replace";for(u[R](-2),u=u[R](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),f=[],h=0,g=(u+=l="uuuuu"[R](u[m]%5||5))[m];g>h;h+=5)c=52200625*(u[_](h)-33)+614125*(u[_](h+1)-33)+7225*(u[_](h+2)-33)+85*(u[_](h+3)-33)+(u[_](h+4)-33),f.push(E&c>>24,E&c>>16,E&c>>8,E&c);return(function(N,C){for(var A=C;A>0;A--)N.pop()})(f,l[m]),y.fromCharCode.apply(y,f)},r=function(u){return u.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(u){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),l.test(u)===!1)return"";for(var c="",f=0;f<u.length;f+=2)c+=String.fromCharCode("0x"+(u[f]+u[f+1]));return c},s=function(u){for(var l=new Uint8Array(u.length),c=u.length;c--;)l[c]=u.charCodeAt(c);return(l=Tw(l)).reduce(function(f,h){return f+String.fromCharCode(h)},"")};n.processDataByFilters=function(u,l){var c=0,f=u||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=r(f),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=s(f),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:f,reverseChain:h.reverse().join(" ")}}})(It.API),(function(n){n.loadFile=function(e,t,r){return(function(i,s,u){s=s!==!1,u=typeof u=="function"?u:function(){};var l=void 0;try{l=(function(c,f,h){var g=new XMLHttpRequest,y=0,m=function(E){var _=E.length,R=[],b=String.fromCharCode;for(y=0;y<_;y+=1)R.push(b(255&E.charCodeAt(y)));return R.join("")};if(g.open("GET",c,!f),g.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(g.onload=function(){g.status===200?h(m(this.responseText)):h(void 0)}),g.send(null),f&&g.status===200)return m(g.responseText)})(i,s,u)}catch{}return l})(e,t,r)},n.loadImageFile=n.loadFile})(It.API),(function(n){function e(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):ma(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function t(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):ma(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var c=qn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var f=document.createElement(l);for(var h in c.className&&(f.className=c.className),c.innerHTML&&c.dompurify&&(f.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)f.style[h]=c.style[h];return f},s=function l(c,f){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)f!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||h.appendChild(l(g,f));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h},u=function l(c){var f=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),f);return(h=h.setProgress(1,l,1,[l])).set(c)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(l,c){return l.__proto__=c||u.prototype,l},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:l,dompurify:f})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},u.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,c(this.prop.container,f)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var f=this.opt.jsPDF,h=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=h,h)for(var m=0;m<h.length;++m){var E=h[m],_=E.src.find(function(R){return R.format==="truetype"});_&&f.addFont(_.url,E.ref.name,E.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,f.context2d.save(!0),c(this.prop.container,y)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(l,c,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},u.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},u.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},u.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(l){if(r(l)!=="object")return this;var c=Object.keys(l||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=l[f]};switch(f){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[f]=l[f]}}},this);return this.then(function(){return this.thenList(c)})},u.prototype.get=function(l,c){return this.then(function(){var f=l in u.template.prop?this.prop[l]:this.opt[l];return c?c(f):f})},u.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},u.prototype.setPageSize=function(l){function c(f,h){return Math.floor(f*h/72*96)}return this.then(function(){(l=l||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},u.prototype.setProgress=function(l,c,f,h){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),f!=null&&(this.progress.n=f),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(l,c,f,h){return this.setProgress(l?this.progress.val+l:null,c||null,f?this.progress.n+f:null,h?this.progress.stack.concat(h):null)},u.prototype.then=function(l,c){var f=this;return this.thenCore(l,c,function(h,g){return f.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(y){return f.updateProgress(null,h),y}).then(h,g).then(function(y){return f.updateProgress(1),y})})},u.prototype.thenCore=function(l,c,f){f=f||Promise.prototype.then;var h=this;l&&(l=l.bind(h)),c&&(c=c.bind(h));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:u.convert(Object.assign({},h),Promise.prototype),y=f.call(g,l,c);return u.convert(y,h.__proto__)},u.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},u.prototype.thenList=function(l){var c=this;return l.forEach(function(f){c=c.thenCore(f)}),c},u.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return u.convert(c,this)},u.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},u.prototype.error=function(l){return this.then(function(){throw new Error(l)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,It.getPageSize=function(l,c,f){if(qn(l)==="object"){var h=l;l=h.orientation,c=h.unit||c,f=h.format||f}c=c||"mm",f=f||"a4",l=(""+(l||"P")).toLowerCase();var g,y=(""+f).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+c}var E,_=0,R=0;if(m.hasOwnProperty(y))_=m[y][1]/g,R=m[y][0]/g;else try{_=f[1],R=f[0]}catch{throw new Error("Invalid format: "+f)}if(l==="p"||l==="portrait")l="p",R>_&&(E=R,R=_,_=E);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",_>R&&(E=R,R=_,_=E)}return{width:R,height:_,unit:c,k:g,orientation:l}},n.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Hy):null;var f=new u(c);return c.worker?f:f.from(l).doCallback()}})(It.API),It.API.addJS=function(n){return zA=n,this.internal.events.subscribe("postPutResources",function(){fm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+zA+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fm!==void 0&&jA!==void 0&&this.internal.out("/Names <</JavaScript "+fm+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var u=i[s],l=r.exec(u);if(l!=null){var c=l[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,h=[];for(s=0;s<f;s++){var g=t.internal.newObject();h.push(g);var y=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<h.length;s++)t.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var u={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var u=r.children[s];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var l=this.count=this.count_r({count:0},u);if(l>0&&this.line("/Count "+l),u.options&&u.options.pageNumber){var c=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])})(It.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,u,l){var c,f=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(g){for(var y,m=256*g.charCodeAt(4)+g.charCodeAt(5),E=g.length,_={width:0,height:0,numcomponents:1},R=4;R<E;R+=2){if(R+=m,e.indexOf(g.charCodeAt(R+1))!==-1){y=256*g.charCodeAt(R+5)+g.charCodeAt(R+6),_={width:256*g.charCodeAt(R+7)+g.charCodeAt(R+8),height:y,numcomponents:g.charCodeAt(R+9)};break}m=256*g.charCodeAt(R+2)+g.charCodeAt(R+3)}return _})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:t,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:f,index:r,alias:i}}return h}})(It.API),It.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,s=S9(n,{checkCrc:!0}),u=s.width,l=s.height,c=s.channels,f=s.palette,h=s.depth;i=f&&c===1?(function(te){for(var O=te.width,le=te.height,Q=te.data,U=te.palette,X=te.depth,M=!1,ye=[],se=[],ie=void 0,Se=!1,me=0,Ne=0;Ne<U.length;Ne++){var K=$x(U[Ne],4),L=K[0],$=K[1],ee=K[2],pe=K[3];ye.push(L,$,ee),pe!=null&&(pe===0?(me++,se.length<1&&se.push(Ne)):pe<255&&(Se=!0))}if(Se||me>1){M=!0,se=void 0;var ae=O*le;ie=new Uint8Array(ae);for(var B=new DataView(Q.buffer),j=0;j<ae;j++){var de=Vy(B,j,X),fe=$x(U[de],4)[3];ie[j]=fe}}else me===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:Q,alphaBytes:ie,needSMask:M,palette:ye,mask:se}})(s):c===2||c===4?(function(te){for(var O=te.data,le=te.width,Q=te.height,U=te.channels,X=te.depth,M=U===2?"DeviceGray":"DeviceRGB",ye=U-1,se=le*Q,ie=ye,Se=se*ie,me=1*se,Ne=Math.ceil(Se*X/8),K=Math.ceil(me*X/8),L=new Uint8Array(Ne),$=new Uint8Array(K),ee=new DataView(O.buffer),pe=new DataView(L.buffer),ae=new DataView($.buffer),B=!1,j=0;j<se;j++){for(var de=j*U,fe=0;fe<ie;fe++)XA(pe,Vy(ee,de+fe,X),j*ie+fe,X);var re=Vy(ee,de+ie,X);re<(1<<X)-1&&(B=!0),XA(ae,re,1*j,X)}return{colorSpace:M,colorsPerPixel:ye,sMaskBitsPerComponent:B?X:void 0,colorBytes:L,alphaBytes:$,needSMask:B}})(s):(function(te){var O=te.data,le=te.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:le,colorsPerPixel:le==="DeviceGray"?1:3,colorBytes:O instanceof Uint16Array?(function(Q){for(var U=Q.length,X=new Uint8Array(2*U),M=new DataView(X.buffer,X.byteOffset,X.byteLength),ye=0;ye<U;ye++)M.setUint16(2*ye,Q[ye],!1);return X})(O):O,needSMask:!1}})(s);var g,y,m,E=i,_=E.colorSpace,R=E.colorsPerPixel,b=E.sMaskBitsPerComponent,N=E.colorBytes,C=E.alphaBytes,A=E.needSMask,F=E.palette,J=E.mask,V=null;return r!==It.API.image_compression.NONE&&typeof Tw=="function"?(V=(function(te){var O;switch(te){case It.API.image_compression.FAST:O=11;break;case It.API.image_compression.MEDIUM:O=13;break;case It.API.image_compression.SLOW:O=14;break;default:O=12}return O})(r),g=this.decode.FLATE_DECODE,y="/Predictor ".concat(V," /Colors ").concat(R," /BitsPerComponent ").concat(h," /Columns ").concat(u),n=$A(N,Math.ceil(u*R*h/8),R,h,r),A&&(m=$A(C,Math.ceil(u*b/8),1,b,r))):(g=void 0,y=void 0,n=N,A&&(m=C)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:t,data:n,index:e,filter:g,decodeParameters:y,transparency:J,palette:F,sMask:m,predictor:V,width:u,height:l,bitsPerComponent:h,sMaskBitsPerComponent:b,colorSpace:_}}},(function(n){n.processGIF89A=function(e,t,r,i){var s=new H9(e),u=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:u,height:l},h=new $y(100).encode(f,100);return n.processJPEG.call(this,h,t,r,i)},n.processGIF87A=n.processGIF89A})(It.API),Ga.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ga.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Qn.log("bit decode error:"+t)}},Ga.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[u+4*l]=c.blue,this.data[u+4*l+1]=c.green,this.data[u+4*l+2]=c.red,this.data[u+4*l+3]=255}t!==0&&(this.pos+=4-t)}},Ga.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*i*4,l=s>>4,c=15&s,f=this.palette[l];if(this.data[u]=f.blue,this.data[u+1]=f.green,this.data[u+2]=f.red,this.data[u+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[u+4]=f.blue,this.data[u+4+1]=f.green,this.data[u+4+2]=f.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},Ga.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var u=this.palette[i];this.data[s]=u.red,this.data[s+1]=u.green,this.data[s+2]=u.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Ga.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,f=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=u,this.data[h+3]=f}this.pos+=n}},Ga.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(u&e)/e*255|0,c=(u>>5&t)/t*255|0,f=(u>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=f,this.data[h+1]=c,this.data[h+2]=l,this.data[h+3]=255}this.pos+=n}},Ga.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},Ga.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=u}},Ga.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var s=new Ga(e,!1),u=s.width,l=s.height,c={data:s.getData(),width:u,height:l},f=new $y(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}})(It.API),QA.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var s=new QA(e),u=s.width,l=s.height,c={data:s.getData(),width:u,height:l},f=new $y(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}})(It.API),It.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),u=new Uint8Array(i/4),l=0,c=0,f=0;f<i;f+=4){var h=r[f],g=r[f+1],y=r[f+2],m=r[f+3];s[l++]=h,s[l++]=g,s[l++]=y,u[c++]=m}var E=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:E,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},It.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cf=It.API,dm=Cf.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=f.fof?f.fof:1,g=e.doKerning!==!1,y=0,m=n.length,E=0,_=l[0]||c,R=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?R.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+u*(1e3/s)||0)/1e3):(y=g&&qn(f[r])==="object"&&!isNaN(parseInt(f[r][E],10))?f[r][E]/h:0,R.push((l[r]||_)/c+y)),E=r;return R},HA=Cf.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Cf.processArabic&&(n=Cf.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:dm.apply(this,arguments).reduce(function(s,u){return s+u},0)},GA=function(n,e,t,r){for(var i=[],s=0,u=n.length,l=0;s!==u&&l+e[s]<t;)l+=e[s],s++;i.push(n.slice(0,s));var c=s;for(l=0;s!==u;)l+e[s]>r&&(i.push(n.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&i.push(n.slice(c,s)),i},VA=function(n,e,t){t||(t={});var r,i,s,u,l,c,f,h=[],g=[h],y=t.textIndent||0,m=0,E=0,_=n.split(" "),R=dm.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var b=Array(c).join(" "),N=[];_.map(function(A){(A=A.split(/\s*\n/)).length>1?N=N.concat(A.map(function(F,J){return(J&&F.length?`
`:"")+F})):N.push(A[0])}),_=N,c=HA.apply(this,[b,t])}for(s=0,u=_.length;s<u;s++){var C=0;if(r=_[s],c&&r[0]==`
`&&(r=r.substr(1),C=1),y+m+(E=(i=dm.apply(this,[r,t])).reduce(function(A,F){return A+F},0))>e||C){if(E>e){for(l=GA.apply(this,[r,i,e-(y+m),e]),h.push(l.shift()),h=[l.pop()];l.length;)g.push([l.shift()]);E=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(A,F){return A+F},0)}else h=[r];g.push(h),y=E+c,m=R}else h.push(r),y+=m+E,m=R}return f=c?function(A,F){return(F?b:"")+A.join(" ")}:function(A){return A.join(" ")},g.map(f)},Cf.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var g=this.internal.getFont(h.fontName,h.fontStyle),y="Unicode";return g.metadata[y]?{widths:g.metadata[y].widths||{0:1},kerning:g.metadata[y].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var l,c,f=[];for(l=0,c=r.length;l<c;l++)f=f.concat(VA.apply(this,[r[l],u,s]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[t[s]]=e[s],i[e[s]]=t[s];var u=function(y){return"0x"+parseInt(y,10).toString(16)},l=n.__fontmetrics__.compress=function(y){var m,E,_,R,b=["{"];for(var N in y){if(m=y[N],isNaN(parseInt(N,10))?E="'"+N+"'":(N=parseInt(N,10),E=(E=u(N).slice(2)).slice(0,-1)+i[E.slice(-1)]),typeof m=="number")m<0?(_=u(m).slice(3),R="-"):(_=u(m).slice(2),R=""),_=R+_.slice(0,-1)+i[_.slice(-1)];else{if(qn(m)!=="object")throw new Error("Don't know what to do with value type "+qn(m)+".");_=l(m)}b.push(E+_)}return b.push("}"),b.join("")},c=n.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,E,_,R,b={},N=1,C=b,A=[],F="",J="",V=y.length-1,te=1;te<V;te+=1)(R=y[te])=="'"?m?(_=m.join(""),m=void 0):m=[]:m?m.push(R):R=="{"?(A.push([C,_]),C={},_=void 0):R=="}"?((E=A.pop())[0][E[1]]=C,_=void 0,C=E[0]):R=="-"?N=-1:_===void 0?r.hasOwnProperty(R)?(F+=r[R],_=parseInt(F,16)*N,N=1,F=""):F+=R:r.hasOwnProperty(R)?(J+=r[R],C[_]=parseInt(J,16)*N,N=1,_=void 0,J=""):J+=R;return b},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},g={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(y){var m=y.font,E=g.Unicode[m.postScriptName];E&&(m.metadata.Unicode={},m.metadata.Unicode.widths=E.widths,m.metadata.Unicode.kerning=E.kerning);var _=h.Unicode[m.postScriptName];_&&(m.metadata.Unicode.encoding=_,m.encoding=_.codePages[0])}])})(It.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(u,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Um(l)),u.metadata=n.API.TTFFont.open(l),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(i,r)}}])})(It),It.API.addSvgAsImage=function(n,e,t,r,i,s,u,l){if(isNaN(e)||isNaN(t))throw Qn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Qn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var f=c.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(Jt.canvg?Promise.resolve(Jt.canvg):ma(()=>import("./index.es-D2AVSN-V.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(f,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(h)}).then(function(){g.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,u,l)})},It.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},It.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(u),c=[],f=0,h=0,g=0;function y(E,_){var R,b=!1;for(R=0;R<E.length;R+=1)E[R]===_&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=l.length;for(g=0;g<m;g+=1)t[l[g]].value=t[l[g]].defaultValue,t[l[g]].explicitSet=!1}if(qn(n)==="object"){for(i in n)if(s=n[i],y(l,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&y(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")c.push(String(s[f]-1));else if(s[f].length>1){for(h=0;h<s[f].length;h+=1)typeof s[f][h]!="number"&&(r=!1);r===!0&&c.push([s[f][0]-1,s[f][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,_=[];for(E in t)t[E].explicitSet===!0&&(t[E].type==="name"?_.push("/"+E+" /"+t[E].value):_.push("/"+E+" "+t[E].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+u.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+u+l+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(It.API),(function(n){var e=n.API,t=e.pdfEscape16=function(s,u){for(var l,c=u.metadata.Unicode.widths,f=["","0","00","000","0000"],h=[""],g=0,y=s.length;g<y;++g){if(l=u.metadata.characterToGlyph(s.charCodeAt(g)),u.metadata.glyIdsUsed.push(l),u.metadata.toUnicode[l]=s.charCodeAt(g),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(u.metadata.widthOfGlyph(l),10)])),l=="0")return h.join("");l=l.toString(16),h.push(f[4-l.length],l)}return h.join("")},r=function(s){var u,l,c,f,h,g,y;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],g=0,y=(l=Object.keys(s).sort(function(m,E){return m-E})).length;g<y;g++)u=l[g],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[u]!==void 0&&s[u]!==null&&typeof s[u].toString=="function"&&(f=("0000"+s[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),c.push("<"+u+"><"+f+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(u){var l=u.font,c=u.out,f=u.newObject,h=u.putStream;if(l.metadata instanceof n.API.TTFFont&&l.encoding==="Identity-H"){for(var g=l.metadata.Unicode.widths,y=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",E=0;E<y.length;E++)m+=String.fromCharCode(y[E]);var _=f();h({data:m,addLength1:!0,objectId:_}),c("endobj");var R=f();h({data:r(l.metadata.toUnicode),addLength1:!0,objectId:R}),c("endobj");var b=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Df(l.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var N=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+Df(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+n.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+R+" 0 R"),c("/BaseFont /"+Df(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(u){var l=u.font,c=u.out,f=u.newObject,h=u.putStream;if(l.metadata instanceof n.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var g=l.metadata.rawData,y="",m=0;m<g.length;m++)y+=String.fromCharCode(g[m]);var E=f();h({data:y,addLength1:!0,objectId:E}),c("endobj");var _=f();h({data:r(l.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var R=f();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+E+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Df(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=f();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Df(l.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var u,l=s.text||"",c=s.x,f=s.y,h=s.options||{},g=s.mutex||{},y=g.pdfEscape,m=g.activeFontKey,E=g.fonts,_=m,R="",b=0,N="",C=E[_].encoding;if(E[_].encoding!=="Identity-H")return{text:l,x:c,y:f,options:h,mutex:g};for(N=l,_=m,Array.isArray(l)&&(N=l[0]),b=0;b<N.length;b+=1)E[_].metadata.hasOwnProperty("cmap")&&(u=E[_].metadata.cmap.unicode.codeMap[N[b].charCodeAt(0)]),u||N[b].charCodeAt(0)<256&&E[_].metadata.hasOwnProperty("Unicode")?R+=N[b]:R+="";var A="";return parseInt(_.slice(1))<14||C==="WinAnsiEncoding"?A=y(R,_).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(A=t(R,E[_])),g.isHex=!0,{text:A,x:c,y:f,options:h,mutex:g}};e.events.push(["postProcessText",function(s){var u=s.text||"",l=[],c={text:u,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(u)){var f=0;for(f=0;f<u.length;f+=1)Array.isArray(u[f])&&u[f].length===3?l.push([i(Object.assign({},c,{text:u[f][0]})).text,u[f][1],u[f][2]]):l.push(i(Object.assign({},c,{text:u[f]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:u})).text}])})(It),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(It.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,u,l,c,f,h,g=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,C=0;this.__bidiEngine__={};var A=function(Q){var U=Q.charCodeAt(),X=U>>8,M=_[X];return M!==void 0?g[256*M+(255&U)]:X===252||X===253?"AL":b.test(X)?"L":X===8?"R":"N"},F=function(Q){for(var U,X=0;X<Q.length;X++){if((U=A(Q.charAt(X)))==="L")return!1;if(U==="R")return!0}return!1},J=function(Q,U,X,M){var ye,se,ie,Se,me=U[M];switch(me){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"N":case"AN":break;case"EN":N&&(me="AN");break;case"AL":N=!0,me="R";break;case"WS":case"BN":me="N";break;case"CS":M<1||M+1>=U.length||(ye=X[M-1])!=="EN"&&ye!=="AN"||(se=U[M+1])!=="EN"&&se!=="AN"?me="N":N&&(se="AN"),me=se===ye?se:"N";break;case"ES":me=(ye=M>0?X[M-1]:"B")==="EN"&&M+1<U.length&&U[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&X[M-1]==="EN"){me="EN";break}if(N){me="N";break}for(ie=M+1,Se=U.length;ie<Se&&U[ie]==="ET";)ie++;me=ie<Se&&U[ie]==="EN"?"EN":"N";break;case"NSM":if(u&&!l){for(Se=U.length,ie=M+1;ie<Se&&U[ie]==="NSM";)ie++;if(ie<Se){var Ne=Q[M],K=Ne>=1425&&Ne<=2303||Ne===64286;if(ye=U[ie],K&&(ye==="R"||ye==="AL")){me="R";break}}}me=M<1||(ye=U[M-1])==="B"?"N":X[M-1];break;case"B":N=!1,i=!0,me=C;break;case"S":s=!0,me="N"}return me},V=function(Q,U,X){var M=Q.split("");return X&&te(M,X,{hiLevel:C}),M.reverse(),U&&U.reverse(),M.join("")},te=function(Q,U,X){var M,ye,se,ie,Se,me=-1,Ne=Q.length,K=0,L=[],$=C?m:y,ee=[];for(N=!1,i=!1,s=!1,ye=0;ye<Ne;ye++)ee[ye]=A(Q[ye]);for(se=0;se<Ne;se++){if(Se=K,L[se]=J(Q,ee,L,se),M=240&(K=$[Se][E[L[se]]]),K&=15,U[se]=ie=$[K][5],M>0)if(M===16){for(ye=me;ye<se;ye++)U[ye]=1;me=-1}else me=-1;if($[K][6])me===-1&&(me=se);else if(me>-1){for(ye=me;ye<se;ye++)U[ye]=ie;me=-1}ee[se]==="B"&&(U[se]=0),X.hiLevel|=ie}s&&(function(pe,ae,B){for(var j=0;j<B;j++)if(pe[j]==="S"){ae[j]=C;for(var de=j-1;de>=0&&pe[de]==="WS";de--)ae[de]=C}})(ee,U,Ne)},O=function(Q,U,X,M,ye){if(!(ye.hiLevel<Q)){if(Q===1&&C===1&&!i)return U.reverse(),void(X&&X.reverse());for(var se,ie,Se,me,Ne=U.length,K=0;K<Ne;){if(M[K]>=Q){for(Se=K+1;Se<Ne&&M[Se]>=Q;)Se++;for(me=K,ie=Se-1;me<ie;me++,ie--)se=U[me],U[me]=U[ie],U[ie]=se,X&&(se=X[me],X[me]=X[ie],X[ie]=se);K=Se}K++}}},le=function(Q,U,X){var M=Q.split(""),ye={hiLevel:C};return X||(X=[]),te(M,X,ye),(function(se,ie,Se){if(Se.hiLevel!==0&&h)for(var me,Ne=0;Ne<se.length;Ne++)ie[Ne]===1&&(me=R.indexOf(se[Ne]))>=0&&(se[Ne]=R[me+1])})(M,X,ye),O(2,M,U,X,ye),O(1,M,U,X,ye),M.join("")};return this.__bidiEngine__.doBidiReorder=function(Q,U,X){if((function(ye,se){if(se)for(var ie=0;ie<ye.length;ie++)se[ie]=ie;l===void 0&&(l=F(ye)),f===void 0&&(f=F(ye))})(Q,U),u||!c||f)if(u&&c&&l^f)C=l?1:0,Q=V(Q,U,X);else if(!u&&c&&f)C=l?1:0,Q=le(Q,U,X),Q=V(Q,U);else if(!u||l||c||f){if(u&&!c&&l^f)Q=V(Q,U),l?(C=0,Q=le(Q,U,X)):(C=1,Q=le(Q,U,X),Q=V(Q,U));else if(u&&l&&!c&&f)C=1,Q=le(Q,U,X),Q=V(Q,U);else if(!u&&!c&&l^f){var M=h;l?(C=1,Q=le(Q,U,X),C=0,h=!1,Q=le(Q,U,X),h=M):(C=0,Q=le(Q,U,X),Q=V(Q,U),C=1,h=!1,Q=le(Q,U,X),h=M,Q=V(Q,U))}}else C=0,Q=le(Q,U,X);else C=l?1:0,Q=le(Q,U,X);return Q},this.__bidiEngine__.setOptions=function(Q){Q&&(u=Q.isInputVisual,c=Q.isOutputVisual,l=Q.isInputRtl,f=Q.isOutputRtl,h=Q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var u=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(u=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?u.push([t.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):u.push([t.doBidiReorder(i[l])]);r.text=u}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(It),It.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new pu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new iq(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new G9(this.contents),this.head=new $9(this),this.name=new X9(this),this.cmap=new pN(this),this.toUnicode={},this.hhea=new W9(this),this.maxp=new Z9(this),this.hmtx=new Q9(this),this.post=new J9(this),this.os2=new K9(this),this.loca=new rq(this),this.glyf=new eq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,l,c,f;for(f=[],u=0,l=(c=this.bbox).length;u<l;u++)e=c[u],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,u,l;for(u=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=e.charCodeAt(s),u+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var no,pu=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,u,l,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),u=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^u)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*u+256*l+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n})(),G9=(function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,u,l,c,f,h,g,y,m,E,_;for(_ in m=Object.keys(t).length,c=Math.log(2),g=16*Math.floor(Math.log(m)/c),u=Math.floor(g/c),h=16*m-g,(i=new pu).writeInt(this.scalarType),i.writeShort(m),i.writeShort(g),i.writeShort(u),i.writeShort(h),s=16*m,f=i.pos+s,l=null,E=[],t)for(y=t[_],i.writeString(_),i.writeInt(n(y)),i.writeInt(f),i.writeInt(y.length),E=E.concat(y),_==="head"&&(l=f),f+=y.length;f%4;)E.push(0),f++;return i.write(E),r=2981146554-n(i.data),i.pos=l+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,u;for(t=mN.call(t);t.length%4;)t.push(0);for(s=new pu(t),i=0,r=0,u=t.length;r<u;r=r+=4)i+=s.readUInt32();return 4294967295&i},e})(),V9={}.hasOwnProperty,Uo=function(n,e){for(var t in e)V9.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};no=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var $9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new pu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),eE=(function(){function n(e,t){var r,i,s,u,l,c,f,h,g,y,m,E,_,R,b,N,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),y=m/2,e.pos+=6,s=(function(){var A,F;for(F=[],c=A=0;0<=y?A<y:A>y;c=0<=y?++A:--A)F.push(e.readUInt16());return F})(),e.pos+=2,_=(function(){var A,F;for(F=[],c=A=0;0<=y?A<y:A>y;c=0<=y?++A:--A)F.push(e.readUInt16());return F})(),f=(function(){var A,F;for(F=[],c=A=0;0<=y?A<y:A>y;c=0<=y?++A:--A)F.push(e.readUInt16());return F})(),h=(function(){var A,F;for(F=[],c=A=0;0<=y?A<y:A>y;c=0<=y?++A:--A)F.push(e.readUInt16());return F})(),i=(this.length-e.pos+this.offset)/2,l=(function(){var A,F;for(F=[],c=A=0;0<=i?A<i:A>i;c=0<=i?++A:--A)F.push(e.readUInt16());return F})(),c=b=0,C=s.length;b<C;c=++b)for(R=s[c],r=N=E=_[c];E<=R?N<=R:N>=R;r=E<=R?++N:--N)h[c]===0?u=r+f[c]:(u=l[h[c]/2+(r-E)-(y-c)]||0)!==0&&(u+=f[c]),this.codeMap[r]=65535&u}e.pos=g}return n.encode=function(e,t){var r,i,s,u,l,c,f,h,g,y,m,E,_,R,b,N,C,A,F,J,V,te,O,le,Q,U,X,M,ye,se,ie,Se,me,Ne,K,L,$,ee,pe,ae,B,j,de,fe,re,he;switch(M=new pu,u=Object.keys(e).sort(function(ke,q){return ke-q}),t){case"macroman":for(_=0,R=(function(){var ke=[];for(E=0;E<256;++E)ke.push(0);return ke})(),N={0:0},s={},ye=0,me=u.length;ye<me;ye++)N[de=e[i=u[ye]]]==null&&(N[de]=++_),s[i]={old:e[i],new:N[e[i]]},R[i]=N[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(R),{charMap:s,subtable:M.data,maxGlyphID:_+1};case"unicode":for(U=[],g=[],C=0,N={},r={},b=f=null,se=0,Ne=u.length;se<Ne;se++)N[F=e[i=u[se]]]==null&&(N[F]=++C),r[i]={old:F,new:N[F]},l=N[F]-i,b!=null&&l===f||(b&&g.push(b),U.push(i),f=l),b=i;for(b&&g.push(b),g.push(65535),U.push(65535),le=2*(O=U.length),te=2*Math.pow(Math.log(O)/Math.LN2,2),y=Math.log(te/2)/Math.LN2,V=2*O-te,c=[],J=[],m=[],E=ie=0,K=U.length;ie<K;E=++ie){if(Q=U[E],h=g[E],Q===65535){c.push(0),J.push(0);break}if(Q-(X=r[Q].new)>=32768)for(c.push(0),J.push(2*(m.length+O-E)),i=Se=Q;Q<=h?Se<=h:Se>=h;i=Q<=h?++Se:--Se)m.push(r[i].new);else c.push(X-Q),J.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*O+2*m.length),M.writeUInt16(0),M.writeUInt16(le),M.writeUInt16(te),M.writeUInt16(y),M.writeUInt16(V),B=0,L=g.length;B<L;B++)i=g[B],M.writeUInt16(i);for(M.writeUInt16(0),j=0,$=U.length;j<$;j++)i=U[j],M.writeUInt16(i);for(fe=0,ee=c.length;fe<ee;fe++)l=c[fe],M.writeUInt16(l);for(re=0,pe=J.length;re<pe;re++)A=J[re],M.writeUInt16(A);for(he=0,ae=m.length;he<ae;he++)_=m[he],M.writeUInt16(_);return{charMap:r,subtable:M.data,maxGlyphID:C+1}}},n})(),pN=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new eE(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=eE.encode(e,t),(i=new pu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),W9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),K9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),J9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var u,l,c;for(c=[],s=u=0,l=this.file.maxp.numGlyphs;0<=l?u<l:u>l;s=0<=l?++u:--u)c.push(e.readUInt32());return c}).call(this)}},n})(),Y9=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},X9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,s,u,l,c,f,h,g,y;for(e.pos=this.offset,e.readShort(),t=e.readShort(),l=e.readShort(),r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=h=0,g=r.length;h<g;s=++h)i=r[s],e.pos=i.offset,f=e.readString(i.length),u=new Y9(f,i),c[y=i.nameID]==null&&(c[y]=[]),c[i.nameID].push(u);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),Z9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),Q9=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,s,u,l,c;for(e.pos=this.offset,this.metrics=[],t=0,l=this.file.hhea.numberOfMetrics;0<=l?t<l:t>l;t=0<=l?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,h;for(h=[],t=f=0;0<=i?f<i:f>i;t=0<=i?++f:--f)h.push(e.readInt16());return h})(),this.widths=(function(){var f,h,g,y;for(y=[],f=0,h=(g=this.metrics).length;f<h;f++)s=g[f],y.push(s.advance);return y}).call(this),r=this.widths[this.widths.length-1],c=[],t=u=0;0<=i?u<i:u>i;t=0<=i?++u:--u)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),mN=[].slice,eq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,s,u,l,c,f,h,g;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,u=(l=new pu(t.read(i))).readShort(),f=l.readShort(),g=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[e]=u===-1?new nq(l,f,g,c,h):new tq(l,u,f,g,c,h),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,s,u,l,c;for(u=[],s=[],l=0,c=t.length;l<c;l++)i=e[t[l]],s.push(u.length),i&&(u=u.concat(i.encode(r)));return s.push(u.length),{table:u,offsets:s}},n})(),tq=(function(){function n(e,t,r,i,s,u){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),nq=(function(){function n(e,t,r,i,s){var u,l;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;l=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&l;)u.pos+=1&l?4:2,128&l?u.pos+=8:64&l?u.pos+=4:8&l&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new pu(mN.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),rq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Uo(n,no),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,u=0;u<r.length;++u)if(r[u]=i,s<t.length&&t[s]==u){++s,r[u]=i;var l=this.offsets[u],c=this.offsets[u+1]-l;c>0&&(i+=c)}for(var f=new Array(4*r.length),h=0;h<r.length;++h)f[4*h+3]=255&r[h],f[4*h+2]=(65280&r[h])>>8,f[4*h+1]=(16711680&r[h])>>16,f[4*h]=(4278190080&r[h])>>24;return f},n})(),iq=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,u,l,c;for(i={},u=0,l=e.length;u<l;u++)i[s=e[u]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r=c[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,u,l,c,f,h,g,y,m,E,_,R,b;for(i in r=pN.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),m={0:0},b=r.charMap)m[(c=b[i]).old]=c.new;for(E in y=r.maxGlyphID,u)E in m||(m[E]=y++);return h=(function(N){var C,A;for(C in A={},N)A[N[C]]=C;return A})(m),g=Object.keys(h).sort(function(N,C){return N-C}),_=(function(){var N,C,A;for(A=[],N=0,C=g.length;N<C;N++)l=g[N],A.push(h[l]);return A})(),s=this.font.glyf.encode(u,_,m),f=this.font.loca.encode(s.offsets,_),R={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},n})();It.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,u;if(Array.isArray(t))return"["+(function(){var l,c,f;for(f=[],l=0,c=t.length;l<c;l++)r=t[l],f.push(e.convert(r));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)u=t[i],s.push("/"+i+" "+e.convert(u));return s.push(">>"),s.join(`
`)}return""+t},e})();var sq=Object.defineProperty,aq=Object.defineProperties,oq=Object.getOwnPropertyDescriptors,tE=Object.getOwnPropertySymbols,lq=Object.prototype.hasOwnProperty,uq=Object.prototype.propertyIsEnumerable,Mw=(n,e,t)=>e in n?sq(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,An=(n,e)=>{for(var t in e||(e={}))lq.call(e,t)&&Mw(n,t,e[t]);if(tE)for(var t of tE(e))uq.call(e,t)&&Mw(n,t,e[t]);return n},td=(n,e)=>aq(n,oq(e)),nt=(n,e,t)=>Mw(n,typeof e!="symbol"?e+"":e,t),cq=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{l(t.next(c))}catch(f){i(f)}},u=c=>{try{l(t.throw(c))}catch(f){i(f)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,u);l((t=t.apply(n,e)).next())});class ug{constructor(e){nt(this,"rootKey"),this.rootKey=e}}const fq=Object.seal({});class lt extends ug{constructor(e){super(e),nt(this,"root"),this.root=new Array}prepForXml(e){var t;e.stack.push(this);const r=this.root.map(i=>i instanceof ug?i.prepForXml(e):i).filter(i=>i!==void 0);return e.stack.pop(),{[this.rootKey]:r.length?r.length===1&&((t=r[0])!=null&&t._attr)?r[0]:r:fq}}addChildElement(e){return this.root.push(e),this}}class Og extends lt{prepForXml(e){const t=super.prepForXml(e);if(t&&(typeof t[this.rootKey]!="object"||Object.keys(t[this.rootKey]).length))return t}}class Yt extends ug{constructor(e){super("_attr"),nt(this,"xmlKeys"),this.root=e}prepForXml(e){const t={};return Object.entries(this.root).forEach(([r,i])=>{if(i!==void 0){const s=this.xmlKeys&&this.xmlKeys[r]||r;t[s]=i}}),{_attr:t}}}class Dg extends ug{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter(({value:r})=>r!==void 0).reduce((r,{key:i,value:s})=>td(An({},r),{[i]:s}),{})}}}class zr extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var Oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wy={},hm={exports:{}},nE;function Pb(){if(nE)return hm.exports;nE=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(F,J,V){return Function.prototype.apply.call(F,J,V)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(F){return Object.getOwnPropertyNames(F).concat(Object.getOwnPropertySymbols(F))}:t=function(F){return Object.getOwnPropertyNames(F)};function r(A){console&&console.warn&&console.warn(A)}var i=Number.isNaN||function(F){return F!==F};function s(){s.init.call(this)}hm.exports=s,hm.exports.once=b,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");u=A}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(F){if(typeof F!="number"||F<0||i(F))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+F+".");return this._maxListeners=F,this};function c(A){return A._maxListeners===void 0?s.defaultMaxListeners:A._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(F){for(var J=[],V=1;V<arguments.length;V++)J.push(arguments[V]);var te=F==="error",O=this._events;if(O!==void 0)te=te&&O.error===void 0;else if(!te)return!1;if(te){var le;if(J.length>0&&(le=J[0]),le instanceof Error)throw le;var Q=new Error("Unhandled error."+(le?" ("+le.message+")":""));throw Q.context=le,Q}var U=O[F];if(U===void 0)return!1;if(typeof U=="function")e(U,this,J);else for(var X=U.length,M=E(U,X),V=0;V<X;++V)e(M[V],this,J);return!0};function f(A,F,J,V){var te,O,le;if(l(J),O=A._events,O===void 0?(O=A._events=Object.create(null),A._eventsCount=0):(O.newListener!==void 0&&(A.emit("newListener",F,J.listener?J.listener:J),O=A._events),le=O[F]),le===void 0)le=O[F]=J,++A._eventsCount;else if(typeof le=="function"?le=O[F]=V?[J,le]:[le,J]:V?le.unshift(J):le.push(J),te=c(A),te>0&&le.length>te&&!le.warned){le.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+le.length+" "+String(F)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=A,Q.type=F,Q.count=le.length,r(Q)}return A}s.prototype.addListener=function(F,J){return f(this,F,J,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(F,J){return f(this,F,J,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(A,F,J){var V={fired:!1,wrapFn:void 0,target:A,type:F,listener:J},te=h.bind(V);return te.listener=J,V.wrapFn=te,te}s.prototype.once=function(F,J){return l(J),this.on(F,g(this,F,J)),this},s.prototype.prependOnceListener=function(F,J){return l(J),this.prependListener(F,g(this,F,J)),this},s.prototype.removeListener=function(F,J){var V,te,O,le,Q;if(l(J),te=this._events,te===void 0)return this;if(V=te[F],V===void 0)return this;if(V===J||V.listener===J)--this._eventsCount===0?this._events=Object.create(null):(delete te[F],te.removeListener&&this.emit("removeListener",F,V.listener||J));else if(typeof V!="function"){for(O=-1,le=V.length-1;le>=0;le--)if(V[le]===J||V[le].listener===J){Q=V[le].listener,O=le;break}if(O<0)return this;O===0?V.shift():_(V,O),V.length===1&&(te[F]=V[0]),te.removeListener!==void 0&&this.emit("removeListener",F,Q||J)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(F){var J,V,te;if(V=this._events,V===void 0)return this;if(V.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):V[F]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete V[F]),this;if(arguments.length===0){var O=Object.keys(V),le;for(te=0;te<O.length;++te)le=O[te],le!=="removeListener"&&this.removeAllListeners(le);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(J=V[F],typeof J=="function")this.removeListener(F,J);else if(J!==void 0)for(te=J.length-1;te>=0;te--)this.removeListener(F,J[te]);return this};function y(A,F,J){var V=A._events;if(V===void 0)return[];var te=V[F];return te===void 0?[]:typeof te=="function"?J?[te.listener||te]:[te]:J?R(te):E(te,te.length)}s.prototype.listeners=function(F){return y(this,F,!0)},s.prototype.rawListeners=function(F){return y(this,F,!1)},s.listenerCount=function(A,F){return typeof A.listenerCount=="function"?A.listenerCount(F):m.call(A,F)},s.prototype.listenerCount=m;function m(A){var F=this._events;if(F!==void 0){var J=F[A];if(typeof J=="function")return 1;if(J!==void 0)return J.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function E(A,F){for(var J=new Array(F),V=0;V<F;++V)J[V]=A[V];return J}function _(A,F){for(;F+1<A.length;F++)A[F]=A[F+1];A.pop()}function R(A){for(var F=new Array(A.length),J=0;J<F.length;++J)F[J]=A[J].listener||A[J];return F}function b(A,F){return new Promise(function(J,V){function te(le){A.removeListener(F,O),V(le)}function O(){typeof A.removeListener=="function"&&A.removeListener("error",te),J([].slice.call(arguments))}C(A,F,O,{once:!0}),F!=="error"&&N(A,te,{once:!0})})}function N(A,F,J){typeof A.on=="function"&&C(A,"error",F,J)}function C(A,F,J,V){if(typeof A.on=="function")V.once?A.once(F,J):A.on(F,J);else if(typeof A.addEventListener=="function")A.addEventListener(F,function te(O){V.once&&A.removeEventListener(F,te),J(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return hm.exports}var pm={exports:{}},rE;function vu(){return rE||(rE=1,typeof Object.create=="function"?pm.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:pm.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),pm.exports}function dq(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yN={exports:{}},Hr=yN.exports={},Io,Lo;function Ow(){throw new Error("setTimeout has not been defined")}function Dw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Io=setTimeout:Io=Ow}catch{Io=Ow}try{typeof clearTimeout=="function"?Lo=clearTimeout:Lo=Dw}catch{Lo=Dw}})();function vN(n){if(Io===setTimeout)return setTimeout(n,0);if((Io===Ow||!Io)&&setTimeout)return Io=setTimeout,setTimeout(n,0);try{return Io(n,0)}catch{try{return Io.call(null,n,0)}catch{return Io.call(this,n,0)}}}function hq(n){if(Lo===clearTimeout)return clearTimeout(n);if((Lo===Dw||!Lo)&&clearTimeout)return Lo=clearTimeout,clearTimeout(n);try{return Lo(n)}catch{try{return Lo.call(null,n)}catch{return Lo.call(this,n)}}}var xl=[],Jf=!1,dc,zm=-1;function pq(){!Jf||!dc||(Jf=!1,dc.length?xl=dc.concat(xl):zm=-1,xl.length&&wN())}function wN(){if(!Jf){var n=vN(pq);Jf=!0;for(var e=xl.length;e;){for(dc=xl,xl=[];++zm<e;)dc&&dc[zm].run();zm=-1,e=xl.length}dc=null,Jf=!1,hq(n)}}Hr.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];xl.push(new bN(n,e)),xl.length===1&&!Jf&&vN(wN)};function bN(n,e){this.fun=n,this.array=e}bN.prototype.run=function(){this.fun.apply(null,this.array)};Hr.title="browser";Hr.browser=!0;Hr.env={};Hr.argv=[];Hr.version="";Hr.versions={};function El(){}Hr.on=El;Hr.addListener=El;Hr.once=El;Hr.off=El;Hr.removeListener=El;Hr.removeAllListeners=El;Hr.emit=El;Hr.prependListener=El;Hr.prependOnceListener=El;Hr.listeners=function(n){return[]};Hr.binding=function(n){throw new Error("process.binding is not supported")};Hr.cwd=function(){return"/"};Hr.chdir=function(n){throw new Error("process.chdir is not supported")};Hr.umask=function(){return 0};var mq=yN.exports;const un=dq(mq);var Ky,iE;function _N(){return iE||(iE=1,Ky=Pb().EventEmitter),Ky}var Jy={},sh={},sE;function gq(){if(sE)return sh;sE=1,sh.byteLength=l,sh.toByteArray=f,sh.fromByteArray=y;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function u(m){var E=m.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=m.indexOf("=");_===-1&&(_=E);var R=_===E?0:4-_%4;return[_,R]}function l(m){var E=u(m),_=E[0],R=E[1];return(_+R)*3/4-R}function c(m,E,_){return(E+_)*3/4-_}function f(m){var E,_=u(m),R=_[0],b=_[1],N=new t(c(m,R,b)),C=0,A=b>0?R-4:R,F;for(F=0;F<A;F+=4)E=e[m.charCodeAt(F)]<<18|e[m.charCodeAt(F+1)]<<12|e[m.charCodeAt(F+2)]<<6|e[m.charCodeAt(F+3)],N[C++]=E>>16&255,N[C++]=E>>8&255,N[C++]=E&255;return b===2&&(E=e[m.charCodeAt(F)]<<2|e[m.charCodeAt(F+1)]>>4,N[C++]=E&255),b===1&&(E=e[m.charCodeAt(F)]<<10|e[m.charCodeAt(F+1)]<<4|e[m.charCodeAt(F+2)]>>2,N[C++]=E>>8&255,N[C++]=E&255),N}function h(m){return n[m>>18&63]+n[m>>12&63]+n[m>>6&63]+n[m&63]}function g(m,E,_){for(var R,b=[],N=E;N<_;N+=3)R=(m[N]<<16&16711680)+(m[N+1]<<8&65280)+(m[N+2]&255),b.push(h(R));return b.join("")}function y(m){for(var E,_=m.length,R=_%3,b=[],N=16383,C=0,A=_-R;C<A;C+=N)b.push(g(m,C,C+N>A?A:C+N));return R===1?(E=m[_-1],b.push(n[E>>2]+n[E<<4&63]+"==")):R===2&&(E=(m[_-2]<<8)+m[_-1],b.push(n[E>>10]+n[E>>4&63]+n[E<<2&63]+"=")),b.join("")}return sh}var mm={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var aE;function yq(){return aE||(aE=1,mm.read=function(n,e,t,r,i){var s,u,l=i*8-r-1,c=(1<<l)-1,f=c>>1,h=-7,g=t?i-1:0,y=t?-1:1,m=n[e+g];for(g+=y,s=m&(1<<-h)-1,m>>=-h,h+=l;h>0;s=s*256+n[e+g],g+=y,h-=8);for(u=s&(1<<-h)-1,s>>=-h,h+=r;h>0;u=u*256+n[e+g],g+=y,h-=8);if(s===0)s=1-f;else{if(s===c)return u?NaN:(m?-1:1)*(1/0);u=u+Math.pow(2,r),s=s-f}return(m?-1:1)*u*Math.pow(2,s-r)},mm.write=function(n,e,t,r,i,s){var u,l,c,f=s*8-i-1,h=(1<<f)-1,g=h>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:s-1,E=r?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,u=h):(u=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-u))<1&&(u--,c*=2),u+g>=1?e+=y/c:e+=y*Math.pow(2,1-g),e*c>=2&&(u++,c/=2),u+g>=h?(l=0,u=h):u+g>=1?(l=(e*c-1)*Math.pow(2,i),u=u+g):(l=e*Math.pow(2,g-1)*Math.pow(2,i),u=0));i>=8;n[t+m]=l&255,m+=E,l/=256,i-=8);for(u=u<<i|l,f+=i;f>0;n[t+m]=u&255,m+=E,u/=256,f-=8);n[t+m-E]|=_*128}),mm}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var oE;function Ug(){return oE||(oE=1,(function(n){var e=gq(),t=yq(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=l,n.SlowBuffer=N,n.INSPECT_MAX_BYTES=50;var i=2147483647;n.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var Y=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(Y,I),Y.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(Y){if(Y>i)throw new RangeError('The value "'+Y+'" is invalid for option "size"');var I=new Uint8Array(Y);return Object.setPrototypeOf(I,l.prototype),I}function l(Y,I,P){if(typeof Y=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(Y)}return c(Y,I,P)}l.poolSize=8192;function c(Y,I,P){if(typeof Y=="string")return y(Y,I);if(ArrayBuffer.isView(Y))return E(Y);if(Y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y);if(ke(Y,ArrayBuffer)||Y&&ke(Y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ke(Y,SharedArrayBuffer)||Y&&ke(Y.buffer,SharedArrayBuffer)))return _(Y,I,P);if(typeof Y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var H=Y.valueOf&&Y.valueOf();if(H!=null&&H!==Y)return l.from(H,I,P);var be=R(Y);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Y[Symbol.toPrimitive]=="function")return l.from(Y[Symbol.toPrimitive]("string"),I,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Y)}l.from=function(Y,I,P){return c(Y,I,P)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function f(Y){if(typeof Y!="number")throw new TypeError('"size" argument must be of type number');if(Y<0)throw new RangeError('The value "'+Y+'" is invalid for option "size"')}function h(Y,I,P){return f(Y),Y<=0?u(Y):I!==void 0?typeof P=="string"?u(Y).fill(I,P):u(Y).fill(I):u(Y)}l.alloc=function(Y,I,P){return h(Y,I,P)};function g(Y){return f(Y),u(Y<0?0:b(Y)|0)}l.allocUnsafe=function(Y){return g(Y)},l.allocUnsafeSlow=function(Y){return g(Y)};function y(Y,I){if((typeof I!="string"||I==="")&&(I="utf8"),!l.isEncoding(I))throw new TypeError("Unknown encoding: "+I);var P=C(Y,I)|0,H=u(P),be=H.write(Y,I);return be!==P&&(H=H.slice(0,be)),H}function m(Y){for(var I=Y.length<0?0:b(Y.length)|0,P=u(I),H=0;H<I;H+=1)P[H]=Y[H]&255;return P}function E(Y){if(ke(Y,Uint8Array)){var I=new Uint8Array(Y);return _(I.buffer,I.byteOffset,I.byteLength)}return m(Y)}function _(Y,I,P){if(I<0||Y.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(Y.byteLength<I+(P||0))throw new RangeError('"length" is outside of buffer bounds');var H;return I===void 0&&P===void 0?H=new Uint8Array(Y):P===void 0?H=new Uint8Array(Y,I):H=new Uint8Array(Y,I,P),Object.setPrototypeOf(H,l.prototype),H}function R(Y){if(l.isBuffer(Y)){var I=b(Y.length)|0,P=u(I);return P.length===0||Y.copy(P,0,0,I),P}if(Y.length!==void 0)return typeof Y.length!="number"||q(Y.length)?u(0):m(Y);if(Y.type==="Buffer"&&Array.isArray(Y.data))return m(Y.data)}function b(Y){if(Y>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Y|0}function N(Y){return+Y!=Y&&(Y=0),l.alloc(+Y)}l.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==l.prototype},l.compare=function(I,P){if(ke(I,Uint8Array)&&(I=l.from(I,I.offset,I.byteLength)),ke(P,Uint8Array)&&(P=l.from(P,P.offset,P.byteLength)),!l.isBuffer(I)||!l.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===P)return 0;for(var H=I.length,be=P.length,ne=0,we=Math.min(H,be);ne<we;++ne)if(I[ne]!==P[ne]){H=I[ne],be=P[ne];break}return H<be?-1:be<H?1:0},l.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(I,P){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return l.alloc(0);var H;if(P===void 0)for(P=0,H=0;H<I.length;++H)P+=I[H].length;var be=l.allocUnsafe(P),ne=0;for(H=0;H<I.length;++H){var we=I[H];if(ke(we,Uint8Array))ne+we.length>be.length?l.from(we).copy(be,ne):Uint8Array.prototype.set.call(be,we,ne);else if(l.isBuffer(we))we.copy(be,ne);else throw new TypeError('"list" argument must be an Array of Buffers');ne+=we.length}return be};function C(Y,I){if(l.isBuffer(Y))return Y.length;if(ArrayBuffer.isView(Y)||ke(Y,ArrayBuffer))return Y.byteLength;if(typeof Y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Y);var P=Y.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&P===0)return 0;for(var be=!1;;)switch(I){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return j(Y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return re(Y).length;default:if(be)return H?-1:j(Y).length;I=(""+I).toLowerCase(),be=!0}}l.byteLength=C;function A(Y,I,P){var H=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,I>>>=0,P<=I))return"";for(Y||(Y="utf8");;)switch(Y){case"hex":return me(this,I,P);case"utf8":case"utf-8":return M(this,I,P);case"ascii":return ie(this,I,P);case"latin1":case"binary":return Se(this,I,P);case"base64":return X(this,I,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,I,P);default:if(H)throw new TypeError("Unknown encoding: "+Y);Y=(Y+"").toLowerCase(),H=!0}}l.prototype._isBuffer=!0;function F(Y,I,P){var H=Y[I];Y[I]=Y[P],Y[P]=H}l.prototype.swap16=function(){var I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var P=0;P<I;P+=2)F(this,P,P+1);return this},l.prototype.swap32=function(){var I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var P=0;P<I;P+=4)F(this,P,P+3),F(this,P+1,P+2);return this},l.prototype.swap64=function(){var I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var P=0;P<I;P+=8)F(this,P,P+7),F(this,P+1,P+6),F(this,P+2,P+5),F(this,P+3,P+4);return this},l.prototype.toString=function(){var I=this.length;return I===0?"":arguments.length===0?M(this,0,I):A.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(I){if(!l.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:l.compare(this,I)===0},l.prototype.inspect=function(){var I="",P=n.INSPECT_MAX_BYTES;return I=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(I+=" ... "),"<Buffer "+I+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(I,P,H,be,ne){if(ke(I,Uint8Array)&&(I=l.from(I,I.offset,I.byteLength)),!l.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(P===void 0&&(P=0),H===void 0&&(H=I?I.length:0),be===void 0&&(be=0),ne===void 0&&(ne=this.length),P<0||H>I.length||be<0||ne>this.length)throw new RangeError("out of range index");if(be>=ne&&P>=H)return 0;if(be>=ne)return-1;if(P>=H)return 1;if(P>>>=0,H>>>=0,be>>>=0,ne>>>=0,this===I)return 0;for(var we=ne-be,Re=H-P,De=Math.min(we,Re),Ue=this.slice(be,ne),Ke=I.slice(P,H),at=0;at<De;++at)if(Ue[at]!==Ke[at]){we=Ue[at],Re=Ke[at];break}return we<Re?-1:Re<we?1:0};function J(Y,I,P,H,be){if(Y.length===0)return-1;if(typeof P=="string"?(H=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,q(P)&&(P=be?0:Y.length-1),P<0&&(P=Y.length+P),P>=Y.length){if(be)return-1;P=Y.length-1}else if(P<0)if(be)P=0;else return-1;if(typeof I=="string"&&(I=l.from(I,H)),l.isBuffer(I))return I.length===0?-1:V(Y,I,P,H,be);if(typeof I=="number")return I=I&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(Y,I,P):Uint8Array.prototype.lastIndexOf.call(Y,I,P):V(Y,[I],P,H,be);throw new TypeError("val must be string, number or Buffer")}function V(Y,I,P,H,be){var ne=1,we=Y.length,Re=I.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(Y.length<2||I.length<2)return-1;ne=2,we/=2,Re/=2,P/=2}function De(pt,Nt){return ne===1?pt[Nt]:pt.readUInt16BE(Nt*ne)}var Ue;if(be){var Ke=-1;for(Ue=P;Ue<we;Ue++)if(De(Y,Ue)===De(I,Ke===-1?0:Ue-Ke)){if(Ke===-1&&(Ke=Ue),Ue-Ke+1===Re)return Ke*ne}else Ke!==-1&&(Ue-=Ue-Ke),Ke=-1}else for(P+Re>we&&(P=we-Re),Ue=P;Ue>=0;Ue--){for(var at=!0,ot=0;ot<Re;ot++)if(De(Y,Ue+ot)!==De(I,ot)){at=!1;break}if(at)return Ue}return-1}l.prototype.includes=function(I,P,H){return this.indexOf(I,P,H)!==-1},l.prototype.indexOf=function(I,P,H){return J(this,I,P,H,!0)},l.prototype.lastIndexOf=function(I,P,H){return J(this,I,P,H,!1)};function te(Y,I,P,H){P=Number(P)||0;var be=Y.length-P;H?(H=Number(H),H>be&&(H=be)):H=be;var ne=I.length;H>ne/2&&(H=ne/2);for(var we=0;we<H;++we){var Re=parseInt(I.substr(we*2,2),16);if(q(Re))return we;Y[P+we]=Re}return we}function O(Y,I,P,H){return he(j(I,Y.length-P),Y,P,H)}function le(Y,I,P,H){return he(de(I),Y,P,H)}function Q(Y,I,P,H){return he(re(I),Y,P,H)}function U(Y,I,P,H){return he(fe(I,Y.length-P),Y,P,H)}l.prototype.write=function(I,P,H,be){if(P===void 0)be="utf8",H=this.length,P=0;else if(H===void 0&&typeof P=="string")be=P,H=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(H)?(H=H>>>0,be===void 0&&(be="utf8")):(be=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ne=this.length-P;if((H===void 0||H>ne)&&(H=ne),I.length>0&&(H<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var we=!1;;)switch(be){case"hex":return te(this,I,P,H);case"utf8":case"utf-8":return O(this,I,P,H);case"ascii":case"latin1":case"binary":return le(this,I,P,H);case"base64":return Q(this,I,P,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,I,P,H);default:if(we)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),we=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function X(Y,I,P){return I===0&&P===Y.length?e.fromByteArray(Y):e.fromByteArray(Y.slice(I,P))}function M(Y,I,P){P=Math.min(Y.length,P);for(var H=[],be=I;be<P;){var ne=Y[be],we=null,Re=ne>239?4:ne>223?3:ne>191?2:1;if(be+Re<=P){var De,Ue,Ke,at;switch(Re){case 1:ne<128&&(we=ne);break;case 2:De=Y[be+1],(De&192)===128&&(at=(ne&31)<<6|De&63,at>127&&(we=at));break;case 3:De=Y[be+1],Ue=Y[be+2],(De&192)===128&&(Ue&192)===128&&(at=(ne&15)<<12|(De&63)<<6|Ue&63,at>2047&&(at<55296||at>57343)&&(we=at));break;case 4:De=Y[be+1],Ue=Y[be+2],Ke=Y[be+3],(De&192)===128&&(Ue&192)===128&&(Ke&192)===128&&(at=(ne&15)<<18|(De&63)<<12|(Ue&63)<<6|Ke&63,at>65535&&at<1114112&&(we=at))}}we===null?(we=65533,Re=1):we>65535&&(we-=65536,H.push(we>>>10&1023|55296),we=56320|we&1023),H.push(we),be+=Re}return se(H)}var ye=4096;function se(Y){var I=Y.length;if(I<=ye)return String.fromCharCode.apply(String,Y);for(var P="",H=0;H<I;)P+=String.fromCharCode.apply(String,Y.slice(H,H+=ye));return P}function ie(Y,I,P){var H="";P=Math.min(Y.length,P);for(var be=I;be<P;++be)H+=String.fromCharCode(Y[be]&127);return H}function Se(Y,I,P){var H="";P=Math.min(Y.length,P);for(var be=I;be<P;++be)H+=String.fromCharCode(Y[be]);return H}function me(Y,I,P){var H=Y.length;(!I||I<0)&&(I=0),(!P||P<0||P>H)&&(P=H);for(var be="",ne=I;ne<P;++ne)be+=oe[Y[ne]];return be}function Ne(Y,I,P){for(var H=Y.slice(I,P),be="",ne=0;ne<H.length-1;ne+=2)be+=String.fromCharCode(H[ne]+H[ne+1]*256);return be}l.prototype.slice=function(I,P){var H=this.length;I=~~I,P=P===void 0?H:~~P,I<0?(I+=H,I<0&&(I=0)):I>H&&(I=H),P<0?(P+=H,P<0&&(P=0)):P>H&&(P=H),P<I&&(P=I);var be=this.subarray(I,P);return Object.setPrototypeOf(be,l.prototype),be};function K(Y,I,P){if(Y%1!==0||Y<0)throw new RangeError("offset is not uint");if(Y+I>P)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(I,P,H){I=I>>>0,P=P>>>0,H||K(I,P,this.length);for(var be=this[I],ne=1,we=0;++we<P&&(ne*=256);)be+=this[I+we]*ne;return be},l.prototype.readUintBE=l.prototype.readUIntBE=function(I,P,H){I=I>>>0,P=P>>>0,H||K(I,P,this.length);for(var be=this[I+--P],ne=1;P>0&&(ne*=256);)be+=this[I+--P]*ne;return be},l.prototype.readUint8=l.prototype.readUInt8=function(I,P){return I=I>>>0,P||K(I,1,this.length),this[I]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(I,P){return I=I>>>0,P||K(I,2,this.length),this[I]|this[I+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(I,P){return I=I>>>0,P||K(I,2,this.length),this[I]<<8|this[I+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(I,P){return I=I>>>0,P||K(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(I,P){return I=I>>>0,P||K(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},l.prototype.readIntLE=function(I,P,H){I=I>>>0,P=P>>>0,H||K(I,P,this.length);for(var be=this[I],ne=1,we=0;++we<P&&(ne*=256);)be+=this[I+we]*ne;return ne*=128,be>=ne&&(be-=Math.pow(2,8*P)),be},l.prototype.readIntBE=function(I,P,H){I=I>>>0,P=P>>>0,H||K(I,P,this.length);for(var be=P,ne=1,we=this[I+--be];be>0&&(ne*=256);)we+=this[I+--be]*ne;return ne*=128,we>=ne&&(we-=Math.pow(2,8*P)),we},l.prototype.readInt8=function(I,P){return I=I>>>0,P||K(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},l.prototype.readInt16LE=function(I,P){I=I>>>0,P||K(I,2,this.length);var H=this[I]|this[I+1]<<8;return H&32768?H|4294901760:H},l.prototype.readInt16BE=function(I,P){I=I>>>0,P||K(I,2,this.length);var H=this[I+1]|this[I]<<8;return H&32768?H|4294901760:H},l.prototype.readInt32LE=function(I,P){return I=I>>>0,P||K(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},l.prototype.readInt32BE=function(I,P){return I=I>>>0,P||K(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},l.prototype.readFloatLE=function(I,P){return I=I>>>0,P||K(I,4,this.length),t.read(this,I,!0,23,4)},l.prototype.readFloatBE=function(I,P){return I=I>>>0,P||K(I,4,this.length),t.read(this,I,!1,23,4)},l.prototype.readDoubleLE=function(I,P){return I=I>>>0,P||K(I,8,this.length),t.read(this,I,!0,52,8)},l.prototype.readDoubleBE=function(I,P){return I=I>>>0,P||K(I,8,this.length),t.read(this,I,!1,52,8)};function L(Y,I,P,H,be,ne){if(!l.isBuffer(Y))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>be||I<ne)throw new RangeError('"value" argument is out of bounds');if(P+H>Y.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(I,P,H,be){if(I=+I,P=P>>>0,H=H>>>0,!be){var ne=Math.pow(2,8*H)-1;L(this,I,P,H,ne,0)}var we=1,Re=0;for(this[P]=I&255;++Re<H&&(we*=256);)this[P+Re]=I/we&255;return P+H},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(I,P,H,be){if(I=+I,P=P>>>0,H=H>>>0,!be){var ne=Math.pow(2,8*H)-1;L(this,I,P,H,ne,0)}var we=H-1,Re=1;for(this[P+we]=I&255;--we>=0&&(Re*=256);)this[P+we]=I/Re&255;return P+H},l.prototype.writeUint8=l.prototype.writeUInt8=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,1,255,0),this[P]=I&255,P+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,2,65535,0),this[P]=I&255,this[P+1]=I>>>8,P+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,2,65535,0),this[P]=I>>>8,this[P+1]=I&255,P+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,4,4294967295,0),this[P+3]=I>>>24,this[P+2]=I>>>16,this[P+1]=I>>>8,this[P]=I&255,P+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,4,4294967295,0),this[P]=I>>>24,this[P+1]=I>>>16,this[P+2]=I>>>8,this[P+3]=I&255,P+4},l.prototype.writeIntLE=function(I,P,H,be){if(I=+I,P=P>>>0,!be){var ne=Math.pow(2,8*H-1);L(this,I,P,H,ne-1,-ne)}var we=0,Re=1,De=0;for(this[P]=I&255;++we<H&&(Re*=256);)I<0&&De===0&&this[P+we-1]!==0&&(De=1),this[P+we]=(I/Re>>0)-De&255;return P+H},l.prototype.writeIntBE=function(I,P,H,be){if(I=+I,P=P>>>0,!be){var ne=Math.pow(2,8*H-1);L(this,I,P,H,ne-1,-ne)}var we=H-1,Re=1,De=0;for(this[P+we]=I&255;--we>=0&&(Re*=256);)I<0&&De===0&&this[P+we+1]!==0&&(De=1),this[P+we]=(I/Re>>0)-De&255;return P+H},l.prototype.writeInt8=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,1,127,-128),I<0&&(I=255+I+1),this[P]=I&255,P+1},l.prototype.writeInt16LE=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,2,32767,-32768),this[P]=I&255,this[P+1]=I>>>8,P+2},l.prototype.writeInt16BE=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,2,32767,-32768),this[P]=I>>>8,this[P+1]=I&255,P+2},l.prototype.writeInt32LE=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,4,2147483647,-2147483648),this[P]=I&255,this[P+1]=I>>>8,this[P+2]=I>>>16,this[P+3]=I>>>24,P+4},l.prototype.writeInt32BE=function(I,P,H){return I=+I,P=P>>>0,H||L(this,I,P,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[P]=I>>>24,this[P+1]=I>>>16,this[P+2]=I>>>8,this[P+3]=I&255,P+4};function $(Y,I,P,H,be,ne){if(P+H>Y.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function ee(Y,I,P,H,be){return I=+I,P=P>>>0,be||$(Y,I,P,4),t.write(Y,I,P,H,23,4),P+4}l.prototype.writeFloatLE=function(I,P,H){return ee(this,I,P,!0,H)},l.prototype.writeFloatBE=function(I,P,H){return ee(this,I,P,!1,H)};function pe(Y,I,P,H,be){return I=+I,P=P>>>0,be||$(Y,I,P,8),t.write(Y,I,P,H,52,8),P+8}l.prototype.writeDoubleLE=function(I,P,H){return pe(this,I,P,!0,H)},l.prototype.writeDoubleBE=function(I,P,H){return pe(this,I,P,!1,H)},l.prototype.copy=function(I,P,H,be){if(!l.isBuffer(I))throw new TypeError("argument should be a Buffer");if(H||(H=0),!be&&be!==0&&(be=this.length),P>=I.length&&(P=I.length),P||(P=0),be>0&&be<H&&(be=H),be===H||I.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),I.length-P<be-H&&(be=I.length-P+H);var ne=be-H;return this===I&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(P,H,be):Uint8Array.prototype.set.call(I,this.subarray(H,be),P),ne},l.prototype.fill=function(I,P,H,be){if(typeof I=="string"){if(typeof P=="string"?(be=P,P=0,H=this.length):typeof H=="string"&&(be=H,H=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!l.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(I.length===1){var ne=I.charCodeAt(0);(be==="utf8"&&ne<128||be==="latin1")&&(I=ne)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(P<0||this.length<P||this.length<H)throw new RangeError("Out of range index");if(H<=P)return this;P=P>>>0,H=H===void 0?this.length:H>>>0,I||(I=0);var we;if(typeof I=="number")for(we=P;we<H;++we)this[we]=I;else{var Re=l.isBuffer(I)?I:l.from(I,be),De=Re.length;if(De===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(we=0;we<H-P;++we)this[we+P]=Re[we%De]}return this};var ae=/[^+/0-9A-Za-z-_]/g;function B(Y){if(Y=Y.split("=")[0],Y=Y.trim().replace(ae,""),Y.length<2)return"";for(;Y.length%4!==0;)Y=Y+"=";return Y}function j(Y,I){I=I||1/0;for(var P,H=Y.length,be=null,ne=[],we=0;we<H;++we){if(P=Y.charCodeAt(we),P>55295&&P<57344){if(!be){if(P>56319){(I-=3)>-1&&ne.push(239,191,189);continue}else if(we+1===H){(I-=3)>-1&&ne.push(239,191,189);continue}be=P;continue}if(P<56320){(I-=3)>-1&&ne.push(239,191,189),be=P;continue}P=(be-55296<<10|P-56320)+65536}else be&&(I-=3)>-1&&ne.push(239,191,189);if(be=null,P<128){if((I-=1)<0)break;ne.push(P)}else if(P<2048){if((I-=2)<0)break;ne.push(P>>6|192,P&63|128)}else if(P<65536){if((I-=3)<0)break;ne.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((I-=4)<0)break;ne.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return ne}function de(Y){for(var I=[],P=0;P<Y.length;++P)I.push(Y.charCodeAt(P)&255);return I}function fe(Y,I){for(var P,H,be,ne=[],we=0;we<Y.length&&!((I-=2)<0);++we)P=Y.charCodeAt(we),H=P>>8,be=P%256,ne.push(be),ne.push(H);return ne}function re(Y){return e.toByteArray(B(Y))}function he(Y,I,P,H){for(var be=0;be<H&&!(be+P>=I.length||be>=Y.length);++be)I[be+P]=Y[be];return be}function ke(Y,I){return Y instanceof I||Y!=null&&Y.constructor!=null&&Y.constructor.name!=null&&Y.constructor.name===I.name}function q(Y){return Y!==Y}var oe=(function(){for(var Y="0123456789abcdef",I=new Array(256),P=0;P<16;++P)for(var H=P*16,be=0;be<16;++be)I[H+be]=Y[P]+Y[be];return I})()})(Jy)),Jy}var Yy={},Xy={},Zy,lE;function SN(){return lE||(lE=1,Zy=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var u=Object.getOwnPropertySymbols(e);if(u.length!==1||u[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,t);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),Zy}var Qy,uE;function Mb(){if(uE)return Qy;uE=1;var n=SN();return Qy=function(){return n()&&!!Symbol.toStringTag},Qy}var e1,cE;function xN(){return cE||(cE=1,e1=Object),e1}var t1,fE;function vq(){return fE||(fE=1,t1=Error),t1}var n1,dE;function wq(){return dE||(dE=1,n1=EvalError),n1}var r1,hE;function bq(){return hE||(hE=1,r1=RangeError),r1}var i1,pE;function _q(){return pE||(pE=1,i1=ReferenceError),i1}var s1,mE;function AN(){return mE||(mE=1,s1=SyntaxError),s1}var a1,gE;function Gh(){return gE||(gE=1,a1=TypeError),a1}var o1,yE;function Sq(){return yE||(yE=1,o1=URIError),o1}var l1,vE;function xq(){return vE||(vE=1,l1=Math.abs),l1}var u1,wE;function Aq(){return wE||(wE=1,u1=Math.floor),u1}var c1,bE;function Eq(){return bE||(bE=1,c1=Math.max),c1}var f1,_E;function Tq(){return _E||(_E=1,f1=Math.min),f1}var d1,SE;function Cq(){return SE||(SE=1,d1=Math.pow),d1}var h1,xE;function Nq(){return xE||(xE=1,h1=Math.round),h1}var p1,AE;function Rq(){return AE||(AE=1,p1=Number.isNaN||function(e){return e!==e}),p1}var m1,EE;function kq(){if(EE)return m1;EE=1;var n=Rq();return m1=function(t){return n(t)||t===0?t:t<0?-1:1},m1}var g1,TE;function Iq(){return TE||(TE=1,g1=Object.getOwnPropertyDescriptor),g1}var y1,CE;function Vh(){if(CE)return y1;CE=1;var n=Iq();if(n)try{n([],"length")}catch{n=null}return y1=n,y1}var v1,NE;function Fg(){if(NE)return v1;NE=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return v1=n,v1}var w1,RE;function Lq(){if(RE)return w1;RE=1;var n=typeof Symbol<"u"&&Symbol,e=SN();return w1=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},w1}var b1,kE;function EN(){return kE||(kE=1,b1=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),b1}var _1,IE;function TN(){if(IE)return _1;IE=1;var n=xN();return _1=n.getPrototypeOf||null,_1}var S1,LE;function Pq(){if(LE)return S1;LE=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(c,f){for(var h=[],g=0;g<c.length;g+=1)h[g]=c[g];for(var y=0;y<f.length;y+=1)h[y+c.length]=f[y];return h},s=function(c,f){for(var h=[],g=f,y=0;g<c.length;g+=1,y+=1)h[y]=c[g];return h},u=function(l,c){for(var f="",h=0;h<l.length;h+=1)f+=l[h],h+1<l.length&&(f+=c);return f};return S1=function(c){var f=this;if(typeof f!="function"||e.apply(f)!==r)throw new TypeError(n+f);for(var h=s(arguments,1),g,y=function(){if(this instanceof g){var b=f.apply(this,i(h,arguments));return Object(b)===b?b:this}return f.apply(c,i(h,arguments))},m=t(0,f.length-h.length),E=[],_=0;_<m;_++)E[_]="$"+_;if(g=Function("binder","return function ("+u(E,",")+"){ return binder.apply(this,arguments); }")(y),f.prototype){var R=function(){};R.prototype=f.prototype,g.prototype=new R,R.prototype=null}return g},S1}var x1,PE;function $h(){if(PE)return x1;PE=1;var n=Pq();return x1=Function.prototype.bind||n,x1}var A1,ME;function Ob(){return ME||(ME=1,A1=Function.prototype.call),A1}var E1,OE;function CN(){return OE||(OE=1,E1=Function.prototype.apply),E1}var T1,DE;function Mq(){return DE||(DE=1,T1=typeof Reflect<"u"&&Reflect&&Reflect.apply),T1}var C1,UE;function Oq(){if(UE)return C1;UE=1;var n=$h(),e=CN(),t=Ob(),r=Mq();return C1=r||n.call(t,e),C1}var N1,FE;function Dq(){if(FE)return N1;FE=1;var n=$h(),e=Gh(),t=Ob(),r=Oq();return N1=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},N1}var R1,BE;function Uq(){if(BE)return R1;BE=1;var n=Dq(),e=Vh(),t;try{t=[].__proto__===Array.prototype}catch(u){if(!u||typeof u!="object"||!("code"in u)||u.code!=="ERR_PROTO_ACCESS")throw u}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return R1=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?(function(l){return s(l==null?l:i(l))}):!1,R1}var k1,qE;function Fq(){if(qE)return k1;qE=1;var n=EN(),e=TN(),t=Uq();return k1=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,k1}var I1,jE;function Bq(){if(jE)return I1;jE=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=$h();return I1=t.call(n,e),I1}var L1,zE;function Db(){if(zE)return L1;zE=1;var n,e=xN(),t=vq(),r=wq(),i=bq(),s=_q(),u=AN(),l=Gh(),c=Sq(),f=xq(),h=Aq(),g=Eq(),y=Tq(),m=Cq(),E=Nq(),_=kq(),R=Function,b=function(de){try{return R('"use strict"; return ('+de+").constructor;")()}catch{}},N=Vh(),C=Fg(),A=function(){throw new l},F=N?(function(){try{return arguments.callee,A}catch{try{return N(arguments,"callee").get}catch{return A}}})():A,J=Lq()(),V=Fq(),te=TN(),O=EN(),le=CN(),Q=Ob(),U={},X=typeof Uint8Array>"u"||!V?n:V(Uint8Array),M={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":J&&V?V([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":U,"%AsyncGenerator%":U,"%AsyncGeneratorFunction%":U,"%AsyncIteratorPrototype%":U,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":R,"%GeneratorFunction%":U,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":J&&V?V(V([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!J||!V?n:V(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":N,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!J||!V?n:V(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":J&&V?V(""[Symbol.iterator]()):n,"%Symbol%":J?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":F,"%TypedArray%":X,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Q,"%Function.prototype.apply%":le,"%Object.defineProperty%":C,"%Object.getPrototypeOf%":te,"%Math.abs%":f,"%Math.floor%":h,"%Math.max%":g,"%Math.min%":y,"%Math.pow%":m,"%Math.round%":E,"%Math.sign%":_,"%Reflect.getPrototypeOf%":O};if(V)try{null.error}catch(de){var ye=V(V(de));M["%Error.prototype%"]=ye}var se=function de(fe){var re;if(fe==="%AsyncFunction%")re=b("async function () {}");else if(fe==="%GeneratorFunction%")re=b("function* () {}");else if(fe==="%AsyncGeneratorFunction%")re=b("async function* () {}");else if(fe==="%AsyncGenerator%"){var he=de("%AsyncGeneratorFunction%");he&&(re=he.prototype)}else if(fe==="%AsyncIteratorPrototype%"){var ke=de("%AsyncGenerator%");ke&&V&&(re=V(ke.prototype))}return M[fe]=re,re},ie={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Se=$h(),me=Bq(),Ne=Se.call(Q,Array.prototype.concat),K=Se.call(le,Array.prototype.splice),L=Se.call(Q,String.prototype.replace),$=Se.call(Q,String.prototype.slice),ee=Se.call(Q,RegExp.prototype.exec),pe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ae=/\\(\\)?/g,B=function(fe){var re=$(fe,0,1),he=$(fe,-1);if(re==="%"&&he!=="%")throw new u("invalid intrinsic syntax, expected closing `%`");if(he==="%"&&re!=="%")throw new u("invalid intrinsic syntax, expected opening `%`");var ke=[];return L(fe,pe,function(q,oe,Y,I){ke[ke.length]=Y?L(I,ae,"$1"):oe||q}),ke},j=function(fe,re){var he=fe,ke;if(me(ie,he)&&(ke=ie[he],he="%"+ke[0]+"%"),me(M,he)){var q=M[he];if(q===U&&(q=se(he)),typeof q>"u"&&!re)throw new l("intrinsic "+fe+" exists, but is not available. Please file an issue!");return{alias:ke,name:he,value:q}}throw new u("intrinsic "+fe+" does not exist!")};return L1=function(fe,re){if(typeof fe!="string"||fe.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof re!="boolean")throw new l('"allowMissing" argument must be a boolean');if(ee(/^%?[^%]*%?$/,fe)===null)throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var he=B(fe),ke=he.length>0?he[0]:"",q=j("%"+ke+"%",re),oe=q.name,Y=q.value,I=!1,P=q.alias;P&&(ke=P[0],K(he,Ne([0,1],P)));for(var H=1,be=!0;H<he.length;H+=1){var ne=he[H],we=$(ne,0,1),Re=$(ne,-1);if((we==='"'||we==="'"||we==="`"||Re==='"'||Re==="'"||Re==="`")&&we!==Re)throw new u("property names with quotes must have matching quotes");if((ne==="constructor"||!be)&&(I=!0),ke+="."+ne,oe="%"+ke+"%",me(M,oe))Y=M[oe];else if(Y!=null){if(!(ne in Y)){if(!re)throw new l("base intrinsic for "+fe+" exists, but the property is not available.");return}if(N&&H+1>=he.length){var De=N(Y,ne);be=!!De,be&&"get"in De&&!("originalValue"in De.get)?Y=De.get:Y=Y[ne]}else be=me(Y,ne),Y=Y[ne];be&&!I&&(M[oe]=Y)}}return Y},L1}var P1={exports:{}},M1,HE;function qq(){if(HE)return M1;HE=1;var n=Fg(),e=AN(),t=Gh(),r=Vh();return M1=function(s,u,l){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof u!="string"&&typeof u!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,g=arguments.length>6?arguments[6]:!1,y=!!r&&r(s,u);if(n)n(s,u,{configurable:h===null&&y?y.configurable:!h,enumerable:c===null&&y?y.enumerable:!c,value:l,writable:f===null&&y?y.writable:!f});else if(g||!c&&!f&&!h)s[u]=l;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},M1}var O1,GE;function jq(){if(GE)return O1;GE=1;var n=Fg(),e=function(){return!!n};return e.hasArrayLengthDefineBug=function(){if(!n)return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},O1=e,O1}var D1,VE;function zq(){if(VE)return D1;VE=1;var n=Db(),e=qq(),t=jq()(),r=Vh(),i=Gh(),s=n("%Math.floor%");return D1=function(l,c){if(typeof l!="function")throw new i("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||s(c)!==c)throw new i("`length` must be a positive 32-bit integer");var f=arguments.length>2&&!!arguments[2],h=!0,g=!0;if("length"in l&&r){var y=r(l,"length");y&&!y.configurable&&(h=!1),y&&!y.writable&&(g=!1)}return(h||g||!f)&&(t?e(l,"length",c,!0,!0):e(l,"length",c)),l},D1}var $E;function NN(){return $E||($E=1,(function(n){var e=$h(),t=Db(),r=zq(),i=Gh(),s=t("%Function.prototype.apply%"),u=t("%Function.prototype.call%"),l=t("%Reflect.apply%",!0)||e.call(u,s),c=Fg(),f=t("%Math.max%");n.exports=function(y){if(typeof y!="function")throw new i("a function is required");var m=l(e,u,arguments);return r(m,1+f(0,y.length-(arguments.length-1)),!0)};var h=function(){return l(e,s,arguments)};c?c(n.exports,"apply",{value:h}):n.exports.apply=h})(P1)),P1.exports}var U1,WE;function RN(){if(WE)return U1;WE=1;var n=Db(),e=NN(),t=e(n("String.prototype.indexOf"));return U1=function(i,s){var u=n(i,!!s);return typeof u=="function"&&t(i,".prototype.")>-1?e(u):u},U1}var F1,KE;function Hq(){if(KE)return F1;KE=1;var n=Mb()(),e=RN(),t=e("Object.prototype.toString"),r=function(l){return n&&l&&typeof l=="object"&&Symbol.toStringTag in l?!1:t(l)==="[object Arguments]"},i=function(l){return r(l)?!0:l!==null&&typeof l=="object"&&typeof l.length=="number"&&l.length>=0&&t(l)!=="[object Array]"&&t(l.callee)==="[object Function]"},s=(function(){return r(arguments)})();return r.isLegacyArguments=i,F1=s?r:i,F1}var B1,JE;function Gq(){if(JE)return B1;JE=1;var n=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,r=Mb()(),i=Object.getPrototypeOf,s=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},u;return B1=function(c){if(typeof c!="function")return!1;if(t.test(e.call(c)))return!0;if(!r){var f=n.call(c);return f==="[object GeneratorFunction]"}if(!i)return!1;if(typeof u>"u"){var h=s();u=h?i(h):!1}return i(c)===u},B1}var q1,YE;function Vq(){if(YE)return q1;YE=1;var n=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,t)}catch(N){N!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(C){try{var A=n.call(C);return i.test(A)}catch{return!1}},u=function(C){try{return s(C)?!1:(n.call(C),!0)}catch{return!1}},l=Object.prototype.toString,c="[object Object]",f="[object Function]",h="[object GeneratorFunction]",g="[object HTMLAllCollection]",y="[object HTML document.all class]",m="[object HTMLCollection]",E=typeof Symbol=="function"&&!!Symbol.toStringTag,_=!(0 in[,]),R=function(){return!1};if(typeof document=="object"){var b=document.all;l.call(b)===l.call(document.all)&&(R=function(C){if((_||!C)&&(typeof C>"u"||typeof C=="object"))try{var A=l.call(C);return(A===g||A===y||A===m||A===c)&&C("")==null}catch{}return!1})}return q1=e?function(C){if(R(C))return!0;if(!C||typeof C!="function"&&typeof C!="object")return!1;try{e(C,null,t)}catch(A){if(A!==r)return!1}return!s(C)&&u(C)}:function(C){if(R(C))return!0;if(!C||typeof C!="function"&&typeof C!="object")return!1;if(E)return u(C);if(s(C))return!1;var A=l.call(C);return A!==f&&A!==h&&!/^\[object HTML/.test(A)?!1:u(C)},q1}var j1,XE;function $q(){if(XE)return j1;XE=1;var n=Vq(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,r=function(c,f,h){for(var g=0,y=c.length;g<y;g++)t.call(c,g)&&(h==null?f(c[g],g,c):f.call(h,c[g],g,c))},i=function(c,f,h){for(var g=0,y=c.length;g<y;g++)h==null?f(c.charAt(g),g,c):f.call(h,c.charAt(g),g,c)},s=function(c,f,h){for(var g in c)t.call(c,g)&&(h==null?f(c[g],g,c):f.call(h,c[g],g,c))},u=function(c,f,h){if(!n(f))throw new TypeError("iterator must be a function");var g;arguments.length>=3&&(g=h),e.call(c)==="[object Array]"?r(c,f,g):typeof c=="string"?i(c,f,g):s(c,f,g)};return j1=u,j1}var z1,ZE;function Wq(){return ZE||(ZE=1,z1=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),z1}var H1,QE;function Kq(){if(QE)return H1;QE=1;var n=Wq(),e=typeof globalThis>"u"?Oo:globalThis;return H1=function(){for(var r=[],i=0;i<n.length;i++)typeof e[n[i]]=="function"&&(r[r.length]=n[i]);return r},H1}var G1,eT;function kN(){if(eT)return G1;eT=1;var n=$q(),e=Kq(),t=NN(),r=RN(),i=Vh(),s=r("Object.prototype.toString"),u=Mb()(),l=typeof globalThis>"u"?Oo:globalThis,c=e(),f=r("String.prototype.slice"),h=Object.getPrototypeOf,g=r("Array.prototype.indexOf",!0)||function(R,b){for(var N=0;N<R.length;N+=1)if(R[N]===b)return N;return-1},y={__proto__:null};u&&i&&h?n(c,function(_){var R=new l[_];if(Symbol.toStringTag in R){var b=h(R),N=i(b,Symbol.toStringTag);if(!N){var C=h(b);N=i(C,Symbol.toStringTag)}y["$"+_]=t(N.get)}}):n(c,function(_){var R=new l[_],b=R.slice||R.set;b&&(y["$"+_]=t(b))});var m=function(R){var b=!1;return n(y,function(N,C){if(!b)try{"$"+N(R)===C&&(b=f(C,1))}catch{}}),b},E=function(R){var b=!1;return n(y,function(N,C){if(!b)try{N(R),b=f(C,1)}catch{}}),b};return G1=function(R){if(!R||typeof R!="object")return!1;if(!u){var b=f(s(R),8,-1);return g(c,b)>-1?b:b!=="Object"?!1:E(R)}return i?m(R):null},G1}var V1,tT;function Jq(){if(tT)return V1;tT=1;var n=kN();return V1=function(t){return!!n(t)},V1}var nT;function Yq(){return nT||(nT=1,(function(n){var e=Hq(),t=Gq(),r=kN(),i=Jq();function s(H){return H.call.bind(H)}var u=typeof BigInt<"u",l=typeof Symbol<"u",c=s(Object.prototype.toString),f=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),g=s(Boolean.prototype.valueOf);if(u)var y=s(BigInt.prototype.valueOf);if(l)var m=s(Symbol.prototype.valueOf);function E(H,be){if(typeof H!="object")return!1;try{return be(H),!0}catch{return!1}}n.isArgumentsObject=e,n.isGeneratorFunction=t,n.isTypedArray=i;function _(H){return typeof Promise<"u"&&H instanceof Promise||H!==null&&typeof H=="object"&&typeof H.then=="function"&&typeof H.catch=="function"}n.isPromise=_;function R(H){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(H):i(H)||$(H)}n.isArrayBufferView=R;function b(H){return r(H)==="Uint8Array"}n.isUint8Array=b;function N(H){return r(H)==="Uint8ClampedArray"}n.isUint8ClampedArray=N;function C(H){return r(H)==="Uint16Array"}n.isUint16Array=C;function A(H){return r(H)==="Uint32Array"}n.isUint32Array=A;function F(H){return r(H)==="Int8Array"}n.isInt8Array=F;function J(H){return r(H)==="Int16Array"}n.isInt16Array=J;function V(H){return r(H)==="Int32Array"}n.isInt32Array=V;function te(H){return r(H)==="Float32Array"}n.isFloat32Array=te;function O(H){return r(H)==="Float64Array"}n.isFloat64Array=O;function le(H){return r(H)==="BigInt64Array"}n.isBigInt64Array=le;function Q(H){return r(H)==="BigUint64Array"}n.isBigUint64Array=Q;function U(H){return c(H)==="[object Map]"}U.working=typeof Map<"u"&&U(new Map);function X(H){return typeof Map>"u"?!1:U.working?U(H):H instanceof Map}n.isMap=X;function M(H){return c(H)==="[object Set]"}M.working=typeof Set<"u"&&M(new Set);function ye(H){return typeof Set>"u"?!1:M.working?M(H):H instanceof Set}n.isSet=ye;function se(H){return c(H)==="[object WeakMap]"}se.working=typeof WeakMap<"u"&&se(new WeakMap);function ie(H){return typeof WeakMap>"u"?!1:se.working?se(H):H instanceof WeakMap}n.isWeakMap=ie;function Se(H){return c(H)==="[object WeakSet]"}Se.working=typeof WeakSet<"u"&&Se(new WeakSet);function me(H){return Se(H)}n.isWeakSet=me;function Ne(H){return c(H)==="[object ArrayBuffer]"}Ne.working=typeof ArrayBuffer<"u"&&Ne(new ArrayBuffer);function K(H){return typeof ArrayBuffer>"u"?!1:Ne.working?Ne(H):H instanceof ArrayBuffer}n.isArrayBuffer=K;function L(H){return c(H)==="[object DataView]"}L.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&L(new DataView(new ArrayBuffer(1),0,1));function $(H){return typeof DataView>"u"?!1:L.working?L(H):H instanceof DataView}n.isDataView=$;var ee=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function pe(H){return c(H)==="[object SharedArrayBuffer]"}function ae(H){return typeof ee>"u"?!1:(typeof pe.working>"u"&&(pe.working=pe(new ee)),pe.working?pe(H):H instanceof ee)}n.isSharedArrayBuffer=ae;function B(H){return c(H)==="[object AsyncFunction]"}n.isAsyncFunction=B;function j(H){return c(H)==="[object Map Iterator]"}n.isMapIterator=j;function de(H){return c(H)==="[object Set Iterator]"}n.isSetIterator=de;function fe(H){return c(H)==="[object Generator]"}n.isGeneratorObject=fe;function re(H){return c(H)==="[object WebAssembly.Module]"}n.isWebAssemblyCompiledModule=re;function he(H){return E(H,f)}n.isNumberObject=he;function ke(H){return E(H,h)}n.isStringObject=ke;function q(H){return E(H,g)}n.isBooleanObject=q;function oe(H){return u&&E(H,y)}n.isBigIntObject=oe;function Y(H){return l&&E(H,m)}n.isSymbolObject=Y;function I(H){return he(H)||ke(H)||q(H)||oe(H)||Y(H)}n.isBoxedPrimitive=I;function P(H){return typeof Uint8Array<"u"&&(K(H)||ae(H))}n.isAnyArrayBuffer=P,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(H){Object.defineProperty(n,H,{enumerable:!1,value:function(){throw new Error(H+" is not supported in userland")}})})})(Xy)),Xy}var $1,rT;function Xq(){return rT||(rT=1,$1=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),$1}var iT;function IN(){return iT||(iT=1,(function(n){var e=Object.getOwnPropertyDescriptors||function($){for(var ee=Object.keys($),pe={},ae=0;ae<ee.length;ae++)pe[ee[ae]]=Object.getOwnPropertyDescriptor($,ee[ae]);return pe},t=/%[sdj%]/g;n.format=function(L){if(!F(L)){for(var $=[],ee=0;ee<arguments.length;ee++)$.push(u(arguments[ee]));return $.join(" ")}for(var ee=1,pe=arguments,ae=pe.length,B=String(L).replace(t,function(de){if(de==="%%")return"%";if(ee>=ae)return de;switch(de){case"%s":return String(pe[ee++]);case"%d":return Number(pe[ee++]);case"%j":try{return JSON.stringify(pe[ee++])}catch{return"[Circular]"}default:return de}}),j=pe[ee];ee<ae;j=pe[++ee])N(j)||!O(j)?B+=" "+j:B+=" "+u(j);return B},n.deprecate=function(L,$){if(typeof un<"u"&&un.noDeprecation===!0)return L;if(typeof un>"u")return function(){return n.deprecate(L,$).apply(this,arguments)};var ee=!1;function pe(){if(!ee){if(un.throwDeprecation)throw new Error($);un.traceDeprecation?console.trace($):console.error($),ee=!0}return L.apply(this,arguments)}return pe};var r={},i=/^$/;if(un.env.NODE_DEBUG){var s=un.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}n.debuglog=function(L){if(L=L.toUpperCase(),!r[L])if(i.test(L)){var $=un.pid;r[L]=function(){var ee=n.format.apply(n,arguments);console.error("%s %d: %s",L,$,ee)}}else r[L]=function(){};return r[L]};function u(L,$){var ee={seen:[],stylize:c};return arguments.length>=3&&(ee.depth=arguments[2]),arguments.length>=4&&(ee.colors=arguments[3]),b($)?ee.showHidden=$:$&&n._extend(ee,$),V(ee.showHidden)&&(ee.showHidden=!1),V(ee.depth)&&(ee.depth=2),V(ee.colors)&&(ee.colors=!1),V(ee.customInspect)&&(ee.customInspect=!0),ee.colors&&(ee.stylize=l),h(ee,L,ee.depth)}n.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(L,$){var ee=u.styles[$];return ee?"\x1B["+u.colors[ee][0]+"m"+L+"\x1B["+u.colors[ee][1]+"m":L}function c(L,$){return L}function f(L){var $={};return L.forEach(function(ee,pe){$[ee]=!0}),$}function h(L,$,ee){if(L.customInspect&&$&&U($.inspect)&&$.inspect!==n.inspect&&!($.constructor&&$.constructor.prototype===$)){var pe=$.inspect(ee,L);return F(pe)||(pe=h(L,pe,ee)),pe}var ae=g(L,$);if(ae)return ae;var B=Object.keys($),j=f(B);if(L.showHidden&&(B=Object.getOwnPropertyNames($)),Q($)&&(B.indexOf("message")>=0||B.indexOf("description")>=0))return y($);if(B.length===0){if(U($)){var de=$.name?": "+$.name:"";return L.stylize("[Function"+de+"]","special")}if(te($))return L.stylize(RegExp.prototype.toString.call($),"regexp");if(le($))return L.stylize(Date.prototype.toString.call($),"date");if(Q($))return y($)}var fe="",re=!1,he=["{","}"];if(R($)&&(re=!0,he=["[","]"]),U($)){var ke=$.name?": "+$.name:"";fe=" [Function"+ke+"]"}if(te($)&&(fe=" "+RegExp.prototype.toString.call($)),le($)&&(fe=" "+Date.prototype.toUTCString.call($)),Q($)&&(fe=" "+y($)),B.length===0&&(!re||$.length==0))return he[0]+fe+he[1];if(ee<0)return te($)?L.stylize(RegExp.prototype.toString.call($),"regexp"):L.stylize("[Object]","special");L.seen.push($);var q;return re?q=m(L,$,ee,j,B):q=B.map(function(oe){return E(L,$,ee,j,oe,re)}),L.seen.pop(),_(q,fe,he)}function g(L,$){if(V($))return L.stylize("undefined","undefined");if(F($)){var ee="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(ee,"string")}if(A($))return L.stylize(""+$,"number");if(b($))return L.stylize(""+$,"boolean");if(N($))return L.stylize("null","null")}function y(L){return"["+Error.prototype.toString.call(L)+"]"}function m(L,$,ee,pe,ae){for(var B=[],j=0,de=$.length;j<de;++j)Se($,String(j))?B.push(E(L,$,ee,pe,String(j),!0)):B.push("");return ae.forEach(function(fe){fe.match(/^\d+$/)||B.push(E(L,$,ee,pe,fe,!0))}),B}function E(L,$,ee,pe,ae,B){var j,de,fe;if(fe=Object.getOwnPropertyDescriptor($,ae)||{value:$[ae]},fe.get?fe.set?de=L.stylize("[Getter/Setter]","special"):de=L.stylize("[Getter]","special"):fe.set&&(de=L.stylize("[Setter]","special")),Se(pe,ae)||(j="["+ae+"]"),de||(L.seen.indexOf(fe.value)<0?(N(ee)?de=h(L,fe.value,null):de=h(L,fe.value,ee-1),de.indexOf(`
`)>-1&&(B?de=de.split(`
`).map(function(re){return"  "+re}).join(`
`).slice(2):de=`
`+de.split(`
`).map(function(re){return"   "+re}).join(`
`))):de=L.stylize("[Circular]","special")),V(j)){if(B&&ae.match(/^\d+$/))return de;j=JSON.stringify(""+ae),j.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(j=j.slice(1,-1),j=L.stylize(j,"name")):(j=j.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j=L.stylize(j,"string"))}return j+": "+de}function _(L,$,ee){var pe=L.reduce(function(ae,B){return B.indexOf(`
`)>=0,ae+B.replace(/\u001b\[\d\d?m/g,"").length+1},0);return pe>60?ee[0]+($===""?"":$+`
 `)+" "+L.join(`,
  `)+" "+ee[1]:ee[0]+$+" "+L.join(", ")+" "+ee[1]}n.types=Yq();function R(L){return Array.isArray(L)}n.isArray=R;function b(L){return typeof L=="boolean"}n.isBoolean=b;function N(L){return L===null}n.isNull=N;function C(L){return L==null}n.isNullOrUndefined=C;function A(L){return typeof L=="number"}n.isNumber=A;function F(L){return typeof L=="string"}n.isString=F;function J(L){return typeof L=="symbol"}n.isSymbol=J;function V(L){return L===void 0}n.isUndefined=V;function te(L){return O(L)&&M(L)==="[object RegExp]"}n.isRegExp=te,n.types.isRegExp=te;function O(L){return typeof L=="object"&&L!==null}n.isObject=O;function le(L){return O(L)&&M(L)==="[object Date]"}n.isDate=le,n.types.isDate=le;function Q(L){return O(L)&&(M(L)==="[object Error]"||L instanceof Error)}n.isError=Q,n.types.isNativeError=Q;function U(L){return typeof L=="function"}n.isFunction=U;function X(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||typeof L>"u"}n.isPrimitive=X,n.isBuffer=Xq();function M(L){return Object.prototype.toString.call(L)}function ye(L){return L<10?"0"+L.toString(10):L.toString(10)}var se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ie(){var L=new Date,$=[ye(L.getHours()),ye(L.getMinutes()),ye(L.getSeconds())].join(":");return[L.getDate(),se[L.getMonth()],$].join(" ")}n.log=function(){console.log("%s - %s",ie(),n.format.apply(n,arguments))},n.inherits=vu(),n._extend=function(L,$){if(!$||!O($))return L;for(var ee=Object.keys($),pe=ee.length;pe--;)L[ee[pe]]=$[ee[pe]];return L};function Se(L,$){return Object.prototype.hasOwnProperty.call(L,$)}var me=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;n.promisify=function($){if(typeof $!="function")throw new TypeError('The "original" argument must be of type Function');if(me&&$[me]){var ee=$[me];if(typeof ee!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ee,me,{value:ee,enumerable:!1,writable:!1,configurable:!0}),ee}function ee(){for(var pe,ae,B=new Promise(function(fe,re){pe=fe,ae=re}),j=[],de=0;de<arguments.length;de++)j.push(arguments[de]);j.push(function(fe,re){fe?ae(fe):pe(re)});try{$.apply(this,j)}catch(fe){ae(fe)}return B}return Object.setPrototypeOf(ee,Object.getPrototypeOf($)),me&&Object.defineProperty(ee,me,{value:ee,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ee,e($))},n.promisify.custom=me;function Ne(L,$){if(!L){var ee=new Error("Promise was rejected with a falsy value");ee.reason=L,L=ee}return $(L)}function K(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function $(){for(var ee=[],pe=0;pe<arguments.length;pe++)ee.push(arguments[pe]);var ae=ee.pop();if(typeof ae!="function")throw new TypeError("The last argument must be of type Function");var B=this,j=function(){return ae.apply(B,arguments)};L.apply(this,ee).then(function(de){un.nextTick(j.bind(null,null,de))},function(de){un.nextTick(Ne.bind(null,de,j))})}return Object.setPrototypeOf($,Object.getPrototypeOf(L)),Object.defineProperties($,e(L)),$}n.callbackify=K})(Yy)),Yy}var W1,sT;function Zq(){if(sT)return W1;sT=1;function n(y,m){var E=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);m&&(_=_.filter(function(R){return Object.getOwnPropertyDescriptor(y,R).enumerable})),E.push.apply(E,_)}return E}function e(y){for(var m=1;m<arguments.length;m++){var E=arguments[m]!=null?arguments[m]:{};m%2?n(Object(E),!0).forEach(function(_){t(y,_,E[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(E)):n(Object(E)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(E,_))})}return y}function t(y,m,E){return m in y?Object.defineProperty(y,m,{value:E,enumerable:!0,configurable:!0,writable:!0}):y[m]=E,y}function r(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}function i(y,m){for(var E=0;E<m.length;E++){var _=m[E];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}function s(y,m,E){return m&&i(y.prototype,m),y}var u=Ug(),l=u.Buffer,c=IN(),f=c.inspect,h=f&&f.custom||"inspect";function g(y,m,E){l.prototype.copy.call(y,m,E)}return W1=(function(){function y(){r(this,y),this.head=null,this.tail=null,this.length=0}return s(y,[{key:"push",value:function(E){var _={data:E,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length}},{key:"unshift",value:function(E){var _={data:E,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}},{key:"shift",value:function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(E){if(this.length===0)return"";for(var _=this.head,R=""+_.data;_=_.next;)R+=E+_.data;return R}},{key:"concat",value:function(E){if(this.length===0)return l.alloc(0);for(var _=l.allocUnsafe(E>>>0),R=this.head,b=0;R;)g(R.data,_,b),b+=R.data.length,R=R.next;return _}},{key:"consume",value:function(E,_){var R;return E<this.head.data.length?(R=this.head.data.slice(0,E),this.head.data=this.head.data.slice(E)):E===this.head.data.length?R=this.shift():R=_?this._getString(E):this._getBuffer(E),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(E){var _=this.head,R=1,b=_.data;for(E-=b.length;_=_.next;){var N=_.data,C=E>N.length?N.length:E;if(C===N.length?b+=N:b+=N.slice(0,E),E-=C,E===0){C===N.length?(++R,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=N.slice(C));break}++R}return this.length-=R,b}},{key:"_getBuffer",value:function(E){var _=l.allocUnsafe(E),R=this.head,b=1;for(R.data.copy(_),E-=R.data.length;R=R.next;){var N=R.data,C=E>N.length?N.length:E;if(N.copy(_,_.length-E,0,C),E-=C,E===0){C===N.length?(++b,R.next?this.head=R.next:this.head=this.tail=null):(this.head=R,R.data=N.slice(C));break}++b}return this.length-=b,_}},{key:h,value:function(E,_){return f(this,e({},_,{depth:0,customInspect:!1}))}}]),y})(),W1}var K1,aT;function LN(){if(aT)return K1;aT=1;function n(u,l){var c=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(l?l(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,un.nextTick(i,this,u)):un.nextTick(i,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(g){!l&&g?c._writableState?c._writableState.errorEmitted?un.nextTick(t,c):(c._writableState.errorEmitted=!0,un.nextTick(e,c,g)):un.nextTick(e,c,g):l?(un.nextTick(t,c),l(g)):un.nextTick(t,c)}),this)}function e(u,l){i(u,l),t(u)}function t(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(u,l){u.emit("error",l)}function s(u,l){var c=u._readableState,f=u._writableState;c&&c.autoDestroy||f&&f.autoDestroy?u.destroy(l):u.emit("error",l)}return K1={destroy:n,undestroy:r,errorOrDestroy:s},K1}var J1={},oT;function yd(){if(oT)return J1;oT=1;function n(l,c){l.prototype=Object.create(c.prototype),l.prototype.constructor=l,l.__proto__=c}var e={};function t(l,c,f){f||(f=Error);function h(y,m,E){return typeof c=="string"?c:c(y,m,E)}var g=(function(y){n(m,y);function m(E,_,R){return y.call(this,h(E,_,R))||this}return m})(f);g.prototype.name=f.name,g.prototype.code=l,e[l]=g}function r(l,c){if(Array.isArray(l)){var f=l.length;return l=l.map(function(h){return String(h)}),f>2?"one of ".concat(c," ").concat(l.slice(0,f-1).join(", "),", or ")+l[f-1]:f===2?"one of ".concat(c," ").concat(l[0]," or ").concat(l[1]):"of ".concat(c," ").concat(l[0])}else return"of ".concat(c," ").concat(String(l))}function i(l,c,f){return l.substr(0,c.length)===c}function s(l,c,f){return(f===void 0||f>l.length)&&(f=l.length),l.substring(f-c.length,f)===c}function u(l,c,f){return typeof f!="number"&&(f=0),f+c.length>l.length?!1:l.indexOf(c,f)!==-1}return t("ERR_INVALID_OPT_VALUE",function(l,c){return'The value "'+c+'" is invalid for option "'+l+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(l,c,f){var h;typeof c=="string"&&i(c,"not ")?(h="must not be",c=c.replace(/^not /,"")):h="must be";var g;if(s(l," argument"))g="The ".concat(l," ").concat(h," ").concat(r(c,"type"));else{var y=u(l,".")?"property":"argument";g='The "'.concat(l,'" ').concat(y," ").concat(h," ").concat(r(c,"type"))}return g+=". Received type ".concat(typeof f),g},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),J1.codes=e,J1}var Y1,lT;function PN(){if(lT)return Y1;lT=1;var n=yd().codes.ERR_INVALID_OPT_VALUE;function e(r,i,s){return r.highWaterMark!=null?r.highWaterMark:i?r[s]:null}function t(r,i,s,u){var l=e(i,u,s);if(l!=null){if(!(isFinite(l)&&Math.floor(l)===l)||l<0){var c=u?s:"highWaterMark";throw new n(c,l)}return Math.floor(l)}return r.objectMode?16:16*1024}return Y1={getHighWaterMark:t},Y1}var X1,uT;function Qq(){if(uT)return X1;uT=1,X1=n;function n(t,r){if(e("noDeprecation"))return t;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),i=!0}return t.apply(this,arguments)}return s}function e(t){try{if(!Oo.localStorage)return!1}catch{return!1}var r=Oo.localStorage[t];return r==null?!1:String(r).toLowerCase()==="true"}return X1}var Z1,cT;function MN(){if(cT)return Z1;cT=1,Z1=te;function n(ae){var B=this;this.next=null,this.entry=null,this.finish=function(){pe(B,ae)}}var e;te.WritableState=J;var t={deprecate:Qq()},r=_N(),i=Ug().Buffer,s=Oo.Uint8Array||function(){};function u(ae){return i.from(ae)}function l(ae){return i.isBuffer(ae)||ae instanceof s}var c=LN(),f=PN(),h=f.getHighWaterMark,g=yd().codes,y=g.ERR_INVALID_ARG_TYPE,m=g.ERR_METHOD_NOT_IMPLEMENTED,E=g.ERR_MULTIPLE_CALLBACK,_=g.ERR_STREAM_CANNOT_PIPE,R=g.ERR_STREAM_DESTROYED,b=g.ERR_STREAM_NULL_VALUES,N=g.ERR_STREAM_WRITE_AFTER_END,C=g.ERR_UNKNOWN_ENCODING,A=c.errorOrDestroy;vu()(te,r);function F(){}function J(ae,B,j){e=e||nd(),ae=ae||{},typeof j!="boolean"&&(j=B instanceof e),this.objectMode=!!ae.objectMode,j&&(this.objectMode=this.objectMode||!!ae.writableObjectMode),this.highWaterMark=h(this,ae,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var de=ae.decodeStrings===!1;this.decodeStrings=!de,this.defaultEncoding=ae.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(fe){se(B,fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ae.emitClose!==!1,this.autoDestroy=!!ae.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}J.prototype.getBuffer=function(){for(var B=this.bufferedRequest,j=[];B;)j.push(B),B=B.next;return j},(function(){try{Object.defineProperty(J.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var V;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(V=Function.prototype[Symbol.hasInstance],Object.defineProperty(te,Symbol.hasInstance,{value:function(B){return V.call(this,B)?!0:this!==te?!1:B&&B._writableState instanceof J}})):V=function(B){return B instanceof this};function te(ae){e=e||nd();var B=this instanceof e;if(!B&&!V.call(te,this))return new te(ae);this._writableState=new J(ae,this,B),this.writable=!0,ae&&(typeof ae.write=="function"&&(this._write=ae.write),typeof ae.writev=="function"&&(this._writev=ae.writev),typeof ae.destroy=="function"&&(this._destroy=ae.destroy),typeof ae.final=="function"&&(this._final=ae.final)),r.call(this)}te.prototype.pipe=function(){A(this,new _)};function O(ae,B){var j=new N;A(ae,j),un.nextTick(B,j)}function le(ae,B,j,de){var fe;return j===null?fe=new b:typeof j!="string"&&!B.objectMode&&(fe=new y("chunk",["string","Buffer"],j)),fe?(A(ae,fe),un.nextTick(de,fe),!1):!0}te.prototype.write=function(ae,B,j){var de=this._writableState,fe=!1,re=!de.objectMode&&l(ae);return re&&!i.isBuffer(ae)&&(ae=u(ae)),typeof B=="function"&&(j=B,B=null),re?B="buffer":B||(B=de.defaultEncoding),typeof j!="function"&&(j=F),de.ending?O(this,j):(re||le(this,de,ae,j))&&(de.pendingcb++,fe=U(this,de,re,ae,B,j)),fe},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){var ae=this._writableState;ae.corked&&(ae.corked--,!ae.writing&&!ae.corked&&!ae.bufferProcessing&&ae.bufferedRequest&&me(this,ae))},te.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new C(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(te.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Q(ae,B,j){return!ae.objectMode&&ae.decodeStrings!==!1&&typeof B=="string"&&(B=i.from(B,j)),B}Object.defineProperty(te.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function U(ae,B,j,de,fe,re){if(!j){var he=Q(B,de,fe);de!==he&&(j=!0,fe="buffer",de=he)}var ke=B.objectMode?1:de.length;B.length+=ke;var q=B.length<B.highWaterMark;if(q||(B.needDrain=!0),B.writing||B.corked){var oe=B.lastBufferedRequest;B.lastBufferedRequest={chunk:de,encoding:fe,isBuf:j,callback:re,next:null},oe?oe.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else X(ae,B,!1,ke,de,fe,re);return q}function X(ae,B,j,de,fe,re,he){B.writelen=de,B.writecb=he,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new R("write")):j?ae._writev(fe,B.onwrite):ae._write(fe,re,B.onwrite),B.sync=!1}function M(ae,B,j,de,fe){--B.pendingcb,j?(un.nextTick(fe,de),un.nextTick($,ae,B),ae._writableState.errorEmitted=!0,A(ae,de)):(fe(de),ae._writableState.errorEmitted=!0,A(ae,de),$(ae,B))}function ye(ae){ae.writing=!1,ae.writecb=null,ae.length-=ae.writelen,ae.writelen=0}function se(ae,B){var j=ae._writableState,de=j.sync,fe=j.writecb;if(typeof fe!="function")throw new E;if(ye(j),B)M(ae,j,de,B,fe);else{var re=Ne(j)||ae.destroyed;!re&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&me(ae,j),de?un.nextTick(ie,ae,j,re,fe):ie(ae,j,re,fe)}}function ie(ae,B,j,de){j||Se(ae,B),B.pendingcb--,de(),$(ae,B)}function Se(ae,B){B.length===0&&B.needDrain&&(B.needDrain=!1,ae.emit("drain"))}function me(ae,B){B.bufferProcessing=!0;var j=B.bufferedRequest;if(ae._writev&&j&&j.next){var de=B.bufferedRequestCount,fe=new Array(de),re=B.corkedRequestsFree;re.entry=j;for(var he=0,ke=!0;j;)fe[he]=j,j.isBuf||(ke=!1),j=j.next,he+=1;fe.allBuffers=ke,X(ae,B,!0,B.length,fe,"",re.finish),B.pendingcb++,B.lastBufferedRequest=null,re.next?(B.corkedRequestsFree=re.next,re.next=null):B.corkedRequestsFree=new n(B),B.bufferedRequestCount=0}else{for(;j;){var q=j.chunk,oe=j.encoding,Y=j.callback,I=B.objectMode?1:q.length;if(X(ae,B,!1,I,q,oe,Y),j=j.next,B.bufferedRequestCount--,B.writing)break}j===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=j,B.bufferProcessing=!1}te.prototype._write=function(ae,B,j){j(new m("_write()"))},te.prototype._writev=null,te.prototype.end=function(ae,B,j){var de=this._writableState;return typeof ae=="function"?(j=ae,ae=null,B=null):typeof B=="function"&&(j=B,B=null),ae!=null&&this.write(ae,B),de.corked&&(de.corked=1,this.uncork()),de.ending||ee(this,de,j),this},Object.defineProperty(te.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ne(ae){return ae.ending&&ae.length===0&&ae.bufferedRequest===null&&!ae.finished&&!ae.writing}function K(ae,B){ae._final(function(j){B.pendingcb--,j&&A(ae,j),B.prefinished=!0,ae.emit("prefinish"),$(ae,B)})}function L(ae,B){!B.prefinished&&!B.finalCalled&&(typeof ae._final=="function"&&!B.destroyed?(B.pendingcb++,B.finalCalled=!0,un.nextTick(K,ae,B)):(B.prefinished=!0,ae.emit("prefinish")))}function $(ae,B){var j=Ne(B);if(j&&(L(ae,B),B.pendingcb===0&&(B.finished=!0,ae.emit("finish"),B.autoDestroy))){var de=ae._readableState;(!de||de.autoDestroy&&de.endEmitted)&&ae.destroy()}return j}function ee(ae,B,j){B.ending=!0,$(ae,B),j&&(B.finished?un.nextTick(j):ae.once("finish",j)),B.ended=!0,ae.writable=!1}function pe(ae,B,j){var de=ae.entry;for(ae.entry=null;de;){var fe=de.callback;B.pendingcb--,fe(j),de=de.next}B.corkedRequestsFree.next=ae}return Object.defineProperty(te.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),te.prototype.destroy=c.destroy,te.prototype._undestroy=c.undestroy,te.prototype._destroy=function(ae,B){B(ae)},Z1}var Q1,fT;function nd(){if(fT)return Q1;fT=1;var n=Object.keys||function(f){var h=[];for(var g in f)h.push(g);return h};Q1=u;var e=ON(),t=MN();vu()(u,e);for(var r=n(t.prototype),i=0;i<r.length;i++){var s=r[i];u.prototype[s]||(u.prototype[s]=t.prototype[s])}function u(f){if(!(this instanceof u))return new u(f);e.call(this,f),t.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||un.nextTick(c,this)}function c(f){f.end()}return Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),Q1}var ev={},gm={exports:{}},dT;function ej(){return dT||(dT=1,(function(n,e){var t=Ug(),r=t.Buffer;function i(u,l){for(var c in u)l[c]=u[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=s);function s(u,l,c){return r(u,l,c)}i(r,s),s.from=function(u,l,c){if(typeof u=="number")throw new TypeError("Argument must not be a number");return r(u,l,c)},s.alloc=function(u,l,c){if(typeof u!="number")throw new TypeError("Argument must be a number");var f=r(u);return l!==void 0?typeof c=="string"?f.fill(l,c):f.fill(l):f.fill(0),f},s.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r(u)},s.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(u)}})(gm,gm.exports)),gm.exports}var hT;function Uw(){if(hT)return ev;hT=1;var n=ej().Buffer,e=n.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(b){if(!b)return"utf8";for(var N;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(N)return;b=(""+b).toLowerCase(),N=!0}}function r(b){var N=t(b);if(typeof N!="string"&&(n.isEncoding===e||!e(b)))throw new Error("Unknown encoding: "+b);return N||b}ev.StringDecoder=i;function i(b){this.encoding=r(b);var N;switch(this.encoding){case"utf16le":this.text=g,this.end=y,N=4;break;case"utf8":this.fillLast=c,N=4;break;case"base64":this.text=m,this.end=E,N=3;break;default:this.write=_,this.end=R;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(N)}i.prototype.write=function(b){if(b.length===0)return"";var N,C;if(this.lastNeed){if(N=this.fillLast(b),N===void 0)return"";C=this.lastNeed,this.lastNeed=0}else C=0;return C<b.length?N?N+this.text(b,C):this.text(b,C):N||""},i.prototype.end=h,i.prototype.text=f,i.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function s(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function u(b,N,C){var A=N.length-1;if(A<C)return 0;var F=s(N[A]);return F>=0?(F>0&&(b.lastNeed=F-1),F):--A<C||F===-2?0:(F=s(N[A]),F>=0?(F>0&&(b.lastNeed=F-2),F):--A<C||F===-2?0:(F=s(N[A]),F>=0?(F>0&&(F===2?F=0:b.lastNeed=F-3),F):0))}function l(b,N,C){if((N[0]&192)!==128)return b.lastNeed=0,"�";if(b.lastNeed>1&&N.length>1){if((N[1]&192)!==128)return b.lastNeed=1,"�";if(b.lastNeed>2&&N.length>2&&(N[2]&192)!==128)return b.lastNeed=2,"�"}}function c(b){var N=this.lastTotal-this.lastNeed,C=l(this,b);if(C!==void 0)return C;if(this.lastNeed<=b.length)return b.copy(this.lastChar,N,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,N,0,b.length),this.lastNeed-=b.length}function f(b,N){var C=u(this,b,N);if(!this.lastNeed)return b.toString("utf8",N);this.lastTotal=C;var A=b.length-(C-this.lastNeed);return b.copy(this.lastChar,0,A),b.toString("utf8",N,A)}function h(b){var N=b&&b.length?this.write(b):"";return this.lastNeed?N+"�":N}function g(b,N){if((b.length-N)%2===0){var C=b.toString("utf16le",N);if(C){var A=C.charCodeAt(C.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],C.slice(0,-1)}return C}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",N,b.length-1)}function y(b){var N=b&&b.length?this.write(b):"";if(this.lastNeed){var C=this.lastTotal-this.lastNeed;return N+this.lastChar.toString("utf16le",0,C)}return N}function m(b,N){var C=(b.length-N)%3;return C===0?b.toString("base64",N):(this.lastNeed=3-C,this.lastTotal=3,C===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",N,b.length-C))}function E(b){var N=b&&b.length?this.write(b):"";return this.lastNeed?N+this.lastChar.toString("base64",0,3-this.lastNeed):N}function _(b){return b.toString(this.encoding)}function R(b){return b&&b.length?this.write(b):""}return ev}var tv,pT;function Ub(){if(pT)return tv;pT=1;var n=yd().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var u=!1;return function(){if(!u){u=!0;for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];s.apply(this,c)}}}function t(){}function r(s){return s.setHeader&&typeof s.abort=="function"}function i(s,u,l){if(typeof u=="function")return i(s,null,u);u||(u={}),l=e(l||t);var c=u.readable||u.readable!==!1&&s.readable,f=u.writable||u.writable!==!1&&s.writable,h=function(){s.writable||y()},g=s._writableState&&s._writableState.finished,y=function(){f=!1,g=!0,c||l.call(s)},m=s._readableState&&s._readableState.endEmitted,E=function(){c=!1,m=!0,f||l.call(s)},_=function(C){l.call(s,C)},R=function(){var C;if(c&&!m)return(!s._readableState||!s._readableState.ended)&&(C=new n),l.call(s,C);if(f&&!g)return(!s._writableState||!s._writableState.ended)&&(C=new n),l.call(s,C)},b=function(){s.req.on("finish",y)};return r(s)?(s.on("complete",y),s.on("abort",R),s.req?b():s.on("request",b)):f&&!s._writableState&&(s.on("end",h),s.on("close",h)),s.on("end",E),s.on("finish",y),u.error!==!1&&s.on("error",_),s.on("close",R),function(){s.removeListener("complete",y),s.removeListener("abort",R),s.removeListener("request",b),s.req&&s.req.removeListener("finish",y),s.removeListener("end",h),s.removeListener("close",h),s.removeListener("finish",y),s.removeListener("end",E),s.removeListener("error",_),s.removeListener("close",R)}}return tv=i,tv}var nv,mT;function tj(){if(mT)return nv;mT=1;var n;function e(b,N,C){return N in b?Object.defineProperty(b,N,{value:C,enumerable:!0,configurable:!0,writable:!0}):b[N]=C,b}var t=Ub(),r=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function h(b,N){return{value:b,done:N}}function g(b){var N=b[r];if(N!==null){var C=b[f].read();C!==null&&(b[l]=null,b[r]=null,b[i]=null,N(h(C,!1)))}}function y(b){un.nextTick(g,b)}function m(b,N){return function(C,A){b.then(function(){if(N[u]){C(h(void 0,!0));return}N[c](C,A)},A)}}var E=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((n={get stream(){return this[f]},next:function(){var N=this,C=this[s];if(C!==null)return Promise.reject(C);if(this[u])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(V,te){un.nextTick(function(){N[s]?te(N[s]):V(h(void 0,!0))})});var A=this[l],F;if(A)F=new Promise(m(A,this));else{var J=this[f].read();if(J!==null)return Promise.resolve(h(J,!1));F=new Promise(this[c])}return this[l]=F,F}},e(n,Symbol.asyncIterator,function(){return this}),e(n,"return",function(){var N=this;return new Promise(function(C,A){N[f].destroy(null,function(F){if(F){A(F);return}C(h(void 0,!0))})})}),n),E),R=function(N){var C,A=Object.create(_,(C={},e(C,f,{value:N,writable:!0}),e(C,r,{value:null,writable:!0}),e(C,i,{value:null,writable:!0}),e(C,s,{value:null,writable:!0}),e(C,u,{value:N._readableState.endEmitted,writable:!0}),e(C,c,{value:function(J,V){var te=A[f].read();te?(A[l]=null,A[r]=null,A[i]=null,J(h(te,!1))):(A[r]=J,A[i]=V)},writable:!0}),C));return A[l]=null,t(N,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var J=A[i];J!==null&&(A[l]=null,A[r]=null,A[i]=null,J(F)),A[s]=F;return}var V=A[r];V!==null&&(A[l]=null,A[r]=null,A[i]=null,V(h(void 0,!0))),A[u]=!0}),N.on("readable",y.bind(null,A)),A};return nv=R,nv}var rv,gT;function nj(){return gT||(gT=1,rv=function(){throw new Error("Readable.from is not available in the browser")}),rv}var iv,yT;function ON(){if(yT)return iv;yT=1,iv=O;var n;O.ReadableState=te,Pb().EventEmitter;var e=function(he,ke){return he.listeners(ke).length},t=_N(),r=Ug().Buffer,i=Oo.Uint8Array||function(){};function s(re){return r.from(re)}function u(re){return r.isBuffer(re)||re instanceof i}var l=IN(),c;l&&l.debuglog?c=l.debuglog("stream"):c=function(){};var f=Zq(),h=LN(),g=PN(),y=g.getHighWaterMark,m=yd().codes,E=m.ERR_INVALID_ARG_TYPE,_=m.ERR_STREAM_PUSH_AFTER_EOF,R=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,N,C,A;vu()(O,t);var F=h.errorOrDestroy,J=["error","close","destroy","pause","resume"];function V(re,he,ke){if(typeof re.prependListener=="function")return re.prependListener(he,ke);!re._events||!re._events[he]?re.on(he,ke):Array.isArray(re._events[he])?re._events[he].unshift(ke):re._events[he]=[ke,re._events[he]]}function te(re,he,ke){n=n||nd(),re=re||{},typeof ke!="boolean"&&(ke=he instanceof n),this.objectMode=!!re.objectMode,ke&&(this.objectMode=this.objectMode||!!re.readableObjectMode),this.highWaterMark=y(this,re,"readableHighWaterMark",ke),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=re.emitClose!==!1,this.autoDestroy=!!re.autoDestroy,this.destroyed=!1,this.defaultEncoding=re.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,re.encoding&&(N||(N=Uw().StringDecoder),this.decoder=new N(re.encoding),this.encoding=re.encoding)}function O(re){if(n=n||nd(),!(this instanceof O))return new O(re);var he=this instanceof n;this._readableState=new te(re,this,he),this.readable=!0,re&&(typeof re.read=="function"&&(this._read=re.read),typeof re.destroy=="function"&&(this._destroy=re.destroy)),t.call(this)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(he){this._readableState&&(this._readableState.destroyed=he)}}),O.prototype.destroy=h.destroy,O.prototype._undestroy=h.undestroy,O.prototype._destroy=function(re,he){he(re)},O.prototype.push=function(re,he){var ke=this._readableState,q;return ke.objectMode?q=!0:typeof re=="string"&&(he=he||ke.defaultEncoding,he!==ke.encoding&&(re=r.from(re,he),he=""),q=!0),le(this,re,he,!1,q)},O.prototype.unshift=function(re){return le(this,re,null,!0,!1)};function le(re,he,ke,q,oe){c("readableAddChunk",he);var Y=re._readableState;if(he===null)Y.reading=!1,se(re,Y);else{var I;if(oe||(I=U(Y,he)),I)F(re,I);else if(Y.objectMode||he&&he.length>0)if(typeof he!="string"&&!Y.objectMode&&Object.getPrototypeOf(he)!==r.prototype&&(he=s(he)),q)Y.endEmitted?F(re,new b):Q(re,Y,he,!0);else if(Y.ended)F(re,new _);else{if(Y.destroyed)return!1;Y.reading=!1,Y.decoder&&!ke?(he=Y.decoder.write(he),Y.objectMode||he.length!==0?Q(re,Y,he,!1):me(re,Y)):Q(re,Y,he,!1)}else q||(Y.reading=!1,me(re,Y))}return!Y.ended&&(Y.length<Y.highWaterMark||Y.length===0)}function Q(re,he,ke,q){he.flowing&&he.length===0&&!he.sync?(he.awaitDrain=0,re.emit("data",ke)):(he.length+=he.objectMode?1:ke.length,q?he.buffer.unshift(ke):he.buffer.push(ke),he.needReadable&&ie(re)),me(re,he)}function U(re,he){var ke;return!u(he)&&typeof he!="string"&&he!==void 0&&!re.objectMode&&(ke=new E("chunk",["string","Buffer","Uint8Array"],he)),ke}O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(re){N||(N=Uw().StringDecoder);var he=new N(re);this._readableState.decoder=he,this._readableState.encoding=this._readableState.decoder.encoding;for(var ke=this._readableState.buffer.head,q="";ke!==null;)q+=he.write(ke.data),ke=ke.next;return this._readableState.buffer.clear(),q!==""&&this._readableState.buffer.push(q),this._readableState.length=q.length,this};var X=1073741824;function M(re){return re>=X?re=X:(re--,re|=re>>>1,re|=re>>>2,re|=re>>>4,re|=re>>>8,re|=re>>>16,re++),re}function ye(re,he){return re<=0||he.length===0&&he.ended?0:he.objectMode?1:re!==re?he.flowing&&he.length?he.buffer.head.data.length:he.length:(re>he.highWaterMark&&(he.highWaterMark=M(re)),re<=he.length?re:he.ended?he.length:(he.needReadable=!0,0))}O.prototype.read=function(re){c("read",re),re=parseInt(re,10);var he=this._readableState,ke=re;if(re!==0&&(he.emittedReadable=!1),re===0&&he.needReadable&&((he.highWaterMark!==0?he.length>=he.highWaterMark:he.length>0)||he.ended))return c("read: emitReadable",he.length,he.ended),he.length===0&&he.ended?j(this):ie(this),null;if(re=ye(re,he),re===0&&he.ended)return he.length===0&&j(this),null;var q=he.needReadable;c("need readable",q),(he.length===0||he.length-re<he.highWaterMark)&&(q=!0,c("length less than watermark",q)),he.ended||he.reading?(q=!1,c("reading or ended",q)):q&&(c("do read"),he.reading=!0,he.sync=!0,he.length===0&&(he.needReadable=!0),this._read(he.highWaterMark),he.sync=!1,he.reading||(re=ye(ke,he)));var oe;return re>0?oe=B(re,he):oe=null,oe===null?(he.needReadable=he.length<=he.highWaterMark,re=0):(he.length-=re,he.awaitDrain=0),he.length===0&&(he.ended||(he.needReadable=!0),ke!==re&&he.ended&&j(this)),oe!==null&&this.emit("data",oe),oe};function se(re,he){if(c("onEofChunk"),!he.ended){if(he.decoder){var ke=he.decoder.end();ke&&ke.length&&(he.buffer.push(ke),he.length+=he.objectMode?1:ke.length)}he.ended=!0,he.sync?ie(re):(he.needReadable=!1,he.emittedReadable||(he.emittedReadable=!0,Se(re)))}}function ie(re){var he=re._readableState;c("emitReadable",he.needReadable,he.emittedReadable),he.needReadable=!1,he.emittedReadable||(c("emitReadable",he.flowing),he.emittedReadable=!0,un.nextTick(Se,re))}function Se(re){var he=re._readableState;c("emitReadable_",he.destroyed,he.length,he.ended),!he.destroyed&&(he.length||he.ended)&&(re.emit("readable"),he.emittedReadable=!1),he.needReadable=!he.flowing&&!he.ended&&he.length<=he.highWaterMark,ae(re)}function me(re,he){he.readingMore||(he.readingMore=!0,un.nextTick(Ne,re,he))}function Ne(re,he){for(;!he.reading&&!he.ended&&(he.length<he.highWaterMark||he.flowing&&he.length===0);){var ke=he.length;if(c("maybeReadMore read 0"),re.read(0),ke===he.length)break}he.readingMore=!1}O.prototype._read=function(re){F(this,new R("_read()"))},O.prototype.pipe=function(re,he){var ke=this,q=this._readableState;switch(q.pipesCount){case 0:q.pipes=re;break;case 1:q.pipes=[q.pipes,re];break;default:q.pipes.push(re);break}q.pipesCount+=1,c("pipe count=%d opts=%j",q.pipesCount,he);var oe=(!he||he.end!==!1)&&re!==un.stdout&&re!==un.stderr,Y=oe?P:Ke;q.endEmitted?un.nextTick(Y):ke.once("end",Y),re.on("unpipe",I);function I(at,ot){c("onunpipe"),at===ke&&ot&&ot.hasUnpiped===!1&&(ot.hasUnpiped=!0,ne())}function P(){c("onend"),re.end()}var H=K(ke);re.on("drain",H);var be=!1;function ne(){c("cleanup"),re.removeListener("close",De),re.removeListener("finish",Ue),re.removeListener("drain",H),re.removeListener("error",Re),re.removeListener("unpipe",I),ke.removeListener("end",P),ke.removeListener("end",Ke),ke.removeListener("data",we),be=!0,q.awaitDrain&&(!re._writableState||re._writableState.needDrain)&&H()}ke.on("data",we);function we(at){c("ondata");var ot=re.write(at);c("dest.write",ot),ot===!1&&((q.pipesCount===1&&q.pipes===re||q.pipesCount>1&&fe(q.pipes,re)!==-1)&&!be&&(c("false write response, pause",q.awaitDrain),q.awaitDrain++),ke.pause())}function Re(at){c("onerror",at),Ke(),re.removeListener("error",Re),e(re,"error")===0&&F(re,at)}V(re,"error",Re);function De(){re.removeListener("finish",Ue),Ke()}re.once("close",De);function Ue(){c("onfinish"),re.removeListener("close",De),Ke()}re.once("finish",Ue);function Ke(){c("unpipe"),ke.unpipe(re)}return re.emit("pipe",ke),q.flowing||(c("pipe resume"),ke.resume()),re};function K(re){return function(){var ke=re._readableState;c("pipeOnDrain",ke.awaitDrain),ke.awaitDrain&&ke.awaitDrain--,ke.awaitDrain===0&&e(re,"data")&&(ke.flowing=!0,ae(re))}}O.prototype.unpipe=function(re){var he=this._readableState,ke={hasUnpiped:!1};if(he.pipesCount===0)return this;if(he.pipesCount===1)return re&&re!==he.pipes?this:(re||(re=he.pipes),he.pipes=null,he.pipesCount=0,he.flowing=!1,re&&re.emit("unpipe",this,ke),this);if(!re){var q=he.pipes,oe=he.pipesCount;he.pipes=null,he.pipesCount=0,he.flowing=!1;for(var Y=0;Y<oe;Y++)q[Y].emit("unpipe",this,{hasUnpiped:!1});return this}var I=fe(he.pipes,re);return I===-1?this:(he.pipes.splice(I,1),he.pipesCount-=1,he.pipesCount===1&&(he.pipes=he.pipes[0]),re.emit("unpipe",this,ke),this)},O.prototype.on=function(re,he){var ke=t.prototype.on.call(this,re,he),q=this._readableState;return re==="data"?(q.readableListening=this.listenerCount("readable")>0,q.flowing!==!1&&this.resume()):re==="readable"&&!q.endEmitted&&!q.readableListening&&(q.readableListening=q.needReadable=!0,q.flowing=!1,q.emittedReadable=!1,c("on readable",q.length,q.reading),q.length?ie(this):q.reading||un.nextTick($,this)),ke},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(re,he){var ke=t.prototype.removeListener.call(this,re,he);return re==="readable"&&un.nextTick(L,this),ke},O.prototype.removeAllListeners=function(re){var he=t.prototype.removeAllListeners.apply(this,arguments);return(re==="readable"||re===void 0)&&un.nextTick(L,this),he};function L(re){var he=re._readableState;he.readableListening=re.listenerCount("readable")>0,he.resumeScheduled&&!he.paused?he.flowing=!0:re.listenerCount("data")>0&&re.resume()}function $(re){c("readable nexttick read 0"),re.read(0)}O.prototype.resume=function(){var re=this._readableState;return re.flowing||(c("resume"),re.flowing=!re.readableListening,ee(this,re)),re.paused=!1,this};function ee(re,he){he.resumeScheduled||(he.resumeScheduled=!0,un.nextTick(pe,re,he))}function pe(re,he){c("resume",he.reading),he.reading||re.read(0),he.resumeScheduled=!1,re.emit("resume"),ae(re),he.flowing&&!he.reading&&re.read(0)}O.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ae(re){var he=re._readableState;for(c("flow",he.flowing);he.flowing&&re.read()!==null;);}O.prototype.wrap=function(re){var he=this,ke=this._readableState,q=!1;re.on("end",function(){if(c("wrapped end"),ke.decoder&&!ke.ended){var I=ke.decoder.end();I&&I.length&&he.push(I)}he.push(null)}),re.on("data",function(I){if(c("wrapped data"),ke.decoder&&(I=ke.decoder.write(I)),!(ke.objectMode&&I==null)&&!(!ke.objectMode&&(!I||!I.length))){var P=he.push(I);P||(q=!0,re.pause())}});for(var oe in re)this[oe]===void 0&&typeof re[oe]=="function"&&(this[oe]=(function(P){return function(){return re[P].apply(re,arguments)}})(oe));for(var Y=0;Y<J.length;Y++)re.on(J[Y],this.emit.bind(this,J[Y]));return this._read=function(I){c("wrapped _read",I),q&&(q=!1,re.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return C===void 0&&(C=tj()),C(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(he){this._readableState&&(this._readableState.flowing=he)}}),O._fromList=B,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function B(re,he){if(he.length===0)return null;var ke;return he.objectMode?ke=he.buffer.shift():!re||re>=he.length?(he.decoder?ke=he.buffer.join(""):he.buffer.length===1?ke=he.buffer.first():ke=he.buffer.concat(he.length),he.buffer.clear()):ke=he.buffer.consume(re,he.decoder),ke}function j(re){var he=re._readableState;c("endReadable",he.endEmitted),he.endEmitted||(he.ended=!0,un.nextTick(de,he,re))}function de(re,he){if(c("endReadableNT",re.endEmitted,re.length),!re.endEmitted&&re.length===0&&(re.endEmitted=!0,he.readable=!1,he.emit("end"),re.autoDestroy)){var ke=he._writableState;(!ke||ke.autoDestroy&&ke.finished)&&he.destroy()}}typeof Symbol=="function"&&(O.from=function(re,he){return A===void 0&&(A=nj()),A(O,re,he)});function fe(re,he){for(var ke=0,q=re.length;ke<q;ke++)if(re[ke]===he)return ke;return-1}return iv}var sv,vT;function DN(){if(vT)return sv;vT=1,sv=l;var n=yd().codes,e=n.ERR_METHOD_NOT_IMPLEMENTED,t=n.ERR_MULTIPLE_CALLBACK,r=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=n.ERR_TRANSFORM_WITH_LENGTH_0,s=nd();vu()(l,s);function u(h,g){var y=this._transformState;y.transforming=!1;var m=y.writecb;if(m===null)return this.emit("error",new t);y.writechunk=null,y.writecb=null,g!=null&&this.push(g),m(h);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function l(h){if(!(this instanceof l))return new l(h);s.call(this,h),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",c)}function c(){var h=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(g,y){f(h,g,y)}):f(this,null,null)}l.prototype.push=function(h,g){return this._transformState.needTransform=!1,s.prototype.push.call(this,h,g)},l.prototype._transform=function(h,g,y){y(new e("_transform()"))},l.prototype._write=function(h,g,y){var m=this._transformState;if(m.writecb=y,m.writechunk=h,m.writeencoding=g,!m.transforming){var E=this._readableState;(m.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},l.prototype._read=function(h){var g=this._transformState;g.writechunk!==null&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0},l.prototype._destroy=function(h,g){s.prototype._destroy.call(this,h,function(y){g(y)})};function f(h,g,y){if(g)return h.emit("error",g);if(y!=null&&h.push(y),h._writableState.length)throw new i;if(h._transformState.transforming)throw new r;return h.push(null)}return sv}var av,wT;function rj(){if(wT)return av;wT=1,av=e;var n=DN();vu()(e,n);function e(t){if(!(this instanceof e))return new e(t);n.call(this,t)}return e.prototype._transform=function(t,r,i){i(null,t)},av}var ov,bT;function ij(){if(bT)return ov;bT=1;var n;function e(y){var m=!1;return function(){m||(m=!0,y.apply(void 0,arguments))}}var t=yd().codes,r=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function s(y){if(y)throw y}function u(y){return y.setHeader&&typeof y.abort=="function"}function l(y,m,E,_){_=e(_);var R=!1;y.on("close",function(){R=!0}),n===void 0&&(n=Ub()),n(y,{readable:m,writable:E},function(N){if(N)return _(N);R=!0,_()});var b=!1;return function(N){if(!R&&!b){if(b=!0,u(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();_(N||new i("pipe"))}}}function c(y){y()}function f(y,m){return y.pipe(m)}function h(y){return!y.length||typeof y[y.length-1]!="function"?s:y.pop()}function g(){for(var y=arguments.length,m=new Array(y),E=0;E<y;E++)m[E]=arguments[E];var _=h(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new r("streams");var R,b=m.map(function(N,C){var A=C<m.length-1,F=C>0;return l(N,A,F,function(J){R||(R=J),J&&b.forEach(c),!A&&(b.forEach(c),_(R))})});return m.reduce(f)}return ov=g,ov}var lv,_T;function Fb(){if(_T)return lv;_T=1,lv=t;var n=Pb().EventEmitter,e=vu();e(t,n),t.Readable=ON(),t.Writable=MN(),t.Duplex=nd(),t.Transform=DN(),t.PassThrough=rj(),t.finished=Ub(),t.pipeline=ij(),t.Stream=t;function t(){n.call(this)}return t.prototype.pipe=function(r,i){var s=this;function u(m){r.writable&&r.write(m)===!1&&s.pause&&s.pause()}s.on("data",u);function l(){s.readable&&s.resume&&s.resume()}r.on("drain",l),!r._isStdio&&(!i||i.end!==!1)&&(s.on("end",f),s.on("close",h));var c=!1;function f(){c||(c=!0,r.end())}function h(){c||(c=!0,typeof r.destroy=="function"&&r.destroy())}function g(m){if(y(),n.listenerCount(this,"error")===0)throw m}s.on("error",g),r.on("error",g);function y(){s.removeListener("data",u),r.removeListener("drain",l),s.removeListener("end",f),s.removeListener("close",h),s.removeListener("error",g),r.removeListener("error",g),s.removeListener("end",y),s.removeListener("close",y),r.removeListener("close",y)}return s.on("end",y),s.on("close",y),r.on("close",y),r.emit("pipe",s),r},lv}var ST;function sj(){return ST||(ST=1,(function(n){(function(e){e.parser=function(B,j){return new r(B,j)},e.SAXParser=r,e.SAXStream=h,e.createStream=f,e.MAX_BUFFER_LENGTH=64*1024;var t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(B,j){if(!(this instanceof r))return new r(B,j);var de=this;s(de),de.q=de.c="",de.bufferCheckPosition=e.MAX_BUFFER_LENGTH,de.opt=j||{},de.opt.lowercase=de.opt.lowercase||de.opt.lowercasetags,de.looseCase=de.opt.lowercase?"toLowerCase":"toUpperCase",de.tags=[],de.closed=de.closedRoot=de.sawRoot=!1,de.tag=de.error=null,de.strict=!!B,de.noscript=!!(B||de.opt.noscript),de.state=O.BEGIN,de.strictEntities=de.opt.strictEntities,de.ENTITIES=de.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),de.attribList=[],de.opt.xmlns&&(de.ns=Object.create(_)),de.trackPosition=de.opt.position!==!1,de.trackPosition&&(de.position=de.line=de.column=0),Q(de,"onready")}Object.create||(Object.create=function(B){function j(){}j.prototype=B;var de=new j;return de}),Object.keys||(Object.keys=function(B){var j=[];for(var de in B)B.hasOwnProperty(de)&&j.push(de);return j});function i(B){for(var j=Math.max(e.MAX_BUFFER_LENGTH,10),de=0,fe=0,re=t.length;fe<re;fe++){var he=B[t[fe]].length;if(he>j)switch(t[fe]){case"textNode":X(B);break;case"cdata":U(B,"oncdata",B.cdata),B.cdata="";break;case"script":U(B,"onscript",B.script),B.script="";break;default:ye(B,"Max buffer length exceeded: "+t[fe])}de=Math.max(de,he)}var ke=e.MAX_BUFFER_LENGTH-de;B.bufferCheckPosition=ke+B.position}function s(B){for(var j=0,de=t.length;j<de;j++)B[t[j]]=""}function u(B){X(B),B.cdata!==""&&(U(B,"oncdata",B.cdata),B.cdata=""),B.script!==""&&(U(B,"onscript",B.script),B.script="")}r.prototype={end:function(){se(this)},write:ae,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){u(this)}};var l;try{l=Fb().Stream}catch{l=function(){}}var c=e.EVENTS.filter(function(B){return B!=="error"&&B!=="end"});function f(B,j){return new h(B,j)}function h(B,j){if(!(this instanceof h))return new h(B,j);l.apply(this),this._parser=new r(B,j),this.writable=!0,this.readable=!0;var de=this;this._parser.onend=function(){de.emit("end")},this._parser.onerror=function(fe){de.emit("error",fe),de._parser.error=null},this._decoder=null,c.forEach(function(fe){Object.defineProperty(de,"on"+fe,{get:function(){return de._parser["on"+fe]},set:function(re){if(!re)return de.removeAllListeners(fe),de._parser["on"+fe]=re,re;de.on(fe,re)},enumerable:!0,configurable:!1})})}h.prototype=Object.create(l.prototype,{constructor:{value:h}}),h.prototype.write=function(B){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(B)){if(!this._decoder){var j=Uw().StringDecoder;this._decoder=new j("utf8")}B=this._decoder.write(B)}return this._parser.write(B.toString()),this.emit("data",B),!0},h.prototype.end=function(B){return B&&B.length&&this.write(B),this._parser.end(),!0},h.prototype.on=function(B,j){var de=this;return!de._parser["on"+B]&&c.indexOf(B)!==-1&&(de._parser["on"+B]=function(){var fe=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);fe.splice(0,0,B),de.emit.apply(de,fe)}),l.prototype.on.call(de,B,j)};var g="[CDATA[",y="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",_={xml:m,xmlns:E},R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function A(B){return B===" "||B===`
`||B==="\r"||B==="	"}function F(B){return B==='"'||B==="'"}function J(B){return B===">"||A(B)}function V(B,j){return B.test(j)}function te(B,j){return!V(B,j)}var O=0;e.STATE={BEGIN:O++,BEGIN_WHITESPACE:O++,TEXT:O++,TEXT_ENTITY:O++,OPEN_WAKA:O++,SGML_DECL:O++,SGML_DECL_QUOTED:O++,DOCTYPE:O++,DOCTYPE_QUOTED:O++,DOCTYPE_DTD:O++,DOCTYPE_DTD_QUOTED:O++,COMMENT_STARTING:O++,COMMENT:O++,COMMENT_ENDING:O++,COMMENT_ENDED:O++,CDATA:O++,CDATA_ENDING:O++,CDATA_ENDING_2:O++,PROC_INST:O++,PROC_INST_BODY:O++,PROC_INST_ENDING:O++,OPEN_TAG:O++,OPEN_TAG_SLASH:O++,ATTRIB:O++,ATTRIB_NAME:O++,ATTRIB_NAME_SAW_WHITE:O++,ATTRIB_VALUE:O++,ATTRIB_VALUE_QUOTED:O++,ATTRIB_VALUE_CLOSED:O++,ATTRIB_VALUE_UNQUOTED:O++,ATTRIB_VALUE_ENTITY_Q:O++,ATTRIB_VALUE_ENTITY_U:O++,CLOSE_TAG:O++,CLOSE_TAG_SAW_WHITE:O++,SCRIPT:O++,SCRIPT_ENDING:O++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(B){var j=e.ENTITIES[B],de=typeof j=="number"?String.fromCharCode(j):j;e.ENTITIES[B]=de});for(var le in e.STATE)e.STATE[e.STATE[le]]=le;O=e.STATE;function Q(B,j,de){B[j]&&B[j](de)}function U(B,j,de){B.textNode&&X(B),Q(B,j,de)}function X(B){B.textNode=M(B.opt,B.textNode),B.textNode&&Q(B,"ontext",B.textNode),B.textNode=""}function M(B,j){return B.trim&&(j=j.trim()),B.normalize&&(j=j.replace(/\s+/g," ")),j}function ye(B,j){return X(B),B.trackPosition&&(j+=`
Line: `+B.line+`
Column: `+B.column+`
Char: `+B.c),j=new Error(j),B.error=j,Q(B,"onerror",j),B}function se(B){return B.sawRoot&&!B.closedRoot&&ie(B,"Unclosed root tag"),B.state!==O.BEGIN&&B.state!==O.BEGIN_WHITESPACE&&B.state!==O.TEXT&&ye(B,"Unexpected end"),X(B),B.c="",B.closed=!0,Q(B,"onend"),r.call(B,B.strict,B.opt),B}function ie(B,j){if(typeof B!="object"||!(B instanceof r))throw new Error("bad call to strictFail");B.strict&&ye(B,j)}function Se(B){B.strict||(B.tagName=B.tagName[B.looseCase]());var j=B.tags[B.tags.length-1]||B,de=B.tag={name:B.tagName,attributes:{}};B.opt.xmlns&&(de.ns=j.ns),B.attribList.length=0,U(B,"onopentagstart",de)}function me(B,j){var de=B.indexOf(":"),fe=de<0?["",B]:B.split(":"),re=fe[0],he=fe[1];return j&&B==="xmlns"&&(re="xmlns",he=""),{prefix:re,local:he}}function Ne(B){if(B.strict||(B.attribName=B.attribName[B.looseCase]()),B.attribList.indexOf(B.attribName)!==-1||B.tag.attributes.hasOwnProperty(B.attribName)){B.attribName=B.attribValue="";return}if(B.opt.xmlns){var j=me(B.attribName,!0),de=j.prefix,fe=j.local;if(de==="xmlns")if(fe==="xml"&&B.attribValue!==m)ie(B,"xml: prefix must be bound to "+m+`
Actual: `+B.attribValue);else if(fe==="xmlns"&&B.attribValue!==E)ie(B,"xmlns: prefix must be bound to "+E+`
Actual: `+B.attribValue);else{var re=B.tag,he=B.tags[B.tags.length-1]||B;re.ns===he.ns&&(re.ns=Object.create(he.ns)),re.ns[fe]=B.attribValue}B.attribList.push([B.attribName,B.attribValue])}else B.tag.attributes[B.attribName]=B.attribValue,U(B,"onattribute",{name:B.attribName,value:B.attribValue});B.attribName=B.attribValue=""}function K(B,j){if(B.opt.xmlns){var de=B.tag,fe=me(B.tagName);de.prefix=fe.prefix,de.local=fe.local,de.uri=de.ns[fe.prefix]||"",de.prefix&&!de.uri&&(ie(B,"Unbound namespace prefix: "+JSON.stringify(B.tagName)),de.uri=fe.prefix);var re=B.tags[B.tags.length-1]||B;de.ns&&re.ns!==de.ns&&Object.keys(de.ns).forEach(function(we){U(B,"onopennamespace",{prefix:we,uri:de.ns[we]})});for(var he=0,ke=B.attribList.length;he<ke;he++){var q=B.attribList[he],oe=q[0],Y=q[1],I=me(oe,!0),P=I.prefix,H=I.local,be=P===""?"":de.ns[P]||"",ne={name:oe,value:Y,prefix:P,local:H,uri:be};P&&P!=="xmlns"&&!be&&(ie(B,"Unbound namespace prefix: "+JSON.stringify(P)),ne.uri=P),B.tag.attributes[oe]=ne,U(B,"onattribute",ne)}B.attribList.length=0}B.tag.isSelfClosing=!!j,B.sawRoot=!0,B.tags.push(B.tag),U(B,"onopentag",B.tag),j||(!B.noscript&&B.tagName.toLowerCase()==="script"?B.state=O.SCRIPT:B.state=O.TEXT,B.tag=null,B.tagName=""),B.attribName=B.attribValue="",B.attribList.length=0}function L(B){if(!B.tagName){ie(B,"Weird empty close tag."),B.textNode+="</>",B.state=O.TEXT;return}if(B.script){if(B.tagName!=="script"){B.script+="</"+B.tagName+">",B.tagName="",B.state=O.SCRIPT;return}U(B,"onscript",B.script),B.script=""}var j=B.tags.length,de=B.tagName;B.strict||(de=de[B.looseCase]());for(var fe=de;j--;){var re=B.tags[j];if(re.name!==fe)ie(B,"Unexpected close tag");else break}if(j<0){ie(B,"Unmatched closing tag: "+B.tagName),B.textNode+="</"+B.tagName+">",B.state=O.TEXT;return}B.tagName=de;for(var he=B.tags.length;he-- >j;){var ke=B.tag=B.tags.pop();B.tagName=B.tag.name,U(B,"onclosetag",B.tagName);var q={};for(var oe in ke.ns)q[oe]=ke.ns[oe];var Y=B.tags[B.tags.length-1]||B;B.opt.xmlns&&ke.ns!==Y.ns&&Object.keys(ke.ns).forEach(function(I){var P=ke.ns[I];U(B,"onclosenamespace",{prefix:I,uri:P})})}j===0&&(B.closedRoot=!0),B.tagName=B.attribValue=B.attribName="",B.attribList.length=0,B.state=O.TEXT}function $(B){var j=B.entity,de=j.toLowerCase(),fe,re="";return B.ENTITIES[j]?B.ENTITIES[j]:B.ENTITIES[de]?B.ENTITIES[de]:(j=de,j.charAt(0)==="#"&&(j.charAt(1)==="x"?(j=j.slice(2),fe=parseInt(j,16),re=fe.toString(16)):(j=j.slice(1),fe=parseInt(j,10),re=fe.toString(10))),j=j.replace(/^0+/,""),isNaN(fe)||re.toLowerCase()!==j?(ie(B,"Invalid character entity"),"&"+B.entity+";"):String.fromCodePoint(fe))}function ee(B,j){j==="<"?(B.state=O.OPEN_WAKA,B.startTagPosition=B.position):A(j)||(ie(B,"Non-whitespace before first tag."),B.textNode=j,B.state=O.TEXT)}function pe(B,j){var de="";return j<B.length&&(de=B.charAt(j)),de}function ae(B){var j=this;if(this.error)throw this.error;if(j.closed)return ye(j,"Cannot write after close. Assign an onready handler.");if(B===null)return se(j);typeof B=="object"&&(B=B.toString());for(var de=0,fe="";fe=pe(B,de++),j.c=fe,!!fe;)switch(j.trackPosition&&(j.position++,fe===`
`?(j.line++,j.column=0):j.column++),j.state){case O.BEGIN:if(j.state=O.BEGIN_WHITESPACE,fe==="\uFEFF")continue;ee(j,fe);continue;case O.BEGIN_WHITESPACE:ee(j,fe);continue;case O.TEXT:if(j.sawRoot&&!j.closedRoot){for(var re=de-1;fe&&fe!=="<"&&fe!=="&";)fe=pe(B,de++),fe&&j.trackPosition&&(j.position++,fe===`
`?(j.line++,j.column=0):j.column++);j.textNode+=B.substring(re,de-1)}fe==="<"&&!(j.sawRoot&&j.closedRoot&&!j.strict)?(j.state=O.OPEN_WAKA,j.startTagPosition=j.position):(!A(fe)&&(!j.sawRoot||j.closedRoot)&&ie(j,"Text data outside of root node."),fe==="&"?j.state=O.TEXT_ENTITY:j.textNode+=fe);continue;case O.SCRIPT:fe==="<"?j.state=O.SCRIPT_ENDING:j.script+=fe;continue;case O.SCRIPT_ENDING:fe==="/"?j.state=O.CLOSE_TAG:(j.script+="<"+fe,j.state=O.SCRIPT);continue;case O.OPEN_WAKA:if(fe==="!")j.state=O.SGML_DECL,j.sgmlDecl="";else if(!A(fe))if(V(R,fe))j.state=O.OPEN_TAG,j.tagName=fe;else if(fe==="/")j.state=O.CLOSE_TAG,j.tagName="";else if(fe==="?")j.state=O.PROC_INST,j.procInstName=j.procInstBody="";else{if(ie(j,"Unencoded <"),j.startTagPosition+1<j.position){var he=j.position-j.startTagPosition;fe=new Array(he).join(" ")+fe}j.textNode+="<"+fe,j.state=O.TEXT}continue;case O.SGML_DECL:(j.sgmlDecl+fe).toUpperCase()===g?(U(j,"onopencdata"),j.state=O.CDATA,j.sgmlDecl="",j.cdata=""):j.sgmlDecl+fe==="--"?(j.state=O.COMMENT,j.comment="",j.sgmlDecl=""):(j.sgmlDecl+fe).toUpperCase()===y?(j.state=O.DOCTYPE,(j.doctype||j.sawRoot)&&ie(j,"Inappropriately located doctype declaration"),j.doctype="",j.sgmlDecl=""):fe===">"?(U(j,"onsgmldeclaration",j.sgmlDecl),j.sgmlDecl="",j.state=O.TEXT):(F(fe)&&(j.state=O.SGML_DECL_QUOTED),j.sgmlDecl+=fe);continue;case O.SGML_DECL_QUOTED:fe===j.q&&(j.state=O.SGML_DECL,j.q=""),j.sgmlDecl+=fe;continue;case O.DOCTYPE:fe===">"?(j.state=O.TEXT,U(j,"ondoctype",j.doctype),j.doctype=!0):(j.doctype+=fe,fe==="["?j.state=O.DOCTYPE_DTD:F(fe)&&(j.state=O.DOCTYPE_QUOTED,j.q=fe));continue;case O.DOCTYPE_QUOTED:j.doctype+=fe,fe===j.q&&(j.q="",j.state=O.DOCTYPE);continue;case O.DOCTYPE_DTD:j.doctype+=fe,fe==="]"?j.state=O.DOCTYPE:F(fe)&&(j.state=O.DOCTYPE_DTD_QUOTED,j.q=fe);continue;case O.DOCTYPE_DTD_QUOTED:j.doctype+=fe,fe===j.q&&(j.state=O.DOCTYPE_DTD,j.q="");continue;case O.COMMENT:fe==="-"?j.state=O.COMMENT_ENDING:j.comment+=fe;continue;case O.COMMENT_ENDING:fe==="-"?(j.state=O.COMMENT_ENDED,j.comment=M(j.opt,j.comment),j.comment&&U(j,"oncomment",j.comment),j.comment=""):(j.comment+="-"+fe,j.state=O.COMMENT);continue;case O.COMMENT_ENDED:fe!==">"?(ie(j,"Malformed comment"),j.comment+="--"+fe,j.state=O.COMMENT):j.state=O.TEXT;continue;case O.CDATA:fe==="]"?j.state=O.CDATA_ENDING:j.cdata+=fe;continue;case O.CDATA_ENDING:fe==="]"?j.state=O.CDATA_ENDING_2:(j.cdata+="]"+fe,j.state=O.CDATA);continue;case O.CDATA_ENDING_2:fe===">"?(j.cdata&&U(j,"oncdata",j.cdata),U(j,"onclosecdata"),j.cdata="",j.state=O.TEXT):fe==="]"?j.cdata+="]":(j.cdata+="]]"+fe,j.state=O.CDATA);continue;case O.PROC_INST:fe==="?"?j.state=O.PROC_INST_ENDING:A(fe)?j.state=O.PROC_INST_BODY:j.procInstName+=fe;continue;case O.PROC_INST_BODY:if(!j.procInstBody&&A(fe))continue;fe==="?"?j.state=O.PROC_INST_ENDING:j.procInstBody+=fe;continue;case O.PROC_INST_ENDING:fe===">"?(U(j,"onprocessinginstruction",{name:j.procInstName,body:j.procInstBody}),j.procInstName=j.procInstBody="",j.state=O.TEXT):(j.procInstBody+="?"+fe,j.state=O.PROC_INST_BODY);continue;case O.OPEN_TAG:V(b,fe)?j.tagName+=fe:(Se(j),fe===">"?K(j):fe==="/"?j.state=O.OPEN_TAG_SLASH:(A(fe)||ie(j,"Invalid character in tag name"),j.state=O.ATTRIB));continue;case O.OPEN_TAG_SLASH:fe===">"?(K(j,!0),L(j)):(ie(j,"Forward-slash in opening tag not followed by >"),j.state=O.ATTRIB);continue;case O.ATTRIB:if(A(fe))continue;fe===">"?K(j):fe==="/"?j.state=O.OPEN_TAG_SLASH:V(R,fe)?(j.attribName=fe,j.attribValue="",j.state=O.ATTRIB_NAME):ie(j,"Invalid attribute name");continue;case O.ATTRIB_NAME:fe==="="?j.state=O.ATTRIB_VALUE:fe===">"?(ie(j,"Attribute without value"),j.attribValue=j.attribName,Ne(j),K(j)):A(fe)?j.state=O.ATTRIB_NAME_SAW_WHITE:V(b,fe)?j.attribName+=fe:ie(j,"Invalid attribute name");continue;case O.ATTRIB_NAME_SAW_WHITE:if(fe==="=")j.state=O.ATTRIB_VALUE;else{if(A(fe))continue;ie(j,"Attribute without value"),j.tag.attributes[j.attribName]="",j.attribValue="",U(j,"onattribute",{name:j.attribName,value:""}),j.attribName="",fe===">"?K(j):V(R,fe)?(j.attribName=fe,j.state=O.ATTRIB_NAME):(ie(j,"Invalid attribute name"),j.state=O.ATTRIB)}continue;case O.ATTRIB_VALUE:if(A(fe))continue;F(fe)?(j.q=fe,j.state=O.ATTRIB_VALUE_QUOTED):(ie(j,"Unquoted attribute value"),j.state=O.ATTRIB_VALUE_UNQUOTED,j.attribValue=fe);continue;case O.ATTRIB_VALUE_QUOTED:if(fe!==j.q){fe==="&"?j.state=O.ATTRIB_VALUE_ENTITY_Q:j.attribValue+=fe;continue}Ne(j),j.q="",j.state=O.ATTRIB_VALUE_CLOSED;continue;case O.ATTRIB_VALUE_CLOSED:A(fe)?j.state=O.ATTRIB:fe===">"?K(j):fe==="/"?j.state=O.OPEN_TAG_SLASH:V(R,fe)?(ie(j,"No whitespace between attributes"),j.attribName=fe,j.attribValue="",j.state=O.ATTRIB_NAME):ie(j,"Invalid attribute name");continue;case O.ATTRIB_VALUE_UNQUOTED:if(!J(fe)){fe==="&"?j.state=O.ATTRIB_VALUE_ENTITY_U:j.attribValue+=fe;continue}Ne(j),fe===">"?K(j):j.state=O.ATTRIB;continue;case O.CLOSE_TAG:if(j.tagName)fe===">"?L(j):V(b,fe)?j.tagName+=fe:j.script?(j.script+="</"+j.tagName,j.tagName="",j.state=O.SCRIPT):(A(fe)||ie(j,"Invalid tagname in closing tag"),j.state=O.CLOSE_TAG_SAW_WHITE);else{if(A(fe))continue;te(R,fe)?j.script?(j.script+="</"+fe,j.state=O.SCRIPT):ie(j,"Invalid tagname in closing tag."):j.tagName=fe}continue;case O.CLOSE_TAG_SAW_WHITE:if(A(fe))continue;fe===">"?L(j):ie(j,"Invalid characters in closing tag");continue;case O.TEXT_ENTITY:case O.ATTRIB_VALUE_ENTITY_Q:case O.ATTRIB_VALUE_ENTITY_U:var ke,q;switch(j.state){case O.TEXT_ENTITY:ke=O.TEXT,q="textNode";break;case O.ATTRIB_VALUE_ENTITY_Q:ke=O.ATTRIB_VALUE_QUOTED,q="attribValue";break;case O.ATTRIB_VALUE_ENTITY_U:ke=O.ATTRIB_VALUE_UNQUOTED,q="attribValue";break}fe===";"?(j[q]+=$(j),j.entity="",j.state=ke):V(j.entity.length?C:N,fe)?j.entity+=fe:(ie(j,"Invalid character in entity name"),j[q]+="&"+j.entity+fe,j.entity="",j.state=ke);continue;default:throw new Error(j,"Unknown state: "+j.state)}return j.position>=j.bufferCheckPosition&&i(j),j}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var B=String.fromCharCode,j=Math.floor,de=function(){var fe=16384,re=[],he,ke,q=-1,oe=arguments.length;if(!oe)return"";for(var Y="";++q<oe;){var I=Number(arguments[q]);if(!isFinite(I)||I<0||I>1114111||j(I)!==I)throw RangeError("Invalid code point: "+I);I<=65535?re.push(I):(I-=65536,he=(I>>10)+55296,ke=I%1024+56320,re.push(he,ke)),(q+1===oe||re.length>fe)&&(Y+=B.apply(null,re),re.length=0)}return Y};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:de,configurable:!0,writable:!0}):String.fromCodePoint=de})()})(n)})(Wy)),Wy}var uv,xT;function Bb(){return xT||(xT=1,uv={isArray:function(n){return Array.isArray?Array.isArray(n):Object.prototype.toString.call(n)==="[object Array]"}}),uv}var cv,AT;function qb(){if(AT)return cv;AT=1;var n=Bb().isArray;return cv={copyOptions:function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r},ensureFlagExists:function(e,t){(!(e in t)||typeof t[e]!="boolean")&&(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!n(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,t){(!(e+"Key"in t)||typeof t[e+"Key"]!="string")&&(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}},cv}var fv,ET;function UN(){if(ET)return fv;ET=1;var n=sj(),e=qb(),t=Bb().isArray,r,i;function s(b){return r=e.copyOptions(b),e.ensureFlagExists("ignoreDeclaration",r),e.ensureFlagExists("ignoreInstruction",r),e.ensureFlagExists("ignoreAttributes",r),e.ensureFlagExists("ignoreText",r),e.ensureFlagExists("ignoreComment",r),e.ensureFlagExists("ignoreCdata",r),e.ensureFlagExists("ignoreDoctype",r),e.ensureFlagExists("compact",r),e.ensureFlagExists("alwaysChildren",r),e.ensureFlagExists("addParent",r),e.ensureFlagExists("trim",r),e.ensureFlagExists("nativeType",r),e.ensureFlagExists("nativeTypeAttributes",r),e.ensureFlagExists("sanitize",r),e.ensureFlagExists("instructionHasAttributes",r),e.ensureFlagExists("captureSpacesBetweenElements",r),e.ensureAlwaysArrayExists(r),e.ensureKeyExists("declaration",r),e.ensureKeyExists("instruction",r),e.ensureKeyExists("attributes",r),e.ensureKeyExists("text",r),e.ensureKeyExists("comment",r),e.ensureKeyExists("cdata",r),e.ensureKeyExists("doctype",r),e.ensureKeyExists("type",r),e.ensureKeyExists("name",r),e.ensureKeyExists("elements",r),e.ensureKeyExists("parent",r),e.checkFnExists("doctype",r),e.checkFnExists("instruction",r),e.checkFnExists("cdata",r),e.checkFnExists("comment",r),e.checkFnExists("text",r),e.checkFnExists("instructionName",r),e.checkFnExists("elementName",r),e.checkFnExists("attributeName",r),e.checkFnExists("attributeValue",r),e.checkFnExists("attributes",r),r}function u(b){var N=Number(b);if(!isNaN(N))return N;var C=b.toLowerCase();return C==="true"?!0:C==="false"?!1:b}function l(b,N){var C;if(r.compact){if(!i[r[b+"Key"]]&&(t(r.alwaysArray)?r.alwaysArray.indexOf(r[b+"Key"])!==-1:r.alwaysArray)&&(i[r[b+"Key"]]=[]),i[r[b+"Key"]]&&!t(i[r[b+"Key"]])&&(i[r[b+"Key"]]=[i[r[b+"Key"]]]),b+"Fn"in r&&typeof N=="string"&&(N=r[b+"Fn"](N,i)),b==="instruction"&&("instructionFn"in r||"instructionNameFn"in r)){for(C in N)if(N.hasOwnProperty(C))if("instructionFn"in r)N[C]=r.instructionFn(N[C],C,i);else{var A=N[C];delete N[C],N[r.instructionNameFn(C,A,i)]=A}}t(i[r[b+"Key"]])?i[r[b+"Key"]].push(N):i[r[b+"Key"]]=N}else{i[r.elementsKey]||(i[r.elementsKey]=[]);var F={};if(F[r.typeKey]=b,b==="instruction"){for(C in N)if(N.hasOwnProperty(C))break;F[r.nameKey]="instructionNameFn"in r?r.instructionNameFn(C,N,i):C,r.instructionHasAttributes?(F[r.attributesKey]=N[C][r.attributesKey],"instructionFn"in r&&(F[r.attributesKey]=r.instructionFn(F[r.attributesKey],C,i))):("instructionFn"in r&&(N[C]=r.instructionFn(N[C],C,i)),F[r.instructionKey]=N[C])}else b+"Fn"in r&&(N=r[b+"Fn"](N,i)),F[r[b+"Key"]]=N;r.addParent&&(F[r.parentKey]=i),i[r.elementsKey].push(F)}}function c(b){if("attributesFn"in r&&b&&(b=r.attributesFn(b,i)),(r.trim||"attributeValueFn"in r||"attributeNameFn"in r||r.nativeTypeAttributes)&&b){var N;for(N in b)if(b.hasOwnProperty(N)&&(r.trim&&(b[N]=b[N].trim()),r.nativeTypeAttributes&&(b[N]=u(b[N])),"attributeValueFn"in r&&(b[N]=r.attributeValueFn(b[N],N,i)),"attributeNameFn"in r)){var C=b[N];delete b[N],b[r.attributeNameFn(N,b[N],i)]=C}}return b}function f(b){var N={};if(b.body&&(b.name.toLowerCase()==="xml"||r.instructionHasAttributes)){for(var C=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,A;(A=C.exec(b.body))!==null;)N[A[1]]=A[2]||A[3]||A[4];N=c(N)}if(b.name.toLowerCase()==="xml"){if(r.ignoreDeclaration)return;i[r.declarationKey]={},Object.keys(N).length&&(i[r.declarationKey][r.attributesKey]=N),r.addParent&&(i[r.declarationKey][r.parentKey]=i)}else{if(r.ignoreInstruction)return;r.trim&&(b.body=b.body.trim());var F={};r.instructionHasAttributes&&Object.keys(N).length?(F[b.name]={},F[b.name][r.attributesKey]=N):F[b.name]=b.body,l("instruction",F)}}function h(b,N){var C;if(typeof b=="object"&&(N=b.attributes,b=b.name),N=c(N),"elementNameFn"in r&&(b=r.elementNameFn(b,i)),r.compact){if(C={},!r.ignoreAttributes&&N&&Object.keys(N).length){C[r.attributesKey]={};var A;for(A in N)N.hasOwnProperty(A)&&(C[r.attributesKey][A]=N[A])}!(b in i)&&(t(r.alwaysArray)?r.alwaysArray.indexOf(b)!==-1:r.alwaysArray)&&(i[b]=[]),i[b]&&!t(i[b])&&(i[b]=[i[b]]),t(i[b])?i[b].push(C):i[b]=C}else i[r.elementsKey]||(i[r.elementsKey]=[]),C={},C[r.typeKey]="element",C[r.nameKey]=b,!r.ignoreAttributes&&N&&Object.keys(N).length&&(C[r.attributesKey]=N),r.alwaysChildren&&(C[r.elementsKey]=[]),i[r.elementsKey].push(C);C[r.parentKey]=i,i=C}function g(b){r.ignoreText||!b.trim()&&!r.captureSpacesBetweenElements||(r.trim&&(b=b.trim()),r.nativeType&&(b=u(b)),r.sanitize&&(b=b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l("text",b))}function y(b){r.ignoreComment||(r.trim&&(b=b.trim()),l("comment",b))}function m(b){var N=i[r.parentKey];r.addParent||delete i[r.parentKey],i=N}function E(b){r.ignoreCdata||(r.trim&&(b=b.trim()),l("cdata",b))}function _(b){r.ignoreDoctype||(b=b.replace(/^ /,""),r.trim&&(b=b.trim()),l("doctype",b))}function R(b){b.note=b}return fv=function(b,N){var C=n.parser(!0,{}),A={};if(i=A,r=s(N),C.opt={strictEntities:!0},C.onopentag=h,C.ontext=g,C.oncomment=y,C.onclosetag=m,C.onerror=R,C.oncdata=E,C.ondoctype=_,C.onprocessinginstruction=f,C.write(b).close(),A[r.elementsKey]){var F=A[r.elementsKey];delete A[r.elementsKey],A[r.elementsKey]=F,delete A.text}return A},fv}var dv,TT;function aj(){if(TT)return dv;TT=1;var n=qb(),e=UN();function t(r){var i=n.copyOptions(r);return n.ensureSpacesExists(i),i}return dv=function(r,i){var s,u,l,c;return s=t(i),u=e(r,s),c="compact"in s&&s.compact?"_parent":"parent","addParent"in s&&s.addParent?l=JSON.stringify(u,function(f,h){return f===c?"_":h},s.spaces):l=JSON.stringify(u,null,s.spaces),l.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},dv}var hv,CT;function FN(){if(CT)return hv;CT=1;var n=qb(),e=Bb().isArray,t,r;function i(C){var A=n.copyOptions(C);return n.ensureFlagExists("ignoreDeclaration",A),n.ensureFlagExists("ignoreInstruction",A),n.ensureFlagExists("ignoreAttributes",A),n.ensureFlagExists("ignoreText",A),n.ensureFlagExists("ignoreComment",A),n.ensureFlagExists("ignoreCdata",A),n.ensureFlagExists("ignoreDoctype",A),n.ensureFlagExists("compact",A),n.ensureFlagExists("indentText",A),n.ensureFlagExists("indentCdata",A),n.ensureFlagExists("indentAttributes",A),n.ensureFlagExists("indentInstruction",A),n.ensureFlagExists("fullTagEmptyElement",A),n.ensureFlagExists("noQuotesForNativeAttributes",A),n.ensureSpacesExists(A),typeof A.spaces=="number"&&(A.spaces=Array(A.spaces+1).join(" ")),n.ensureKeyExists("declaration",A),n.ensureKeyExists("instruction",A),n.ensureKeyExists("attributes",A),n.ensureKeyExists("text",A),n.ensureKeyExists("comment",A),n.ensureKeyExists("cdata",A),n.ensureKeyExists("doctype",A),n.ensureKeyExists("type",A),n.ensureKeyExists("name",A),n.ensureKeyExists("elements",A),n.checkFnExists("doctype",A),n.checkFnExists("instruction",A),n.checkFnExists("cdata",A),n.checkFnExists("comment",A),n.checkFnExists("text",A),n.checkFnExists("instructionName",A),n.checkFnExists("elementName",A),n.checkFnExists("attributeName",A),n.checkFnExists("attributeValue",A),n.checkFnExists("attributes",A),n.checkFnExists("fullTagEmptyElement",A),A}function s(C,A,F){return(!F&&C.spaces?`
`:"")+Array(A+1).join(C.spaces)}function u(C,A,F){if(A.ignoreAttributes)return"";"attributesFn"in A&&(C=A.attributesFn(C,r,t));var J,V,te,O,le=[];for(J in C)C.hasOwnProperty(J)&&C[J]!==null&&C[J]!==void 0&&(O=A.noQuotesForNativeAttributes&&typeof C[J]!="string"?"":'"',V=""+C[J],V=V.replace(/"/g,"&quot;"),te="attributeNameFn"in A?A.attributeNameFn(J,V,r,t):J,le.push(A.spaces&&A.indentAttributes?s(A,F+1,!1):" "),le.push(te+"="+O+("attributeValueFn"in A?A.attributeValueFn(V,J,r,t):V)+O));return C&&Object.keys(C).length&&A.spaces&&A.indentAttributes&&le.push(s(A,F,!1)),le.join("")}function l(C,A,F){return t=C,r="xml",A.ignoreDeclaration?"":"<?xml"+u(C[A.attributesKey],A,F)+"?>"}function c(C,A,F){if(A.ignoreInstruction)return"";var J;for(J in C)if(C.hasOwnProperty(J))break;var V="instructionNameFn"in A?A.instructionNameFn(J,C[J],r,t):J;if(typeof C[J]=="object")return t=C,r=V,"<?"+V+u(C[J][A.attributesKey],A,F)+"?>";var te=C[J]?C[J]:"";return"instructionFn"in A&&(te=A.instructionFn(te,J,r,t)),"<?"+V+(te?" "+te:"")+"?>"}function f(C,A){return A.ignoreComment?"":"<!--"+("commentFn"in A?A.commentFn(C,r,t):C)+"-->"}function h(C,A){return A.ignoreCdata?"":"<![CDATA["+("cdataFn"in A?A.cdataFn(C,r,t):C.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function g(C,A){return A.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in A?A.doctypeFn(C,r,t):C)+">"}function y(C,A){return A.ignoreText?"":(C=""+C,C=C.replace(/&amp;/g,"&"),C=C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in A?A.textFn(C,r,t):C)}function m(C,A){var F;if(C.elements&&C.elements.length)for(F=0;F<C.elements.length;++F)switch(C.elements[F][A.typeKey]){case"text":if(A.indentText)return!0;break;case"cdata":if(A.indentCdata)return!0;break;case"instruction":if(A.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function E(C,A,F){t=C,r=C.name;var J=[],V="elementNameFn"in A?A.elementNameFn(C.name,C):C.name;J.push("<"+V),C[A.attributesKey]&&J.push(u(C[A.attributesKey],A,F));var te=C[A.elementsKey]&&C[A.elementsKey].length||C[A.attributesKey]&&C[A.attributesKey]["xml:space"]==="preserve";return te||("fullTagEmptyElementFn"in A?te=A.fullTagEmptyElementFn(C.name,C):te=A.fullTagEmptyElement),te?(J.push(">"),C[A.elementsKey]&&C[A.elementsKey].length&&(J.push(_(C[A.elementsKey],A,F+1)),t=C,r=C.name),J.push(A.spaces&&m(C,A)?`
`+Array(F+1).join(A.spaces):""),J.push("</"+V+">")):J.push("/>"),J.join("")}function _(C,A,F,J){return C.reduce(function(V,te){var O=s(A,F,J&&!V);switch(te.type){case"element":return V+O+E(te,A,F);case"comment":return V+O+f(te[A.commentKey],A);case"doctype":return V+O+g(te[A.doctypeKey],A);case"cdata":return V+(A.indentCdata?O:"")+h(te[A.cdataKey],A);case"text":return V+(A.indentText?O:"")+y(te[A.textKey],A);case"instruction":var le={};return le[te[A.nameKey]]=te[A.attributesKey]?te:te[A.instructionKey],V+(A.indentInstruction?O:"")+c(le,A,F)}},"")}function R(C,A,F){var J;for(J in C)if(C.hasOwnProperty(J))switch(J){case A.parentKey:case A.attributesKey:break;case A.textKey:if(A.indentText||F)return!0;break;case A.cdataKey:if(A.indentCdata||F)return!0;break;case A.instructionKey:if(A.indentInstruction||F)return!0;break;case A.doctypeKey:case A.commentKey:return!0;default:return!0}return!1}function b(C,A,F,J,V){t=C,r=A;var te="elementNameFn"in F?F.elementNameFn(A,C):A;if(typeof C>"u"||C===null||C==="")return"fullTagEmptyElementFn"in F&&F.fullTagEmptyElementFn(A,C)||F.fullTagEmptyElement?"<"+te+"></"+te+">":"<"+te+"/>";var O=[];if(A){if(O.push("<"+te),typeof C!="object")return O.push(">"+y(C,F)+"</"+te+">"),O.join("");C[F.attributesKey]&&O.push(u(C[F.attributesKey],F,J));var le=R(C,F,!0)||C[F.attributesKey]&&C[F.attributesKey]["xml:space"]==="preserve";if(le||("fullTagEmptyElementFn"in F?le=F.fullTagEmptyElementFn(A,C):le=F.fullTagEmptyElement),le)O.push(">");else return O.push("/>"),O.join("")}return O.push(N(C,F,J+1,!1)),t=C,r=A,A&&O.push((V?s(F,J,!1):"")+"</"+te+">"),O.join("")}function N(C,A,F,J){var V,te,O,le=[];for(te in C)if(C.hasOwnProperty(te))for(O=e(C[te])?C[te]:[C[te]],V=0;V<O.length;++V){switch(te){case A.declarationKey:le.push(l(O[V],A,F));break;case A.instructionKey:le.push((A.indentInstruction?s(A,F,J):"")+c(O[V],A,F));break;case A.attributesKey:case A.parentKey:break;case A.textKey:le.push((A.indentText?s(A,F,J):"")+y(O[V],A));break;case A.cdataKey:le.push((A.indentCdata?s(A,F,J):"")+h(O[V],A));break;case A.doctypeKey:le.push(s(A,F,J)+g(O[V],A));break;case A.commentKey:le.push(s(A,F,J)+f(O[V],A));break;default:le.push(s(A,F,J)+b(O[V],te,A,F,R(O[V],A)))}J=J&&!le.length}return le.join("")}return hv=function(C,A){A=i(A);var F=[];return t=C,r="_root_",A.compact?F.push(N(C,A,0,!0)):(C[A.declarationKey]&&F.push(l(C[A.declarationKey],A,0)),C[A.elementsKey]&&C[A.elementsKey].length&&F.push(_(C[A.elementsKey],A,0,!F.length))),F.join("")},hv}var pv,NT;function oj(){if(NT)return pv;NT=1;var n=FN();return pv=function(e,t){e instanceof Buffer&&(e=e.toString());var r=null;if(typeof e=="string")try{r=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else r=e;return n(r,t)},pv}var mv,RT;function lj(){if(RT)return mv;RT=1;var n=UN(),e=aj(),t=FN(),r=oj();return mv={xml2js:n,xml2json:e,js2xml:t,json2xml:r},mv}var BN=lj();const jb=n=>{switch(n.type){case void 0:case"element":const e=new cj(n.name,n.attributes),t=n.elements||[];for(const r of t){const i=jb(r);i!==void 0&&e.push(i)}return e;case"text":return n.text;default:return}};class uj extends Yt{}class cj extends lt{static fromXmlString(e){const t=BN.xml2js(e,{compact:!1});return jb(t)}constructor(e,t){super(e),t&&this.root.push(new uj(t))}push(e){this.root.push(e)}}class fj extends lt{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}}class qN extends lt{constructor(e,t){super(e),t&&(this.root=t.root)}}const _s=n=>{if(isNaN(n))throw new Error(`Invalid value '${n}' specified. Must be an integer.`);return Math.floor(n)},Bg=n=>{const e=_s(n);if(e<0)throw new Error(`Invalid value '${n}' specified. Must be a positive integer.`);return e},jN=(n,e)=>{const t=e*2;if(n.length!==t||isNaN(+`0x${n}`))throw new Error(`Invalid hex value '${n}'. Expected ${t} digit hex value`);return n},kT=n=>jN(n,1),zN=n=>{const e=n.slice(-2),t=n.substring(0,n.length-2);return`${Number(t)}${e}`},HN=n=>{const e=zN(n);if(parseFloat(e)<0)throw new Error(`Invalid value '${e}' specified. Expected a positive number.`);return e},rd=n=>{if(n==="auto")return n;const e=n.charAt(0)==="#"?n.substring(1):n;return jN(e,3)},hc=n=>typeof n=="string"?zN(n):_s(n),dj=n=>typeof n=="string"?HN(n):Bg(n),Za=n=>typeof n=="string"?HN(n):Bg(n),hj=Bg,pj=Bg,mj=n=>n.toISOString();class ut extends lt{constructor(e,t=!0){super(e),t!==!0&&this.root.push(new zr({val:t}))}}class gv extends lt{constructor(e,t){super(e),this.root.push(new zr({val:dj(t)}))}}class Yf extends lt{constructor(e,t){super(e),this.root.push(new zr({val:t}))}}const ah=(n,e)=>new Do({name:n,attributes:{value:{key:"w:val",value:e}}});class Ih extends lt{constructor(e,t){super(e),this.root.push(new zr({val:t}))}}class Qu extends lt{constructor(e,t){super(e),this.root.push(t)}}class Do extends lt{constructor({name:e,attributes:t,children:r}){super(e),t&&this.root.push(new Dg(t)),r&&this.root.push(...r)}}const Wa={START:"start",CENTER:"center",LEFT:"left"};class gj extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{val:"w:val"})}}class yj extends lt{constructor(e){super("w:jc"),this.root.push(new gj({val:e}))}}class Or extends lt{constructor(e,{color:t,size:r,space:i,style:s}){super(e),this.root.push(new vj({style:s,color:t===void 0?void 0:rd(t),size:r===void 0?void 0:hj(r),space:i===void 0?void 0:pj(i)}))}}class vj extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const zb={SINGLE:"single",NONE:"none"};class wj extends Og{constructor(e){super("w:pBdr"),e.top&&this.root.push(new Or("w:top",e.top)),e.bottom&&this.root.push(new Or("w:bottom",e.bottom)),e.left&&this.root.push(new Or("w:left",e.left)),e.right&&this.root.push(new Or("w:right",e.right))}}class bj extends lt{constructor(){super("w:pBdr");const e=new Or("w:bottom",{color:"auto",space:1,style:zb.SINGLE,size:6});this.root.push(e)}}class _j extends lt{constructor({start:e,end:t,left:r,right:i,hanging:s,firstLine:u}){super("w:ind"),this.root.push(new Dg({start:{key:"w:start",value:e===void 0?void 0:hc(e)},end:{key:"w:end",value:t===void 0?void 0:hc(t)},left:{key:"w:left",value:r===void 0?void 0:hc(r)},right:{key:"w:right",value:i===void 0?void 0:hc(i)},hanging:{key:"w:hanging",value:s===void 0?void 0:Za(s)},firstLine:{key:"w:firstLine",value:u===void 0?void 0:Za(u)}}))}}let Sj=class extends lt{constructor(){super("w:br")}};const Hb={BEGIN:"begin",END:"end",SEPARATE:"separate"};class Gb extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class ym extends lt{constructor(e){super("w:fldChar"),this.root.push(new Gb({type:Hb.BEGIN,dirty:e}))}}class vm extends lt{constructor(e){super("w:fldChar"),this.root.push(new Gb({type:Hb.SEPARATE,dirty:e}))}}class wm extends lt{constructor(e){super("w:fldChar"),this.root.push(new Gb({type:Hb.END,dirty:e}))}}const id={DEFAULT:"default",PRESERVE:"preserve"};class sd extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{space:"xml:space"})}}class xj extends lt{constructor(){super("w:instrText"),this.root.push(new sd({space:id.PRESERVE})),this.root.push("PAGE")}}class Aj extends lt{constructor(){super("w:instrText"),this.root.push(new sd({space:id.PRESERVE})),this.root.push("NUMPAGES")}}class Ej extends lt{constructor(){super("w:instrText"),this.root.push(new sd({space:id.PRESERVE})),this.root.push("SECTIONPAGES")}}class Tj extends lt{constructor(){super("w:instrText"),this.root.push(new sd({space:id.PRESERVE})),this.root.push("SECTION")}}class Cj extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class GN extends lt{constructor({fill:e,color:t,type:r}){super("w:shd"),this.root.push(new Cj({fill:e===void 0?void 0:rd(e),color:t===void 0?void 0:rd(t),type:r}))}}class Nj extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const Rj={DOT:"dot"};class kj extends lt{constructor(e){super("w:em"),this.root.push(new zr({val:e}))}}class Ij extends kj{constructor(e=Rj.DOT){super(e)}}class Lj extends lt{constructor(e){super("w:spacing"),this.root.push(new zr({val:hc(e)}))}}class Pj extends lt{constructor(e){super("w:color"),this.root.push(new zr({val:rd(e)}))}}class Mj extends lt{constructor(e){super("w:highlight"),this.root.push(new zr({val:e}))}}class Oj extends lt{constructor(e){super("w:highlightCs"),this.root.push(new zr({val:e}))}}const Dj=n=>new Do({name:"w:lang",attributes:{value:{key:"w:val",value:n.value},eastAsia:{key:"w:eastAsia",value:n.eastAsia},bidirectional:{key:"w:bidi",value:n.bidirectional}}});class IT extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class yv extends lt{constructor(e,t){if(super("w:rFonts"),typeof e=="string"){const r=e;this.root.push(new IT({ascii:r,cs:r,eastAsia:r,hAnsi:r,hint:t}))}else{const r=e;this.root.push(new IT(r))}}}let VN=class extends lt{constructor(e){super("w:vertAlign"),this.root.push(new zr({val:e}))}};class Uj extends VN{constructor(){super("superscript")}}class Fj extends VN{constructor(){super("subscript")}}const $N={SINGLE:"single"};class Bj extends lt{constructor(e=$N.SINGLE,t){super("w:u"),this.root.push(new zr({val:e,color:t===void 0?void 0:rd(t)}))}}class Ac extends Og{constructor(e){var t,r;if(super("w:rPr"),!e)return;e.style&&this.push(new Yf("w:rStyle",e.style)),e.font&&(typeof e.font=="string"?this.push(new yv(e.font)):"name"in e.font?this.push(new yv(e.font.name,e.font.hint)):this.push(new yv(e.font))),e.bold!==void 0&&this.push(new ut("w:b",e.bold)),(e.boldComplexScript===void 0&&e.bold!==void 0||e.boldComplexScript)&&this.push(new ut("w:bCs",(t=e.boldComplexScript)!=null?t:e.bold)),e.italics!==void 0&&this.push(new ut("w:i",e.italics)),(e.italicsComplexScript===void 0&&e.italics!==void 0||e.italicsComplexScript)&&this.push(new ut("w:iCs",(r=e.italicsComplexScript)!=null?r:e.italics)),e.smallCaps!==void 0?this.push(new ut("w:smallCaps",e.smallCaps)):e.allCaps!==void 0&&this.push(new ut("w:caps",e.allCaps)),e.strike!==void 0&&this.push(new ut("w:strike",e.strike)),e.doubleStrike!==void 0&&this.push(new ut("w:dstrike",e.doubleStrike)),e.emboss!==void 0&&this.push(new ut("w:emboss",e.emboss)),e.imprint!==void 0&&this.push(new ut("w:imprint",e.imprint)),e.noProof!==void 0&&this.push(new ut("w:noProof",e.noProof)),e.snapToGrid!==void 0&&this.push(new ut("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new ut("w:vanish",e.vanish)),e.color&&this.push(new Pj(e.color)),e.characterSpacing&&this.push(new Lj(e.characterSpacing)),e.scale!==void 0&&this.push(new Ih("w:w",e.scale)),e.kern&&this.push(new gv("w:kern",e.kern)),e.position&&this.push(new Yf("w:position",e.position)),e.size!==void 0&&this.push(new gv("w:sz",e.size));const i=e.sizeComplexScript===void 0||e.sizeComplexScript===!0?e.size:e.sizeComplexScript;i&&this.push(new gv("w:szCs",i)),e.highlight&&this.push(new Mj(e.highlight));const s=e.highlightComplexScript===void 0||e.highlightComplexScript===!0?e.highlight:e.highlightComplexScript;s&&this.push(new Oj(s)),e.underline&&this.push(new Bj(e.underline.type,e.underline.color)),e.effect&&this.push(new Yf("w:effect",e.effect)),e.border&&this.push(new Or("w:bdr",e.border)),e.shading&&this.push(new GN(e.shading)),e.subScript&&this.push(new Fj),e.superScript&&this.push(new Uj),e.rightToLeft!==void 0&&this.push(new ut("w:rtl",e.rightToLeft)),e.emphasisMark&&this.push(new Ij(e.emphasisMark.type)),e.language&&this.push(Dj(e.language)),e.specVanish&&this.push(new ut("w:specVanish",e.vanish)),e.math&&this.push(new ut("w:oMath",e.math)),e.revision&&this.push(new qj(e.revision))}push(e){this.root.push(e)}}class qj extends lt{constructor(e){super("w:rPrChange"),this.root.push(new Nj({id:e.id,author:e.author,date:e.date})),this.addChildElement(new Ac(e))}}class LT extends lt{constructor(e){var t;super("w:t"),typeof e=="string"?(this.root.push(new sd({space:id.PRESERVE})),this.root.push(e)):(this.root.push(new sd({space:(t=e.space)!=null?t:id.DEFAULT})),this.root.push(e.text))}}const bm={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class qg extends lt{constructor(e){if(super("w:r"),nt(this,"properties"),this.properties=new Ac(e),this.root.push(this.properties),e.break)for(let t=0;t<e.break;t++)this.root.push(new Sj);if(e.children)for(const t of e.children){if(typeof t=="string"){switch(t){case bm.CURRENT:this.root.push(new ym),this.root.push(new xj),this.root.push(new vm),this.root.push(new wm);break;case bm.TOTAL_PAGES:this.root.push(new ym),this.root.push(new Aj),this.root.push(new vm),this.root.push(new wm);break;case bm.TOTAL_PAGES_IN_SECTION:this.root.push(new ym),this.root.push(new Ej),this.root.push(new vm),this.root.push(new wm);break;case bm.CURRENT_SECTION:this.root.push(new ym),this.root.push(new Tj),this.root.push(new vm),this.root.push(new wm);break;default:this.root.push(new LT(t));break}continue}this.root.push(t)}else e.text!==void 0&&this.root.push(new LT(e.text))}}class Ro extends qg{constructor(e){super(typeof e=="string"?{text:e}:e)}}var vv={},Kn={},wv,PT;function Wh(){if(PT)return wv;PT=1,wv=n;function n(e,t){if(!e)throw new Error(t||"Assertion failed")}return n.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)},wv}var MT;function Fo(){if(MT)return Kn;MT=1;var n=Wh(),e=vu();Kn.inherits=e;function t(U,X){return(U.charCodeAt(X)&64512)!==55296||X<0||X+1>=U.length?!1:(U.charCodeAt(X+1)&64512)===56320}function r(U,X){if(Array.isArray(U))return U.slice();if(!U)return[];var M=[];if(typeof U=="string")if(X){if(X==="hex")for(U=U.replace(/[^a-z0-9]+/ig,""),U.length%2!==0&&(U="0"+U),se=0;se<U.length;se+=2)M.push(parseInt(U[se]+U[se+1],16))}else for(var ye=0,se=0;se<U.length;se++){var ie=U.charCodeAt(se);ie<128?M[ye++]=ie:ie<2048?(M[ye++]=ie>>6|192,M[ye++]=ie&63|128):t(U,se)?(ie=65536+((ie&1023)<<10)+(U.charCodeAt(++se)&1023),M[ye++]=ie>>18|240,M[ye++]=ie>>12&63|128,M[ye++]=ie>>6&63|128,M[ye++]=ie&63|128):(M[ye++]=ie>>12|224,M[ye++]=ie>>6&63|128,M[ye++]=ie&63|128)}else for(se=0;se<U.length;se++)M[se]=U[se]|0;return M}Kn.toArray=r;function i(U){for(var X="",M=0;M<U.length;M++)X+=l(U[M].toString(16));return X}Kn.toHex=i;function s(U){var X=U>>>24|U>>>8&65280|U<<8&16711680|(U&255)<<24;return X>>>0}Kn.htonl=s;function u(U,X){for(var M="",ye=0;ye<U.length;ye++){var se=U[ye];X==="little"&&(se=s(se)),M+=c(se.toString(16))}return M}Kn.toHex32=u;function l(U){return U.length===1?"0"+U:U}Kn.zero2=l;function c(U){return U.length===7?"0"+U:U.length===6?"00"+U:U.length===5?"000"+U:U.length===4?"0000"+U:U.length===3?"00000"+U:U.length===2?"000000"+U:U.length===1?"0000000"+U:U}Kn.zero8=c;function f(U,X,M,ye){var se=M-X;n(se%4===0);for(var ie=new Array(se/4),Se=0,me=X;Se<ie.length;Se++,me+=4){var Ne;ye==="big"?Ne=U[me]<<24|U[me+1]<<16|U[me+2]<<8|U[me+3]:Ne=U[me+3]<<24|U[me+2]<<16|U[me+1]<<8|U[me],ie[Se]=Ne>>>0}return ie}Kn.join32=f;function h(U,X){for(var M=new Array(U.length*4),ye=0,se=0;ye<U.length;ye++,se+=4){var ie=U[ye];X==="big"?(M[se]=ie>>>24,M[se+1]=ie>>>16&255,M[se+2]=ie>>>8&255,M[se+3]=ie&255):(M[se+3]=ie>>>24,M[se+2]=ie>>>16&255,M[se+1]=ie>>>8&255,M[se]=ie&255)}return M}Kn.split32=h;function g(U,X){return U>>>X|U<<32-X}Kn.rotr32=g;function y(U,X){return U<<X|U>>>32-X}Kn.rotl32=y;function m(U,X){return U+X>>>0}Kn.sum32=m;function E(U,X,M){return U+X+M>>>0}Kn.sum32_3=E;function _(U,X,M,ye){return U+X+M+ye>>>0}Kn.sum32_4=_;function R(U,X,M,ye,se){return U+X+M+ye+se>>>0}Kn.sum32_5=R;function b(U,X,M,ye){var se=U[X],ie=U[X+1],Se=ye+ie>>>0,me=(Se<ye?1:0)+M+se;U[X]=me>>>0,U[X+1]=Se}Kn.sum64=b;function N(U,X,M,ye){var se=X+ye>>>0,ie=(se<X?1:0)+U+M;return ie>>>0}Kn.sum64_hi=N;function C(U,X,M,ye){var se=X+ye;return se>>>0}Kn.sum64_lo=C;function A(U,X,M,ye,se,ie,Se,me){var Ne=0,K=X;K=K+ye>>>0,Ne+=K<X?1:0,K=K+ie>>>0,Ne+=K<ie?1:0,K=K+me>>>0,Ne+=K<me?1:0;var L=U+M+se+Se+Ne;return L>>>0}Kn.sum64_4_hi=A;function F(U,X,M,ye,se,ie,Se,me){var Ne=X+ye+ie+me;return Ne>>>0}Kn.sum64_4_lo=F;function J(U,X,M,ye,se,ie,Se,me,Ne,K){var L=0,$=X;$=$+ye>>>0,L+=$<X?1:0,$=$+ie>>>0,L+=$<ie?1:0,$=$+me>>>0,L+=$<me?1:0,$=$+K>>>0,L+=$<K?1:0;var ee=U+M+se+Se+Ne+L;return ee>>>0}Kn.sum64_5_hi=J;function V(U,X,M,ye,se,ie,Se,me,Ne,K){var L=X+ye+ie+me+K;return L>>>0}Kn.sum64_5_lo=V;function te(U,X,M){var ye=X<<32-M|U>>>M;return ye>>>0}Kn.rotr64_hi=te;function O(U,X,M){var ye=U<<32-M|X>>>M;return ye>>>0}Kn.rotr64_lo=O;function le(U,X,M){return U>>>M}Kn.shr64_hi=le;function Q(U,X,M){var ye=U<<32-M|X>>>M;return ye>>>0}return Kn.shr64_lo=Q,Kn}var bv={},OT;function Kh(){if(OT)return bv;OT=1;var n=Fo(),e=Wh();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return bv.BlockHash=t,t.prototype.update=function(i,s){if(i=n.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var u=i.length%this._delta8;this.pending=i.slice(i.length-u,i.length),this.pending.length===0&&(this.pending=null),i=n.join32(i,0,i.length-u,this.endian);for(var l=0;l<i.length;l+=this._delta32)this._update(i,l,l+this._delta32)}return this},t.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},t.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,u=s-(i+this.padLength)%s,l=new Array(u+this.padLength);l[0]=128;for(var c=1;c<u;c++)l[c]=0;if(i<<=3,this.endian==="big"){for(var f=8;f<this.padLength;f++)l[c++]=0;l[c++]=0,l[c++]=0,l[c++]=0,l[c++]=0,l[c++]=i>>>24&255,l[c++]=i>>>16&255,l[c++]=i>>>8&255,l[c++]=i&255}else for(l[c++]=i&255,l[c++]=i>>>8&255,l[c++]=i>>>16&255,l[c++]=i>>>24&255,l[c++]=0,l[c++]=0,l[c++]=0,l[c++]=0,f=8;f<this.padLength;f++)l[c++]=0;return l},bv}var ec={},Co={},DT;function WN(){if(DT)return Co;DT=1;var n=Fo(),e=n.rotr32;function t(h,g,y,m){if(h===0)return r(g,y,m);if(h===1||h===3)return s(g,y,m);if(h===2)return i(g,y,m)}Co.ft_1=t;function r(h,g,y){return h&g^~h&y}Co.ch32=r;function i(h,g,y){return h&g^h&y^g&y}Co.maj32=i;function s(h,g,y){return h^g^y}Co.p32=s;function u(h){return e(h,2)^e(h,13)^e(h,22)}Co.s0_256=u;function l(h){return e(h,6)^e(h,11)^e(h,25)}Co.s1_256=l;function c(h){return e(h,7)^e(h,18)^h>>>3}Co.g0_256=c;function f(h){return e(h,17)^e(h,19)^h>>>10}return Co.g1_256=f,Co}var _v,UT;function jj(){if(UT)return _v;UT=1;var n=Fo(),e=Kh(),t=WN(),r=n.rotl32,i=n.sum32,s=n.sum32_5,u=t.ft_1,l=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return n.inherits(f,l),_v=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(g,y){for(var m=this.W,E=0;E<16;E++)m[E]=g[y+E];for(;E<m.length;E++)m[E]=r(m[E-3]^m[E-8]^m[E-14]^m[E-16],1);var _=this.h[0],R=this.h[1],b=this.h[2],N=this.h[3],C=this.h[4];for(E=0;E<m.length;E++){var A=~~(E/20),F=s(r(_,5),u(A,R,b,N),C,m[E],c[A]);C=N,N=b,b=r(R,30),R=_,_=F}this.h[0]=i(this.h[0],_),this.h[1]=i(this.h[1],R),this.h[2]=i(this.h[2],b),this.h[3]=i(this.h[3],N),this.h[4]=i(this.h[4],C)},f.prototype._digest=function(g){return g==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},_v}var Sv,FT;function KN(){if(FT)return Sv;FT=1;var n=Fo(),e=Kh(),t=WN(),r=Wh(),i=n.sum32,s=n.sum32_4,u=n.sum32_5,l=t.ch32,c=t.maj32,f=t.s0_256,h=t.s1_256,g=t.g0_256,y=t.g1_256,m=e.BlockHash,E=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _(){if(!(this instanceof _))return new _;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=E,this.W=new Array(64)}return n.inherits(_,m),Sv=_,_.blockSize=512,_.outSize=256,_.hmacStrength=192,_.padLength=64,_.prototype._update=function(b,N){for(var C=this.W,A=0;A<16;A++)C[A]=b[N+A];for(;A<C.length;A++)C[A]=s(y(C[A-2]),C[A-7],g(C[A-15]),C[A-16]);var F=this.h[0],J=this.h[1],V=this.h[2],te=this.h[3],O=this.h[4],le=this.h[5],Q=this.h[6],U=this.h[7];for(r(this.k.length===C.length),A=0;A<C.length;A++){var X=u(U,h(O),l(O,le,Q),this.k[A],C[A]),M=i(f(F),c(F,J,V));U=Q,Q=le,le=O,O=i(te,X),te=V,V=J,J=F,F=i(X,M)}this.h[0]=i(this.h[0],F),this.h[1]=i(this.h[1],J),this.h[2]=i(this.h[2],V),this.h[3]=i(this.h[3],te),this.h[4]=i(this.h[4],O),this.h[5]=i(this.h[5],le),this.h[6]=i(this.h[6],Q),this.h[7]=i(this.h[7],U)},_.prototype._digest=function(b){return b==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},Sv}var xv,BT;function zj(){if(BT)return xv;BT=1;var n=Fo(),e=KN();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return n.inherits(t,e),xv=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(i){return i==="hex"?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")},xv}var Av,qT;function JN(){if(qT)return Av;qT=1;var n=Fo(),e=Kh(),t=Wh(),r=n.rotr64_hi,i=n.rotr64_lo,s=n.shr64_hi,u=n.shr64_lo,l=n.sum64,c=n.sum64_hi,f=n.sum64_lo,h=n.sum64_4_hi,g=n.sum64_4_lo,y=n.sum64_5_hi,m=n.sum64_5_lo,E=e.BlockHash,_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function R(){if(!(this instanceof R))return new R;E.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_,this.W=new Array(160)}n.inherits(R,E),Av=R,R.blockSize=1024,R.outSize=512,R.hmacStrength=192,R.padLength=128,R.prototype._prepareBlock=function(M,ye){for(var se=this.W,ie=0;ie<32;ie++)se[ie]=M[ye+ie];for(;ie<se.length;ie+=2){var Se=Q(se[ie-4],se[ie-3]),me=U(se[ie-4],se[ie-3]),Ne=se[ie-14],K=se[ie-13],L=O(se[ie-30],se[ie-29]),$=le(se[ie-30],se[ie-29]),ee=se[ie-32],pe=se[ie-31];se[ie]=h(Se,me,Ne,K,L,$,ee,pe),se[ie+1]=g(Se,me,Ne,K,L,$,ee,pe)}},R.prototype._update=function(M,ye){this._prepareBlock(M,ye);var se=this.W,ie=this.h[0],Se=this.h[1],me=this.h[2],Ne=this.h[3],K=this.h[4],L=this.h[5],$=this.h[6],ee=this.h[7],pe=this.h[8],ae=this.h[9],B=this.h[10],j=this.h[11],de=this.h[12],fe=this.h[13],re=this.h[14],he=this.h[15];t(this.k.length===se.length);for(var ke=0;ke<se.length;ke+=2){var q=re,oe=he,Y=V(pe,ae),I=te(pe,ae),P=b(pe,ae,B,j,de),H=N(pe,ae,B,j,de,fe),be=this.k[ke],ne=this.k[ke+1],we=se[ke],Re=se[ke+1],De=y(q,oe,Y,I,P,H,be,ne,we,Re),Ue=m(q,oe,Y,I,P,H,be,ne,we,Re);q=F(ie,Se),oe=J(ie,Se),Y=C(ie,Se,me,Ne,K),I=A(ie,Se,me,Ne,K,L);var Ke=c(q,oe,Y,I),at=f(q,oe,Y,I);re=de,he=fe,de=B,fe=j,B=pe,j=ae,pe=c($,ee,De,Ue),ae=f(ee,ee,De,Ue),$=K,ee=L,K=me,L=Ne,me=ie,Ne=Se,ie=c(De,Ue,Ke,at),Se=f(De,Ue,Ke,at)}l(this.h,0,ie,Se),l(this.h,2,me,Ne),l(this.h,4,K,L),l(this.h,6,$,ee),l(this.h,8,pe,ae),l(this.h,10,B,j),l(this.h,12,de,fe),l(this.h,14,re,he)},R.prototype._digest=function(M){return M==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")};function b(X,M,ye,se,ie){var Se=X&ye^~X&ie;return Se<0&&(Se+=4294967296),Se}function N(X,M,ye,se,ie,Se){var me=M&se^~M&Se;return me<0&&(me+=4294967296),me}function C(X,M,ye,se,ie){var Se=X&ye^X&ie^ye&ie;return Se<0&&(Se+=4294967296),Se}function A(X,M,ye,se,ie,Se){var me=M&se^M&Se^se&Se;return me<0&&(me+=4294967296),me}function F(X,M){var ye=r(X,M,28),se=r(M,X,2),ie=r(M,X,7),Se=ye^se^ie;return Se<0&&(Se+=4294967296),Se}function J(X,M){var ye=i(X,M,28),se=i(M,X,2),ie=i(M,X,7),Se=ye^se^ie;return Se<0&&(Se+=4294967296),Se}function V(X,M){var ye=r(X,M,14),se=r(X,M,18),ie=r(M,X,9),Se=ye^se^ie;return Se<0&&(Se+=4294967296),Se}function te(X,M){var ye=i(X,M,14),se=i(X,M,18),ie=i(M,X,9),Se=ye^se^ie;return Se<0&&(Se+=4294967296),Se}function O(X,M){var ye=r(X,M,1),se=r(X,M,8),ie=s(X,M,7),Se=ye^se^ie;return Se<0&&(Se+=4294967296),Se}function le(X,M){var ye=i(X,M,1),se=i(X,M,8),ie=u(X,M,7),Se=ye^se^ie;return Se<0&&(Se+=4294967296),Se}function Q(X,M){var ye=r(X,M,19),se=r(M,X,29),ie=s(X,M,6),Se=ye^se^ie;return Se<0&&(Se+=4294967296),Se}function U(X,M){var ye=i(X,M,19),se=i(M,X,29),ie=u(X,M,6),Se=ye^se^ie;return Se<0&&(Se+=4294967296),Se}return Av}var Ev,jT;function Hj(){if(jT)return Ev;jT=1;var n=Fo(),e=JN();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return n.inherits(t,e),Ev=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(i){return i==="hex"?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")},Ev}var zT;function Gj(){return zT||(zT=1,ec.sha1=jj(),ec.sha224=zj(),ec.sha256=KN(),ec.sha384=Hj(),ec.sha512=JN()),ec}var Tv={},HT;function Vj(){if(HT)return Tv;HT=1;var n=Fo(),e=Kh(),t=n.rotl32,r=n.sum32,i=n.sum32_3,s=n.sum32_4,u=e.BlockHash;function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}n.inherits(l,u),Tv.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(R,b){for(var N=this.h[0],C=this.h[1],A=this.h[2],F=this.h[3],J=this.h[4],V=N,te=C,O=A,le=F,Q=J,U=0;U<80;U++){var X=r(t(s(N,c(U,C,A,F),R[g[U]+b],f(U)),m[U]),J);N=J,J=F,F=t(A,10),A=C,C=X,X=r(t(s(V,c(79-U,te,O,le),R[y[U]+b],h(U)),E[U]),Q),V=Q,Q=le,le=t(O,10),O=te,te=X}X=i(this.h[1],A,le),this.h[1]=i(this.h[2],F,Q),this.h[2]=i(this.h[3],J,V),this.h[3]=i(this.h[4],N,te),this.h[4]=i(this.h[0],C,O),this.h[0]=X},l.prototype._digest=function(R){return R==="hex"?n.toHex32(this.h,"little"):n.split32(this.h,"little")};function c(_,R,b,N){return _<=15?R^b^N:_<=31?R&b|~R&N:_<=47?(R|~b)^N:_<=63?R&N|b&~N:R^(b|~N)}function f(_){return _<=15?0:_<=31?1518500249:_<=47?1859775393:_<=63?2400959708:2840853838}function h(_){return _<=15?1352829926:_<=31?1548603684:_<=47?1836072691:_<=63?2053994217:0}var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],E=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Tv}var Cv,GT;function $j(){if(GT)return Cv;GT=1;var n=Fo(),e=Wh();function t(r,i,s){if(!(this instanceof t))return new t(r,i,s);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(i,s))}return Cv=t,t.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},t.prototype.update=function(i,s){return this.inner.update(i,s),this},t.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},Cv}var VT;function Wj(){return VT||(VT=1,(function(n){var e=n;e.utils=Fo(),e.common=Kh(),e.sha=Gj(),e.ripemd=Vj(),e.hmac=$j(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(vv)),vv}Wj();let Kj="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Jj=(n,e=21)=>(t=e)=>{let r="",i=t|0;for(;i--;)r+=n[Math.random()*n.length|0];return r},Yj=(n=21)=>{let e="",t=n|0;for(;t--;)e+=Kj[Math.random()*64|0];return e};const Va=n=>Math.floor(n*72*20),Vb=(n=0)=>{let e=n;return()=>++e},Xj=()=>Vb(),Zj=()=>Vb(1),Qj=()=>Vb(),ez=()=>Yj().toLowerCase(),oh=n=>Jj("1234567890abcdef",n)(),tz=()=>`${oh(8)}-${oh(4)}-${oh(4)}-${oh(4)}-${oh(12)}`;class nz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{xmlns:"xmlns"})}}class rz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const iz={EXTERNAL:"External"};class sz extends lt{constructor(e,t,r,i){super("Relationship"),this.root.push(new rz({id:e,type:t,target:r,targetMode:i}))}}class Ec extends lt{constructor(){super("Relationships"),this.root.push(new nz({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,t,r,i){const s=new sz(`rId${e}`,t,r,i);return this.root.push(s),s}get RelationshipCount(){return this.root.length-1}}class az extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class oz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class lz extends lt{constructor({id:e,initials:t,author:r,date:i=new Date,children:s}){super("w:comment"),this.root.push(new az({id:e,initials:t,author:r,date:i.toISOString()}));for(const u of s)this.root.push(u)}}class uz extends lt{constructor({children:e}){super("w:comments"),nt(this,"relationships"),this.root.push(new oz({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const t of e)this.root.push(new lz(t));this.relationships=new Ec}get Relationships(){return this.relationships}}class cz extends lt{constructor(){super("w:pageBreakBefore")}}const Fw={AUTO:"auto"};class fz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class dz extends lt{constructor(e){super("w:spacing"),this.root.push(new fz(e))}}const Nv={HEADING_2:"Heading2"};let _m=class extends lt{constructor(e){super("w:pStyle"),this.root.push(new zr({val:e}))}};class hz extends lt{constructor(e){super("w:tabs");for(const t of e)this.root.push(new mz(t))}}const $T={LEFT:"left",RIGHT:"right"};class pz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class mz extends lt{constructor({type:e,position:t,leader:r}){super("w:tab"),this.root.push(new pz({val:e,pos:t,leader:r}))}}class Rv extends lt{constructor(e,t){super("w:numPr"),this.root.push(new gz(t)),this.root.push(new yz(e))}}class gz extends lt{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new zr({val:e}))}}class yz extends lt{constructor(e){super("w:numId"),this.root.push(new zr({val:typeof e=="string"?`{${e}}`:e}))}}class vz extends lt{constructor(){super(...arguments),nt(this,"fileChild",Symbol())}}class wz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class bz extends lt{constructor(e,t,r){super("w:hyperlink"),nt(this,"linkId"),this.linkId=t;const i={history:1,anchor:r||void 0,id:r?void 0:`rId${this.linkId}`},s=new wz(i);this.root.push(s),e.forEach(u=>{this.root.push(u)})}}class _z extends lt{constructor(e){super("w:externalHyperlink"),this.options=e}}class Sz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class xz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{id:"w:id"})}}class Az{constructor(e){nt(this,"bookmarkUniqueNumericId",Qj()),nt(this,"start"),nt(this,"children"),nt(this,"end");const t=this.bookmarkUniqueNumericId();this.start=new Ez(e.id,t),this.children=e.children,this.end=new Tz(t)}}class Ez extends lt{constructor(e,t){super("w:bookmarkStart");const r=new Sz({name:e,id:t});this.root.push(r)}}class Tz extends lt{constructor(e){super("w:bookmarkEnd");const t=new xz({id:e});this.root.push(t)}}class Cz extends lt{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new zr({val:e}))}}const Nz={TOP:"top",CENTER:"center",BOTTOM:"bottom"};td(An({},Nz),{BOTH:"both"});class Rz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{verticalAlign:"w:val"})}}class kz extends lt{constructor(e){super("w:vAlign"),this.root.push(new Rz({verticalAlign:e}))}}class Iz extends lt{constructor({space:e,count:t,separate:r,equalWidth:i,children:s}){super("w:cols"),this.root.push(new Dg({space:{key:"w:space",value:e===void 0?void 0:Za(e)},count:{key:"w:num",value:t===void 0?void 0:_s(t)},separate:{key:"w:sep",value:r},equalWidth:{key:"w:equalWidth",value:i}})),!i&&s&&s.forEach(u=>this.addChildElement(u))}}const Lz=({type:n,linePitch:e,charSpace:t})=>new Do({name:"w:docGrid",attributes:{type:{key:"w:type",value:n},linePitch:{key:"w:linePitch",value:_s(e)},charSpace:{key:"w:charSpace",value:t?_s(t):void 0}}}),Xf={DEFAULT:"default",FIRST:"first",EVEN:"even"};class Pz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const WT={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class kv extends lt{constructor(e,t){super(e),this.root.push(new Pz({type:t.type||Xf.DEFAULT,id:`rId${t.id}`}))}}const Mz=({countBy:n,start:e,restart:t,distance:r})=>new Do({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:n===void 0?void 0:_s(n)},start:{key:"w:start",value:e===void 0?void 0:_s(e)},restart:{key:"w:restart",value:t},distance:{key:"w:distance",value:r===void 0?void 0:Za(r)}}});class KT extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class Oz extends Og{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new KT({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new KT({})),e.pageBorderTop&&this.root.push(new Or("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new Or("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new Or("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new Or("w:right",e.pageBorderRight))}}class Dz extends lt{constructor(e,t,r,i,s,u,l){super("w:pgMar"),this.root.push(new Dg({top:{key:"w:top",value:hc(e)},right:{key:"w:right",value:Za(t)},bottom:{key:"w:bottom",value:hc(r)},left:{key:"w:left",value:Za(i)},header:{key:"w:header",value:Za(s)},footer:{key:"w:footer",value:Za(u)},gutter:{key:"w:gutter",value:Za(l)}}))}}class Uz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class Fz extends lt{constructor({start:e,formatType:t,separator:r}){super("w:pgNumType"),this.root.push(new Uz({start:e===void 0?void 0:_s(e),formatType:t,separator:r}))}}const Bw={PORTRAIT:"portrait",LANDSCAPE:"landscape"},Bz=({width:n,height:e,orientation:t,code:r})=>{const i=Za(n),s=Za(e);return new Do({name:"w:pgSz",attributes:{width:{key:"w:w",value:t===Bw.LANDSCAPE?s:i},height:{key:"w:h",value:t===Bw.LANDSCAPE?i:s},orientation:{key:"w:orient",value:t},code:{key:"w:code",value:r}}})};class qz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{val:"w:val"})}}class jz extends lt{constructor(e){super("w:textDirection"),this.root.push(new qz({val:e}))}}class zz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{val:"w:val"})}}class Hz extends lt{constructor(e){super("w:type"),this.root.push(new zz({val:e}))}}const tc={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},Iv={WIDTH:11906,HEIGHT:16838,ORIENTATION:Bw.PORTRAIT};class Gz extends lt{constructor({page:{size:{width:e=Iv.WIDTH,height:t=Iv.HEIGHT,orientation:r=Iv.ORIENTATION}={},margin:{top:i=tc.TOP,right:s=tc.RIGHT,bottom:u=tc.BOTTOM,left:l=tc.LEFT,header:c=tc.HEADER,footer:f=tc.FOOTER,gutter:h=tc.GUTTER}={},pageNumbers:g={},borders:y,textDirection:m}={},grid:{linePitch:E=360,charSpace:_,type:R}={},headerWrapperGroup:b={},footerWrapperGroup:N={},lineNumbers:C,titlePage:A,verticalAlign:F,column:J,type:V}={}){super("w:sectPr"),this.addHeaderFooterGroup(WT.HEADER,b),this.addHeaderFooterGroup(WT.FOOTER,N),V&&this.root.push(new Hz(V)),this.root.push(Bz({width:e,height:t,orientation:r})),this.root.push(new Dz(i,s,u,l,c,f,h)),y&&this.root.push(new Oz(y)),C&&this.root.push(Mz(C)),this.root.push(new Fz(g)),J&&this.root.push(new Iz(J)),F&&this.root.push(new kz(F)),A!==void 0&&this.root.push(new ut("w:titlePg",A)),m&&this.root.push(new jz(m)),this.root.push(Lz({linePitch:E,charSpace:_,type:R}))}addHeaderFooterGroup(e,t){t.default&&this.root.push(new kv(e,{type:Xf.DEFAULT,id:t.default.View.ReferenceId})),t.first&&this.root.push(new kv(e,{type:Xf.FIRST,id:t.first.View.ReferenceId})),t.even&&this.root.push(new kv(e,{type:Xf.EVEN,id:t.even.View.ReferenceId}))}}class Vz extends lt{constructor(){super("w:body"),nt(this,"sections",[])}addSection(e){const t=this.sections.pop();this.root.push(this.createSectionParagraph(t)),this.sections.push(new Gz(e))}prepForXml(e){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){const t=new Ya({}),r=new ad({});return r.push(e),t.addChildElement(r),t}}const JT={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class jg extends Yt{constructor(e,t){super(An({Ignorable:t},Object.fromEntries(e.map(r=>[r,JT[r]])))),nt(this,"xmlKeys",An({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(JT).map(r=>[r,`xmlns:${r}`]))))}}class $z extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class Wz extends lt{constructor(e){super("w:background"),this.root.push(new $z({color:e.color===void 0?void 0:rd(e.color),themeColor:e.themeColor,themeShade:e.themeShade===void 0?void 0:kT(e.themeShade),themeTint:e.themeTint===void 0?void 0:kT(e.themeTint)}))}}class Kz extends lt{constructor(e){super("w:document"),nt(this,"body"),this.root.push(new jg(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new Vz,e.background&&this.root.push(new Wz(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}}class YN{constructor(e){nt(this,"document"),nt(this,"relationships"),this.document=new Kz(e),this.relationships=new Ec}get View(){return this.document}get Relationships(){return this.relationships}}class Jz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{val:"w:val"})}}class Yz extends lt{constructor(){super("w:wordWrap"),this.root.push(new Jz({val:0}))}}const Xz=n=>{var e,t;return new Do({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:n.anchorLock},dropCap:{key:"w:dropCap",value:n.dropCap},width:{key:"w:w",value:n.width},height:{key:"w:h",value:n.height},x:{key:"w:x",value:n.position?n.position.x:void 0},y:{key:"w:y",value:n.position?n.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:n.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:n.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(e=n.space)==null?void 0:e.horizontal},spaceVertical:{key:"w:vSpace",value:(t=n.space)==null?void 0:t.vertical},rule:{key:"w:hRule",value:n.rule},alignmentX:{key:"w:xAlign",value:n.alignment?n.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:n.alignment?n.alignment.y:void 0},lines:{key:"w:lines",value:n.lines},wrap:{key:"w:wrap",value:n.wrap}}})};class ad extends Og{constructor(e){var t,r;if(super("w:pPr"),nt(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new _m(e.heading)),e.bullet&&this.push(new _m("ListParagraph")),e.numbering&&!e.style&&!e.heading&&(e.numbering.custom||this.push(new _m("ListParagraph"))),e.style&&this.push(new _m(e.style)),e.keepNext!==void 0&&this.push(new ut("w:keepNext",e.keepNext)),e.keepLines!==void 0&&this.push(new ut("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new cz),e.frame&&this.push(Xz(e.frame)),e.widowControl!==void 0&&this.push(new ut("w:widowControl",e.widowControl)),e.bullet&&this.push(new Rv(1,e.bullet.level)),e.numbering?(this.numberingReferences.push({reference:e.numbering.reference,instance:(t=e.numbering.instance)!=null?t:0}),this.push(new Rv(`${e.numbering.reference}-${(r=e.numbering.instance)!=null?r:0}`,e.numbering.level))):e.numbering===!1&&this.push(new Rv(0,0)),e.border&&this.push(new wj(e.border)),e.thematicBreak&&this.push(new bj),e.shading&&this.push(new GN(e.shading)),e.wordWrap&&this.push(new Yz),e.overflowPunctuation&&this.push(new ut("w:overflowPunct",e.overflowPunctuation));const i=[...e.rightTabStop!==void 0?[{type:$T.RIGHT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...e.leftTabStop!==void 0?[{type:$T.LEFT,position:e.leftTabStop}]:[]];i.length>0&&this.push(new hz(i)),e.bidirectional!==void 0&&this.push(new ut("w:bidi",e.bidirectional)),e.spacing&&this.push(new dz(e.spacing)),e.indent&&this.push(new _j(e.indent)),e.contextualSpacing!==void 0&&this.push(new ut("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new yj(e.alignment)),e.outlineLevel!==void 0&&this.push(new Cz(e.outlineLevel)),e.suppressLineNumbers!==void 0&&this.push(new ut("w:suppressLineNumbers",e.suppressLineNumbers)),e.autoSpaceEastAsianText!==void 0&&this.push(new ut("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new Ac(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof YN)for(const t of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(t.reference,t.instance);return super.prepForXml(e)}}class Ya extends vz{constructor(e){if(super("w:p"),nt(this,"properties"),typeof e=="string")return this.properties=new ad({}),this.root.push(this.properties),this.root.push(new Ro(e)),this;if(this.properties=new ad(e),this.root.push(this.properties),e.text&&this.root.push(new Ro(e.text)),e.children)for(const t of e.children){if(t instanceof Az){this.root.push(t.start);for(const r of t.children)this.root.push(r);this.root.push(t.end);continue}this.root.push(t)}}prepForXml(e){for(const t of this.root)if(t instanceof _z){const r=this.root.indexOf(t),i=new bz(t.options.children,ez());e.viewWrapper.Relationships.createRelationship(i.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",t.options.link,iz.EXTERNAL),this.root[r]=i}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}}const Nf={style:zb.NONE,size:0,color:"auto"},Rf={style:zb.SINGLE,size:4,color:"auto"};class Zz extends lt{constructor(e){super("w:tblBorders"),e.top?this.root.push(new Or("w:top",e.top)):this.root.push(new Or("w:top",Rf)),e.left?this.root.push(new Or("w:left",e.left)):this.root.push(new Or("w:left",Rf)),e.bottom?this.root.push(new Or("w:bottom",e.bottom)):this.root.push(new Or("w:bottom",Rf)),e.right?this.root.push(new Or("w:right",e.right)):this.root.push(new Or("w:right",Rf)),e.insideHorizontal?this.root.push(new Or("w:insideH",e.insideHorizontal)):this.root.push(new Or("w:insideH",Rf)),e.insideVertical?this.root.push(new Or("w:insideV",e.insideVertical)):this.root.push(new Or("w:insideV",Rf))}}nt(Zz,"NONE",{top:Nf,bottom:Nf,left:Nf,right:Nf,insideHorizontal:Nf,insideVertical:Nf});class Qz extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class eH extends lt{constructor(){super("Properties"),this.root.push(new Qz({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class tH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{xmlns:"xmlns"})}}class nH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class vl extends lt{constructor(e,t){super("Default"),this.root.push(new nH({contentType:e,extension:t}))}}class rH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class ha extends lt{constructor(e,t){super("Override"),this.root.push(new rH({contentType:e,partName:t}))}}class iH extends lt{constructor(){super("Types"),this.root.push(new tH({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new vl("image/png","png")),this.root.push(new vl("image/jpeg","jpeg")),this.root.push(new vl("image/jpeg","jpg")),this.root.push(new vl("image/bmp","bmp")),this.root.push(new vl("image/gif","gif")),this.root.push(new vl("image/svg+xml","svg")),this.root.push(new vl("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new vl("application/xml","xml")),this.root.push(new vl("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new ha("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${e}.xml`))}addHeader(e){this.root.push(new ha("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${e}.xml`))}}class sH extends lt{constructor(e){super("cp:coreProperties"),this.root.push(new jg(["cp","dc","dcterms","dcmitype","xsi"])),e.title&&this.root.push(new Qu("dc:title",e.title)),e.subject&&this.root.push(new Qu("dc:subject",e.subject)),e.creator&&this.root.push(new Qu("dc:creator",e.creator)),e.keywords&&this.root.push(new Qu("cp:keywords",e.keywords)),e.description&&this.root.push(new Qu("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new Qu("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new Qu("cp:revision",String(e.revision))),this.root.push(new YT("dcterms:created")),this.root.push(new YT("dcterms:modified"))}}class aH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{type:"xsi:type"})}}class YT extends lt{constructor(e){super(e),this.root.push(new aH({type:"dcterms:W3CDTF"})),this.root.push(mj(new Date))}}class oH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class lH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class uH extends lt{constructor(e,t){super("property"),this.root.push(new lH({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:t.name})),this.root.push(new cH(t.value))}}class cH extends lt{constructor(e){super("vt:lpwstr"),this.root.push(e)}}class fH extends lt{constructor(e){super("Properties"),nt(this,"nextId"),nt(this,"properties",[]),this.root.push(new oH({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const t of e)this.addCustomProperty(t)}prepForXml(e){return this.properties.forEach(t=>this.root.push(t)),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new uH(this.nextId++,e))}}const Sm=({id:n,fontKey:e,subsetted:t},r)=>new Do({name:r,attributes:An({id:{key:"r:id",value:n}},e?{fontKey:{key:"w:fontKey",value:`{${e}}`}}:{}),children:[...t?[new ut("w:subsetted",t)]:[]]}),dH=({name:n,altName:e,panose1:t,charset:r,family:i,notTrueType:s,pitch:u,sig:l,embedRegular:c,embedBold:f,embedItalic:h,embedBoldItalic:g})=>new Do({name:"w:font",attributes:{name:{key:"w:name",value:n}},children:[...e?[ah("w:altName",e)]:[],...t?[ah("w:panose1",t)]:[],...r?[ah("w:charset",r)]:[],ah("w:family",i),...s?[new ut("w:notTrueType",s)]:[],ah("w:pitch",u),...l?[new Do({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:l.usb0},usb1:{key:"w:usb1",value:l.usb1},usb2:{key:"w:usb2",value:l.usb2},usb3:{key:"w:usb3",value:l.usb3},csb0:{key:"w:csb0",value:l.csb0},csb1:{key:"w:csb1",value:l.csb1}}})]:[],...c?[Sm(c,"w:embedRegular")]:[],...f?[Sm(f,"w:embedBold")]:[],...h?[Sm(h,"w:embedItalic")]:[],...g?[Sm(g,"w:embedBoldItalic")]:[]]}),hH=({name:n,index:e,fontKey:t,characterSet:r})=>dH({name:n,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:r,family:"auto",pitch:"variable",embedRegular:{fontKey:t,id:`rId${e}`}}),pH=n=>new Do({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:n.map((e,t)=>hH({name:e.name,index:t+1,fontKey:e.fontKey}))});class mH{constructor(e){nt(this,"fontTable"),nt(this,"relationships"),nt(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map(t=>td(An({},t),{fontKey:tz()})),this.fontTable=pH(this.fontOptionsWithKey),this.relationships=new Ec;for(let t=0;t<e.length;t++)this.relationships.createRelationship(t+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${e[t].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class gH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let yH=class extends qN{constructor(e,t){super("w:ftr",t),nt(this,"refId"),this.refId=e,t||this.root.push(new gH({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class vH{constructor(e,t,r){nt(this,"footer"),nt(this,"relationships"),this.media=e,this.footer=new yH(t,r),this.relationships=new Ec}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class wH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class bH extends lt{constructor(){super("w:footnoteRef")}}class _H extends qg{constructor(){super({style:"FootnoteReference"}),this.root.push(new bH)}}const XT={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class Lv extends lt{constructor(e){super("w:footnote"),this.root.push(new wH({type:e.type,id:e.id}));for(let t=0;t<e.children.length;t++){const r=e.children[t];t===0&&r.addRunToFront(new _H),this.root.push(r)}}}class SH extends lt{constructor(){super("w:continuationSeparator")}}class xH extends qg{constructor(){super({}),this.root.push(new SH)}}class AH extends lt{constructor(){super("w:separator")}}class EH extends qg{constructor(){super({}),this.root.push(new AH)}}class TH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class CH extends lt{constructor(){super("w:footnotes"),this.root.push(new TH({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new Lv({id:-1,type:XT.SEPERATOR,children:[new Ya({spacing:{after:0,line:240,lineRule:Fw.AUTO},children:[new EH]})]});this.root.push(e);const t=new Lv({id:0,type:XT.CONTINUATION_SEPERATOR,children:[new Ya({spacing:{after:0,line:240,lineRule:Fw.AUTO},children:[new xH]})]});this.root.push(t)}createFootNote(e,t){const r=new Lv({id:e,children:t});this.root.push(r)}}class NH{constructor(){nt(this,"footnotess"),nt(this,"relationships"),this.footnotess=new CH,this.relationships=new Ec}get View(){return this.footnotess}get Relationships(){return this.relationships}}class RH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let kH=class extends qN{constructor(e,t){super("w:hdr",t),nt(this,"refId"),this.refId=e,t||this.root.push(new RH({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class IH{constructor(e,t,r){nt(this,"header"),nt(this,"relationships"),this.media=e,this.header=new kH(t,r),this.relationships=new Ec}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class LH{constructor(){nt(this,"map"),this.map=new Map}addImage(e,t){this.map.set(e,t)}get Array(){return Array.from(this.map.values())}}const wl={BULLET:"bullet"};class PH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class MH extends lt{constructor(e){super("w:numFmt"),this.root.push(new zr({val:e}))}}class OH extends lt{constructor(e){super("w:lvlText"),this.root.push(new zr({val:e}))}}class DH extends lt{constructor(e){super("w:lvlJc"),this.root.push(new zr({val:e}))}}class UH extends lt{constructor(e){super("w:suff"),this.root.push(new zr({val:e}))}}class FH extends lt{constructor(){super("w:isLgl")}}class BH extends lt{constructor({level:e,format:t,text:r,alignment:i=Wa.START,start:s=1,style:u,suffix:l,isLegalNumberingStyle:c}){if(super("w:lvl"),nt(this,"paragraphProperties"),nt(this,"runProperties"),this.root.push(new Ih("w:start",_s(s))),t&&this.root.push(new MH(t)),l&&this.root.push(new UH(l)),c&&this.root.push(new FH),r&&this.root.push(new OH(r)),this.root.push(new DH(i)),this.paragraphProperties=new ad(u&&u.paragraph),this.runProperties=new Ac(u&&u.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new PH({ilvl:_s(e),tentative:1}))}}class qH extends BH{}class jH extends lt{constructor(e){super("w:multiLevelType"),this.root.push(new zr({val:e}))}}class zH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class ZT extends lt{constructor(e,t){super("w:abstractNum"),nt(this,"id"),this.root.push(new zH({abstractNumId:_s(e),restartNumberingAfterBreak:0})),this.root.push(new jH("hybridMultilevel")),this.id=e;for(const r of t)this.root.push(new qH(r))}}class HH extends lt{constructor(e){super("w:abstractNumId"),this.root.push(new zr({val:e}))}}class GH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{numId:"w:numId"})}}class QT extends lt{constructor(e){if(super("w:num"),nt(this,"numId"),nt(this,"reference"),nt(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new GH({numId:_s(e.numId)})),this.root.push(new HH(_s(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(const t of e.overrideLevels)this.root.push(new $H(t.num,t.start))}}class VH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{ilvl:"w:ilvl"})}}class $H extends lt{constructor(e,t){super("w:lvlOverride"),this.root.push(new VH({ilvl:e})),t!==void 0&&this.root.push(new KH(t))}}class WH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{val:"w:val"})}}class KH extends lt{constructor(e){super("w:startOverride"),this.root.push(new WH({val:e}))}}class JH extends lt{constructor(e){super("w:numbering"),nt(this,"abstractNumberingMap",new Map),nt(this,"concreteNumberingMap",new Map),nt(this,"referenceConfigMap",new Map),nt(this,"abstractNumUniqueNumericId",Xj()),nt(this,"concreteNumUniqueNumericId",Zj()),this.root.push(new jg(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const t=new ZT(this.abstractNumUniqueNumericId(),[{level:0,format:wl.BULLET,text:"●",alignment:Wa.LEFT,style:{paragraph:{indent:{left:Va(.5),hanging:Va(.25)}}}},{level:1,format:wl.BULLET,text:"○",alignment:Wa.LEFT,style:{paragraph:{indent:{left:Va(1),hanging:Va(.25)}}}},{level:2,format:wl.BULLET,text:"■",alignment:Wa.LEFT,style:{paragraph:{indent:{left:2160,hanging:Va(.25)}}}},{level:3,format:wl.BULLET,text:"●",alignment:Wa.LEFT,style:{paragraph:{indent:{left:2880,hanging:Va(.25)}}}},{level:4,format:wl.BULLET,text:"○",alignment:Wa.LEFT,style:{paragraph:{indent:{left:3600,hanging:Va(.25)}}}},{level:5,format:wl.BULLET,text:"■",alignment:Wa.LEFT,style:{paragraph:{indent:{left:4320,hanging:Va(.25)}}}},{level:6,format:wl.BULLET,text:"●",alignment:Wa.LEFT,style:{paragraph:{indent:{left:5040,hanging:Va(.25)}}}},{level:7,format:wl.BULLET,text:"●",alignment:Wa.LEFT,style:{paragraph:{indent:{left:5760,hanging:Va(.25)}}}},{level:8,format:wl.BULLET,text:"●",alignment:Wa.LEFT,style:{paragraph:{indent:{left:6480,hanging:Va(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new QT({numId:1,abstractNumId:t.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",t);for(const r of e.config)this.abstractNumberingMap.set(r.reference,new ZT(this.abstractNumUniqueNumericId(),r.levels)),this.referenceConfigMap.set(r.reference,r.levels)}prepForXml(e){for(const t of this.abstractNumberingMap.values())this.root.push(t);for(const t of this.concreteNumberingMap.values())this.root.push(t);return super.prepForXml(e)}createConcreteNumberingInstance(e,t){const r=this.abstractNumberingMap.get(e);if(!r)return;const i=`${e}-${t}`;if(this.concreteNumberingMap.has(i))return;const s=this.referenceConfigMap.get(e),u=s&&s[0].start,l={numId:this.concreteNumUniqueNumericId(),abstractNumId:r.id,reference:e,instance:t,overrideLevels:[u&&Number.isInteger(u)?{num:0,start:u}:{num:0,start:1}]};this.concreteNumberingMap.set(i,new QT(l))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class YH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class XH extends lt{constructor(e){super("w:compatSetting"),this.root.push(new YH({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class ZH extends lt{constructor(e){super("w:compat"),e.version&&this.root.push(new XH(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new ut("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new ut("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new ut("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new ut("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new ut("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new ut("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new ut("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new ut("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new ut("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new ut("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new ut("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new ut("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new ut("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new ut("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new ut("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new ut("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new ut("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new ut("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new ut("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new ut("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new ut("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new ut("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new ut("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new ut("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new ut("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new ut("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new ut("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new ut("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new ut("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new ut("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new ut("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new ut("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new ut("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new ut("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new ut("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new ut("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new ut("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new ut("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new ut("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new ut("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new ut("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new ut("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new ut("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new ut("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new ut("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new ut("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new ut("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new ut("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new ut("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new ut("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new ut("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new ut("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new ut("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new ut("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new ut("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new ut("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new ut("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new ut("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new ut("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new ut("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new ut("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new ut("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new ut("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new ut("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new ut("w:cachedColBalance",e.cachedColumnBalance))}}class QH extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class eG extends lt{constructor(e){var t,r,i,s,u,l,c,f;super("w:settings"),this.root.push(new QH({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new ut("w:displayBackgroundShape",!0)),e.trackRevisions!==void 0&&this.root.push(new ut("w:trackRevisions",e.trackRevisions)),e.evenAndOddHeaders!==void 0&&this.root.push(new ut("w:evenAndOddHeaders",e.evenAndOddHeaders)),e.updateFields!==void 0&&this.root.push(new ut("w:updateFields",e.updateFields)),e.defaultTabStop!==void 0&&this.root.push(new Ih("w:defaultTabStop",e.defaultTabStop)),((t=e.hyphenation)==null?void 0:t.autoHyphenation)!==void 0&&this.root.push(new ut("w:autoHyphenation",e.hyphenation.autoHyphenation)),((r=e.hyphenation)==null?void 0:r.hyphenationZone)!==void 0&&this.root.push(new Ih("w:hyphenationZone",e.hyphenation.hyphenationZone)),((i=e.hyphenation)==null?void 0:i.consecutiveHyphenLimit)!==void 0&&this.root.push(new Ih("w:consecutiveHyphenLimit",e.hyphenation.consecutiveHyphenLimit)),((s=e.hyphenation)==null?void 0:s.doNotHyphenateCaps)!==void 0&&this.root.push(new ut("w:doNotHyphenateCaps",e.hyphenation.doNotHyphenateCaps)),this.root.push(new ZH(td(An({},(u=e.compatibility)!=null?u:{}),{version:(f=(c=(l=e.compatibility)==null?void 0:l.version)!=null?c:e.compatibilityModeVersion)!=null?f:15})))}}class XN extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{val:"w:val"})}}class tG extends lt{constructor(e){super("w:name"),this.root.push(new XN({val:e}))}}class nG extends lt{constructor(e){super("w:uiPriority"),this.root.push(new XN({val:_s(e)}))}}class rG extends Yt{constructor(){super(...arguments),nt(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class ZN extends lt{constructor(e,t){super("w:style"),this.root.push(new rG(e)),t.name&&this.root.push(new tG(t.name)),t.basedOn&&this.root.push(new Yf("w:basedOn",t.basedOn)),t.next&&this.root.push(new Yf("w:next",t.next)),t.link&&this.root.push(new Yf("w:link",t.link)),t.uiPriority!==void 0&&this.root.push(new nG(t.uiPriority)),t.semiHidden!==void 0&&this.root.push(new ut("w:semiHidden",t.semiHidden)),t.unhideWhenUsed!==void 0&&this.root.push(new ut("w:unhideWhenUsed",t.unhideWhenUsed)),t.quickFormat!==void 0&&this.root.push(new ut("w:qFormat",t.quickFormat))}}class zg extends ZN{constructor(e){super({type:"paragraph",styleId:e.id},e),nt(this,"paragraphProperties"),nt(this,"runProperties"),this.paragraphProperties=new ad(e.paragraph),this.runProperties=new Ac(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class Hg extends ZN{constructor(e){super({type:"character",styleId:e.id},An({uiPriority:99,unhideWhenUsed:!0},e)),nt(this,"runProperties"),this.runProperties=new Ac(e.run),this.root.push(this.runProperties)}}class wu extends zg{constructor(e){super(An({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}}class iG extends wu{constructor(e){super(An({id:"Title",name:"Title"},e))}}class sG extends wu{constructor(e){super(An({id:"Heading1",name:"Heading 1"},e))}}class aG extends wu{constructor(e){super(An({id:"Heading2",name:"Heading 2"},e))}}class oG extends wu{constructor(e){super(An({id:"Heading3",name:"Heading 3"},e))}}class lG extends wu{constructor(e){super(An({id:"Heading4",name:"Heading 4"},e))}}class uG extends wu{constructor(e){super(An({id:"Heading5",name:"Heading 5"},e))}}class cG extends wu{constructor(e){super(An({id:"Heading6",name:"Heading 6"},e))}}class fG extends wu{constructor(e){super(An({id:"Strong",name:"Strong"},e))}}class dG extends zg{constructor(e){super(An({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}}class hG extends zg{constructor(e){super(An({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:Fw.AUTO}},run:{size:20}},e))}}class pG extends Hg{constructor(e){super(An({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}}class mG extends Hg{constructor(e){super(An({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}}class gG extends Hg{constructor(e){super(An({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:$N.SINGLE}}},e))}}class qw extends lt{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(const t of e.importedStyles)this.root.push(t);if(e.paragraphStyles)for(const t of e.paragraphStyles)this.root.push(new zg(t));if(e.characterStyles)for(const t of e.characterStyles)this.root.push(new Hg(t))}}class yG extends lt{constructor(e){super("w:pPrDefault"),this.root.push(new ad(e))}}class vG extends lt{constructor(e){super("w:rPrDefault"),this.root.push(new Ac(e))}}class wG extends lt{constructor(e){super("w:docDefaults"),nt(this,"runPropertiesDefaults"),nt(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new vG(e.run),this.paragraphPropertiesDefaults=new yG(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class bG{newInstance(e){const t=BN.xml2js(e,{compact:!1});let r;for(const u of t.elements||[])u.name==="w:styles"&&(r=u);if(r===void 0)throw new Error("can not find styles element");const i=r.elements||[];return new qw({initialStyles:new fj(r.attributes),importedStyles:i.map(u=>jb(u))})}}class e3{newInstance(e={}){var t;return{initialStyles:new jg(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new wG((t=e.document)!=null?t:{}),new iG(An({run:{size:56}},e.title)),new sG(An({run:{color:"2E74B5",size:32}},e.heading1)),new aG(An({run:{color:"2E74B5",size:26}},e.heading2)),new oG(An({run:{color:"1F4D78",size:24}},e.heading3)),new lG(An({run:{color:"2E74B5",italics:!0}},e.heading4)),new uG(An({run:{color:"2E74B5"}},e.heading5)),new cG(An({run:{color:"1F4D78"}},e.heading6)),new fG(An({run:{bold:!0}},e.strong)),new dG(e.listParagraph||{}),new gG(e.hyperlink||{}),new pG(e.footnoteReference||{}),new hG(e.footnoteText||{}),new mG(e.footnoteTextChar||{})]}}}let _G=class{constructor(e){nt(this,"currentRelationshipId",1),nt(this,"documentWrapper"),nt(this,"headers",[]),nt(this,"footers",[]),nt(this,"coreProperties"),nt(this,"numbering"),nt(this,"media"),nt(this,"fileRelationships"),nt(this,"footnotesWrapper"),nt(this,"settings"),nt(this,"contentTypes"),nt(this,"customProperties"),nt(this,"appProperties"),nt(this,"styles"),nt(this,"comments"),nt(this,"fontWrapper");var t,r,i,s,u,l,c,f,h,g,y,m;if(this.coreProperties=new sH(td(An({},e),{creator:(t=e.creator)!=null?t:"Un-named",revision:(r=e.revision)!=null?r:1,lastModifiedBy:(i=e.lastModifiedBy)!=null?i:"Un-named"})),this.numbering=new JH(e.numbering?e.numbering:{config:[]}),this.comments=new uz((s=e.comments)!=null?s:{children:[]}),this.fileRelationships=new Ec,this.customProperties=new fH((u=e.customProperties)!=null?u:[]),this.appProperties=new eH,this.footnotesWrapper=new NH,this.contentTypes=new iH,this.documentWrapper=new YN({background:e.background}),this.settings=new eG({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:(l=e.features)==null?void 0:l.trackRevisions,updateFields:(c=e.features)==null?void 0:c.updateFields,defaultTabStop:e.defaultTabStop,hyphenation:{autoHyphenation:(f=e.hyphenation)==null?void 0:f.autoHyphenation,hyphenationZone:(h=e.hyphenation)==null?void 0:h.hyphenationZone,consecutiveHyphenLimit:(g=e.hyphenation)==null?void 0:g.consecutiveHyphenLimit,doNotHyphenateCaps:(y=e.hyphenation)==null?void 0:y.doNotHyphenateCaps}}),this.media=new LH,e.externalStyles!==void 0){const E=new bG;this.styles=E.newInstance(e.externalStyles)}else if(e.styles){const _=new e3().newInstance(e.styles.default);this.styles=new qw(An(An({},_),e.styles))}else{const E=new e3;this.styles=new qw(E.newInstance())}this.addDefaultRelationships();for(const E of e.sections)this.addSection(E);if(e.footnotes)for(const E in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(E),e.footnotes[E].children);this.fontWrapper=new mH((m=e.fonts)!=null?m:[])}addSection({headers:e={},footers:t={},children:r,properties:i}){this.documentWrapper.View.Body.addSection(td(An({},i),{headerWrapperGroup:{default:e.default?this.createHeader(e.default):void 0,first:e.first?this.createHeader(e.first):void 0,even:e.even?this.createHeader(e.even):void 0},footerWrapperGroup:{default:t.default?this.createFooter(t.default):void 0,first:t.first?this.createFooter(t.first):void 0,even:t.even?this.createFooter(t.even):void 0}}));for(const s of r)this.documentWrapper.View.add(s)}createHeader(e){const t=new IH(this.media,this.currentRelationshipId++);for(const r of e.options.children)t.add(r);return this.addHeaderToDocument(t),t}createFooter(e){const t=new vH(this.media,this.currentRelationshipId++);for(const r of e.options.children)t.add(r);return this.addFooterToDocument(t),t}addHeaderToDocument(e,t=Xf.DEFAULT){this.headers.push({header:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e,t=Xf.DEFAULT){this.footers.push({footer:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(e=>e.header)}get Footers(){return this.footers.map(e=>e.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}};var SG=Fb();function xm(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pv={exports:{}},t3;function xG(){return t3||(t3=1,(function(n,e){(function(t){n.exports=t()})(function(){return(function t(r,i,s){function u(f,h){if(!i[f]){if(!r[f]){var g=typeof xm=="function"&&xm;if(!h&&g)return g(f,!0);if(l)return l(f,!0);var y=new Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y}var m=i[f]={exports:{}};r[f][0].call(m.exports,function(E){var _=r[f][1][E];return u(_||E)},m,m.exports,t,r,i,s)}return i[f].exports}for(var l=typeof xm=="function"&&xm,c=0;c<s.length;c++)u(s[c]);return u})({1:[function(t,r,i){var s=t("./utils"),u=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var f,h,g,y,m,E,_,R=[],b=0,N=c.length,C=N,A=s.getTypeOf(c)!=="string";b<c.length;)C=N-b,g=A?(f=c[b++],h=b<N?c[b++]:0,b<N?c[b++]:0):(f=c.charCodeAt(b++),h=b<N?c.charCodeAt(b++):0,b<N?c.charCodeAt(b++):0),y=f>>2,m=(3&f)<<4|h>>4,E=1<C?(15&h)<<2|g>>6:64,_=2<C?63&g:64,R.push(l.charAt(y)+l.charAt(m)+l.charAt(E)+l.charAt(_));return R.join("")},i.decode=function(c){var f,h,g,y,m,E,_=0,R=0,b="data:";if(c.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var N,C=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&C--,c.charAt(c.length-2)===l.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(N=u.uint8array?new Uint8Array(0|C):new Array(0|C);_<c.length;)f=l.indexOf(c.charAt(_++))<<2|(y=l.indexOf(c.charAt(_++)))>>4,h=(15&y)<<4|(m=l.indexOf(c.charAt(_++)))>>2,g=(3&m)<<6|(E=l.indexOf(c.charAt(_++))),N[R++]=f,m!==64&&(N[R++]=h),E!==64&&(N[R++]=g);return N}},{"./support":30,"./utils":32}],2:[function(t,r,i){var s=t("./external"),u=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function f(h,g,y,m,E){this.compressedSize=h,this.uncompressedSize=g,this.crc32=y,this.compression=m,this.compressedContent=E}f.prototype={getContentWorker:function(){var h=new u(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),g=this;return h.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new u(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(h,g,y){return h.pipe(new l).pipe(new c("uncompressedSize")).pipe(g.compressWorker(y)).pipe(new c("compressedSize")).withStreamInfo("compression",g)},r.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var s=t("./utils"),u=(function(){for(var l,c=[],f=0;f<256;f++){l=f;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;c[f]=l}return c})();r.exports=function(l,c){return l!==void 0&&l.length?s.getTypeOf(l)!=="string"?(function(f,h,g,y){var m=u,E=y+g;f^=-1;for(var _=y;_<E;_++)f=f>>>8^m[255&(f^h[_])];return-1^f})(0|c,l,l.length,0):(function(f,h,g,y){var m=u,E=y+g;f^=-1;for(var _=y;_<E;_++)f=f>>>8^m[255&(f^h.charCodeAt(_))];return-1^f})(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=t("pako"),l=t("./utils"),c=t("./stream/GenericWorker"),f=s?"uint8array":"array";function h(g,y){c.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=y,this.meta={}}i.magic="\b\0",l.inherits(h,c),h.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(f,g.data),!1)},h.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(y){g.push({data:y,meta:g.meta})}},i.compressWorker=function(g){return new h("Deflate",g)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function s(m,E){var _,R="";for(_=0;_<E;_++)R+=String.fromCharCode(255&m),m>>>=8;return R}function u(m,E,_,R,b,N){var C,A,F=m.file,J=m.compression,V=N!==f.utf8encode,te=l.transformTo("string",N(F.name)),O=l.transformTo("string",f.utf8encode(F.name)),le=F.comment,Q=l.transformTo("string",N(le)),U=l.transformTo("string",f.utf8encode(le)),X=O.length!==F.name.length,M=U.length!==le.length,ye="",se="",ie="",Se=F.dir,me=F.date,Ne={crc32:0,compressedSize:0,uncompressedSize:0};E&&!_||(Ne.crc32=m.crc32,Ne.compressedSize=m.compressedSize,Ne.uncompressedSize=m.uncompressedSize);var K=0;E&&(K|=8),V||!X&&!M||(K|=2048);var L=0,$=0;Se&&(L|=16),b==="UNIX"?($=798,L|=(function(pe,ae){var B=pe;return pe||(B=ae?16893:33204),(65535&B)<<16})(F.unixPermissions,Se)):($=20,L|=(function(pe){return 63&(pe||0)})(F.dosPermissions)),C=me.getUTCHours(),C<<=6,C|=me.getUTCMinutes(),C<<=5,C|=me.getUTCSeconds()/2,A=me.getUTCFullYear()-1980,A<<=4,A|=me.getUTCMonth()+1,A<<=5,A|=me.getUTCDate(),X&&(se=s(1,1)+s(h(te),4)+O,ye+="up"+s(se.length,2)+se),M&&(ie=s(1,1)+s(h(Q),4)+U,ye+="uc"+s(ie.length,2)+ie);var ee="";return ee+=`
\0`,ee+=s(K,2),ee+=J.magic,ee+=s(C,2),ee+=s(A,2),ee+=s(Ne.crc32,4),ee+=s(Ne.compressedSize,4),ee+=s(Ne.uncompressedSize,4),ee+=s(te.length,2),ee+=s(ye.length,2),{fileRecord:g.LOCAL_FILE_HEADER+ee+te+ye,dirRecord:g.CENTRAL_FILE_HEADER+s($,2)+ee+s(Q.length,2)+"\0\0\0\0"+s(L,4)+s(R,4)+te+ye+Q}}var l=t("../utils"),c=t("../stream/GenericWorker"),f=t("../utf8"),h=t("../crc32"),g=t("../signature");function y(m,E,_,R){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=_,this.encodeFileName=R,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(y,c),y.prototype.push=function(m){var E=m.meta.percent||0,_=this.entriesCount,R=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:_?(E+100*(_-R-1))/_:100}}))},y.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var E=this.streamFiles&&!m.file.dir;if(E){var _=u(m,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(m){this.accumulate=!1;var E=this.streamFiles&&!m.file.dir,_=u(m,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),E)this.push({data:(function(R){return g.DATA_DESCRIPTOR+s(R.crc32,4)+s(R.compressedSize,4)+s(R.uncompressedSize,4)})(m),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var m=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var _=this.bytesWritten-m,R=(function(b,N,C,A,F){var J=l.transformTo("string",F(A));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(b,2)+s(b,2)+s(N,4)+s(C,4)+s(J.length,2)+J})(this.dirRecords.length,_,m,this.zipComment,this.encodeFileName);this.push({data:R,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(m){this._sources.push(m);var E=this;return m.on("data",function(_){E.processChunk(_)}),m.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),m.on("error",function(_){E.error(_)}),this},y.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(m){var E=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var _=0;_<E.length;_++)try{E[_].error(m)}catch{}return!0},y.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,E=0;E<m.length;E++)m[E].lock()},r.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var s=t("../compressions"),u=t("./ZipFileWorker");i.generateWorker=function(l,c,f){var h=new u(c.streamFiles,f,c.platform,c.encodeFileName),g=0;try{l.forEach(function(y,m){g++;var E=(function(N,C){var A=N||C,F=s[A];if(!F)throw new Error(A+" is not a valid compression method !");return F})(m.options.compression,c.compression),_=m.options.compressionOptions||c.compressionOptions||{},R=m.dir,b=m.date;m._compressWorker(E,_).withStreamInfo("file",{name:y,dir:R,date:b,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(h)}),h.entriesCount=g}catch(y){h.error(y)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new s;for(var l in this)typeof this[l]!="function"&&(u[l]=this[l]);return u}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(u,l){return new s().loadAsync(u,l)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var s=t("./utils"),u=t("./external"),l=t("./utf8"),c=t("./zipEntries"),f=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function g(y){return new u.Promise(function(m,E){var _=y.decompressed.getContentWorker().pipe(new f);_.on("error",function(R){E(R)}).on("end",function(){_.streamInfo.crc32!==y.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(y,m){var E=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),h.isNode&&h.isStream(y)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",y,!0,m.optimizedBinaryString,m.base64).then(function(_){var R=new c(m);return R.load(_),R}).then(function(_){var R=[u.Promise.resolve(_)],b=_.files;if(m.checkCRC32)for(var N=0;N<b.length;N++)R.push(g(b[N]));return u.Promise.all(R)}).then(function(_){for(var R=_.shift(),b=R.files,N=0;N<b.length;N++){var C=b[N],A=C.fileNameStr,F=s.resolve(C.fileNameStr);E.file(F,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:m.createFolders}),C.dir||(E.file(F).unsafeOriginalName=A)}return R.zipComment.length&&(E.comment=R.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var s=t("../utils"),u=t("../stream/GenericWorker");function l(c,f){u.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(f)}s.inherits(l,u),l.prototype._bindStream=function(c){var f=this;(this._stream=c).pause(),c.on("data",function(h){f.push({data:h,meta:{percent:0}})}).on("error",function(h){f.isPaused?this.generatedError=h:f.error(h)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},l.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var s=t("readable-stream").Readable;function u(l,c,f){s.call(this,c),this._helper=l;var h=this;l.on("data",function(g,y){h.push(g)||h._helper.pause(),f&&f(y)}).on("error",function(g){h.emit("error",g)}).on("end",function(){h.push(null)})}t("../utils").inherits(u,s),u.prototype._read=function(){this._helper.resume()},r.exports=u},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,u);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,u)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var u=new Buffer(s);return u.fill(0),u},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,i){function s(F,J,V){var te,O=l.getTypeOf(J),le=l.extend(V||{},h);le.date=le.date||new Date,le.compression!==null&&(le.compression=le.compression.toUpperCase()),typeof le.unixPermissions=="string"&&(le.unixPermissions=parseInt(le.unixPermissions,8)),le.unixPermissions&&16384&le.unixPermissions&&(le.dir=!0),le.dosPermissions&&16&le.dosPermissions&&(le.dir=!0),le.dir&&(F=b(F)),le.createFolders&&(te=R(F))&&N.call(this,te,!0);var Q=O==="string"&&le.binary===!1&&le.base64===!1;V&&V.binary!==void 0||(le.binary=!Q),(J instanceof g&&J.uncompressedSize===0||le.dir||!J||J.length===0)&&(le.base64=!1,le.binary=!0,J="",le.compression="STORE",O="string");var U=null;U=J instanceof g||J instanceof c?J:E.isNode&&E.isStream(J)?new _(F,J):l.prepareContent(F,J,le.binary,le.optimizedBinaryString,le.base64);var X=new y(F,U,le);this.files[F]=X}var u=t("./utf8"),l=t("./utils"),c=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),h=t("./defaults"),g=t("./compressedObject"),y=t("./zipObject"),m=t("./generate"),E=t("./nodejsUtils"),_=t("./nodejs/NodejsStreamInputAdapter"),R=function(F){F.slice(-1)==="/"&&(F=F.substring(0,F.length-1));var J=F.lastIndexOf("/");return 0<J?F.substring(0,J):""},b=function(F){return F.slice(-1)!=="/"&&(F+="/"),F},N=function(F,J){return J=J!==void 0?J:h.createFolders,F=b(F),this.files[F]||s.call(this,F,null,{dir:!0,createFolders:J}),this.files[F]};function C(F){return Object.prototype.toString.call(F)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(F){var J,V,te;for(J in this.files)te=this.files[J],(V=J.slice(this.root.length,J.length))&&J.slice(0,this.root.length)===this.root&&F(V,te)},filter:function(F){var J=[];return this.forEach(function(V,te){F(V,te)&&J.push(te)}),J},file:function(F,J,V){if(arguments.length!==1)return F=this.root+F,s.call(this,F,J,V),this;if(C(F)){var te=F;return this.filter(function(le,Q){return!Q.dir&&te.test(le)})}var O=this.files[this.root+F];return O&&!O.dir?O:null},folder:function(F){if(!F)return this;if(C(F))return this.filter(function(O,le){return le.dir&&F.test(O)});var J=this.root+F,V=N.call(this,J),te=this.clone();return te.root=V.name,te},remove:function(F){F=this.root+F;var J=this.files[F];if(J||(F.slice(-1)!=="/"&&(F+="/"),J=this.files[F]),J&&!J.dir)delete this.files[F];else for(var V=this.filter(function(O,le){return le.name.slice(0,F.length)===F}),te=0;te<V.length;te++)delete this.files[V[te].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(F){var J,V={};try{if((V=l.extend(F||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=V.type.toLowerCase(),V.compression=V.compression.toUpperCase(),V.type==="binarystring"&&(V.type="string"),!V.type)throw new Error("No output type specified.");l.checkSupport(V.type),V.platform!=="darwin"&&V.platform!=="freebsd"&&V.platform!=="linux"&&V.platform!=="sunos"||(V.platform="UNIX"),V.platform==="win32"&&(V.platform="DOS");var te=V.comment||this.comment||"";J=m.generateWorker(this,V,te)}catch(O){(J=new c("error")).error(O)}return new f(J,V.type||"string",V.mimeType)},generateAsync:function(F,J){return this.generateInternalStream(F).accumulate(J)},generateNodeStream:function(F,J){return(F=F||{}).type||(F.type="nodebuffer"),this.generateInternalStream(F).toNodejsStream(J)}};r.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var s=t("./DataReader");function u(l){s.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}t("../utils").inherits(u,s),u.prototype.byteAt=function(l){return this.data[this.zero+l]},u.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),f=l.charCodeAt(1),h=l.charCodeAt(2),g=l.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===c&&this.data[y+1]===f&&this.data[y+2]===h&&this.data[y+3]===g)return y-this.zero;return-1},u.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),f=l.charCodeAt(1),h=l.charCodeAt(2),g=l.charCodeAt(3),y=this.readData(4);return c===y[0]&&f===y[1]&&h===y[2]&&g===y[3]},u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=u},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var s=t("../utils");function u(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,f=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)f=(f<<8)+this.byteAt(c);return this.index+=l,f},readString:function(l){return s.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=u},{"../utils":32}],19:[function(t,r,i){var s=t("./Uint8ArrayReader");function u(l){s.call(this,l)}t("../utils").inherits(u,s),u.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var s=t("./DataReader");function u(l){s.call(this,l)}t("../utils").inherits(u,s),u.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},u.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},u.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},u.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=u},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var s=t("./ArrayReader");function u(l){s.call(this,l)}t("../utils").inherits(u,s),u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var s=t("../utils"),u=t("../support"),l=t("./ArrayReader"),c=t("./StringReader"),f=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");r.exports=function(g){var y=s.getTypeOf(g);return s.checkSupport(y),y!=="string"||u.uint8array?y==="nodebuffer"?new f(g):u.uint8array?new h(s.transformTo("uint8array",g)):new l(s.transformTo("array",g)):new c(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var s=t("./GenericWorker"),u=t("../utils");function l(c){s.call(this,"ConvertWorker to "+c),this.destType=c}u.inherits(l,s),l.prototype.processChunk=function(c){this.push({data:u.transformTo(this.destType,c.data),meta:c.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var s=t("./GenericWorker"),u=t("../crc32");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,s),l.prototype.processChunk=function(c){this.streamInfo.crc32=u(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var s=t("../utils"),u=t("./GenericWorker");function l(c){u.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(l,u),l.prototype.processChunk=function(c){if(c){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+c.data.length}u.prototype.processChunk.call(this,c)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var s=t("../utils"),u=t("./GenericWorker");function l(c){u.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){f.dataIsReady=!0,f.data=h,f.max=h&&h.length||0,f.type=s.getTypeOf(h),f.isPaused||f._tickAndRepeat()},function(h){f.error(h)})}s.inherits(l,u),l.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,f);break;case"uint8array":c=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":c=this.data.slice(this.index,f)}return this.index=f,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function s(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,l){return this._listeners[u].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,l){if(this._listeners[u])for(var c=0;c<this._listeners[u].length;c++)this._listeners[u][c].call(this,l)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var l=this;return u.on("data",function(c){l.processChunk(c)}),u.on("end",function(){l.end()}),u.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,l){return this.extraStreamInfo[u]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},r.exports=s},{}],29:[function(t,r,i){var s=t("../utils"),u=t("./ConvertWorker"),l=t("./GenericWorker"),c=t("../base64"),f=t("../support"),h=t("../external"),g=null;if(f.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(E,_){return new h.Promise(function(R,b){var N=[],C=E._internalType,A=E._outputType,F=E._mimeType;E.on("data",function(J,V){N.push(J),_&&_(V)}).on("error",function(J){N=[],b(J)}).on("end",function(){try{var J=(function(V,te,O){switch(V){case"blob":return s.newBlob(s.transformTo("arraybuffer",te),O);case"base64":return c.encode(te);default:return s.transformTo(V,te)}})(A,(function(V,te){var O,le=0,Q=null,U=0;for(O=0;O<te.length;O++)U+=te[O].length;switch(V){case"string":return te.join("");case"array":return Array.prototype.concat.apply([],te);case"uint8array":for(Q=new Uint8Array(U),O=0;O<te.length;O++)Q.set(te[O],le),le+=te[O].length;return Q;case"nodebuffer":return Buffer.concat(te);default:throw new Error("concat : unsupported type '"+V+"'")}})(C,N),F);R(J)}catch(V){b(V)}N=[]}).resume()})}function m(E,_,R){var b=_;switch(_){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=_,this._mimeType=R,s.checkSupport(b),this._worker=E.pipe(new u(b)),E.lock()}catch(N){this._worker=new l("error"),this._worker.error(N)}}m.prototype={accumulate:function(E){return y(this,E)},on:function(E,_){var R=this;return E==="data"?this._worker.on(E,function(b){_.call(R,b.data,b.meta)}):this._worker.on(E,function(){s.delay(_,arguments,R)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},E)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(s),i.blob=u.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var s=t("./utils"),u=t("./support"),l=t("./nodejsUtils"),c=t("./stream/GenericWorker"),f=new Array(256),h=0;h<256;h++)f[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;f[254]=f[254]=1;function g(){c.call(this,"utf-8 decode"),this.leftOver=null}function y(){c.call(this,"utf-8 encode")}i.utf8encode=function(m){return u.nodebuffer?l.newBufferFrom(m,"utf-8"):(function(E){var _,R,b,N,C,A=E.length,F=0;for(N=0;N<A;N++)(64512&(R=E.charCodeAt(N)))==55296&&N+1<A&&(64512&(b=E.charCodeAt(N+1)))==56320&&(R=65536+(R-55296<<10)+(b-56320),N++),F+=R<128?1:R<2048?2:R<65536?3:4;for(_=u.uint8array?new Uint8Array(F):new Array(F),N=C=0;C<F;N++)(64512&(R=E.charCodeAt(N)))==55296&&N+1<A&&(64512&(b=E.charCodeAt(N+1)))==56320&&(R=65536+(R-55296<<10)+(b-56320),N++),R<128?_[C++]=R:(R<2048?_[C++]=192|R>>>6:(R<65536?_[C++]=224|R>>>12:(_[C++]=240|R>>>18,_[C++]=128|R>>>12&63),_[C++]=128|R>>>6&63),_[C++]=128|63&R);return _})(m)},i.utf8decode=function(m){return u.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):(function(E){var _,R,b,N,C=E.length,A=new Array(2*C);for(_=R=0;_<C;)if((b=E[_++])<128)A[R++]=b;else if(4<(N=f[b]))A[R++]=65533,_+=N-1;else{for(b&=N===2?31:N===3?15:7;1<N&&_<C;)b=b<<6|63&E[_++],N--;1<N?A[R++]=65533:b<65536?A[R++]=b:(b-=65536,A[R++]=55296|b>>10&1023,A[R++]=56320|1023&b)}return A.length!==R&&(A.subarray?A=A.subarray(0,R):A.length=R),s.applyFromCharCode(A)})(m=s.transformTo(u.uint8array?"uint8array":"array",m))},s.inherits(g,c),g.prototype.processChunk=function(m){var E=s.transformTo(u.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var _=E;(E=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),E.set(_,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var R=(function(N,C){var A;for((C=C||N.length)>N.length&&(C=N.length),A=C-1;0<=A&&(192&N[A])==128;)A--;return A<0||A===0?C:A+f[N[A]]>C?A:C})(E),b=E;R!==E.length&&(u.uint8array?(b=E.subarray(0,R),this.leftOver=E.subarray(R,E.length)):(b=E.slice(0,R),this.leftOver=E.slice(R,E.length))),this.push({data:i.utf8decode(b),meta:m.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,s.inherits(y,c),y.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var s=t("./support"),u=t("./base64"),l=t("./nodejsUtils"),c=t("./external");function f(_){return _}function h(_,R){for(var b=0;b<_.length;++b)R[b]=255&_.charCodeAt(b);return R}t("setimmediate"),i.newBlob=function(_,R){i.checkSupport("blob");try{return new Blob([_],{type:R})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(_),b.getBlob(R)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(_,R,b){var N=[],C=0,A=_.length;if(A<=b)return String.fromCharCode.apply(null,_);for(;C<A;)R==="array"||R==="nodebuffer"?N.push(String.fromCharCode.apply(null,_.slice(C,Math.min(C+b,A)))):N.push(String.fromCharCode.apply(null,_.subarray(C,Math.min(C+b,A)))),C+=b;return N.join("")},stringifyByChar:function(_){for(var R="",b=0;b<_.length;b++)R+=String.fromCharCode(_[b]);return R},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function y(_){var R=65536,b=i.getTypeOf(_),N=!0;if(b==="uint8array"?N=g.applyCanBeUsed.uint8array:b==="nodebuffer"&&(N=g.applyCanBeUsed.nodebuffer),N)for(;1<R;)try{return g.stringifyByChunk(_,b,R)}catch{R=Math.floor(R/2)}return g.stringifyByChar(_)}function m(_,R){for(var b=0;b<_.length;b++)R[b]=_[b];return R}i.applyFromCharCode=y;var E={};E.string={string:f,array:function(_){return h(_,new Array(_.length))},arraybuffer:function(_){return E.string.uint8array(_).buffer},uint8array:function(_){return h(_,new Uint8Array(_.length))},nodebuffer:function(_){return h(_,l.allocBuffer(_.length))}},E.array={string:y,array:f,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return l.newBufferFrom(_)}},E.arraybuffer={string:function(_){return y(new Uint8Array(_))},array:function(_){return m(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:f,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return l.newBufferFrom(new Uint8Array(_))}},E.uint8array={string:y,array:function(_){return m(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:f,nodebuffer:function(_){return l.newBufferFrom(_)}},E.nodebuffer={string:y,array:function(_){return m(_,new Array(_.length))},arraybuffer:function(_){return E.nodebuffer.uint8array(_).buffer},uint8array:function(_){return m(_,new Uint8Array(_.length))},nodebuffer:f},i.transformTo=function(_,R){if(R=R||"",!_)return R;i.checkSupport(_);var b=i.getTypeOf(R);return E[b][_](R)},i.resolve=function(_){for(var R=_.split("/"),b=[],N=0;N<R.length;N++){var C=R[N];C==="."||C===""&&N!==0&&N!==R.length-1||(C===".."?b.pop():b.push(C))}return b.join("/")},i.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":s.nodebuffer&&l.isBuffer(_)?"nodebuffer":s.uint8array&&_ instanceof Uint8Array?"uint8array":s.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(_){if(!s[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(_){var R,b,N="";for(b=0;b<(_||"").length;b++)N+="\\x"+((R=_.charCodeAt(b))<16?"0":"")+R.toString(16).toUpperCase();return N},i.delay=function(_,R,b){setImmediate(function(){_.apply(b||null,R||[])})},i.inherits=function(_,R){function b(){}b.prototype=R.prototype,_.prototype=new b},i.extend=function(){var _,R,b={};for(_=0;_<arguments.length;_++)for(R in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],R)&&b[R]===void 0&&(b[R]=arguments[_][R]);return b},i.prepareContent=function(_,R,b,N,C){return c.Promise.resolve(R).then(function(A){return s.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new c.Promise(function(F,J){var V=new FileReader;V.onload=function(te){F(te.target.result)},V.onerror=function(te){J(te.target.error)},V.readAsArrayBuffer(A)}):A}).then(function(A){var F=i.getTypeOf(A);return F?(F==="arraybuffer"?A=i.transformTo("uint8array",A):F==="string"&&(C?A=u.decode(A):b&&N!==!0&&(A=(function(J){return h(J,s.uint8array?new Uint8Array(J.length):new Array(J.length))})(A))),A):c.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var s=t("./reader/readerFor"),u=t("./utils"),l=t("./signature"),c=t("./zipEntry"),f=t("./support");function h(g){this.files=[],this.loadOptions=g}h.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(y)+", expected "+u.pretty(g)+")")}},isSignature:function(g,y){var m=this.reader.index;this.reader.setIndex(g);var E=this.reader.readString(4)===y;return this.reader.setIndex(m),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),y=f.uint8array?"uint8array":"array",m=u.transformTo(y,g);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,y,m,E=this.zip64EndOfCentralSize-44;0<E;)g=this.reader.readInt(2),y=this.reader.readInt(4),m=this.reader.readData(y),this.zip64ExtensibleData[g]={id:g,length:y,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,y;for(g=0;g<this.files.length;g++)y=this.files[g],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(g=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var y=g;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var E=y-m;if(0<E)this.isSignature(y,l.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(g){this.reader=s(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var s=t("./reader/readerFor"),u=t("./utils"),l=t("./compressedObject"),c=t("./crc32"),f=t("./utf8"),h=t("./compressions"),g=t("./support");function y(m,E){this.options=m,this.loadOptions=E}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var E,_;if(m.skip(22),this.fileNameLength=m.readInt(2),_=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=(function(R){for(var b in h)if(Object.prototype.hasOwnProperty.call(h,b)&&h[b].magic===R)return h[b];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,E,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var E=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(E),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var E,_,R,b=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<b;)E=m.readInt(2),_=m.readInt(2),R=m.readData(_),this.extraFields[E]={id:E,length:_,value:R};m.setIndex(b)},handleUTF8:function(){var m=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var _=u.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var R=this.findExtraFieldUnicodeComment();if(R!==null)this.fileCommentStr=R;else{var b=u.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var E=s(m.value);return E.readInt(1)!==1||c(this.fileName)!==E.readInt(4)?null:f.utf8decode(E.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var E=s(m.value);return E.readInt(1)!==1||c(this.fileComment)!==E.readInt(4)?null:f.utf8decode(E.readData(m.length-5))}return null}},r.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function s(E,_,R){this.name=E,this.dir=R.dir,this.date=R.date,this.comment=R.comment,this.unixPermissions=R.unixPermissions,this.dosPermissions=R.dosPermissions,this._data=_,this._dataBinary=R.binary,this.options={compression:R.compression,compressionOptions:R.compressionOptions}}var u=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),c=t("./utf8"),f=t("./compressedObject"),h=t("./stream/GenericWorker");s.prototype={internalStream:function(E){var _=null,R="string";try{if(!E)throw new Error("No output type specified.");var b=(R=E.toLowerCase())==="string"||R==="text";R!=="binarystring"&&R!=="text"||(R="string"),_=this._decompressWorker();var N=!this._dataBinary;N&&!b&&(_=_.pipe(new c.Utf8EncodeWorker)),!N&&b&&(_=_.pipe(new c.Utf8DecodeWorker))}catch(C){(_=new h("error")).error(C)}return new u(_,R,"")},async:function(E,_){return this.internalStream(E).accumulate(_)},nodeStream:function(E,_){return this.internalStream(E||"nodebuffer").toNodejsStream(_)},_compressWorker:function(E,_){if(this._data instanceof f&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var R=this._decompressWorker();return this._dataBinary||(R=R.pipe(new c.Utf8EncodeWorker)),f.createWorkerFrom(R,E,_)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof h?this._data:new l(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<g.length;m++)s.prototype[g[m]]=y;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(s){var u,l,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var f=0,h=new c(E),g=s.document.createTextNode("");h.observe(g,{characterData:!0}),u=function(){g.data=f=++f%2}}else if(s.setImmediate||s.MessageChannel===void 0)u="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var _=s.document.createElement("script");_.onreadystatechange=function(){E(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},s.document.documentElement.appendChild(_)}:function(){setTimeout(E,0)};else{var y=new s.MessageChannel;y.port1.onmessage=E,u=function(){y.port2.postMessage(0)}}var m=[];function E(){var _,R;l=!0;for(var b=m.length;b;){for(R=m,m=[],_=-1;++_<b;)R[_]();b=m.length}l=!1}r.exports=function(_){m.push(_)!==1||l||u()}}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var s=t("immediate");function u(){}var l={},c=["REJECTED"],f=["FULFILLED"],h=["PENDING"];function g(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,b!==u&&_(this,b)}function y(b,N,C){this.promise=b,typeof N=="function"&&(this.onFulfilled=N,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function m(b,N,C){s(function(){var A;try{A=N(C)}catch(F){return l.reject(b,F)}A===b?l.reject(b,new TypeError("Cannot resolve promise with itself")):l.resolve(b,A)})}function E(b){var N=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof N=="function")return function(){N.apply(b,arguments)}}function _(b,N){var C=!1;function A(V){C||(C=!0,l.reject(b,V))}function F(V){C||(C=!0,l.resolve(b,V))}var J=R(function(){N(F,A)});J.status==="error"&&A(J.value)}function R(b,N){var C={};try{C.value=b(N),C.status="success"}catch(A){C.status="error",C.value=A}return C}(r.exports=g).prototype.finally=function(b){if(typeof b!="function")return this;var N=this.constructor;return this.then(function(C){return N.resolve(b()).then(function(){return C})},function(C){return N.resolve(b()).then(function(){throw C})})},g.prototype.catch=function(b){return this.then(null,b)},g.prototype.then=function(b,N){if(typeof b!="function"&&this.state===f||typeof N!="function"&&this.state===c)return this;var C=new this.constructor(u);return this.state!==h?m(C,this.state===f?b:N,this.outcome):this.queue.push(new y(C,b,N)),C},y.prototype.callFulfilled=function(b){l.resolve(this.promise,b)},y.prototype.otherCallFulfilled=function(b){m(this.promise,this.onFulfilled,b)},y.prototype.callRejected=function(b){l.reject(this.promise,b)},y.prototype.otherCallRejected=function(b){m(this.promise,this.onRejected,b)},l.resolve=function(b,N){var C=R(E,N);if(C.status==="error")return l.reject(b,C.value);var A=C.value;if(A)_(b,A);else{b.state=f,b.outcome=N;for(var F=-1,J=b.queue.length;++F<J;)b.queue[F].callFulfilled(N)}return b},l.reject=function(b,N){b.state=c,b.outcome=N;for(var C=-1,A=b.queue.length;++C<A;)b.queue[C].callRejected(N);return b},g.resolve=function(b){return b instanceof this?b:l.resolve(new this(u),b)},g.reject=function(b){var N=new this(u);return l.reject(N,b)},g.all=function(b){var N=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=b.length,A=!1;if(!C)return this.resolve([]);for(var F=new Array(C),J=0,V=-1,te=new this(u);++V<C;)O(b[V],V);return te;function O(le,Q){N.resolve(le).then(function(U){F[Q]=U,++J!==C||A||(A=!0,l.resolve(te,F))},function(U){A||(A=!0,l.reject(te,U))})}},g.race=function(b){var N=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=b.length,A=!1;if(!C)return this.resolve([]);for(var F=-1,J=new this(u);++F<C;)V=b[F],N.resolve(V).then(function(te){A||(A=!0,l.resolve(J,te))},function(te){A||(A=!0,l.reject(J,te))});var V;return J}},{immediate:36}],38:[function(t,r,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var s=t("./zlib/deflate"),u=t("./utils/common"),l=t("./utils/strings"),c=t("./zlib/messages"),f=t("./zlib/zstream"),h=Object.prototype.toString,g=0,y=-1,m=0,E=8;function _(b){if(!(this instanceof _))return new _(b);this.options=u.assign({level:y,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},b||{});var N=this.options;N.raw&&0<N.windowBits?N.windowBits=-N.windowBits:N.gzip&&0<N.windowBits&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var C=s.deflateInit2(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy);if(C!==g)throw new Error(c[C]);if(N.header&&s.deflateSetHeader(this.strm,N.header),N.dictionary){var A;if(A=typeof N.dictionary=="string"?l.string2buf(N.dictionary):h.call(N.dictionary)==="[object ArrayBuffer]"?new Uint8Array(N.dictionary):N.dictionary,(C=s.deflateSetDictionary(this.strm,A))!==g)throw new Error(c[C]);this._dict_set=!0}}function R(b,N){var C=new _(N);if(C.push(b,!0),C.err)throw C.msg||c[C.err];return C.result}_.prototype.push=function(b,N){var C,A,F=this.strm,J=this.options.chunkSize;if(this.ended)return!1;A=N===~~N?N:N===!0?4:0,typeof b=="string"?F.input=l.string2buf(b):h.call(b)==="[object ArrayBuffer]"?F.input=new Uint8Array(b):F.input=b,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new u.Buf8(J),F.next_out=0,F.avail_out=J),(C=s.deflate(F,A))!==1&&C!==g)return this.onEnd(C),!(this.ended=!0);F.avail_out!==0&&(F.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(u.shrinkBuf(F.output,F.next_out))):this.onData(u.shrinkBuf(F.output,F.next_out)))}while((0<F.avail_in||F.avail_out===0)&&C!==1);return A===4?(C=s.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===g):A!==2||(this.onEnd(g),!(F.avail_out=0))},_.prototype.onData=function(b){this.chunks.push(b)},_.prototype.onEnd=function(b){b===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Deflate=_,i.deflate=R,i.deflateRaw=function(b,N){return(N=N||{}).raw=!0,R(b,N)},i.gzip=function(b,N){return(N=N||{}).gzip=!0,R(b,N)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var s=t("./zlib/inflate"),u=t("./utils/common"),l=t("./utils/strings"),c=t("./zlib/constants"),f=t("./zlib/messages"),h=t("./zlib/zstream"),g=t("./zlib/gzheader"),y=Object.prototype.toString;function m(_){if(!(this instanceof m))return new m(_);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},_||{});var R=this.options;R.raw&&0<=R.windowBits&&R.windowBits<16&&(R.windowBits=-R.windowBits,R.windowBits===0&&(R.windowBits=-15)),!(0<=R.windowBits&&R.windowBits<16)||_&&_.windowBits||(R.windowBits+=32),15<R.windowBits&&R.windowBits<48&&(15&R.windowBits)==0&&(R.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var b=s.inflateInit2(this.strm,R.windowBits);if(b!==c.Z_OK)throw new Error(f[b]);this.header=new g,s.inflateGetHeader(this.strm,this.header)}function E(_,R){var b=new m(R);if(b.push(_,!0),b.err)throw b.msg||f[b.err];return b.result}m.prototype.push=function(_,R){var b,N,C,A,F,J,V=this.strm,te=this.options.chunkSize,O=this.options.dictionary,le=!1;if(this.ended)return!1;N=R===~~R?R:R===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof _=="string"?V.input=l.binstring2buf(_):y.call(_)==="[object ArrayBuffer]"?V.input=new Uint8Array(_):V.input=_,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new u.Buf8(te),V.next_out=0,V.avail_out=te),(b=s.inflate(V,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&O&&(J=typeof O=="string"?l.string2buf(O):y.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,b=s.inflateSetDictionary(this.strm,J)),b===c.Z_BUF_ERROR&&le===!0&&(b=c.Z_OK,le=!1),b!==c.Z_STREAM_END&&b!==c.Z_OK)return this.onEnd(b),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&b!==c.Z_STREAM_END&&(V.avail_in!==0||N!==c.Z_FINISH&&N!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=l.utf8border(V.output,V.next_out),A=V.next_out-C,F=l.buf2string(V.output,C),V.next_out=A,V.avail_out=te-A,A&&u.arraySet(V.output,V.output,C,A,0),this.onData(F)):this.onData(u.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(le=!0)}while((0<V.avail_in||V.avail_out===0)&&b!==c.Z_STREAM_END);return b===c.Z_STREAM_END&&(N=c.Z_FINISH),N===c.Z_FINISH?(b=s.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===c.Z_OK):N!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(V.avail_out=0))},m.prototype.onData=function(_){this.chunks.push(_)},m.prototype.onEnd=function(_){_===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Inflate=m,i.inflate=E,i.inflateRaw=function(_,R){return(R=R||{}).raw=!0,E(_,R)},i.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var h=f.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var g in h)h.hasOwnProperty(g)&&(c[g]=h[g])}}return c},i.shrinkBuf=function(c,f){return c.length===f?c:c.subarray?c.subarray(0,f):(c.length=f,c)};var u={arraySet:function(c,f,h,g,y){if(f.subarray&&c.subarray)c.set(f.subarray(h,h+g),y);else for(var m=0;m<g;m++)c[y+m]=f[h+m]},flattenChunks:function(c){var f,h,g,y,m,E;for(f=g=0,h=c.length;f<h;f++)g+=c[f].length;for(E=new Uint8Array(g),f=y=0,h=c.length;f<h;f++)m=c[f],E.set(m,y),y+=m.length;return E}},l={arraySet:function(c,f,h,g,y){for(var m=0;m<g;m++)c[y+m]=f[h+m]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,u)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(s)},{}],42:[function(t,r,i){var s=t("./common"),u=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new s.Buf8(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function h(g,y){if(y<65537&&(g.subarray&&l||!g.subarray&&u))return String.fromCharCode.apply(null,s.shrinkBuf(g,y));for(var m="",E=0;E<y;E++)m+=String.fromCharCode(g[E]);return m}c[254]=c[254]=1,i.string2buf=function(g){var y,m,E,_,R,b=g.length,N=0;for(_=0;_<b;_++)(64512&(m=g.charCodeAt(_)))==55296&&_+1<b&&(64512&(E=g.charCodeAt(_+1)))==56320&&(m=65536+(m-55296<<10)+(E-56320),_++),N+=m<128?1:m<2048?2:m<65536?3:4;for(y=new s.Buf8(N),_=R=0;R<N;_++)(64512&(m=g.charCodeAt(_)))==55296&&_+1<b&&(64512&(E=g.charCodeAt(_+1)))==56320&&(m=65536+(m-55296<<10)+(E-56320),_++),m<128?y[R++]=m:(m<2048?y[R++]=192|m>>>6:(m<65536?y[R++]=224|m>>>12:(y[R++]=240|m>>>18,y[R++]=128|m>>>12&63),y[R++]=128|m>>>6&63),y[R++]=128|63&m);return y},i.buf2binstring=function(g){return h(g,g.length)},i.binstring2buf=function(g){for(var y=new s.Buf8(g.length),m=0,E=y.length;m<E;m++)y[m]=g.charCodeAt(m);return y},i.buf2string=function(g,y){var m,E,_,R,b=y||g.length,N=new Array(2*b);for(m=E=0;m<b;)if((_=g[m++])<128)N[E++]=_;else if(4<(R=c[_]))N[E++]=65533,m+=R-1;else{for(_&=R===2?31:R===3?15:7;1<R&&m<b;)_=_<<6|63&g[m++],R--;1<R?N[E++]=65533:_<65536?N[E++]=_:(_-=65536,N[E++]=55296|_>>10&1023,N[E++]=56320|1023&_)}return h(N,E)},i.utf8border=function(g,y){var m;for((y=y||g.length)>g.length&&(y=g.length),m=y-1;0<=m&&(192&g[m])==128;)m--;return m<0||m===0?y:m+c[g[m]]>y?m:y}},{"./common":41}],43:[function(t,r,i){r.exports=function(s,u,l,c){for(var f=65535&s|0,h=s>>>16&65535|0,g=0;l!==0;){for(l-=g=2e3<l?2e3:l;h=h+(f=f+u[c++]|0)|0,--g;);f%=65521,h%=65521}return f|h<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var s=(function(){for(var u,l=[],c=0;c<256;c++){u=c;for(var f=0;f<8;f++)u=1&u?3988292384^u>>>1:u>>>1;l[c]=u}return l})();r.exports=function(u,l,c,f){var h=s,g=f+c;u^=-1;for(var y=f;y<g;y++)u=u>>>8^h[255&(u^l[y])];return-1^u}},{}],46:[function(t,r,i){var s,u=t("../utils/common"),l=t("./trees"),c=t("./adler32"),f=t("./crc32"),h=t("./messages"),g=0,y=4,m=0,E=-2,_=-1,R=4,b=2,N=8,C=9,A=286,F=30,J=19,V=2*A+1,te=15,O=3,le=258,Q=le+O+1,U=42,X=113,M=1,ye=2,se=3,ie=4;function Se(q,oe){return q.msg=h[oe],oe}function me(q){return(q<<1)-(4<q?9:0)}function Ne(q){for(var oe=q.length;0<=--oe;)q[oe]=0}function K(q){var oe=q.state,Y=oe.pending;Y>q.avail_out&&(Y=q.avail_out),Y!==0&&(u.arraySet(q.output,oe.pending_buf,oe.pending_out,Y,q.next_out),q.next_out+=Y,oe.pending_out+=Y,q.total_out+=Y,q.avail_out-=Y,oe.pending-=Y,oe.pending===0&&(oe.pending_out=0))}function L(q,oe){l._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,oe),q.block_start=q.strstart,K(q.strm)}function $(q,oe){q.pending_buf[q.pending++]=oe}function ee(q,oe){q.pending_buf[q.pending++]=oe>>>8&255,q.pending_buf[q.pending++]=255&oe}function pe(q,oe){var Y,I,P=q.max_chain_length,H=q.strstart,be=q.prev_length,ne=q.nice_match,we=q.strstart>q.w_size-Q?q.strstart-(q.w_size-Q):0,Re=q.window,De=q.w_mask,Ue=q.prev,Ke=q.strstart+le,at=Re[H+be-1],ot=Re[H+be];q.prev_length>=q.good_match&&(P>>=2),ne>q.lookahead&&(ne=q.lookahead);do if(Re[(Y=oe)+be]===ot&&Re[Y+be-1]===at&&Re[Y]===Re[H]&&Re[++Y]===Re[H+1]){H+=2,Y++;do;while(Re[++H]===Re[++Y]&&Re[++H]===Re[++Y]&&Re[++H]===Re[++Y]&&Re[++H]===Re[++Y]&&Re[++H]===Re[++Y]&&Re[++H]===Re[++Y]&&Re[++H]===Re[++Y]&&Re[++H]===Re[++Y]&&H<Ke);if(I=le-(Ke-H),H=Ke-le,be<I){if(q.match_start=oe,ne<=(be=I))break;at=Re[H+be-1],ot=Re[H+be]}}while((oe=Ue[oe&De])>we&&--P!=0);return be<=q.lookahead?be:q.lookahead}function ae(q){var oe,Y,I,P,H,be,ne,we,Re,De,Ue=q.w_size;do{if(P=q.window_size-q.lookahead-q.strstart,q.strstart>=Ue+(Ue-Q)){for(u.arraySet(q.window,q.window,Ue,Ue,0),q.match_start-=Ue,q.strstart-=Ue,q.block_start-=Ue,oe=Y=q.hash_size;I=q.head[--oe],q.head[oe]=Ue<=I?I-Ue:0,--Y;);for(oe=Y=Ue;I=q.prev[--oe],q.prev[oe]=Ue<=I?I-Ue:0,--Y;);P+=Ue}if(q.strm.avail_in===0)break;if(be=q.strm,ne=q.window,we=q.strstart+q.lookahead,Re=P,De=void 0,De=be.avail_in,Re<De&&(De=Re),Y=De===0?0:(be.avail_in-=De,u.arraySet(ne,be.input,be.next_in,De,we),be.state.wrap===1?be.adler=c(be.adler,ne,De,we):be.state.wrap===2&&(be.adler=f(be.adler,ne,De,we)),be.next_in+=De,be.total_in+=De,De),q.lookahead+=Y,q.lookahead+q.insert>=O)for(H=q.strstart-q.insert,q.ins_h=q.window[H],q.ins_h=(q.ins_h<<q.hash_shift^q.window[H+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[H+O-1])&q.hash_mask,q.prev[H&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=H,H++,q.insert--,!(q.lookahead+q.insert<O)););}while(q.lookahead<Q&&q.strm.avail_in!==0)}function B(q,oe){for(var Y,I;;){if(q.lookahead<Q){if(ae(q),q.lookahead<Q&&oe===g)return M;if(q.lookahead===0)break}if(Y=0,q.lookahead>=O&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+O-1])&q.hash_mask,Y=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),Y!==0&&q.strstart-Y<=q.w_size-Q&&(q.match_length=pe(q,Y)),q.match_length>=O)if(I=l._tr_tally(q,q.strstart-q.match_start,q.match_length-O),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=O){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+O-1])&q.hash_mask,Y=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,--q.match_length!=0;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else I=l._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(I&&(L(q,!1),q.strm.avail_out===0))return M}return q.insert=q.strstart<O-1?q.strstart:O-1,oe===y?(L(q,!0),q.strm.avail_out===0?se:ie):q.last_lit&&(L(q,!1),q.strm.avail_out===0)?M:ye}function j(q,oe){for(var Y,I,P;;){if(q.lookahead<Q){if(ae(q),q.lookahead<Q&&oe===g)return M;if(q.lookahead===0)break}if(Y=0,q.lookahead>=O&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+O-1])&q.hash_mask,Y=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=O-1,Y!==0&&q.prev_length<q.max_lazy_match&&q.strstart-Y<=q.w_size-Q&&(q.match_length=pe(q,Y),q.match_length<=5&&(q.strategy===1||q.match_length===O&&4096<q.strstart-q.match_start)&&(q.match_length=O-1)),q.prev_length>=O&&q.match_length<=q.prev_length){for(P=q.strstart+q.lookahead-O,I=l._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-O),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=P&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+O-1])&q.hash_mask,Y=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),--q.prev_length!=0;);if(q.match_available=0,q.match_length=O-1,q.strstart++,I&&(L(q,!1),q.strm.avail_out===0))return M}else if(q.match_available){if((I=l._tr_tally(q,0,q.window[q.strstart-1]))&&L(q,!1),q.strstart++,q.lookahead--,q.strm.avail_out===0)return M}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(I=l._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<O-1?q.strstart:O-1,oe===y?(L(q,!0),q.strm.avail_out===0?se:ie):q.last_lit&&(L(q,!1),q.strm.avail_out===0)?M:ye}function de(q,oe,Y,I,P){this.good_length=q,this.max_lazy=oe,this.nice_length=Y,this.max_chain=I,this.func=P}function fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=N,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*V),this.dyn_dtree=new u.Buf16(2*(2*F+1)),this.bl_tree=new u.Buf16(2*(2*J+1)),Ne(this.dyn_ltree),Ne(this.dyn_dtree),Ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(te+1),this.heap=new u.Buf16(2*A+1),Ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*A+1),Ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function re(q){var oe;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=b,(oe=q.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?U:X,q.adler=oe.wrap===2?0:1,oe.last_flush=g,l._tr_init(oe),m):Se(q,E)}function he(q){var oe=re(q);return oe===m&&(function(Y){Y.window_size=2*Y.w_size,Ne(Y.head),Y.max_lazy_match=s[Y.level].max_lazy,Y.good_match=s[Y.level].good_length,Y.nice_match=s[Y.level].nice_length,Y.max_chain_length=s[Y.level].max_chain,Y.strstart=0,Y.block_start=0,Y.lookahead=0,Y.insert=0,Y.match_length=Y.prev_length=O-1,Y.match_available=0,Y.ins_h=0})(q.state),oe}function ke(q,oe,Y,I,P,H){if(!q)return E;var be=1;if(oe===_&&(oe=6),I<0?(be=0,I=-I):15<I&&(be=2,I-=16),P<1||C<P||Y!==N||I<8||15<I||oe<0||9<oe||H<0||R<H)return Se(q,E);I===8&&(I=9);var ne=new fe;return(q.state=ne).strm=q,ne.wrap=be,ne.gzhead=null,ne.w_bits=I,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=P+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+O-1)/O),ne.window=new u.Buf8(2*ne.w_size),ne.head=new u.Buf16(ne.hash_size),ne.prev=new u.Buf16(ne.w_size),ne.lit_bufsize=1<<P+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new u.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=oe,ne.strategy=H,ne.method=Y,he(q)}s=[new de(0,0,0,0,function(q,oe){var Y=65535;for(Y>q.pending_buf_size-5&&(Y=q.pending_buf_size-5);;){if(q.lookahead<=1){if(ae(q),q.lookahead===0&&oe===g)return M;if(q.lookahead===0)break}q.strstart+=q.lookahead,q.lookahead=0;var I=q.block_start+Y;if((q.strstart===0||q.strstart>=I)&&(q.lookahead=q.strstart-I,q.strstart=I,L(q,!1),q.strm.avail_out===0)||q.strstart-q.block_start>=q.w_size-Q&&(L(q,!1),q.strm.avail_out===0))return M}return q.insert=0,oe===y?(L(q,!0),q.strm.avail_out===0?se:ie):(q.strstart>q.block_start&&(L(q,!1),q.strm.avail_out),M)}),new de(4,4,8,4,B),new de(4,5,16,8,B),new de(4,6,32,32,B),new de(4,4,16,16,j),new de(8,16,32,32,j),new de(8,16,128,128,j),new de(8,32,128,256,j),new de(32,128,258,1024,j),new de(32,258,258,4096,j)],i.deflateInit=function(q,oe){return ke(q,oe,N,15,8,0)},i.deflateInit2=ke,i.deflateReset=he,i.deflateResetKeep=re,i.deflateSetHeader=function(q,oe){return q&&q.state?q.state.wrap!==2?E:(q.state.gzhead=oe,m):E},i.deflate=function(q,oe){var Y,I,P,H;if(!q||!q.state||5<oe||oe<0)return q?Se(q,E):E;if(I=q.state,!q.output||!q.input&&q.avail_in!==0||I.status===666&&oe!==y)return Se(q,q.avail_out===0?-5:E);if(I.strm=q,Y=I.last_flush,I.last_flush=oe,I.status===U)if(I.wrap===2)q.adler=0,$(I,31),$(I,139),$(I,8),I.gzhead?($(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),$(I,255&I.gzhead.time),$(I,I.gzhead.time>>8&255),$(I,I.gzhead.time>>16&255),$(I,I.gzhead.time>>24&255),$(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),$(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&($(I,255&I.gzhead.extra.length),$(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(q.adler=f(q.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):($(I,0),$(I,0),$(I,0),$(I,0),$(I,0),$(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),$(I,3),I.status=X);else{var be=N+(I.w_bits-8<<4)<<8;be|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(be|=32),be+=31-be%31,I.status=X,ee(I,be),I.strstart!==0&&(ee(I,q.adler>>>16),ee(I,65535&q.adler)),q.adler=1}if(I.status===69)if(I.gzhead.extra){for(P=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>P&&(q.adler=f(q.adler,I.pending_buf,I.pending-P,P)),K(q),P=I.pending,I.pending!==I.pending_buf_size));)$(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>P&&(q.adler=f(q.adler,I.pending_buf,I.pending-P,P)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){P=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>P&&(q.adler=f(q.adler,I.pending_buf,I.pending-P,P)),K(q),P=I.pending,I.pending===I.pending_buf_size)){H=1;break}H=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,$(I,H)}while(H!==0);I.gzhead.hcrc&&I.pending>P&&(q.adler=f(q.adler,I.pending_buf,I.pending-P,P)),H===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){P=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>P&&(q.adler=f(q.adler,I.pending_buf,I.pending-P,P)),K(q),P=I.pending,I.pending===I.pending_buf_size)){H=1;break}H=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,$(I,H)}while(H!==0);I.gzhead.hcrc&&I.pending>P&&(q.adler=f(q.adler,I.pending_buf,I.pending-P,P)),H===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&K(q),I.pending+2<=I.pending_buf_size&&($(I,255&q.adler),$(I,q.adler>>8&255),q.adler=0,I.status=X)):I.status=X),I.pending!==0){if(K(q),q.avail_out===0)return I.last_flush=-1,m}else if(q.avail_in===0&&me(oe)<=me(Y)&&oe!==y)return Se(q,-5);if(I.status===666&&q.avail_in!==0)return Se(q,-5);if(q.avail_in!==0||I.lookahead!==0||oe!==g&&I.status!==666){var ne=I.strategy===2?(function(we,Re){for(var De;;){if(we.lookahead===0&&(ae(we),we.lookahead===0)){if(Re===g)return M;break}if(we.match_length=0,De=l._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,De&&(L(we,!1),we.strm.avail_out===0))return M}return we.insert=0,Re===y?(L(we,!0),we.strm.avail_out===0?se:ie):we.last_lit&&(L(we,!1),we.strm.avail_out===0)?M:ye})(I,oe):I.strategy===3?(function(we,Re){for(var De,Ue,Ke,at,ot=we.window;;){if(we.lookahead<=le){if(ae(we),we.lookahead<=le&&Re===g)return M;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=O&&0<we.strstart&&(Ue=ot[Ke=we.strstart-1])===ot[++Ke]&&Ue===ot[++Ke]&&Ue===ot[++Ke]){at=we.strstart+le;do;while(Ue===ot[++Ke]&&Ue===ot[++Ke]&&Ue===ot[++Ke]&&Ue===ot[++Ke]&&Ue===ot[++Ke]&&Ue===ot[++Ke]&&Ue===ot[++Ke]&&Ue===ot[++Ke]&&Ke<at);we.match_length=le-(at-Ke),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=O?(De=l._tr_tally(we,1,we.match_length-O),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(De=l._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),De&&(L(we,!1),we.strm.avail_out===0))return M}return we.insert=0,Re===y?(L(we,!0),we.strm.avail_out===0?se:ie):we.last_lit&&(L(we,!1),we.strm.avail_out===0)?M:ye})(I,oe):s[I.level].func(I,oe);if(ne!==se&&ne!==ie||(I.status=666),ne===M||ne===se)return q.avail_out===0&&(I.last_flush=-1),m;if(ne===ye&&(oe===1?l._tr_align(I):oe!==5&&(l._tr_stored_block(I,0,0,!1),oe===3&&(Ne(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),K(q),q.avail_out===0))return I.last_flush=-1,m}return oe!==y?m:I.wrap<=0?1:(I.wrap===2?($(I,255&q.adler),$(I,q.adler>>8&255),$(I,q.adler>>16&255),$(I,q.adler>>24&255),$(I,255&q.total_in),$(I,q.total_in>>8&255),$(I,q.total_in>>16&255),$(I,q.total_in>>24&255)):(ee(I,q.adler>>>16),ee(I,65535&q.adler)),K(q),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?m:1)},i.deflateEnd=function(q){var oe;return q&&q.state?(oe=q.state.status)!==U&&oe!==69&&oe!==73&&oe!==91&&oe!==103&&oe!==X&&oe!==666?Se(q,E):(q.state=null,oe===X?Se(q,-3):m):E},i.deflateSetDictionary=function(q,oe){var Y,I,P,H,be,ne,we,Re,De=oe.length;if(!q||!q.state||(H=(Y=q.state).wrap)===2||H===1&&Y.status!==U||Y.lookahead)return E;for(H===1&&(q.adler=c(q.adler,oe,De,0)),Y.wrap=0,De>=Y.w_size&&(H===0&&(Ne(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0),Re=new u.Buf8(Y.w_size),u.arraySet(Re,oe,De-Y.w_size,Y.w_size,0),oe=Re,De=Y.w_size),be=q.avail_in,ne=q.next_in,we=q.input,q.avail_in=De,q.next_in=0,q.input=oe,ae(Y);Y.lookahead>=O;){for(I=Y.strstart,P=Y.lookahead-(O-1);Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[I+O-1])&Y.hash_mask,Y.prev[I&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=I,I++,--P;);Y.strstart=I,Y.lookahead=O-1,ae(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=O-1,Y.match_available=0,q.next_in=ne,q.input=we,q.avail_in=be,Y.wrap=H,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(s,u){var l,c,f,h,g,y,m,E,_,R,b,N,C,A,F,J,V,te,O,le,Q,U,X,M,ye;l=s.state,c=s.next_in,M=s.input,f=c+(s.avail_in-5),h=s.next_out,ye=s.output,g=h-(u-s.avail_out),y=h+(s.avail_out-257),m=l.dmax,E=l.wsize,_=l.whave,R=l.wnext,b=l.window,N=l.hold,C=l.bits,A=l.lencode,F=l.distcode,J=(1<<l.lenbits)-1,V=(1<<l.distbits)-1;e:do{C<15&&(N+=M[c++]<<C,C+=8,N+=M[c++]<<C,C+=8),te=A[N&J];t:for(;;){if(N>>>=O=te>>>24,C-=O,(O=te>>>16&255)===0)ye[h++]=65535&te;else{if(!(16&O)){if((64&O)==0){te=A[(65535&te)+(N&(1<<O)-1)];continue t}if(32&O){l.mode=12;break e}s.msg="invalid literal/length code",l.mode=30;break e}le=65535&te,(O&=15)&&(C<O&&(N+=M[c++]<<C,C+=8),le+=N&(1<<O)-1,N>>>=O,C-=O),C<15&&(N+=M[c++]<<C,C+=8,N+=M[c++]<<C,C+=8),te=F[N&V];n:for(;;){if(N>>>=O=te>>>24,C-=O,!(16&(O=te>>>16&255))){if((64&O)==0){te=F[(65535&te)+(N&(1<<O)-1)];continue n}s.msg="invalid distance code",l.mode=30;break e}if(Q=65535&te,C<(O&=15)&&(N+=M[c++]<<C,(C+=8)<O&&(N+=M[c++]<<C,C+=8)),m<(Q+=N&(1<<O)-1)){s.msg="invalid distance too far back",l.mode=30;break e}if(N>>>=O,C-=O,(O=h-g)<Q){if(_<(O=Q-O)&&l.sane){s.msg="invalid distance too far back",l.mode=30;break e}if(X=b,(U=0)===R){if(U+=E-O,O<le){for(le-=O;ye[h++]=b[U++],--O;);U=h-Q,X=ye}}else if(R<O){if(U+=E+R-O,(O-=R)<le){for(le-=O;ye[h++]=b[U++],--O;);if(U=0,R<le){for(le-=O=R;ye[h++]=b[U++],--O;);U=h-Q,X=ye}}}else if(U+=R-O,O<le){for(le-=O;ye[h++]=b[U++],--O;);U=h-Q,X=ye}for(;2<le;)ye[h++]=X[U++],ye[h++]=X[U++],ye[h++]=X[U++],le-=3;le&&(ye[h++]=X[U++],1<le&&(ye[h++]=X[U++]))}else{for(U=h-Q;ye[h++]=ye[U++],ye[h++]=ye[U++],ye[h++]=ye[U++],2<(le-=3););le&&(ye[h++]=ye[U++],1<le&&(ye[h++]=ye[U++]))}break}}break}}while(c<f&&h<y);c-=le=C>>3,N&=(1<<(C-=le<<3))-1,s.next_in=c,s.next_out=h,s.avail_in=c<f?f-c+5:5-(c-f),s.avail_out=h<y?y-h+257:257-(h-y),l.hold=N,l.bits=C}},{}],49:[function(t,r,i){var s=t("../utils/common"),u=t("./adler32"),l=t("./crc32"),c=t("./inffast"),f=t("./inftrees"),h=1,g=2,y=0,m=-2,E=1,_=852,R=592;function b(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function N(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(U){var X;return U&&U.state?(X=U.state,U.total_in=U.total_out=X.total=0,U.msg="",X.wrap&&(U.adler=1&X.wrap),X.mode=E,X.last=0,X.havedict=0,X.dmax=32768,X.head=null,X.hold=0,X.bits=0,X.lencode=X.lendyn=new s.Buf32(_),X.distcode=X.distdyn=new s.Buf32(R),X.sane=1,X.back=-1,y):m}function A(U){var X;return U&&U.state?((X=U.state).wsize=0,X.whave=0,X.wnext=0,C(U)):m}function F(U,X){var M,ye;return U&&U.state?(ye=U.state,X<0?(M=0,X=-X):(M=1+(X>>4),X<48&&(X&=15)),X&&(X<8||15<X)?m:(ye.window!==null&&ye.wbits!==X&&(ye.window=null),ye.wrap=M,ye.wbits=X,A(U))):m}function J(U,X){var M,ye;return U?(ye=new N,(U.state=ye).window=null,(M=F(U,X))!==y&&(U.state=null),M):m}var V,te,O=!0;function le(U){if(O){var X;for(V=new s.Buf32(512),te=new s.Buf32(32),X=0;X<144;)U.lens[X++]=8;for(;X<256;)U.lens[X++]=9;for(;X<280;)U.lens[X++]=7;for(;X<288;)U.lens[X++]=8;for(f(h,U.lens,0,288,V,0,U.work,{bits:9}),X=0;X<32;)U.lens[X++]=5;f(g,U.lens,0,32,te,0,U.work,{bits:5}),O=!1}U.lencode=V,U.lenbits=9,U.distcode=te,U.distbits=5}function Q(U,X,M,ye){var se,ie=U.state;return ie.window===null&&(ie.wsize=1<<ie.wbits,ie.wnext=0,ie.whave=0,ie.window=new s.Buf8(ie.wsize)),ye>=ie.wsize?(s.arraySet(ie.window,X,M-ie.wsize,ie.wsize,0),ie.wnext=0,ie.whave=ie.wsize):(ye<(se=ie.wsize-ie.wnext)&&(se=ye),s.arraySet(ie.window,X,M-ye,se,ie.wnext),(ye-=se)?(s.arraySet(ie.window,X,M-ye,ye,0),ie.wnext=ye,ie.whave=ie.wsize):(ie.wnext+=se,ie.wnext===ie.wsize&&(ie.wnext=0),ie.whave<ie.wsize&&(ie.whave+=se))),0}i.inflateReset=A,i.inflateReset2=F,i.inflateResetKeep=C,i.inflateInit=function(U){return J(U,15)},i.inflateInit2=J,i.inflate=function(U,X){var M,ye,se,ie,Se,me,Ne,K,L,$,ee,pe,ae,B,j,de,fe,re,he,ke,q,oe,Y,I,P=0,H=new s.Buf8(4),be=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return m;(M=U.state).mode===12&&(M.mode=13),Se=U.next_out,se=U.output,Ne=U.avail_out,ie=U.next_in,ye=U.input,me=U.avail_in,K=M.hold,L=M.bits,$=me,ee=Ne,oe=y;e:for(;;)switch(M.mode){case E:if(M.wrap===0){M.mode=13;break}for(;L<16;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if(2&M.wrap&&K===35615){H[M.check=0]=255&K,H[1]=K>>>8&255,M.check=l(M.check,H,2,0),L=K=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&K)<<8)+(K>>8))%31){U.msg="incorrect header check",M.mode=30;break}if((15&K)!=8){U.msg="unknown compression method",M.mode=30;break}if(L-=4,q=8+(15&(K>>>=4)),M.wbits===0)M.wbits=q;else if(q>M.wbits){U.msg="invalid window size",M.mode=30;break}M.dmax=1<<q,U.adler=M.check=1,M.mode=512&K?10:12,L=K=0;break;case 2:for(;L<16;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if(M.flags=K,(255&M.flags)!=8){U.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){U.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=K>>8&1),512&M.flags&&(H[0]=255&K,H[1]=K>>>8&255,M.check=l(M.check,H,2,0)),L=K=0,M.mode=3;case 3:for(;L<32;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}M.head&&(M.head.time=K),512&M.flags&&(H[0]=255&K,H[1]=K>>>8&255,H[2]=K>>>16&255,H[3]=K>>>24&255,M.check=l(M.check,H,4,0)),L=K=0,M.mode=4;case 4:for(;L<16;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}M.head&&(M.head.xflags=255&K,M.head.os=K>>8),512&M.flags&&(H[0]=255&K,H[1]=K>>>8&255,M.check=l(M.check,H,2,0)),L=K=0,M.mode=5;case 5:if(1024&M.flags){for(;L<16;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}M.length=K,M.head&&(M.head.extra_len=K),512&M.flags&&(H[0]=255&K,H[1]=K>>>8&255,M.check=l(M.check,H,2,0)),L=K=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(me<(pe=M.length)&&(pe=me),pe&&(M.head&&(q=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),s.arraySet(M.head.extra,ye,ie,pe,q)),512&M.flags&&(M.check=l(M.check,ye,pe,ie)),me-=pe,ie+=pe,M.length-=pe),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(me===0)break e;for(pe=0;q=ye[ie+pe++],M.head&&q&&M.length<65536&&(M.head.name+=String.fromCharCode(q)),q&&pe<me;);if(512&M.flags&&(M.check=l(M.check,ye,pe,ie)),me-=pe,ie+=pe,q)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(me===0)break e;for(pe=0;q=ye[ie+pe++],M.head&&q&&M.length<65536&&(M.head.comment+=String.fromCharCode(q)),q&&pe<me;);if(512&M.flags&&(M.check=l(M.check,ye,pe,ie)),me-=pe,ie+=pe,q)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;L<16;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if(K!==(65535&M.check)){U.msg="header crc mismatch",M.mode=30;break}L=K=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),U.adler=M.check=0,M.mode=12;break;case 10:for(;L<32;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}U.adler=M.check=b(K),L=K=0,M.mode=11;case 11:if(M.havedict===0)return U.next_out=Se,U.avail_out=Ne,U.next_in=ie,U.avail_in=me,M.hold=K,M.bits=L,2;U.adler=M.check=1,M.mode=12;case 12:if(X===5||X===6)break e;case 13:if(M.last){K>>>=7&L,L-=7&L,M.mode=27;break}for(;L<3;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}switch(M.last=1&K,L-=1,3&(K>>>=1)){case 0:M.mode=14;break;case 1:if(le(M),M.mode=20,X!==6)break;K>>>=2,L-=2;break e;case 2:M.mode=17;break;case 3:U.msg="invalid block type",M.mode=30}K>>>=2,L-=2;break;case 14:for(K>>>=7&L,L-=7&L;L<32;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if((65535&K)!=(K>>>16^65535)){U.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&K,L=K=0,M.mode=15,X===6)break e;case 15:M.mode=16;case 16:if(pe=M.length){if(me<pe&&(pe=me),Ne<pe&&(pe=Ne),pe===0)break e;s.arraySet(se,ye,ie,pe,Se),me-=pe,ie+=pe,Ne-=pe,Se+=pe,M.length-=pe;break}M.mode=12;break;case 17:for(;L<14;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if(M.nlen=257+(31&K),K>>>=5,L-=5,M.ndist=1+(31&K),K>>>=5,L-=5,M.ncode=4+(15&K),K>>>=4,L-=4,286<M.nlen||30<M.ndist){U.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;L<3;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}M.lens[be[M.have++]]=7&K,K>>>=3,L-=3}for(;M.have<19;)M.lens[be[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,Y={bits:M.lenbits},oe=f(0,M.lens,0,19,M.lencode,0,M.work,Y),M.lenbits=Y.bits,oe){U.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;de=(P=M.lencode[K&(1<<M.lenbits)-1])>>>16&255,fe=65535&P,!((j=P>>>24)<=L);){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if(fe<16)K>>>=j,L-=j,M.lens[M.have++]=fe;else{if(fe===16){for(I=j+2;L<I;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if(K>>>=j,L-=j,M.have===0){U.msg="invalid bit length repeat",M.mode=30;break}q=M.lens[M.have-1],pe=3+(3&K),K>>>=2,L-=2}else if(fe===17){for(I=j+3;L<I;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}L-=j,q=0,pe=3+(7&(K>>>=j)),K>>>=3,L-=3}else{for(I=j+7;L<I;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}L-=j,q=0,pe=11+(127&(K>>>=j)),K>>>=7,L-=7}if(M.have+pe>M.nlen+M.ndist){U.msg="invalid bit length repeat",M.mode=30;break}for(;pe--;)M.lens[M.have++]=q}}if(M.mode===30)break;if(M.lens[256]===0){U.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,Y={bits:M.lenbits},oe=f(h,M.lens,0,M.nlen,M.lencode,0,M.work,Y),M.lenbits=Y.bits,oe){U.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,Y={bits:M.distbits},oe=f(g,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,Y),M.distbits=Y.bits,oe){U.msg="invalid distances set",M.mode=30;break}if(M.mode=20,X===6)break e;case 20:M.mode=21;case 21:if(6<=me&&258<=Ne){U.next_out=Se,U.avail_out=Ne,U.next_in=ie,U.avail_in=me,M.hold=K,M.bits=L,c(U,ee),Se=U.next_out,se=U.output,Ne=U.avail_out,ie=U.next_in,ye=U.input,me=U.avail_in,K=M.hold,L=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;de=(P=M.lencode[K&(1<<M.lenbits)-1])>>>16&255,fe=65535&P,!((j=P>>>24)<=L);){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if(de&&(240&de)==0){for(re=j,he=de,ke=fe;de=(P=M.lencode[ke+((K&(1<<re+he)-1)>>re)])>>>16&255,fe=65535&P,!(re+(j=P>>>24)<=L);){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}K>>>=re,L-=re,M.back+=re}if(K>>>=j,L-=j,M.back+=j,M.length=fe,de===0){M.mode=26;break}if(32&de){M.back=-1,M.mode=12;break}if(64&de){U.msg="invalid literal/length code",M.mode=30;break}M.extra=15&de,M.mode=22;case 22:if(M.extra){for(I=M.extra;L<I;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}M.length+=K&(1<<M.extra)-1,K>>>=M.extra,L-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;de=(P=M.distcode[K&(1<<M.distbits)-1])>>>16&255,fe=65535&P,!((j=P>>>24)<=L);){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if((240&de)==0){for(re=j,he=de,ke=fe;de=(P=M.distcode[ke+((K&(1<<re+he)-1)>>re)])>>>16&255,fe=65535&P,!(re+(j=P>>>24)<=L);){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}K>>>=re,L-=re,M.back+=re}if(K>>>=j,L-=j,M.back+=j,64&de){U.msg="invalid distance code",M.mode=30;break}M.offset=fe,M.extra=15&de,M.mode=24;case 24:if(M.extra){for(I=M.extra;L<I;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}M.offset+=K&(1<<M.extra)-1,K>>>=M.extra,L-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){U.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(Ne===0)break e;if(pe=ee-Ne,M.offset>pe){if((pe=M.offset-pe)>M.whave&&M.sane){U.msg="invalid distance too far back",M.mode=30;break}ae=pe>M.wnext?(pe-=M.wnext,M.wsize-pe):M.wnext-pe,pe>M.length&&(pe=M.length),B=M.window}else B=se,ae=Se-M.offset,pe=M.length;for(Ne<pe&&(pe=Ne),Ne-=pe,M.length-=pe;se[Se++]=B[ae++],--pe;);M.length===0&&(M.mode=21);break;case 26:if(Ne===0)break e;se[Se++]=M.length,Ne--,M.mode=21;break;case 27:if(M.wrap){for(;L<32;){if(me===0)break e;me--,K|=ye[ie++]<<L,L+=8}if(ee-=Ne,U.total_out+=ee,M.total+=ee,ee&&(U.adler=M.check=M.flags?l(M.check,se,ee,Se-ee):u(M.check,se,ee,Se-ee)),ee=Ne,(M.flags?K:b(K))!==M.check){U.msg="incorrect data check",M.mode=30;break}L=K=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;L<32;){if(me===0)break e;me--,K+=ye[ie++]<<L,L+=8}if(K!==(4294967295&M.total)){U.msg="incorrect length check",M.mode=30;break}L=K=0}M.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;case 32:default:return m}return U.next_out=Se,U.avail_out=Ne,U.next_in=ie,U.avail_in=me,M.hold=K,M.bits=L,(M.wsize||ee!==U.avail_out&&M.mode<30&&(M.mode<27||X!==4))&&Q(U,U.output,U.next_out,ee-U.avail_out)?(M.mode=31,-4):($-=U.avail_in,ee-=U.avail_out,U.total_in+=$,U.total_out+=ee,M.total+=ee,M.wrap&&ee&&(U.adler=M.check=M.flags?l(M.check,se,ee,U.next_out-ee):u(M.check,se,ee,U.next_out-ee)),U.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),($==0&&ee===0||X===4)&&oe===y&&(oe=-5),oe)},i.inflateEnd=function(U){if(!U||!U.state)return m;var X=U.state;return X.window&&(X.window=null),U.state=null,y},i.inflateGetHeader=function(U,X){var M;return U&&U.state?(2&(M=U.state).wrap)==0?m:((M.head=X).done=!1,y):m},i.inflateSetDictionary=function(U,X){var M,ye=X.length;return U&&U.state?(M=U.state).wrap!==0&&M.mode!==11?m:M.mode===11&&u(1,X,ye,0)!==M.check?-3:Q(U,X,ye,ye)?(M.mode=31,-4):(M.havedict=1,y):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var s=t("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,g,y,m,E,_,R,b){var N,C,A,F,J,V,te,O,le,Q=b.bits,U=0,X=0,M=0,ye=0,se=0,ie=0,Se=0,me=0,Ne=0,K=0,L=null,$=0,ee=new s.Buf16(16),pe=new s.Buf16(16),ae=null,B=0;for(U=0;U<=15;U++)ee[U]=0;for(X=0;X<m;X++)ee[g[y+X]]++;for(se=Q,ye=15;1<=ye&&ee[ye]===0;ye--);if(ye<se&&(se=ye),ye===0)return E[_++]=20971520,E[_++]=20971520,b.bits=1,0;for(M=1;M<ye&&ee[M]===0;M++);for(se<M&&(se=M),U=me=1;U<=15;U++)if(me<<=1,(me-=ee[U])<0)return-1;if(0<me&&(h===0||ye!==1))return-1;for(pe[1]=0,U=1;U<15;U++)pe[U+1]=pe[U]+ee[U];for(X=0;X<m;X++)g[y+X]!==0&&(R[pe[g[y+X]]++]=X);if(V=h===0?(L=ae=R,19):h===1?(L=u,$-=257,ae=l,B-=257,256):(L=c,ae=f,-1),U=M,J=_,Se=X=K=0,A=-1,F=(Ne=1<<(ie=se))-1,h===1&&852<Ne||h===2&&592<Ne)return 1;for(;;){for(te=U-Se,le=R[X]<V?(O=0,R[X]):R[X]>V?(O=ae[B+R[X]],L[$+R[X]]):(O=96,0),N=1<<U-Se,M=C=1<<ie;E[J+(K>>Se)+(C-=N)]=te<<24|O<<16|le|0,C!==0;);for(N=1<<U-1;K&N;)N>>=1;if(N!==0?(K&=N-1,K+=N):K=0,X++,--ee[U]==0){if(U===ye)break;U=g[y+R[X]]}if(se<U&&(K&F)!==A){for(Se===0&&(Se=se),J+=M,me=1<<(ie=U-Se);ie+Se<ye&&!((me-=ee[ie+Se])<=0);)ie++,me<<=1;if(Ne+=1<<ie,h===1&&852<Ne||h===2&&592<Ne)return 1;E[A=K&F]=se<<24|ie<<16|J-_|0}}return K!==0&&(E[J+K]=U-Se<<24|64<<16|0),b.bits=se,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var s=t("../utils/common"),u=0,l=1;function c(P){for(var H=P.length;0<=--H;)P[H]=0}var f=0,h=29,g=256,y=g+1+h,m=30,E=19,_=2*y+1,R=15,b=16,N=7,C=256,A=16,F=17,J=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(y+2));c(Q);var U=new Array(2*m);c(U);var X=new Array(512);c(X);var M=new Array(256);c(M);var ye=new Array(h);c(ye);var se,ie,Se,me=new Array(m);function Ne(P,H,be,ne,we){this.static_tree=P,this.extra_bits=H,this.extra_base=be,this.elems=ne,this.max_length=we,this.has_stree=P&&P.length}function K(P,H){this.dyn_tree=P,this.max_code=0,this.stat_desc=H}function L(P){return P<256?X[P]:X[256+(P>>>7)]}function $(P,H){P.pending_buf[P.pending++]=255&H,P.pending_buf[P.pending++]=H>>>8&255}function ee(P,H,be){P.bi_valid>b-be?(P.bi_buf|=H<<P.bi_valid&65535,$(P,P.bi_buf),P.bi_buf=H>>b-P.bi_valid,P.bi_valid+=be-b):(P.bi_buf|=H<<P.bi_valid&65535,P.bi_valid+=be)}function pe(P,H,be){ee(P,be[2*H],be[2*H+1])}function ae(P,H){for(var be=0;be|=1&P,P>>>=1,be<<=1,0<--H;);return be>>>1}function B(P,H,be){var ne,we,Re=new Array(R+1),De=0;for(ne=1;ne<=R;ne++)Re[ne]=De=De+be[ne-1]<<1;for(we=0;we<=H;we++){var Ue=P[2*we+1];Ue!==0&&(P[2*we]=ae(Re[Ue]++,Ue))}}function j(P){var H;for(H=0;H<y;H++)P.dyn_ltree[2*H]=0;for(H=0;H<m;H++)P.dyn_dtree[2*H]=0;for(H=0;H<E;H++)P.bl_tree[2*H]=0;P.dyn_ltree[2*C]=1,P.opt_len=P.static_len=0,P.last_lit=P.matches=0}function de(P){8<P.bi_valid?$(P,P.bi_buf):0<P.bi_valid&&(P.pending_buf[P.pending++]=P.bi_buf),P.bi_buf=0,P.bi_valid=0}function fe(P,H,be,ne){var we=2*H,Re=2*be;return P[we]<P[Re]||P[we]===P[Re]&&ne[H]<=ne[be]}function re(P,H,be){for(var ne=P.heap[be],we=be<<1;we<=P.heap_len&&(we<P.heap_len&&fe(H,P.heap[we+1],P.heap[we],P.depth)&&we++,!fe(H,ne,P.heap[we],P.depth));)P.heap[be]=P.heap[we],be=we,we<<=1;P.heap[be]=ne}function he(P,H,be){var ne,we,Re,De,Ue=0;if(P.last_lit!==0)for(;ne=P.pending_buf[P.d_buf+2*Ue]<<8|P.pending_buf[P.d_buf+2*Ue+1],we=P.pending_buf[P.l_buf+Ue],Ue++,ne===0?pe(P,we,H):(pe(P,(Re=M[we])+g+1,H),(De=V[Re])!==0&&ee(P,we-=ye[Re],De),pe(P,Re=L(--ne),be),(De=te[Re])!==0&&ee(P,ne-=me[Re],De)),Ue<P.last_lit;);pe(P,C,H)}function ke(P,H){var be,ne,we,Re=H.dyn_tree,De=H.stat_desc.static_tree,Ue=H.stat_desc.has_stree,Ke=H.stat_desc.elems,at=-1;for(P.heap_len=0,P.heap_max=_,be=0;be<Ke;be++)Re[2*be]!==0?(P.heap[++P.heap_len]=at=be,P.depth[be]=0):Re[2*be+1]=0;for(;P.heap_len<2;)Re[2*(we=P.heap[++P.heap_len]=at<2?++at:0)]=1,P.depth[we]=0,P.opt_len--,Ue&&(P.static_len-=De[2*we+1]);for(H.max_code=at,be=P.heap_len>>1;1<=be;be--)re(P,Re,be);for(we=Ke;be=P.heap[1],P.heap[1]=P.heap[P.heap_len--],re(P,Re,1),ne=P.heap[1],P.heap[--P.heap_max]=be,P.heap[--P.heap_max]=ne,Re[2*we]=Re[2*be]+Re[2*ne],P.depth[we]=(P.depth[be]>=P.depth[ne]?P.depth[be]:P.depth[ne])+1,Re[2*be+1]=Re[2*ne+1]=we,P.heap[1]=we++,re(P,Re,1),2<=P.heap_len;);P.heap[--P.heap_max]=P.heap[1],(function(ot,pt){var Nt,yt,bn,Rt,ht,Pt,Ht=pt.dyn_tree,Dt=pt.max_code,ln=pt.stat_desc.static_tree,Wt=pt.stat_desc.has_stree,jn=pt.stat_desc.extra_bits,Jn=pt.stat_desc.extra_base,cn=pt.stat_desc.max_length,kt=0;for(Rt=0;Rt<=R;Rt++)ot.bl_count[Rt]=0;for(Ht[2*ot.heap[ot.heap_max]+1]=0,Nt=ot.heap_max+1;Nt<_;Nt++)cn<(Rt=Ht[2*Ht[2*(yt=ot.heap[Nt])+1]+1]+1)&&(Rt=cn,kt++),Ht[2*yt+1]=Rt,Dt<yt||(ot.bl_count[Rt]++,ht=0,Jn<=yt&&(ht=jn[yt-Jn]),Pt=Ht[2*yt],ot.opt_len+=Pt*(Rt+ht),Wt&&(ot.static_len+=Pt*(ln[2*yt+1]+ht)));if(kt!==0){do{for(Rt=cn-1;ot.bl_count[Rt]===0;)Rt--;ot.bl_count[Rt]--,ot.bl_count[Rt+1]+=2,ot.bl_count[cn]--,kt-=2}while(0<kt);for(Rt=cn;Rt!==0;Rt--)for(yt=ot.bl_count[Rt];yt!==0;)Dt<(bn=ot.heap[--Nt])||(Ht[2*bn+1]!==Rt&&(ot.opt_len+=(Rt-Ht[2*bn+1])*Ht[2*bn],Ht[2*bn+1]=Rt),yt--)}})(P,H),B(Re,at,P.bl_count)}function q(P,H,be){var ne,we,Re=-1,De=H[1],Ue=0,Ke=7,at=4;for(De===0&&(Ke=138,at=3),H[2*(be+1)+1]=65535,ne=0;ne<=be;ne++)we=De,De=H[2*(ne+1)+1],++Ue<Ke&&we===De||(Ue<at?P.bl_tree[2*we]+=Ue:we!==0?(we!==Re&&P.bl_tree[2*we]++,P.bl_tree[2*A]++):Ue<=10?P.bl_tree[2*F]++:P.bl_tree[2*J]++,Re=we,at=(Ue=0)===De?(Ke=138,3):we===De?(Ke=6,3):(Ke=7,4))}function oe(P,H,be){var ne,we,Re=-1,De=H[1],Ue=0,Ke=7,at=4;for(De===0&&(Ke=138,at=3),ne=0;ne<=be;ne++)if(we=De,De=H[2*(ne+1)+1],!(++Ue<Ke&&we===De)){if(Ue<at)for(;pe(P,we,P.bl_tree),--Ue!=0;);else we!==0?(we!==Re&&(pe(P,we,P.bl_tree),Ue--),pe(P,A,P.bl_tree),ee(P,Ue-3,2)):Ue<=10?(pe(P,F,P.bl_tree),ee(P,Ue-3,3)):(pe(P,J,P.bl_tree),ee(P,Ue-11,7));Re=we,at=(Ue=0)===De?(Ke=138,3):we===De?(Ke=6,3):(Ke=7,4)}}c(me);var Y=!1;function I(P,H,be,ne){ee(P,(f<<1)+(ne?1:0),3),(function(we,Re,De,Ue){de(we),$(we,De),$(we,~De),s.arraySet(we.pending_buf,we.window,Re,De,we.pending),we.pending+=De})(P,H,be)}i._tr_init=function(P){Y||((function(){var H,be,ne,we,Re,De=new Array(R+1);for(we=ne=0;we<h-1;we++)for(ye[we]=ne,H=0;H<1<<V[we];H++)M[ne++]=we;for(M[ne-1]=we,we=Re=0;we<16;we++)for(me[we]=Re,H=0;H<1<<te[we];H++)X[Re++]=we;for(Re>>=7;we<m;we++)for(me[we]=Re<<7,H=0;H<1<<te[we]-7;H++)X[256+Re++]=we;for(be=0;be<=R;be++)De[be]=0;for(H=0;H<=143;)Q[2*H+1]=8,H++,De[8]++;for(;H<=255;)Q[2*H+1]=9,H++,De[9]++;for(;H<=279;)Q[2*H+1]=7,H++,De[7]++;for(;H<=287;)Q[2*H+1]=8,H++,De[8]++;for(B(Q,y+1,De),H=0;H<m;H++)U[2*H+1]=5,U[2*H]=ae(H,5);se=new Ne(Q,V,g+1,y,R),ie=new Ne(U,te,0,m,R),Se=new Ne(new Array(0),O,0,E,N)})(),Y=!0),P.l_desc=new K(P.dyn_ltree,se),P.d_desc=new K(P.dyn_dtree,ie),P.bl_desc=new K(P.bl_tree,Se),P.bi_buf=0,P.bi_valid=0,j(P)},i._tr_stored_block=I,i._tr_flush_block=function(P,H,be,ne){var we,Re,De=0;0<P.level?(P.strm.data_type===2&&(P.strm.data_type=(function(Ue){var Ke,at=4093624447;for(Ke=0;Ke<=31;Ke++,at>>>=1)if(1&at&&Ue.dyn_ltree[2*Ke]!==0)return u;if(Ue.dyn_ltree[18]!==0||Ue.dyn_ltree[20]!==0||Ue.dyn_ltree[26]!==0)return l;for(Ke=32;Ke<g;Ke++)if(Ue.dyn_ltree[2*Ke]!==0)return l;return u})(P)),ke(P,P.l_desc),ke(P,P.d_desc),De=(function(Ue){var Ke;for(q(Ue,Ue.dyn_ltree,Ue.l_desc.max_code),q(Ue,Ue.dyn_dtree,Ue.d_desc.max_code),ke(Ue,Ue.bl_desc),Ke=E-1;3<=Ke&&Ue.bl_tree[2*le[Ke]+1]===0;Ke--);return Ue.opt_len+=3*(Ke+1)+5+5+4,Ke})(P),we=P.opt_len+3+7>>>3,(Re=P.static_len+3+7>>>3)<=we&&(we=Re)):we=Re=be+5,be+4<=we&&H!==-1?I(P,H,be,ne):P.strategy===4||Re===we?(ee(P,2+(ne?1:0),3),he(P,Q,U)):(ee(P,4+(ne?1:0),3),(function(Ue,Ke,at,ot){var pt;for(ee(Ue,Ke-257,5),ee(Ue,at-1,5),ee(Ue,ot-4,4),pt=0;pt<ot;pt++)ee(Ue,Ue.bl_tree[2*le[pt]+1],3);oe(Ue,Ue.dyn_ltree,Ke-1),oe(Ue,Ue.dyn_dtree,at-1)})(P,P.l_desc.max_code+1,P.d_desc.max_code+1,De+1),he(P,P.dyn_ltree,P.dyn_dtree)),j(P),ne&&de(P)},i._tr_tally=function(P,H,be){return P.pending_buf[P.d_buf+2*P.last_lit]=H>>>8&255,P.pending_buf[P.d_buf+2*P.last_lit+1]=255&H,P.pending_buf[P.l_buf+P.last_lit]=255&be,P.last_lit++,H===0?P.dyn_ltree[2*be]++:(P.matches++,H--,P.dyn_ltree[2*(M[be]+g+1)]++,P.dyn_dtree[2*L(H)]++),P.last_lit===P.lit_bufsize-1},i._tr_align=function(P){ee(P,2,3),pe(P,C,Q),(function(H){H.bi_valid===16?($(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)})(P)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(s){(function(u,l){if(!u.setImmediate){var c,f,h,g,y=1,m={},E=!1,_=u.document,R=Object.getPrototypeOf&&Object.getPrototypeOf(u);R=R&&R.setTimeout?R:u,c={}.toString.call(u.process)==="[object process]"?function(A){un.nextTick(function(){N(A)})}:(function(){if(u.postMessage&&!u.importScripts){var A=!0,F=u.onmessage;return u.onmessage=function(){A=!1},u.postMessage("","*"),u.onmessage=F,A}})()?(g="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",C,!1):u.attachEvent("onmessage",C),function(A){u.postMessage(g+A,"*")}):u.MessageChannel?((h=new MessageChannel).port1.onmessage=function(A){N(A.data)},function(A){h.port2.postMessage(A)}):_&&"onreadystatechange"in _.createElement("script")?(f=_.documentElement,function(A){var F=_.createElement("script");F.onreadystatechange=function(){N(A),F.onreadystatechange=null,f.removeChild(F),F=null},f.appendChild(F)}):function(A){setTimeout(N,0,A)},R.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var F=new Array(arguments.length-1),J=0;J<F.length;J++)F[J]=arguments[J+1];var V={callback:A,args:F};return m[y]=V,c(y),y++},R.clearImmediate=b}function b(A){delete m[A]}function N(A){if(E)setTimeout(N,0,A);else{var F=m[A];if(F){E=!0;try{(function(J){var V=J.callback,te=J.args;switch(te.length){case 0:V();break;case 1:V(te[0]);break;case 2:V(te[0],te[1]);break;case 3:V(te[0],te[1],te[2]);break;default:V.apply(l,te)}})(F)}finally{b(A),E=!1}}}}function C(A){A.source===u&&typeof A.data=="string"&&A.data.indexOf(g)===0&&N(+A.data.slice(g.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Pv)),Pv.exports}var AG=xG();const EG=gN(AG);var lh={exports:{}},Mv,n3;function TG(){if(n3)return Mv;n3=1;var n={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function e(t){return t&&t.replace?t.replace(/([&"<>'])/g,function(r,i){return n[i]}):t}return Mv=e,Mv}var r3;function CG(){if(r3)return lh.exports;r3=1;var n=TG(),e=Fb().Stream,t="    ";function r(f,h){typeof h!="object"&&(h={indent:h});var g=h.stream?new e:null,y="",m=!1,E=h.indent?h.indent===!0?t:h.indent:"",_=!0;function R(F){_?un.nextTick(F):F()}function b(F,J){if(J!==void 0&&(y+=J),F&&!m&&(g=g||new e,m=!0),F&&m){var V=y;R(function(){g.emit("data",V)}),y=""}}function N(F,J){l(b,u(F,E,E?1:0),J)}function C(){if(g){var F=y;R(function(){g.emit("data",F),g.emit("end"),g.readable=!1,g.emit("close")})}}function A(F){var J=F.encoding||"UTF-8",V={version:"1.0",encoding:J};F.standalone&&(V.standalone=F.standalone),N({"?xml":{_attr:V}}),y=y.replace("/>","?>")}return R(function(){_=!1}),h.declaration&&A(h.declaration),f&&f.forEach?f.forEach(function(F,J){var V;J+1===f.length&&(V=C),N(F,V)}):N(f,C),g?(g.readable=!0,g):y}function i(){var f=Array.prototype.slice.call(arguments),h={_elem:u(f)};return h.push=function(g){if(!this.append)throw new Error("not assigned to a parent!");var y=this,m=this._elem.indent;l(this.append,u(g,m,this._elem.icount+(m?1:0)),function(){y.append(!0)})},h.close=function(g){g!==void 0&&this.push(g),this.end&&this.end()},h}function s(f,h){return new Array(h||0).join(f||"")}function u(f,h,g){g=g||0;var y=s(h,g),m,E=f,_=!1;if(typeof f=="object"){var R=Object.keys(f);if(m=R[0],E=f[m],E&&E._elem)return E._elem.name=m,E._elem.icount=g,E._elem.indent=h,E._elem.indents=y,E._elem.interrupt=E,E._elem}var b=[],N=[],C;function A(F){var J=Object.keys(F);J.forEach(function(V){b.push(c(V,F[V]))})}switch(typeof E){case"object":if(E===null)break;E._attr&&A(E._attr),E._cdata&&N.push(("<![CDATA["+E._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),E.forEach&&(C=!1,N.push(""),E.forEach(function(F){if(typeof F=="object"){var J=Object.keys(F)[0];J=="_attr"?A(F._attr):N.push(u(F,h,g+1))}else N.pop(),C=!0,N.push(n(F))}),C||N.push(""));break;default:N.push(n(E))}return{name:m,interrupt:_,attributes:b,content:N,icount:g,indents:y,indent:h}}function l(f,h,g){if(typeof h!="object")return f(!1,h);var y=h.interrupt?1:h.content.length;function m(){for(;h.content.length;){var _=h.content.shift();if(_!==void 0){if(E(_))return;l(f,_)}}f(!1,(y>1?h.indents:"")+(h.name?"</"+h.name+">":"")+(h.indent&&!g?`
`:"")),g&&g()}function E(_){return _.interrupt?(_.interrupt.append=f,_.interrupt.end=m,_.interrupt=!1,f(!0),!0):!1}if(f(!1,h.indents+(h.name?"<"+h.name:"")+(h.attributes.length?" "+h.attributes.join(" "):"")+(y?h.name?">":"":h.name?"/>":"")+(h.indent&&y>1?`
`:"")),!y)return f(!1,h.indent?`
`:"");E(h)||m()}function c(f,h){return f+'="'+n(h)+'"'}return lh.exports=r,lh.exports.element=lh.exports.Element=i,lh.exports}var NG=CG();const Pr=gN(NG),uh=0,Ov=32,RG=32,kG=(n,e)=>{const t=e.replace(/-/g,"");if(t.length!==RG)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);const i=t.replace(/(..)/g,"$1 ").trim().split(" ").map(c=>parseInt(c,16));i.reverse();const u=n.slice(uh,Ov).map((c,f)=>c^i[f%i.length]),l=new Uint8Array(uh+u.length+Math.max(0,n.length-Ov));return l.set(n.slice(0,uh)),l.set(u,uh),l.set(n.slice(Ov),uh+u.length),l};class IG{format(e,t={stack:[]}){const r=e.prepForXml(t);if(r)return r;throw Error("XMLComponent did not format correctly")}}class LG{replace(e,t,r){let i=e;return t.forEach((s,u)=>{i=i.replace(new RegExp(`{${s.fileName}}`,"g"),(r+u).toString())}),i}getMediaData(e,t){return t.Array.filter(r=>e.search(`{${r.fileName}}`)>0)}}class PG{replace(e,t){let r=e;for(const i of t)r=r.replace(new RegExp(`{${i.reference}-${i.instance}}`,"g"),i.numId.toString());return r}}class MG{constructor(){nt(this,"formatter"),nt(this,"imageReplacer"),nt(this,"numberingReplacer"),this.formatter=new IG,this.imageReplacer=new LG,this.numberingReplacer=new PG}compile(e,t,r=[]){const i=new EG,s=this.xmlifyFile(e,t),u=new Map(Object.entries(s));for(const[,l]of u)if(Array.isArray(l))for(const c of l)i.file(c.path,c.data);else i.file(l.path,l.data);for(const l of r)i.file(l.path,l.data);for(const l of e.Media.Array)l.type!=="svg"?i.file(`word/media/${l.fileName}`,l.data):(i.file(`word/media/${l.fileName}`,l.data),i.file(`word/media/${l.fallback.fileName}`,l.fallback.data));for(const{data:l,name:c,fontKey:f}of e.FontTable.fontOptionsWithKey){const[h]=c.split(".");i.file(`word/fonts/${h}.odttf`,kG(l,f))}return i}xmlifyFile(e,t){const r=e.Document.Relationships.RelationshipCount+1,i=Pr(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=e.Comments.Relationships.RelationshipCount+1,u=Pr(this.formatter.format(e.Comments,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),l=this.imageReplacer.getMediaData(i,e.Media),c=this.imageReplacer.getMediaData(u,e.Media);return{Relationships:{data:(l.forEach((f,h)=>{e.Document.Relationships.createRelationship(r+h,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${f.fileName}`)}),e.Document.Relationships.createRelationship(e.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),Pr(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const f=this.imageReplacer.replace(i,l,r);return this.numberingReplacer.replace(f,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const f=Pr(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(f,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:Pr(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Pr(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Pr(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((f,h)=>{const g=Pr(this.formatter.format(f.View,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(g,e.Media).forEach((m,E)=>{f.Relationships.createRelationship(E,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${m.fileName}`)}),{data:Pr(this.formatter.format(f.Relationships,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${h+1}.xml.rels`}}),FooterRelationships:e.Footers.map((f,h)=>{const g=Pr(this.formatter.format(f.View,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(g,e.Media).forEach((m,E)=>{f.Relationships.createRelationship(E,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${m.fileName}`)}),{data:Pr(this.formatter.format(f.Relationships,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${h+1}.xml.rels`}}),Headers:e.Headers.map((f,h)=>{const g=Pr(this.formatter.format(f.View,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),y=this.imageReplacer.getMediaData(g,e.Media),m=this.imageReplacer.replace(g,y,0);return{data:this.numberingReplacer.replace(m,e.Numbering.ConcreteNumbering),path:`word/header${h+1}.xml`}}),Footers:e.Footers.map((f,h)=>{const g=Pr(this.formatter.format(f.View,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),y=this.imageReplacer.getMediaData(g,e.Media),m=this.imageReplacer.replace(g,y,0);return{data:this.numberingReplacer.replace(m,e.Numbering.ConcreteNumbering),path:`word/footer${h+1}.xml`}}),ContentTypes:{data:Pr(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Pr(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Pr(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Pr(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Pr(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Pr(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const f=this.imageReplacer.replace(u,c,s);return this.numberingReplacer.replace(f,e.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(c.forEach((f,h)=>{e.Comments.Relationships.createRelationship(s+h,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${f.fileName}`)}),Pr(this.formatter.format(e.Comments.Relationships,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:Pr(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:Pr(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const OG={WITH_2_BLANKS:"  "},i3=n=>n===!0?OG.WITH_2_BLANKS:n===!1?void 0:n,QN=class Uf{static pack(e,t,r){return cq(this,arguments,function*(i,s,u,l=[]){return this.compiler.compile(i,i3(u),l).generateAsync({type:s,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(e,t,r=[]){return Uf.pack(e,"string",t,r)}static toBuffer(e,t,r=[]){return Uf.pack(e,"nodebuffer",t,r)}static toBase64String(e,t,r=[]){return Uf.pack(e,"base64",t,r)}static toBlob(e,t,r=[]){return Uf.pack(e,"blob",t,r)}static toArrayBuffer(e,t,r=[]){return Uf.pack(e,"arraybuffer",t,r)}static toStream(e,t,r=[]){const i=new SG.Stream;return this.compiler.compile(e,i3(t),r).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(u=>{i.emit("data",u),i.emit("end")}),i}};nt(QN,"compiler",new MG);let DG=QN;class UG{constructor(){this.templates=new Map,this.initializeTemplates()}initializeTemplates(){this.templates.set("ISMRM",{name:"ISMRM",wordLimits:{impact:100,synopsis:300},formatting:{fontSize:12,fontFamily:"Times New Roman",margins:{top:72,right:72,bottom:72,left:72}},structure:{includeKeywords:!0,keywordFormat:"list",sectionSeparator:"---"}}),this.templates.set("RSNA",{name:"RSNA",wordLimits:{impact:150,synopsis:350},formatting:{fontSize:11,fontFamily:"Arial",margins:{top:72,right:72,bottom:72,left:72}},structure:{includeKeywords:!0,keywordFormat:"inline",sectionSeparator:""}}),this.templates.set("JACC",{name:"JACC",wordLimits:{impact:200,synopsis:400},formatting:{fontSize:12,fontFamily:"Times New Roman",margins:{top:72,right:72,bottom:72,left:72}},structure:{includeKeywords:!1,keywordFormat:"inline",sectionSeparator:""}})}getTemplate(e){return this.templates.get(e)||this.templates.get("ISMRM")}async exportToPDF(e,t="ISMRM",r={}){const i=this.getTemplate(t),s=new It;s.setFont(i.formatting.fontFamily.toLowerCase().replace(" ","")),s.setFontSize(i.formatting.fontSize);let u=30;const l=s.internal.pageSize.getWidth(),c=i.formatting.margins,f=l-c.left/2.83-c.right/2.83;r.customTitle&&(s.setFontSize(16),s.text(r.customTitle,l/2,u,{align:"center"}),u+=15,s.setFontSize(i.formatting.fontSize)),s.setFont(i.formatting.fontFamily.toLowerCase().replace(" ",""),"bold"),s.text("IMPACT",20,u),u+=10,s.setFont(i.formatting.fontFamily.toLowerCase().replace(" ",""),"normal");const h=s.splitTextToSize(e.impact,f);s.text(h,20,u),u+=h.length*6+10,i.structure.sectionSeparator&&(s.text(i.structure.sectionSeparator,20,u),u+=10),s.setFont(i.formatting.fontFamily.toLowerCase().replace(" ",""),"bold"),s.text("SYNOPSIS",20,u),u+=10,s.setFont(i.formatting.fontFamily.toLowerCase().replace(" ",""),"normal");const g=s.splitTextToSize(e.synopsis,f);if(s.text(g,20,u),u+=g.length*6+10,i.structure.includeKeywords&&e.keywords.length>0)if(i.structure.sectionSeparator&&(s.text(i.structure.sectionSeparator,20,u),u+=10),s.setFont(i.formatting.fontFamily.toLowerCase().replace(" ",""),"bold"),s.text("KEYWORDS",20,u),u+=10,s.setFont(i.formatting.fontFamily.toLowerCase().replace(" ",""),"normal"),i.structure.keywordFormat==="list")e.keywords.forEach(y=>{s.text(`• ${y}`,25,u),u+=6});else{const y=e.keywords.join(", "),m=s.splitTextToSize(y,f);s.text(m,20,u)}return new Promise(y=>{const m=s.output("blob");y(m)})}async exportToDocx(e,t="ISMRM",r={}){const i=this.getTemplate(t),s=[];r.customTitle&&s.push(new Ya({children:[new Ro({text:r.customTitle,bold:!0,size:32})],alignment:Wa.CENTER,spacing:{after:240}})),s.push(new Ya({children:[new Ro({text:"IMPACT",bold:!0,size:i.formatting.fontSize*2})],heading:Nv.HEADING_2,spacing:{before:240,after:120}})),s.push(new Ya({children:[new Ro({text:e.impact,size:i.formatting.fontSize*2})],spacing:{after:240}})),s.push(new Ya({children:[new Ro({text:"SYNOPSIS",bold:!0,size:i.formatting.fontSize*2})],heading:Nv.HEADING_2,spacing:{before:240,after:120}})),s.push(new Ya({children:[new Ro({text:e.synopsis,size:i.formatting.fontSize*2})],spacing:{after:240}})),i.structure.includeKeywords&&e.keywords.length>0&&(s.push(new Ya({children:[new Ro({text:"KEYWORDS",bold:!0,size:i.formatting.fontSize*2})],heading:Nv.HEADING_2,spacing:{before:240,after:120}})),i.structure.keywordFormat==="list"?e.keywords.forEach(l=>{s.push(new Ya({children:[new Ro({text:`• ${l}`,size:i.formatting.fontSize*2})],spacing:{after:60}}))}):s.push(new Ya({children:[new Ro({text:e.keywords.join(", "),size:i.formatting.fontSize*2})],spacing:{after:240}})));const u=new _G({sections:[{properties:{page:{margin:{top:i.formatting.margins.top*20,right:i.formatting.margins.right*20,bottom:i.formatting.margins.bottom*20,left:i.formatting.margins.left*20}}},children:s}]});return await DG.toBlob(u)}exportToJSON(e,t="ISMRM",r="Standard Abstract",i={}){const s={exportDate:new Date().toISOString(),conference:t,abstractType:r,wordCount:{impact:this.countWords(e.impact),synopsis:this.countWords(e.synopsis),total:this.countWords(e.impact)+this.countWords(e.synopsis)}},u={abstract:e,metadata:i.includeMetadata?s:void 0,template:this.getTemplate(t)},l=JSON.stringify(u,null,2);return new Blob([l],{type:"application/json;charset=utf-8"})}countWords(e){return e.trim().split(/\s+/).filter(t=>t.length>0).length}validateWordLimits(e,t){const r=this.getTemplate(t),i=[],s=this.countWords(e.impact),u=this.countWords(e.synopsis);return s>r.wordLimits.impact&&i.push(`Impact section exceeds word limit: ${s}/${r.wordLimits.impact} words`),u>r.wordLimits.synopsis&&i.push(`Synopsis section exceeds word limit: ${u}/${r.wordLimits.synopsis} words`),{valid:i.length===0,errors:i}}}const ch=new UG,FG=({abstract:n,conference:e="ISMRM",abstractType:t="Standard Abstract"})=>{const[r,i]=it.useState(null),[s,u]=it.useState(!1),[l,c]=it.useState(null),f=(_,R)=>{const b=URL.createObjectURL(_),N=document.createElement("a");N.href=b,N.download=R,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(b)},h=()=>{if(!n)return;const _=`
# IMPACT

${n.impact}

---

# SYNOPSIS

${n.synopsis}

---

## KEYWORDS

- ${n.keywords.join(`
- `)}
    `,R=new Blob([_.trim()],{type:"text/markdown;charset=utf-8"});f(R,`${e.toLowerCase()}_abstract.md`)},g=async()=>{if(n){i("pdf");try{const _=await ch.exportToPDF(n,e);f(_,`${e.toLowerCase()}_abstract.pdf`)}catch(_){console.error("PDF export failed:",_),alert("PDF export failed. Please try again.")}finally{i(null)}}},y=async()=>{if(n){i("docx");try{const _=await ch.exportToDocx(n,e);f(_,`${e.toLowerCase()}_abstract.docx`)}catch(_){console.error("DOCX export failed:",_),alert("DOCX export failed. Please try again.")}finally{i(null)}}},m=()=>{if(!n)return;const _=ch.exportToJSON(n,e,t);f(_,`${e.toLowerCase()}_abstract.json`)},E=()=>{if(!n)return;const _=ch.validateWordLimits(n,e),R=ch.getTemplate(e);c({abstract:n,conference:e,abstractType:t,validation:_,template:R,wordCount:{impact:n.impact.trim().split(/\s+/).filter(b=>b.length>0).length,synopsis:n.synopsis.trim().split(/\s+/).filter(b=>b.length>0).length}}),u(!0)};return G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsxs("button",{onClick:E,disabled:!n,className:"flex items-center gap-2 text-sm px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Preview export options",children:[G.jsx(rn,{type:"download",className:"h-4 w-4"}),G.jsx("span",{children:"Preview"})]}),G.jsxs("button",{onClick:h,disabled:!n,className:"flex items-center gap-2 text-sm px-3 py-1.5 bg-base-300 hover:bg-opacity-80 text-text-secondary rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Export as Markdown (.md)",children:[G.jsx(rn,{type:"download",className:"h-4 w-4"}),G.jsx("span",{children:"MD"})]}),G.jsxs("button",{onClick:g,disabled:!n||r==="pdf",className:"flex items-center gap-2 text-sm px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Export as PDF",children:[r==="pdf"?G.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}):G.jsx(rn,{type:"download",className:"h-4 w-4"}),G.jsx("span",{children:"PDF"})]}),G.jsxs("button",{onClick:y,disabled:!n||r==="docx",className:"flex items-center gap-2 text-sm px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Export as Word Document (.docx)",children:[r==="docx"?G.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}):G.jsx(rn,{type:"download",className:"h-4 w-4"}),G.jsx("span",{children:"DOCX"})]}),G.jsxs("button",{onClick:m,disabled:!n,className:"flex items-center gap-2 text-sm px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Export as JSON (.json)",children:[G.jsx(rn,{type:"download",className:"h-4 w-4"}),G.jsx("span",{children:"JSON"})]})]}),s&&l&&G.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:G.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:G.jsxs("div",{className:"p-6",children:[G.jsxs("div",{className:"flex justify-between items-center mb-4",children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Preview"}),G.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:G.jsx(rn,{type:"close",className:"h-6 w-6"})})]}),G.jsxs("div",{className:"space-y-4",children:[G.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[G.jsxs("div",{children:[G.jsx("span",{className:"font-medium text-gray-700",children:"Conference:"}),G.jsx("span",{className:"ml-2 text-gray-900",children:l.conference})]}),G.jsxs("div",{children:[G.jsx("span",{className:"font-medium text-gray-700",children:"Type:"}),G.jsx("span",{className:"ml-2 text-gray-900",children:l.abstractType})]})]}),G.jsxs("div",{className:"border-t pt-4",children:[G.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Word Count Analysis"}),G.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[G.jsxs("div",{className:`p-2 rounded ${l.wordCount.impact>l.template.wordLimits.impact?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[G.jsx("div",{className:"font-medium",children:"Impact"}),G.jsxs("div",{children:[l.wordCount.impact," / ",l.template.wordLimits.impact," words"]})]}),G.jsxs("div",{className:`p-2 rounded ${l.wordCount.synopsis>l.template.wordLimits.synopsis?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:[G.jsx("div",{className:"font-medium",children:"Synopsis"}),G.jsxs("div",{children:[l.wordCount.synopsis," / ",l.template.wordLimits.synopsis," words"]})]})]})]}),!l.validation.valid&&G.jsxs("div",{className:"border-t pt-4",children:[G.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"Validation Errors"}),G.jsx("ul",{className:"text-sm text-red-600 space-y-1",children:l.validation.errors.map((_,R)=>G.jsxs("li",{className:"flex items-start",children:[G.jsx("span",{className:"text-red-500 mr-2",children:"•"}),_]},R))})]}),G.jsxs("div",{className:"border-t pt-4",children:[G.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Template Settings"}),G.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[G.jsxs("div",{children:["Font: ",l.template.formatting.fontFamily,", ",l.template.formatting.fontSize,"pt"]}),G.jsxs("div",{children:["Keywords: ",l.template.structure.includeKeywords?"Included":"Not included"]}),l.template.structure.includeKeywords&&G.jsxs("div",{children:["Format: ",l.template.structure.keywordFormat]})]})]})]}),G.jsx("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t",children:G.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Close"})})]})})})]})},$b=({abstract:n,image:e,isLoading:t,error:r,loadingMessage:i,conference:s="ISMRM",abstractType:u="Standard Abstract"})=>{const l=n||e;return G.jsxs("div",{className:"bg-base-200 p-6 rounded-lg shadow-lg h-full flex flex-col",children:[G.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-base-300 pb-2",children:[G.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Generated Output"}),G.jsx(FG,{abstract:n,conference:s,abstractType:u})]}),G.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2",style:{maxHeight:"calc(100vh - 350px)"},children:[t&&G.jsx(BG,{message:i}),r&&G.jsx(qG,{message:r}),!t&&!r&&!l&&G.jsxs("div",{className:"text-center text-text-secondary flex flex-col items-center justify-center h-full",children:[G.jsx(rn,{type:"logo",className:"h-16 w-16 text-base-300 mb-4"}),G.jsx("p",{children:"Your generated content will appear here."}),G.jsx("p",{className:"text-sm mt-1",children:"Begin by providing input on the left panel."})]}),G.jsxs("div",{className:"space-y-6",children:[n&&G.jsxs("div",{className:"space-y-4 animate-fade-in",children:[G.jsx(Dv,{title:"Impact",content:n.impact,icon:"impact"}),G.jsx(Dv,{title:"Synopsis",content:n.synopsis,icon:"document"}),G.jsx(Dv,{title:"Keywords",content:n.keywords.join(", "),icon:"tag"})]}),e&&G.jsxs("div",{className:"animate-fade-in",children:[G.jsxs("h3",{className:"flex items-center gap-2 text-md font-semibold text-brand-primary mb-2",children:[G.jsx(rn,{type:"image",className:"h-5 w-5"}),"Generated Figure"]}),G.jsx("div",{className:"bg-base-100 p-2 rounded-lg",children:G.jsx("img",{src:e,alt:"Generated Figure",className:"rounded-md w-full object-contain"})})]})]})]})]})},Dv=({title:n,content:e,icon:t})=>G.jsxs("div",{children:[G.jsxs("h3",{className:"flex items-center gap-2 text-md font-semibold text-brand-primary mb-2",children:[G.jsx(rn,{type:t,className:"h-5 w-5"}),n]}),G.jsx("div",{className:"bg-base-100 p-4 rounded-lg text-text-secondary text-sm prose max-w-none prose-p:my-2",children:e})]}),BG=({message:n="Generating Content..."})=>G.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-secondary animate-fade-in",children:[G.jsx(rn,{type:"loader",className:"h-12 w-12 animate-spin text-brand-primary mb-4"}),G.jsx("p",{className:"text-lg font-semibold",children:n}),G.jsx("p",{className:"text-sm",children:"This may take a few moments."})]}),qG=({message:n})=>G.jsxs("div",{className:"bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-lg animate-fade-in",role:"alert",children:[G.jsx("strong",{className:"font-bold",children:"Error: "}),G.jsx("span",{className:"block sm:inline",children:n})]}),jG=()=>{const[n,e]=it.useState(!1),[t,r]=it.useState("Generating..."),[i,s]=it.useState(null),[u,l]=it.useState("abstract"),[c,f]=it.useState(null),[h,g]=it.useState(!1),[y,m]=it.useState(""),{databaseService:E}=it.useContext(ud),{abstractToLoad:_,clearLoadedAbstract:R}=Cg();it.useEffect(()=>{_&&_.conference==="ISMRM"&&(H(_),R())},[_]);const[b,N]=it.useState("standard"),[C,A]=it.useState(""),[F,J]=it.useState(null),[V,te]=it.useState([]),[O,le]=it.useState([]),[Q,U]=it.useState([]),[X,M]=it.useState(null),[ye,se]=it.useState(!1),[ie,Se]=it.useState("analysis"),[me,Ne]=it.useState(null),[K,L]=it.useState("standard"),[$,ee]=it.useState({file:null,specs:"",base64:null}),[pe,ae]=it.useState(null),B=()=>{J(null),te([]),le([]),U([]),M(null),Ne(null)},j=ne=>{A(ne),F&&B()},de=ne=>new Promise((we,Re)=>{const De=new FileReader;De.readAsDataURL(ne),De.onload=()=>{const Ue=De.result;we(Ue.split(",")[1])},De.onerror=Ue=>Re(Ue)}),fe=async ne=>{if(ne.target.files&&ne.target.files[0]){const we=ne.target.files[0];s(null),ne.target.value="",e(!0),r(`Processing ${we.name}...`);try{if(we.type==="text/plain"||we.name.toLowerCase().endsWith(".txt")){const Re=await new Promise((De,Ue)=>{const Ke=new FileReader;Ke.onload=at=>{var ot;return De((ot=at.target)==null?void 0:ot.result)},Ke.onerror=at=>Ue(at),Ke.readAsText(we)});A(Re),F&&B()}else{const{fileProcessingService:Re}=await ma(async()=>{const{fileProcessingService:Ue}=await import("./FileProcessingService-U3egcWUj.js");return{fileProcessingService:Ue}},[]),De=await Re.processFile(we);De.success&&De.content?(A(De.content),F&&B()):De.error?s(Re.getErrorMessage(De.error)):s("Failed to extract text from the file.")}}catch(Re){console.error("File processing error:",Re),s(Re instanceof Error?Re.message:"Failed to process file.")}finally{e(!1)}}},re=async ne=>{if(ne.target.files&&ne.target.files[0]){const we=ne.target.files[0];try{const Re=await de(we);ee({...$,file:we,base64:Re})}catch(Re){console.error("Error converting file to base64:",Re),s("Failed to read image file.")}}},he=async()=>{if(!C.trim()){s("Please provide input text to analyze.");return}e(!0),r("Analyzing content..."),s(null),B();try{const ne=await hF(C);J(ne),le(ne.keywords),Se("analysis"),se(!0)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error occurred during analysis.")}finally{e(!1)}},ke=async(ne,we)=>{te(ne),le(we),e(!0),r("Suggesting abstract types...");try{const Re=await pF(C,ne,we);U(Re),Se("type")}catch(Re){s(Re instanceof Error?Re.message:"Failed to get abstract type suggestions."),se(!1)}finally{e(!1)}},q=ne=>{M(ne),se(!1)},oe=async()=>{if(!C||!X||V.length===0||O.length===0)return s("Please complete the analysis and selection steps before generating.");e(!0),r("Generating final abstract..."),s(null),Ne(null);try{const ne=await mF(C,X,V,O);Ne(ne)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error during abstract generation.")}finally{e(!1)}},Y=async()=>{if(!C.trim())return s("Please provide a core idea to expand.");e(!0),r("Creatively generating abstract..."),s(null),B();try{const ne=await gF(C);Ne(ne),le(ne.keywords)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error during creative generation.")}finally{e(!1)}},I=async()=>{let ne="";if(K==="creative"){if(!me)return s("Please generate an abstract first to provide context for creative image generation.");ne=`Impact: ${me.impact}
Synopsis: ${me.synopsis}`}else if(!$.file)return s("Please upload an image for standard mode editing.");e(!0),r("Generating figure..."),s(null),ae(null);try{const we=await Cb($,ne);ae(`data:image/png;base64,${we}`)}catch(we){s(we instanceof Error?we.message:"An unknown error during image generation.")}finally{e(!1)}},P=async()=>{if(!me||!X){s("Please generate an abstract before saving.");return}if(!y.trim()){s("Please enter a title for your abstract.");return}try{e(!0),r("Saving abstract...");const ne={title:y.trim(),conference:"ISMRM",abstractType:X,abstractData:me,originalText:C,categories:V,keywords:O};if(c)await E.updateAbstract(c,ne);else{const we=await E.saveAbstract(ne);f(we)}g(!1),m(""),s(null)}catch(ne){s(ne instanceof Error?ne.message:"Failed to save abstract")}finally{e(!1)}},H=ne=>{A(ne.originalText),Ne(ne.abstractData),te(ne.categories),le(ne.keywords),M(ne.abstractType),f(ne.id),m(ne.title),J({categories:ne.categories,keywords:ne.keywords})},be=()=>{A(""),f(null),m(""),B()};return G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[G.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[G.jsxs("div",{className:"flex border-b border-base-300",children:[G.jsx(s3,{id:"abstract",activeTab:u,setActiveTab:l,label:"Abstract Generation",icon:"text"}),G.jsx(s3,{id:"figure",activeTab:u,setActiveTab:l,label:"Figure Generation",icon:"image"})]}),u==="abstract"&&G.jsxs("div",{className:"space-y-4 animate-fade-in",children:[G.jsx(zG,{mode:b,setMode:N}),b==="standard"?G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-text-secondary mb-2",children:"Upload File (.txt, .pdf, .docx) or Paste Text"}),G.jsx("input",{id:"file-upload",type:"file",accept:".txt,.pdf,.docx,text/plain,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:fe,className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/20 file:text-brand-primary hover:file:bg-brand-primary/30"}),G.jsx("div",{className:"relative mt-2",children:G.jsx("textarea",{value:C,onChange:ne=>j(ne.target.value),placeholder:"Paste the full text of your paper here...",className:"w-full h-60 p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})})]}):G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"creative-prompt",className:"block text-sm font-medium text-text-secondary mb-2",children:"Creative Expansion: One-Sentence Idea"}),G.jsx("input",{id:"creative-prompt",type:"text",value:C,onChange:ne=>j(ne.target.value),placeholder:"e.g., Using AI to predict patient outcomes from MRI scans.",className:"w-full p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})]}),G.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:b==="standard"?G.jsxs(G.Fragment,{children:[G.jsxs("button",{onClick:he,disabled:n||!C.trim(),className:"flex-1 flex items-center justify-center gap-2 bg-base-300 hover:bg-opacity-80 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"sparkles",className:"h-5 w-5"}),"1. Analyze"]}),G.jsxs("button",{onClick:oe,disabled:n||!X,className:"flex-1 flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"document",className:"h-5 w-5"}),"2. Generate"]})]}):G.jsxs("button",{onClick:Y,disabled:n||!C.trim(),className:"w-full flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"sparkles",className:"h-5 w-5"}),"Generate Creatively"]})}),me&&G.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t border-base-300",children:[G.jsxs("button",{onClick:()=>{m(c?y:`ISMRM Abstract - ${new Date().toLocaleDateString()}`),g(!0)},disabled:n,className:"flex-1 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"download",className:"h-5 w-5"}),c?"Update":"Save"," Abstract"]}),G.jsxs("button",{onClick:be,disabled:n,className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"document",className:"h-5 w-5"}),"New Abstract"]})]})]}),u==="figure"&&G.jsxs("div",{className:"space-y-4 animate-fade-in",children:[G.jsx(HG,{mode:K,setMode:L,creativeDisabled:!me,creativeTooltip:"Generate an abstract first to enable this mode."}),K==="standard"?G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"image-upload",className:"block text-sm font-medium text-text-secondary mb-2",children:"Upload Image"}),G.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:re,className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/20 file:text-brand-primary hover:file:bg-brand-primary/30"}),$.base64&&G.jsx("img",{src:`data:image/png;base64,${$.base64}`,alt:"Preview",className:"mt-4 rounded-lg max-h-40 object-contain mx-auto"})]}):G.jsxs("div",{className:"p-4 bg-base-100/50 rounded-lg text-center",children:[G.jsx(rn,{type:"info",className:"mx-auto h-8 w-8 text-brand-primary mb-2"}),G.jsx("p",{className:"text-text-secondary font-medium",children:"Creative mode will generate a figure based on the content of your generated abstract."})]}),G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"image-specs",className:"block text-sm font-medium text-text-secondary mb-2",children:"Image Specifications & Guidelines"}),G.jsx("textarea",{id:"image-specs",value:$.specs,onChange:ne=>ee({...$,specs:ne.target.value}),placeholder:"e.g., 'Make this a grayscale T1-weighted MRI scan', 'Add arrows pointing to the hippocampus', 'Format as a 3x3 grid'.",className:"w-full h-32 p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})]}),G.jsxs("button",{onClick:I,disabled:n,className:"w-full flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"image",className:"h-5 w-5"}),"Generate Figure"]})]})]}),G.jsx($b,{abstract:me,image:pe,isLoading:n,error:i,loadingMessage:t,conference:"ISMRM",abstractType:X||"Standard Abstract"})]}),ye&&F&&G.jsx(mc,{onClose:()=>se(!1),children:ie==="analysis"?G.jsx(GG,{result:F,onConfirm:ke}):G.jsx(VG,{suggestions:Q,onSelect:q})}),h&&G.jsx(mc,{onClose:()=>g(!1),children:G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:c?"Update Abstract":"Save Abstract"}),G.jsx("p",{className:"text-text-secondary",children:c?"Update the title for your abstract.":"Enter a title for your abstract to save it for later use."}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"save-title",className:"block text-sm font-medium text-text-secondary mb-2",children:"Abstract Title"}),G.jsx("input",{id:"save-title",type:"text",value:y,onChange:ne=>m(ne.target.value),placeholder:"Enter a descriptive title...",className:"w-full p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition",autoFocus:!0})]}),G.jsxs("div",{className:"flex gap-3 justify-end",children:[G.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-text-secondary border border-base-300 rounded-md hover:bg-base-100 transition-colors",children:"Cancel"}),G.jsx("button",{onClick:P,disabled:!y.trim()||n,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-secondary transition-colors disabled:bg-base-300/50 disabled:cursor-not-allowed",children:c?"Update":"Save"})]})]})})]})},s3=({id:n,activeTab:e,setActiveTab:t,label:r,icon:i})=>G.jsxs("button",{onClick:()=>t(n),className:`flex items-center gap-2 text-sm font-medium py-2 px-4 rounded-t-lg transition-colors duration-200 focus:outline-none ${e===n?"border-b-2 border-brand-primary text-brand-primary":"text-text-secondary hover:bg-base-300/50"}`,children:[G.jsx(rn,{type:i,className:"h-5 w-5"}),r]}),zG=({mode:n,setMode:e})=>G.jsxs("div",{className:"flex bg-base-100 rounded-lg p-1",children:[G.jsx(cg,{label:"Standard Analysis",icon:"document",active:n==="standard",onClick:()=>e("standard")}),G.jsx(cg,{label:"Creative Expansion",icon:"sparkles",active:n==="creative",onClick:()=>e("creative")})]}),HG=({mode:n,setMode:e,creativeDisabled:t,creativeTooltip:r})=>G.jsxs("div",{className:"flex bg-base-100 rounded-lg p-1",children:[G.jsx(cg,{label:"Standard Edit",icon:"document",active:n==="standard",onClick:()=>e("standard")}),G.jsx(cg,{label:"Creative Generation",icon:"sparkles",active:n==="creative",onClick:()=>e("creative"),disabled:t,tooltip:r})]}),cg=({label:n,icon:e,active:t,onClick:r,disabled:i=!1,tooltip:s})=>G.jsxs("div",{className:"relative w-1/2 group",children:[G.jsxs("button",{onClick:r,disabled:i,className:`w-full flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-semibold transition-all duration-300 ${t?"bg-brand-primary text-white shadow-md":"text-text-secondary hover:bg-base-200/50"} ${i?"opacity-50 cursor-not-allowed":""}`,children:[G.jsx(rn,{type:e,className:"h-5 w-5"}),n]}),i&&s&&G.jsx("span",{className:"absolute bottom-full z-10 mb-2 w-max bg-base-300 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",children:s})]}),GG=({result:n,onConfirm:e})=>{const[t,r]=it.useState(n.categories.filter(h=>h.probability>.25)),[i,s]=it.useState(n.keywords),u=h=>r(g=>g.some(y=>y.name===h.name)?g.filter(y=>y.name!==h.name):[...g,h]),l=h=>s(g=>g.includes(h)?g.filter(y=>y!==h):[...g,h]),c={main:"bg-category-main/20 text-category-main",sub:"bg-category-sub/20 text-category-sub",secondary:"bg-category-secondary/20 text-category-secondary"},f={main:"border-category-main",sub:"border-category-sub",secondary:"border-category-secondary"};return G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Analysis Complete"}),G.jsx("p",{className:"text-text-secondary",children:"Please review and confirm the suggested categories and keywords for your abstract."}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-semibold mb-2",children:"Suggested Categories"}),G.jsx("div",{className:"flex flex-wrap gap-2",children:n.categories.filter(h=>h.probability>.25).map(h=>G.jsxs("button",{onClick:()=>u(h),className:`px-3 py-1 text-sm font-medium rounded-full border-2 transition-all ${t.some(g=>g.name===h.name)?` ${f[h.type]} ${c[h.type]} `:"border-base-300 bg-base-100 hover:border-brand-primary"}`,children:[h.name," ",G.jsxs("span",{className:"text-xs opacity-70",children:["(",h.type,")"]})]},h.name))})]}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-semibold mb-2",children:"Suggested Keywords"}),G.jsx("div",{className:"flex flex-wrap gap-2",children:n.keywords.map(h=>G.jsx("button",{onClick:()=>l(h),className:`px-3 py-1 text-sm rounded-full border-2 transition-all ${i.includes(h)?"border-brand-primary bg-brand-primary/20 text-brand-primary":"border-base-300 bg-base-100 hover:border-brand-primary"}`,children:h},h))})]}),G.jsx("button",{onClick:()=>e(t,i),className:"w-full bg-brand-primary hover:bg-brand-secondary text-white font-bold py-2 px-4 rounded-lg mt-4",children:"Confirm Selections & Proceed"})]})},VG=({suggestions:n,onSelect:e})=>G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Recommended Abstract Type"}),G.jsx("p",{className:"text-text-secondary",children:"Based on your content, we recommend the following abstract types. Please select one to proceed."}),G.jsx("div",{className:"space-y-2",children:n.map(t=>G.jsx("button",{onClick:()=>e(t.type),className:"w-full text-left p-3 bg-base-100 hover:bg-base-300/50 border border-base-300 rounded-lg transition-all",children:G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("span",{className:"font-semibold text-text-primary",children:t.type}),G.jsx("span",{className:"text-xs font-mono px-2 py-1 bg-brand-primary/20 text-brand-primary rounded",children:`${(t.probability*100).toFixed(0)}% match`})]})},t.type))})]}),$G=()=>{const[n,e]=it.useState(!1),[t,r]=it.useState("Generating..."),[i,s]=it.useState(null),[u,l]=it.useState("abstract"),[c,f]=it.useState(null),[h,g]=it.useState(!1),[y,m]=it.useState(""),{databaseService:E}=it.useContext(ud),{abstractToLoad:_,clearLoadedAbstract:R}=Cg();it.useEffect(()=>{_&&_.conference==="RSNA"&&(H(_),R())},[_]);const[b,N]=it.useState("standard"),[C,A]=it.useState(""),[F,J]=it.useState(null),[V,te]=it.useState([]),[O,le]=it.useState([]),[Q,U]=it.useState([]),[X,M]=it.useState(null),[ye,se]=it.useState(!1),[ie,Se]=it.useState("analysis"),[me,Ne]=it.useState(null),[K,L]=it.useState("standard"),[$,ee]=it.useState({file:null,specs:"",base64:null}),[pe,ae]=it.useState(null),B=()=>{J(null),te([]),le([]),U([]),M(null),Ne(null)},j=ne=>{A(ne),F&&B()},de=ne=>new Promise((we,Re)=>{const De=new FileReader;De.readAsDataURL(ne),De.onload=()=>{const Ue=De.result;we(Ue.split(",")[1])},De.onerror=Ue=>Re(Ue)}),fe=async ne=>{if(ne.target.files&&ne.target.files[0]){const we=ne.target.files[0];s(null),ne.target.value="",e(!0),r(`Processing ${we.name}...`);try{if(we.type==="text/plain"||we.name.toLowerCase().endsWith(".txt")){const Re=await new Promise((De,Ue)=>{const Ke=new FileReader;Ke.onload=at=>{var ot;return De((ot=at.target)==null?void 0:ot.result)},Ke.onerror=at=>Ue(at),Ke.readAsText(we)});A(Re),F&&B()}else{const{fileProcessingService:Re}=await ma(async()=>{const{fileProcessingService:Ue}=await import("./FileProcessingService-U3egcWUj.js");return{fileProcessingService:Ue}},[]),De=await Re.processFile(we);De.success&&De.content?(A(De.content),F&&B()):De.error?s(Re.getErrorMessage(De.error)):s("Failed to extract text from the file.")}}catch(Re){console.error("File processing error:",Re),s(Re instanceof Error?Re.message:"Failed to process file.")}finally{e(!1)}}},re=async ne=>{if(ne.target.files&&ne.target.files[0]){const we=ne.target.files[0];try{const Re=await de(we);ee({...$,file:we,base64:Re})}catch(Re){console.error("Error converting file to base64:",Re),s("Failed to read image file.")}}},he=async()=>{if(!C.trim()){s("Please provide input text to analyze.");return}e(!0),r("Analyzing content for RSNA submission..."),s(null),B();try{const ne=await S6(C,"RSNA");J(ne),le(ne.keywords),Se("analysis"),se(!0)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error occurred during analysis.")}finally{e(!1)}},ke=async(ne,we)=>{te(ne),le(we),e(!0),r("Suggesting RSNA abstract types...");try{U([{type:"RSNA Scientific Abstract",probability:1}]),Se("type")}catch(Re){s(Re instanceof Error?Re.message:"Failed to get abstract type suggestions."),se(!1)}finally{e(!1)}},q=ne=>{M(ne),se(!1)},oe=async()=>{if(!C||!X||V.length===0||O.length===0)return s("Please complete the analysis and selection steps before generating.");e(!0),r("Generating RSNA scientific abstract..."),s(null),Ne(null);try{const ne=await x6(C,X,V,O,"RSNA");Ne(ne)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error during abstract generation.")}finally{e(!1)}},Y=async()=>{if(!C.trim())return s("Please provide a core idea to expand.");e(!0),r("Creatively generating RSNA abstract..."),s(null),B();try{const ne=await A6(C,"RSNA");Ne(ne),le(ne.keywords)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error during creative generation.")}finally{e(!1)}},I=async()=>{let ne="";if(K==="creative"){if(!me)return s("Please generate an abstract first to provide context for creative image generation.");ne=`Impact: ${me.impact}
Synopsis: ${me.synopsis}`}else if(!$.file)return s("Please upload an image for standard mode editing.");e(!0),r("Generating figure..."),s(null),ae(null);try{const we=await Cb($,ne);ae(`data:image/png;base64,${we}`)}catch(we){s(we instanceof Error?we.message:"An unknown error during image generation.")}finally{e(!1)}},P=async()=>{if(!me||!X){s("Please generate an abstract before saving.");return}if(!y.trim()){s("Please enter a title for your abstract.");return}try{e(!0),r("Saving abstract...");const ne={title:y.trim(),conference:"RSNA",abstractType:X,abstractData:me,originalText:C,categories:V,keywords:O};if(c)await E.updateAbstract(c,ne);else{const we=await E.saveAbstract(ne);f(we)}g(!1),m(""),s(null)}catch(ne){s(ne instanceof Error?ne.message:"Failed to save abstract")}finally{e(!1)}},H=ne=>{A(ne.originalText),Ne(ne.abstractData),te(ne.categories),le(ne.keywords),M(ne.abstractType),f(ne.id),m(ne.title),J({categories:ne.categories,keywords:ne.keywords})},be=()=>{A(""),f(null),m(""),B()};return G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[G.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[G.jsxs("div",{className:"flex border-b border-base-300",children:[G.jsx(a3,{id:"abstract",activeTab:u,setActiveTab:l,label:"Abstract Generation",icon:"text"}),G.jsx(a3,{id:"figure",activeTab:u,setActiveTab:l,label:"Figure Generation",icon:"image"})]}),u==="abstract"&&G.jsxs("div",{className:"space-y-4 animate-fade-in",children:[G.jsx(WG,{mode:b,setMode:N}),b==="standard"?G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-text-secondary mb-2",children:"Upload File (.txt, .pdf, .docx) or Paste Text"}),G.jsx("input",{id:"file-upload",type:"file",accept:".txt,.pdf,.docx,text/plain,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:fe,className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/20 file:text-brand-primary hover:file:bg-brand-primary/30"}),G.jsx("div",{className:"relative mt-2",children:G.jsx("textarea",{value:C,onChange:ne=>j(ne.target.value),placeholder:"Paste your research paper or study details here for RSNA abstract generation...",className:"w-full h-60 p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})})]}):G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"creative-prompt",className:"block text-sm font-medium text-text-secondary mb-2",children:"Creative Expansion: Research Idea for RSNA"}),G.jsx("input",{id:"creative-prompt",type:"text",value:C,onChange:ne=>j(ne.target.value),placeholder:"e.g., AI-powered detection of early lung cancer in chest CT scans.",className:"w-full p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})]}),G.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:b==="standard"?G.jsxs(G.Fragment,{children:[G.jsxs("button",{onClick:he,disabled:n||!C.trim(),className:"flex-1 flex items-center justify-center gap-2 bg-base-300 hover:bg-opacity-80 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"sparkles",className:"h-5 w-5"}),"1. Analyze for RSNA"]}),G.jsxs("button",{onClick:oe,disabled:n||!X,className:"flex-1 flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"document",className:"h-5 w-5"}),"2. Generate"]})]}):G.jsxs("button",{onClick:Y,disabled:n||!C.trim(),className:"w-full flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"sparkles",className:"h-5 w-5"}),"Generate Creatively"]})}),me&&G.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t border-base-300",children:[G.jsxs("button",{onClick:()=>{m(c?y:`RSNA Abstract - ${new Date().toLocaleDateString()}`),g(!0)},disabled:n,className:"flex-1 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"download",className:"h-5 w-5"}),c?"Update":"Save"," Abstract"]}),G.jsxs("button",{onClick:be,disabled:n,className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"document",className:"h-5 w-5"}),"New Abstract"]})]})]}),u==="figure"&&G.jsxs("div",{className:"space-y-4 animate-fade-in",children:[G.jsx(KG,{mode:K,setMode:L,creativeDisabled:!me,creativeTooltip:"Generate an abstract first to enable this mode."}),K==="standard"?G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"image-upload",className:"block text-sm font-medium text-text-secondary mb-2",children:"Upload Medical Image"}),G.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:re,className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/20 file:text-brand-primary hover:file:bg-brand-primary/30"}),$.base64&&G.jsx("img",{src:`data:image/png;base64,${$.base64}`,alt:"Preview",className:"mt-4 rounded-lg max-h-40 object-contain mx-auto"})]}):G.jsxs("div",{className:"p-4 bg-base-100/50 rounded-lg text-center",children:[G.jsx(rn,{type:"info",className:"mx-auto h-8 w-8 text-brand-primary mb-2"}),G.jsx("p",{className:"text-text-secondary font-medium",children:"Creative mode will generate a figure based on your RSNA abstract content."})]}),G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"image-specs",className:"block text-sm font-medium text-text-secondary mb-2",children:"Image Specifications & Guidelines"}),G.jsx("textarea",{id:"image-specs",value:$.specs,onChange:ne=>ee({...$,specs:ne.target.value}),placeholder:"e.g., 'Enhance contrast for better visualization', 'Add measurement annotations', 'Create comparison view'.",className:"w-full h-32 p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})]}),G.jsxs("button",{onClick:I,disabled:n,className:"w-full flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"image",className:"h-5 w-5"}),"Generate Figure"]})]})]}),G.jsx($b,{abstract:me,image:pe,isLoading:n,error:i,loadingMessage:t,conference:"RSNA",abstractType:X||"RSNA Scientific Abstract"})]}),ye&&F&&G.jsx(mc,{onClose:()=>se(!1),children:ie==="analysis"?G.jsx(JG,{result:F,onConfirm:ke}):G.jsx(YG,{suggestions:Q,onSelect:q})}),h&&G.jsx(mc,{onClose:()=>g(!1),children:G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:c?"Update Abstract":"Save Abstract"}),G.jsx("p",{className:"text-text-secondary",children:c?"Update the title for your RSNA abstract.":"Enter a title for your RSNA abstract to save it for later use."}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"save-title",className:"block text-sm font-medium text-text-secondary mb-2",children:"Abstract Title"}),G.jsx("input",{id:"save-title",type:"text",value:y,onChange:ne=>m(ne.target.value),placeholder:"Enter a descriptive title...",className:"w-full p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition",autoFocus:!0})]}),G.jsxs("div",{className:"flex gap-3 justify-end",children:[G.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-text-secondary border border-base-300 rounded-md hover:bg-base-100 transition-colors",children:"Cancel"}),G.jsx("button",{onClick:P,disabled:!y.trim()||n,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-secondary transition-colors disabled:bg-base-300/50 disabled:cursor-not-allowed",children:c?"Update":"Save"})]})]})})]})},a3=({id:n,activeTab:e,setActiveTab:t,label:r,icon:i})=>G.jsxs("button",{onClick:()=>t(n),className:`flex items-center gap-2 text-sm font-medium py-2 px-4 rounded-t-lg transition-colors duration-200 focus:outline-none ${e===n?"border-b-2 border-brand-primary text-brand-primary":"text-text-secondary hover:bg-base-300/50"}`,children:[G.jsx(rn,{type:i,className:"h-5 w-5"}),r]}),WG=({mode:n,setMode:e})=>G.jsxs("div",{className:"flex bg-base-100 rounded-lg p-1",children:[G.jsx(fg,{label:"Standard Analysis",icon:"document",active:n==="standard",onClick:()=>e("standard")}),G.jsx(fg,{label:"Creative Expansion",icon:"sparkles",active:n==="creative",onClick:()=>e("creative")})]}),KG=({mode:n,setMode:e,creativeDisabled:t,creativeTooltip:r})=>G.jsxs("div",{className:"flex bg-base-100 rounded-lg p-1",children:[G.jsx(fg,{label:"Standard Edit",icon:"document",active:n==="standard",onClick:()=>e("standard")}),G.jsx(fg,{label:"Creative Generation",icon:"sparkles",active:n==="creative",onClick:()=>e("creative"),disabled:t,tooltip:r})]}),fg=({label:n,icon:e,active:t,onClick:r,disabled:i=!1,tooltip:s})=>G.jsxs("div",{className:"relative w-1/2 group",children:[G.jsxs("button",{onClick:r,disabled:i,className:`w-full flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-semibold transition-all duration-300 ${t?"bg-brand-primary text-white shadow-md":"text-text-secondary hover:bg-base-200/50"} ${i?"opacity-50 cursor-not-allowed":""}`,children:[G.jsx(rn,{type:e,className:"h-5 w-5"}),n]}),i&&s&&G.jsx("span",{className:"absolute bottom-full z-10 mb-2 w-max bg-base-300 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",children:s})]}),JG=({result:n,onConfirm:e})=>{const[t,r]=it.useState(n.categories.filter(h=>h.probability>.25)),[i,s]=it.useState(n.keywords),u=h=>r(g=>g.some(y=>y.name===h.name)?g.filter(y=>y.name!==h.name):[...g,h]),l=h=>s(g=>g.includes(h)?g.filter(y=>y!==h):[...g,h]),c={main:"bg-blue-100 text-blue-800",sub:"bg-green-100 text-green-800",secondary:"bg-purple-100 text-purple-800"},f={main:"border-blue-500",sub:"border-green-500",secondary:"border-purple-500"};return G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"RSNA Analysis Complete"}),G.jsx("p",{className:"text-text-secondary",children:"Please review and confirm the suggested categories and keywords for your RSNA abstract."}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-semibold mb-2",children:"Suggested RSNA Categories"}),G.jsx("div",{className:"flex flex-wrap gap-2",children:n.categories.filter(h=>h.probability>.25).map(h=>G.jsxs("button",{onClick:()=>u(h),className:`px-3 py-1 text-sm font-medium rounded-full border-2 transition-all ${t.some(g=>g.name===h.name)?`${f[h.type]} ${c[h.type]}`:"border-base-300 bg-base-100 hover:border-brand-primary"}`,children:[h.name," ",G.jsxs("span",{className:"text-xs opacity-70",children:["(",h.type,")"]})]},h.name))})]}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-semibold mb-2",children:"Suggested Keywords"}),G.jsx("div",{className:"flex flex-wrap gap-2",children:n.keywords.map(h=>G.jsx("button",{onClick:()=>l(h),className:`px-3 py-1 text-sm rounded-full border-2 transition-all ${i.includes(h)?"border-brand-primary bg-brand-primary/20 text-brand-primary":"border-base-300 bg-base-100 hover:border-brand-primary"}`,children:h},h))})]}),G.jsx("button",{onClick:()=>e(t,i),className:"w-full bg-brand-primary hover:bg-brand-secondary text-white font-bold py-2 px-4 rounded-lg mt-4",children:"Confirm Selections & Proceed"})]})},YG=({suggestions:n,onSelect:e})=>G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"RSNA Abstract Type"}),G.jsx("p",{className:"text-text-secondary",children:"Select the RSNA abstract type for your submission."}),G.jsx("div",{className:"space-y-2",children:n.map(t=>G.jsx("button",{onClick:()=>e(t.type),className:"w-full text-left p-3 bg-base-100 hover:bg-base-300/50 border border-base-300 rounded-lg transition-all",children:G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("span",{className:"font-semibold text-text-primary",children:t.type}),G.jsx("span",{className:"text-xs font-mono px-2 py-1 bg-brand-primary/20 text-brand-primary rounded",children:`${(t.probability*100).toFixed(0)}% match`})]})},t.type))})]}),XG=()=>{const[n,e]=it.useState(!1),[t,r]=it.useState("Generating..."),[i,s]=it.useState(null),[u,l]=it.useState("abstract"),[c,f]=it.useState(null),[h,g]=it.useState(!1),[y,m]=it.useState(""),{databaseService:E}=it.useContext(ud),{abstractToLoad:_,clearLoadedAbstract:R}=Cg();it.useEffect(()=>{_&&_.conference==="JACC"&&(H(_),R())},[_]);const[b,N]=it.useState("standard"),[C,A]=it.useState(""),[F,J]=it.useState(null),[V,te]=it.useState([]),[O,le]=it.useState([]),[Q,U]=it.useState([]),[X,M]=it.useState(null),[ye,se]=it.useState(!1),[ie,Se]=it.useState("analysis"),[me,Ne]=it.useState(null),[K,L]=it.useState("standard"),[$,ee]=it.useState({file:null,specs:"",base64:null}),[pe,ae]=it.useState(null),B=()=>{J(null),te([]),le([]),U([]),M(null),Ne(null)},j=ne=>{A(ne),F&&B()},de=ne=>new Promise((we,Re)=>{const De=new FileReader;De.readAsDataURL(ne),De.onload=()=>{const Ue=De.result;we(Ue.split(",")[1])},De.onerror=Ue=>Re(Ue)}),fe=async ne=>{if(ne.target.files&&ne.target.files[0]){const we=ne.target.files[0];s(null),ne.target.value="",e(!0),r(`Processing ${we.name}...`);try{if(we.type==="text/plain"||we.name.toLowerCase().endsWith(".txt")){const Re=await new Promise((De,Ue)=>{const Ke=new FileReader;Ke.onload=at=>{var ot;return De((ot=at.target)==null?void 0:ot.result)},Ke.onerror=at=>Ue(at),Ke.readAsText(we)});A(Re),F&&B()}else{const{fileProcessingService:Re}=await ma(async()=>{const{fileProcessingService:Ue}=await import("./FileProcessingService-U3egcWUj.js");return{fileProcessingService:Ue}},[]),De=await Re.processFile(we);De.success&&De.content?(A(De.content),F&&B()):De.error?s(Re.getErrorMessage(De.error)):s("Failed to extract text from the file.")}}catch(Re){console.error("File processing error:",Re),s(Re instanceof Error?Re.message:"Failed to process file.")}finally{e(!1)}}},re=async ne=>{if(ne.target.files&&ne.target.files[0]){const we=ne.target.files[0];try{const Re=await de(we);ee({...$,file:we,base64:Re})}catch(Re){console.error("Error converting file to base64:",Re),s("Failed to read image file.")}}},he=async()=>{if(!C.trim()){s("Please provide input text to analyze.");return}e(!0),r("Analyzing content for JACC submission..."),s(null),B();try{const ne=await S6(C,"JACC");J(ne),le(ne.keywords),Se("analysis"),se(!0)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error occurred during analysis.")}finally{e(!1)}},ke=async(ne,we)=>{te(ne),le(we),e(!0),r("Suggesting JACC abstract types...");try{U([{type:"JACC Scientific Abstract",probability:1}]),Se("type")}catch(Re){s(Re instanceof Error?Re.message:"Failed to get abstract type suggestions."),se(!1)}finally{e(!1)}},q=ne=>{M(ne),se(!1)},oe=async()=>{if(!C||!X||V.length===0||O.length===0)return s("Please complete the analysis and selection steps before generating.");e(!0),r("Generating JACC scientific abstract..."),s(null),Ne(null);try{const ne=await x6(C,X,V,O,"JACC");Ne(ne)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error during abstract generation.")}finally{e(!1)}},Y=async()=>{if(!C.trim())return s("Please provide a core idea to expand.");e(!0),r("Creatively generating JACC abstract..."),s(null),B();try{const ne=await A6(C,"JACC");Ne(ne),le(ne.keywords)}catch(ne){s(ne instanceof Error?ne.message:"An unknown error during creative generation.")}finally{e(!1)}},I=async()=>{let ne="";if(K==="creative"){if(!me)return s("Please generate an abstract first to provide context for creative image generation.");ne=`Impact: ${me.impact}
Synopsis: ${me.synopsis}`}else if(!$.file)return s("Please upload an image for standard mode editing.");e(!0),r("Generating cardiovascular figure..."),s(null),ae(null);try{const we=await Cb($,ne);ae(`data:image/png;base64,${we}`)}catch(we){s(we instanceof Error?we.message:"An unknown error during image generation.")}finally{e(!1)}},P=async()=>{if(!me||!X){s("Please generate an abstract before saving.");return}if(!y.trim()){s("Please enter a title for your abstract.");return}try{e(!0),r("Saving abstract...");const ne={title:y.trim(),conference:"JACC",abstractType:X,abstractData:me,originalText:C,categories:V,keywords:O};if(c)await E.updateAbstract(c,ne);else{const we=await E.saveAbstract(ne);f(we)}g(!1),m(""),s(null)}catch(ne){s(ne instanceof Error?ne.message:"Failed to save abstract")}finally{e(!1)}},H=ne=>{A(ne.originalText),Ne(ne.abstractData),te(ne.categories),le(ne.keywords),M(ne.abstractType),f(ne.id),m(ne.title),J({categories:ne.categories,keywords:ne.keywords})},be=()=>{A(""),f(null),m(""),B()};return G.jsxs(G.Fragment,{children:[G.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[G.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[G.jsxs("div",{className:"flex border-b border-base-300",children:[G.jsx(o3,{id:"abstract",activeTab:u,setActiveTab:l,label:"Abstract Generation",icon:"text"}),G.jsx(o3,{id:"figure",activeTab:u,setActiveTab:l,label:"Figure Generation",icon:"image"})]}),u==="abstract"&&G.jsxs("div",{className:"space-y-4 animate-fade-in",children:[G.jsx(ZG,{mode:b,setMode:N}),b==="standard"?G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-text-secondary mb-2",children:"Upload File (.txt, .pdf, .docx) or Paste Text"}),G.jsx("input",{id:"file-upload",type:"file",accept:".txt,.pdf,.docx,text/plain,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:fe,className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/20 file:text-brand-primary hover:file:bg-brand-primary/30"}),G.jsx("div",{className:"relative mt-2",children:G.jsx("textarea",{value:C,onChange:ne=>j(ne.target.value),placeholder:"Paste your cardiovascular research paper or study details here for JACC abstract generation...",className:"w-full h-60 p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})})]}):G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"creative-prompt",className:"block text-sm font-medium text-text-secondary mb-2",children:"Creative Expansion: Cardiovascular Research Idea for JACC"}),G.jsx("input",{id:"creative-prompt",type:"text",value:C,onChange:ne=>j(ne.target.value),placeholder:"e.g., Novel biomarker for predicting heart failure outcomes in diabetic patients.",className:"w-full p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})]}),G.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:b==="standard"?G.jsxs(G.Fragment,{children:[G.jsxs("button",{onClick:he,disabled:n||!C.trim(),className:"flex-1 flex items-center justify-center gap-2 bg-base-300 hover:bg-opacity-80 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"sparkles",className:"h-5 w-5"}),"1. Analyze for JACC"]}),G.jsxs("button",{onClick:oe,disabled:n||!X,className:"flex-1 flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"document",className:"h-5 w-5"}),"2. Generate"]})]}):G.jsxs("button",{onClick:Y,disabled:n||!C.trim(),className:"w-full flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"sparkles",className:"h-5 w-5"}),"Generate Creatively"]})}),me&&G.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t border-base-300",children:[G.jsxs("button",{onClick:()=>{m(c?y:`JACC Abstract - ${new Date().toLocaleDateString()}`),g(!0)},disabled:n,className:"flex-1 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"download",className:"h-5 w-5"}),c?"Update":"Save"," Abstract"]}),G.jsxs("button",{onClick:be,disabled:n,className:"flex-1 flex items-center justify-center gap-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"document",className:"h-5 w-5"}),"New Abstract"]})]})]}),u==="figure"&&G.jsxs("div",{className:"space-y-4 animate-fade-in",children:[G.jsx(QG,{mode:K,setMode:L,creativeDisabled:!me,creativeTooltip:"Generate an abstract first to enable this mode."}),K==="standard"?G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"image-upload",className:"block text-sm font-medium text-text-secondary mb-2",children:"Upload Cardiovascular Image"}),G.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:re,className:"block w-full text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-brand-primary/20 file:text-brand-primary hover:file:bg-brand-primary/30"}),$.base64&&G.jsx("img",{src:`data:image/png;base64,${$.base64}`,alt:"Preview",className:"mt-4 rounded-lg max-h-40 object-contain mx-auto"})]}):G.jsxs("div",{className:"p-4 bg-base-100/50 rounded-lg text-center",children:[G.jsx(rn,{type:"info",className:"mx-auto h-8 w-8 text-brand-primary mb-2"}),G.jsx("p",{className:"text-text-secondary font-medium",children:"Creative mode will generate a cardiovascular figure based on your JACC abstract content."})]}),G.jsxs("div",{className:"bg-base-100 p-4 rounded-lg",children:[G.jsx("label",{htmlFor:"image-specs",className:"block text-sm font-medium text-text-secondary mb-2",children:"Image Specifications & Guidelines"}),G.jsx("textarea",{id:"image-specs",value:$.specs,onChange:ne=>ee({...$,specs:ne.target.value}),placeholder:"e.g., 'Highlight coronary arteries', 'Add ejection fraction measurements', 'Create before/after comparison'.",className:"w-full h-32 p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition"})]}),G.jsxs("button",{onClick:I,disabled:n,className:"w-full flex items-center justify-center gap-2 bg-brand-primary hover:bg-brand-secondary text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 disabled:bg-base-300/50 disabled:cursor-not-allowed",children:[G.jsx(rn,{type:"image",className:"h-5 w-5"}),"Generate Figure"]})]})]}),G.jsx($b,{abstract:me,image:pe,isLoading:n,error:i,loadingMessage:t,conference:"JACC",abstractType:X||"JACC Scientific Abstract"})]}),ye&&F&&G.jsx(mc,{onClose:()=>se(!1),children:ie==="analysis"?G.jsx(eV,{result:F,onConfirm:ke}):G.jsx(tV,{suggestions:Q,onSelect:q})}),h&&G.jsx(mc,{onClose:()=>g(!1),children:G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:c?"Update Abstract":"Save Abstract"}),G.jsx("p",{className:"text-text-secondary",children:c?"Update the title for your JACC abstract.":"Enter a title for your JACC abstract to save it for later use."}),G.jsxs("div",{children:[G.jsx("label",{htmlFor:"save-title",className:"block text-sm font-medium text-text-secondary mb-2",children:"Abstract Title"}),G.jsx("input",{id:"save-title",type:"text",value:y,onChange:ne=>m(ne.target.value),placeholder:"Enter a descriptive title...",className:"w-full p-3 bg-base-100 border border-base-300 rounded-md focus:ring-2 focus:ring-brand-primary focus:outline-none transition",autoFocus:!0})]}),G.jsxs("div",{className:"flex gap-3 justify-end",children:[G.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-text-secondary border border-base-300 rounded-md hover:bg-base-100 transition-colors",children:"Cancel"}),G.jsx("button",{onClick:P,disabled:!y.trim()||n,className:"px-4 py-2 bg-brand-primary text-white rounded-md hover:bg-brand-secondary transition-colors disabled:bg-base-300/50 disabled:cursor-not-allowed",children:c?"Update":"Save"})]})]})})]})},o3=({id:n,activeTab:e,setActiveTab:t,label:r,icon:i})=>G.jsxs("button",{onClick:()=>t(n),className:`flex items-center gap-2 text-sm font-medium py-2 px-4 rounded-t-lg transition-colors duration-200 focus:outline-none ${e===n?"border-b-2 border-brand-primary text-brand-primary":"text-text-secondary hover:bg-base-300/50"}`,children:[G.jsx(rn,{type:i,className:"h-5 w-5"}),r]}),ZG=({mode:n,setMode:e})=>G.jsxs("div",{className:"flex bg-base-100 rounded-lg p-1",children:[G.jsx(dg,{label:"Standard Analysis",icon:"document",active:n==="standard",onClick:()=>e("standard")}),G.jsx(dg,{label:"Creative Expansion",icon:"sparkles",active:n==="creative",onClick:()=>e("creative")})]}),QG=({mode:n,setMode:e,creativeDisabled:t,creativeTooltip:r})=>G.jsxs("div",{className:"flex bg-base-100 rounded-lg p-1",children:[G.jsx(dg,{label:"Standard Edit",icon:"document",active:n==="standard",onClick:()=>e("standard")}),G.jsx(dg,{label:"Creative Generation",icon:"sparkles",active:n==="creative",onClick:()=>e("creative"),disabled:t,tooltip:r})]}),dg=({label:n,icon:e,active:t,onClick:r,disabled:i=!1,tooltip:s})=>G.jsxs("div",{className:"relative w-1/2 group",children:[G.jsxs("button",{onClick:r,disabled:i,className:`w-full flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-semibold transition-all duration-300 ${t?"bg-brand-primary text-white shadow-md":"text-text-secondary hover:bg-base-200/50"} ${i?"opacity-50 cursor-not-allowed":""}`,children:[G.jsx(rn,{type:e,className:"h-5 w-5"}),n]}),i&&s&&G.jsx("span",{className:"absolute bottom-full z-10 mb-2 w-max bg-base-300 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",children:s})]}),eV=({result:n,onConfirm:e})=>{const[t,r]=it.useState(n.categories.filter(h=>h.probability>.25)),[i,s]=it.useState(n.keywords),u=h=>r(g=>g.some(y=>y.name===h.name)?g.filter(y=>y.name!==h.name):[...g,h]),l=h=>s(g=>g.includes(h)?g.filter(y=>y!==h):[...g,h]),c={main:"bg-red-100 text-red-800",sub:"bg-blue-100 text-blue-800",secondary:"bg-green-100 text-green-800"},f={main:"border-red-500",sub:"border-blue-500",secondary:"border-green-500"};return G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"JACC Analysis Complete"}),G.jsx("p",{className:"text-text-secondary",children:"Please review and confirm the suggested cardiovascular categories and keywords for your JACC abstract."}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-semibold mb-2",children:"Suggested JACC Categories"}),G.jsx("div",{className:"flex flex-wrap gap-2",children:n.categories.filter(h=>h.probability>.25).map(h=>G.jsxs("button",{onClick:()=>u(h),className:`px-3 py-1 text-sm font-medium rounded-full border-2 transition-all ${t.some(g=>g.name===h.name)?`${f[h.type]} ${c[h.type]}`:"border-base-300 bg-base-100 hover:border-brand-primary"}`,children:[h.name," ",G.jsxs("span",{className:"text-xs opacity-70",children:["(",h.type,")"]})]},h.name))})]}),G.jsxs("div",{children:[G.jsx("h3",{className:"font-semibold mb-2",children:"Suggested Keywords"}),G.jsx("div",{className:"flex flex-wrap gap-2",children:n.keywords.map(h=>G.jsx("button",{onClick:()=>l(h),className:`px-3 py-1 text-sm rounded-full border-2 transition-all ${i.includes(h)?"border-brand-primary bg-brand-primary/20 text-brand-primary":"border-base-300 bg-base-100 hover:border-brand-primary"}`,children:h},h))})]}),G.jsx("button",{onClick:()=>e(t,i),className:"w-full bg-brand-primary hover:bg-brand-secondary text-white font-bold py-2 px-4 rounded-lg mt-4",children:"Confirm Selections & Proceed"})]})},tV=({suggestions:n,onSelect:e})=>G.jsxs("div",{className:"space-y-4",children:[G.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"JACC Abstract Type"}),G.jsx("p",{className:"text-text-secondary",children:"Select the JACC abstract type for your cardiovascular research submission."}),G.jsx("div",{className:"space-y-2",children:n.map(t=>G.jsx("button",{onClick:()=>e(t.type),className:"w-full text-left p-3 bg-base-100 hover:bg-base-300/50 border border-base-300 rounded-lg transition-all",children:G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsx("span",{className:"font-semibold text-text-primary",children:t.type}),G.jsx("span",{className:"text-xs font-mono px-2 py-1 bg-brand-primary/20 text-brand-primary rounded",children:`${(t.probability*100).toFixed(0)}% match`})]})},t.type))})]}),nV=()=>{const[n,e]=it.useState("ISMRM");return G.jsxs("div",{className:"bg-base-200 p-2 rounded-lg shadow-lg",children:[G.jsxs("div",{className:"flex border-b border-base-300 mb-4",children:[G.jsx(Uv,{id:"ISMRM",label:"ISMRM Abstract Assistant",activeTab:n,setActiveTab:e}),G.jsx(Uv,{id:"RSNA",label:"RSNA Radiology",activeTab:n,setActiveTab:e}),G.jsx(Uv,{id:"JACC",label:"JACC Cardiology",activeTab:n,setActiveTab:e})]}),G.jsxs("div",{children:[n==="ISMRM"&&G.jsx(jG,{}),n==="RSNA"&&G.jsx($G,{}),n==="JACC"&&G.jsx(XG,{})]})]})},Uv=({id:n,label:e,activeTab:t,setActiveTab:r,disabled:i})=>G.jsx("button",{onClick:()=>!i&&r(n),disabled:i,className:`text-sm font-medium py-2 px-4 rounded-t-lg transition-colors duration-200 focus:outline-none ${t===n?"border-b-2 border-brand-primary text-brand-primary":"text-text-secondary hover:bg-base-300/50"} ${i?"opacity-50 cursor-not-allowed":""}`,children:e});class rV{constructor(){this.logs=[],this.feedback=[],this.maxLogEntries=100,this.sessionId=this.generateSessionId(),this.loadStoredLogs()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}sanitizeMessage(e){return e.replace(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,"[EMAIL]").replace(/\b\d{4}[-\s]?\d{4}[-\s]?\d{4}[-\s]?\d{4}\b/g,"[CARD]").replace(/\b\d{3}-\d{2}-\d{4}\b/g,"[SSN]").replace(/\b\d{10,}\b/g,"[NUMBER]").replace(/['"]/g,"").substring(0,500)}sanitizeContext(e){return["Content Analysis","Abstract Generation","File Processing","Export Service","Database Service","Component Error","Service Error","Network Error","Validation Error"].find(r=>e.includes(r))||"Unknown Context"}logError(e){const t={id:this.generateLogId(),timestamp:e.timestamp,code:e.code,message:this.sanitizeMessage(e.message),severity:e.severity,context:this.sanitizeContext(e.context||"Unknown"),userAgent:navigator.userAgent.substring(0,200),url:window.location.pathname,sessionId:this.sessionId,metadata:this.extractSafeMetadata(e)};return this.logs.push(t),this.trimLogs(),this.storeLogs(),t.id}generateLogId(){return`err_${Date.now()}_${Math.random().toString(36).substr(2,6)}`}extractSafeMetadata(e){const t={};return e.details&&typeof e.details=="object"&&(e.details.fileType&&(t.fileType=String(e.details.fileType).toLowerCase()),e.details.provider&&(t.provider=String(e.details.provider).toLowerCase()),e.details.operation&&(t.operation=String(e.details.operation).toLowerCase()),typeof e.details.retryCount=="number"&&(t.retryCount=e.details.retryCount)),Object.keys(t).length>0?t:void 0}trimLogs(){this.logs.length>this.maxLogEntries&&(this.logs=this.logs.slice(-this.maxLogEntries))}storeLogs(){try{const e=this.logs.slice(-50);localStorage.setItem("error-logs",JSON.stringify(e))}catch(e){console.warn("Failed to store error logs:",e)}}loadStoredLogs(){try{const e=localStorage.getItem("error-logs");if(e){const t=JSON.parse(e);this.logs=t.map(r=>({...r,timestamp:new Date(r.timestamp)}))}}catch(e){console.warn("Failed to load stored error logs:",e),this.logs=[]}}getErrorStats(){const e=new Date,t=new Date(e.getTime()-1440*60*1e3),r=this.logs.filter(l=>l.timestamp>=t),i=this.logs.reduce((l,c)=>(l[c.code]=(l[c.code]||0)+1,l),{}),s=this.logs.reduce((l,c)=>(l[c.severity]=(l[c.severity]||0)+1,l),{}),u=Object.entries(i).map(([l,c])=>{var f;return{code:l,count:c,lastOccurred:((f=this.logs.filter(h=>h.code===l).sort((h,g)=>g.timestamp.getTime()-h.timestamp.getTime())[0])==null?void 0:f.timestamp)||new Date}}).sort((l,c)=>c.count-l.count).slice(0,5);return{totalErrors:this.logs.length,errorsByCode:i,errorsBySeverity:s,recentErrors:r.slice(-10),topErrors:u}}collectUserFeedback(e,t,r){const i={errorId:e,rating:t,comment:r?this.sanitizeMessage(r):void 0,timestamp:new Date};this.feedback.push(i),this.storeFeedback()}storeFeedback(){try{localStorage.setItem("error-feedback",JSON.stringify(this.feedback.slice(-20)))}catch(e){console.warn("Failed to store error feedback:",e)}}getErrorById(e){return this.logs.find(t=>t.id===e)}clearLogs(){this.logs=[],this.feedback=[],localStorage.removeItem("error-logs"),localStorage.removeItem("error-feedback")}exportLogs(){const e={sessionId:this.sessionId,exportTime:new Date().toISOString(),stats:this.getErrorStats(),logs:this.logs.map(t=>({id:t.id,timestamp:t.timestamp.toISOString(),code:t.code,message:t.message,severity:t.severity,context:t.context,metadata:t.metadata}))};return JSON.stringify(e,null,2)}detectErrorPatterns(){const e=[],t=this.getErrorStats(),r=t.errorsByCode.NETWORK_ERROR||0;r>5&&e.push({pattern:"Frequent network errors",frequency:r,suggestion:"Check internet connection or try switching to offline mode"});const i=t.errorsByCode.API_ERROR||0;i>3&&e.push({pattern:"Repeated API failures",frequency:i,suggestion:"Try switching AI providers or check API key configuration"});const s=t.errorsByCode.FILE_PROCESSING_ERROR||0;return s>2&&e.push({pattern:"File processing issues",frequency:s,suggestion:"Try converting files to a different format or use manual text input"}),e}}const eR=new rV,iV=({errorId:n,onClose:e,compact:t=!1})=>{const[r,i]=it.useState(null),[s,u]=it.useState(""),[l,c]=it.useState(!1),f=()=>{r&&(eR.collectUserFeedback(n,r,s.trim()||void 0),c(!0),setTimeout(()=>{e==null||e()},2e3))};return l?G.jsx("div",{className:`${t?"p-2":"p-3"} bg-green-50 border border-green-200 rounded text-sm`,children:G.jsxs("div",{className:"flex items-center text-green-700",children:[G.jsx("span",{className:"mr-2",children:"✓"}),G.jsx("span",{children:"Thank you for your feedback!"})]})}):G.jsxs("div",{className:`${t?"p-2":"p-3"} bg-gray-50 border border-gray-200 rounded`,children:[G.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Was this error message helpful?"}),G.jsxs("div",{className:"flex gap-2 mb-2",children:[G.jsx("button",{onClick:()=>i("helpful"),className:`px-2 py-1 text-xs rounded transition-colors ${r==="helpful"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"👍 Helpful"}),G.jsx("button",{onClick:()=>i("not-helpful"),className:`px-2 py-1 text-xs rounded transition-colors ${r==="not-helpful"?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"👎 Not helpful"})]}),r==="not-helpful"&&G.jsx("div",{className:"mb-2",children:G.jsx("textarea",{value:s,onChange:h=>u(h.target.value),placeholder:"What would make this error message more helpful? (optional)",className:"w-full text-xs p-2 border border-gray-300 rounded resize-none",rows:2,maxLength:200})}),G.jsxs("div",{className:"flex justify-between items-center",children:[G.jsxs("div",{className:"text-xs text-gray-500",children:["Error ID: ",n.substring(0,8),"..."]}),G.jsxs("div",{className:"flex gap-1",children:[e&&G.jsx("button",{onClick:e,className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800",children:"Skip"}),G.jsx("button",{onClick:f,disabled:!r,className:`px-2 py-1 text-xs rounded transition-colors ${r?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Submit"})]})]})]})};class sV extends it.Component{constructor(e){super(e),this.retry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:{code:"UNKNOWN_ERROR",message:e.message||"An unexpected error occurred",details:e.stack,recoverable:!0,timestamp:new Date,severity:"medium",context:"Component Error"}}}componentDidCatch(e,t){const r={code:"UNKNOWN_ERROR",message:e.message||"An unexpected error occurred",details:{error:e.stack,errorInfo:t},recoverable:!0,timestamp:new Date,severity:"medium",context:this.props.context||"Component Error"};this.setState({hasError:!0,error:r,errorInfo:t}),this.props.onError&&this.props.onError(r,t),console.error("ErrorBoundary caught an error:",{message:e.message,context:this.props.context,timestamp:new Date().toISOString()})}render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback(this.state.error,this.retry):G.jsx(aV,{error:this.state.error,retry:this.retry,context:this.props.context}):this.props.children}}const aV=({error:n,retry:e,context:t})=>{const[r,i]=_h.useState(!1),[s,u]=_h.useState("");_h.useEffect(()=>{const f=eR.logError(n);u(f)},[n]);const l=f=>{switch(f){case"critical":return"🚨";case"high":return"⚠️";case"medium":return"⚡";default:return"ℹ️"}},c=f=>{switch(f){case"critical":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-yellow-500 bg-yellow-50";default:return"border-blue-500 bg-blue-50"}};return G.jsxs("div",{className:`p-6 border-2 rounded-lg ${c(n.severity)} max-w-md mx-auto mt-8`,children:[G.jsxs("div",{className:"flex items-center mb-4",children:[G.jsx("span",{className:"text-2xl mr-3",children:l(n.severity)}),G.jsxs("div",{children:[G.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Something went wrong"}),t&&G.jsxs("p",{className:"text-sm text-gray-600",children:["in ",t]})]})]}),G.jsx("p",{className:"text-gray-700 mb-4",children:n.message}),G.jsxs("div",{className:"flex gap-3",children:[n.recoverable&&G.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Try Again"}),G.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Reload Page"})]}),G.jsx("div",{className:"mt-4",children:r?G.jsx(iV,{errorId:s,onClose:()=>i(!1)}):G.jsx("button",{onClick:()=>i(!0),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Report this error"})}),!1]})};class BV extends _h.Component{constructor(e){super(e),this.retry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:{code:"API_ERROR",message:e.message||"Service operation failed",details:e.stack,recoverable:!0,timestamp:new Date,severity:"high",context:"Service Error"}}}componentDidCatch(e,t){const r={code:"API_ERROR",message:e.message||"Service operation failed",details:{error:e.stack,errorInfo:t},recoverable:!0,timestamp:new Date,severity:"high",context:`${this.props.serviceName} Service`};this.setState({hasError:!0,error:r,errorInfo:t}),this.props.onError&&this.props.onError(r),console.error(`ServiceErrorBoundary (${this.props.serviceName}):`,{message:e.message,service:this.props.serviceName,timestamp:new Date().toISOString()})}render(){const e=this.state,t=this.props;return e.hasError&&e.error?G.jsx(oV,{error:e.error,serviceName:t.serviceName,retry:this.retry,recoveryActions:t.recoveryActions}):t.children}}const oV=({error:n,serviceName:e,retry:t,recoveryActions:r})=>{const i=s=>{switch(s.toLowerCase()){case"llm":case"ai":return"🤖";case"file":return"📁";case"export":return"📤";case"database":return"💾";default:return"⚙️"}};return G.jsxs("div",{className:"p-4 border border-red-300 bg-red-50 rounded-lg",children:[G.jsxs("div",{className:"flex items-center mb-3",children:[G.jsx("span",{className:"text-xl mr-2",children:i(e)}),G.jsxs("h4",{className:"text-lg font-medium text-red-800",children:[e," Service Error"]})]}),G.jsx("p",{className:"text-red-700 mb-4",children:n.message}),G.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.recoverable&&G.jsx("button",{onClick:t,className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Retry Operation"}),r==null?void 0:r.map((s,u)=>G.jsx("button",{onClick:s.action,className:`px-3 py-1 text-sm rounded transition-colors ${s.primary?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:s.label},u))]}),G.jsxs("div",{className:"mt-3 text-xs text-red-600",children:["Error occurred at ",n.timestamp.toLocaleTimeString()]})]})};class l3 extends it.Component{constructor(e){super(e),this.retry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:{code:"UNKNOWN_ERROR",message:e.message||"Component failed to render",details:e.stack,recoverable:!0,timestamp:new Date,severity:"low",context:"Component Error"}}}componentDidCatch(e,t){const r={code:"UNKNOWN_ERROR",message:e.message||"Component failed to render",details:{error:e.stack,errorInfo:t},recoverable:!0,timestamp:new Date,severity:"low",context:`${this.props.componentName} Component`};this.setState({hasError:!0,error:r,errorInfo:t}),this.props.onError&&this.props.onError(r),console.warn(`ComponentErrorBoundary (${this.props.componentName}):`,{message:e.message,component:this.props.componentName,timestamp:new Date().toISOString()})}render(){return this.state.hasError&&this.state.error?this.props.isolateError?G.jsx("div",{className:"p-2 bg-gray-100 border border-gray-300 rounded text-sm text-gray-600",children:"Component temporarily unavailable"}):this.props.fallbackComponent?this.props.fallbackComponent:G.jsx(lV,{error:this.state.error,componentName:this.props.componentName,retry:this.retry}):this.props.children}}const lV=({error:n,componentName:e,retry:t})=>G.jsxs("div",{className:"p-3 border border-yellow-300 bg-yellow-50 rounded",children:[G.jsxs("div",{className:"flex items-center justify-between mb-2",children:[G.jsxs("div",{className:"flex items-center",children:[G.jsx("span",{className:"text-yellow-600 mr-2",children:"⚠️"}),G.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:[e," Error"]})]}),G.jsx("button",{onClick:t,className:"text-xs px-2 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors",children:"Retry"})]}),G.jsx("p",{className:"text-xs text-yellow-700",children:n.message})]}),uV=()=>G.jsx(sV,{context:"Application Root",children:G.jsx(YI,{children:G.jsx(mP,{children:G.jsxs("div",{className:"min-h-screen bg-base-100 font-sans",children:[G.jsx(l3,{componentName:"Header",isolateError:!0,children:G.jsx(gP,{})}),G.jsx("main",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:G.jsx(l3,{componentName:"ConferencePanel",children:G.jsx(nV,{})})})]})})})}),tR=document.getElementById("root");if(!tR)throw new Error("Could not find root element to mount to");const cV=b8.createRoot(tR);cV.render(G.jsx(_h.StrictMode,{children:G.jsx(uV,{})}));export{qn as _,hg as a,dV as c,u3 as g};
